(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var cr,ie,na,on,Fi,ra,sa,ia,ui,As,Ds,oa,rr={},aa=[],jc=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,lr=Array.isArray;function Nt(n,e){for(var t in e)n[t]=e[t];return n}function di(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function Ge(n,e,t){var s,i,o,a={};for(o in e)o=="key"?s=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?cr.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)a[o]===void 0&&(a[o]=n.defaultProps[o]);return Zn(n,a,s,i,null)}function Zn(n,e,t,s,i){var o={type:n,props:e,key:t,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++na,__i:-1,__u:0};return i==null&&ie.vnode!=null&&ie.vnode(o),o}function $c(){return{current:null}}function z(n){return n.children}function Ct(n,e){this.props=n,this.context=e}function xn(n,e){if(e==null)return n.__?xn(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?xn(n):null}function ca(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return ca(n)}}function Ps(n){(!n.__d&&(n.__d=!0)&&on.push(n)&&!Ur.__r++||Fi!=ie.debounceRendering)&&((Fi=ie.debounceRendering)||ra)(Ur)}function Ur(){for(var n,e,t,s,i,o,a,c=1;on.length;)on.length>c&&on.sort(sa),n=on.shift(),c=on.length,n.__d&&(t=void 0,i=(s=(e=n).__v).__e,o=[],a=[],e.__P&&((t=Nt({},s)).__v=s.__v+1,ie.vnode&&ie.vnode(t),hi(e.__P,t,s,e.__n,e.__P.namespaceURI,32&s.__u?[i]:null,o,i??xn(s),!!(32&s.__u),a),t.__v=s.__v,t.__.__k[t.__i]=t,da(o,t,a),t.__e!=i&&ca(t)));Ur.__r=0}function la(n,e,t,s,i,o,a,c,u,l,d){var h,f,p,m,g,y,_,w=s&&s.__k||aa,O=e.length;for(u=Uc(t,e,w,u,O),h=0;h<O;h++)(p=t.__k[h])!=null&&(f=p.__i==-1?rr:w[p.__i]||rr,p.__i=h,y=hi(n,p,f,i,o,a,c,u,l,d),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&fi(f.ref,null,p),d.push(p.ref,p.__c||m,p)),g==null&&m!=null&&(g=m),(_=!!(4&p.__u))||f.__k===p.__k?u=ua(p,u,n,_):typeof p.type=="function"&&y!==void 0?u=y:m&&(u=m.nextSibling),p.__u&=-7);return t.__e=g,u}function Uc(n,e,t,s,i){var o,a,c,u,l,d=t.length,h=d,f=0;for(n.__k=new Array(i),o=0;o<i;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(u=o+f,(a=n.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Zn(null,a,null,null,null):lr(a)?Zn(z,{children:a},null,null,null):a.constructor==null&&a.__b>0?Zn(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=n,a.__b=n.__b+1,c=null,(l=a.__i=zc(a,t,u,h))!=-1&&(h--,(c=t[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(i>d?f--:i<d&&f++),typeof a.type!="function"&&(a.__u|=4)):l!=u&&(l==u-1?f--:l==u+1?f++:(l>u?f--:f++,a.__u|=4))):n.__k[o]=null;if(h)for(o=0;o<d;o++)(c=t[o])!=null&&(2&c.__u)==0&&(c.__e==s&&(s=xn(c)),fa(c,c));return s}function ua(n,e,t,s){var i,o;if(typeof n.type=="function"){for(i=n.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=n,e=ua(i[o],e,t,s));return e}n.__e!=e&&(s&&(e&&n.type&&!e.parentNode&&(e=xn(n)),t.insertBefore(n.__e,e||null)),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function St(n,e){return e=e||[],n==null||typeof n=="boolean"||(lr(n)?n.some(function(t){St(t,e)}):e.push(n)),e}function zc(n,e,t,s){var i,o,a,c=n.key,u=n.type,l=e[t],d=l!=null&&(2&l.__u)==0;if(l===null&&n.key==null||d&&c==l.key&&u==l.type)return t;if(s>(d?1:0)){for(i=t-1,o=t+1;i>=0||o<e.length;)if((l=e[a=i>=0?i--:o++])!=null&&(2&l.__u)==0&&c==l.key&&u==l.type)return a}return-1}function ji(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||jc.test(e)?t:t+"px"}function yr(n,e,t,s,i){var o,a;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(e in s)t&&e in t||ji(n.style,e,"");if(t)for(e in t)s&&t[e]==s[e]||ji(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(ia,"$1")),a=e.toLowerCase(),e=a in n||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?s?t.u=s.u:(t.u=ui,n.addEventListener(e,o?Ds:As,o)):n.removeEventListener(e,o?Ds:As,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function $i(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=ui++;else if(e.t<t.u)return;return t(ie.event?ie.event(e):e)}}}function hi(n,e,t,s,i,o,a,c,u,l){var d,h,f,p,m,g,y,_,w,O,x,A,U,B,$,P,T,j=e.type;if(e.constructor!=null)return null;128&t.__u&&(u=!!(32&t.__u),o=[c=e.__e=t.__e]),(d=ie.__b)&&d(e);e:if(typeof j=="function")try{if(_=e.props,w="prototype"in j&&j.prototype.render,O=(d=j.contextType)&&s[d.__c],x=d?O?O.props.value:d.__:s,t.__c?y=(h=e.__c=t.__c).__=h.__E:(w?e.__c=h=new j(_,x):(e.__c=h=new Ct(_,x),h.constructor=j,h.render=qc),O&&O.sub(h),h.props=_,h.state||(h.state={}),h.context=x,h.__n=s,f=h.__d=!0,h.__h=[],h._sb=[]),w&&h.__s==null&&(h.__s=h.state),w&&j.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Nt({},h.__s)),Nt(h.__s,j.getDerivedStateFromProps(_,h.__s))),p=h.props,m=h.state,h.__v=e,f)w&&j.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),w&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(w&&j.getDerivedStateFromProps==null&&_!==p&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(_,x),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(_,h.__s,x)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(h.props=_,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(H){H&&(H.__=e)}),A=0;A<h._sb.length;A++)h.__h.push(h._sb[A]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(_,h.__s,x),w&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(p,m,g)})}if(h.context=x,h.props=_,h.__P=n,h.__e=!1,U=ie.__r,B=0,w){for(h.state=h.__s,h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),$=0;$<h._sb.length;$++)h.__h.push(h._sb[$]);h._sb=[]}else do h.__d=!1,U&&U(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++B<25);h.state=h.__s,h.getChildContext!=null&&(s=Nt(Nt({},s),h.getChildContext())),w&&!f&&h.getSnapshotBeforeUpdate!=null&&(g=h.getSnapshotBeforeUpdate(p,m)),P=d,d!=null&&d.type===z&&d.key==null&&(P=ha(d.props.children)),c=la(n,lr(P)?P:[P],e,t,s,i,o,a,c,u,l),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),y&&(h.__E=h.__=null)}catch(H){if(e.__v=null,u||o!=null)if(H.then){for(e.__u|=u?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,e.__e=c}else{for(T=o.length;T--;)di(o[T]);Ls(e)}else e.__e=t.__e,e.__k=t.__k,H.then||Ls(e);ie.__e(H,e,t)}else o==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):c=e.__e=Hc(t.__e,e,t,s,i,o,a,u,l);return(d=ie.diffed)&&d(e),128&e.__u?void 0:c}function Ls(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(Ls)}function da(n,e,t){for(var s=0;s<t.length;s++)fi(t[s],t[++s],t[++s]);ie.__c&&ie.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(o){o.call(i)})}catch(o){ie.__e(o,i.__v)}})}function ha(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:lr(n)?n.map(ha):Nt({},n)}function Hc(n,e,t,s,i,o,a,c,u){var l,d,h,f,p,m,g,y=t.props,_=e.props,w=e.type;if(w=="svg"?i="http://www.w3.org/2000/svg":w=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((p=o[l])&&"setAttribute"in p==!!w&&(w?p.localName==w:p.nodeType==3)){n=p,o[l]=null;break}}if(n==null){if(w==null)return document.createTextNode(_);n=document.createElementNS(i,w,_.is&&_),c&&(ie.__m&&ie.__m(e,o),c=!1),o=null}if(w==null)y===_||c&&n.data==_||(n.data=_);else{if(o=o&&cr.call(n.childNodes),y=t.props||rr,!c&&o!=null)for(y={},l=0;l<n.attributes.length;l++)y[(p=n.attributes[l]).name]=p.value;for(l in y)if(p=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")h=p;else if(!(l in _)){if(l=="value"&&"defaultValue"in _||l=="checked"&&"defaultChecked"in _)continue;yr(n,l,null,p,i)}}for(l in _)p=_[l],l=="children"?f=p:l=="dangerouslySetInnerHTML"?d=p:l=="value"?m=p:l=="checked"?g=p:c&&typeof p!="function"||y[l]===p||yr(n,l,p,y[l],i);if(d)c||h&&(d.__html==h.__html||d.__html==n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(h&&(n.innerHTML=""),la(e.type=="template"?n.content:n,lr(f)?f:[f],e,t,s,w=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:t.__k&&xn(t,0),c,u),o!=null)for(l=o.length;l--;)di(o[l]);c||(l="value",w=="progress"&&m==null?n.removeAttribute("value"):m!=null&&(m!==n[l]||w=="progress"&&!m||w=="option"&&m!=y[l])&&yr(n,l,m,y[l],i),l="checked",g!=null&&g!=n[l]&&yr(n,l,g,y[l],i))}return n}function fi(n,e,t){try{if(typeof n=="function"){var s=typeof n.__u=="function";s&&n.__u(),s&&e==null||(n.__u=n(e))}else n.current=e}catch(i){ie.__e(i,t)}}function fa(n,e,t){var s,i;if(ie.unmount&&ie.unmount(n),(s=n.ref)&&(s.current&&s.current!=n.__e||fi(s,null,e)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(o){ie.__e(o,e)}s.base=s.__P=null}if(s=n.__k)for(i=0;i<s.length;i++)s[i]&&fa(s[i],e,t||typeof n.type!="function");t||di(n.__e),n.__c=n.__=n.__e=void 0}function qc(n,e,t){return this.constructor(n,t)}function Cn(n,e,t){var s,i,o,a;e==document&&(e=document.documentElement),ie.__&&ie.__(n,e),i=(s=typeof t=="function")?null:t&&t.__k||e.__k,o=[],a=[],hi(e,n=(!s&&t||e).__k=Ge(z,null,[n]),i||rr,rr,e.namespaceURI,!s&&t?[t]:i?null:e.firstChild?cr.call(e.childNodes):null,o,!s&&t?t:i?i.__e:e.firstChild,s,a),da(o,n,a)}function pa(n,e){Cn(n,e,pa)}function Is(n,e,t){var s,i,o,a,c=Nt({},n.props);for(o in n.type&&n.type.defaultProps&&(a=n.type.defaultProps),e)o=="key"?s=e[o]:o=="ref"?i=e[o]:c[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(c.children=arguments.length>3?cr.call(arguments,2):t),Zn(n.type,c,s||n.key,i||n.ref,null)}function pn(n){function e(t){var s,i;return this.getChildContext||(s=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&s.forEach(function(a){a.__e=!0,Ps(a)})},this.sub=function(o){s.add(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){s&&s.delete(o),a&&a.call(o)}}),t.children}return e.__c="__cC"+oa++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,s){return t.children(s)}).contextType=e,e}cr=aa.slice,ie={__e:function(n,e,t,s){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(n)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,s||{}),a=i.__d),a)return i.__E=i}catch(c){n=c}throw n}},na=0,Ct.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Nt({},this.state),typeof n=="function"&&(n=n(Nt({},t),this.props)),n&&Nt(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),Ps(this))},Ct.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),Ps(this))},Ct.prototype.render=z,on=[],ra=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,sa=function(n,e){return n.__v.__b-e.__v.__b},Ur.__r=0,ia=/(PointerCapture)$|Capture$/i,ui=0,As=$i(!1),Ds=$i(!0),oa=0;var Wc=0;function r(n,e,t,s,i,o){e||(e={});var a,c,u=e;if("ref"in u)for(c in u={},e)c=="ref"?a=e[c]:u[c]=e[c];var l={type:n,props:u,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Wc,__i:-1,__u:0,__source:i,__self:o};if(typeof n=="function"&&(a=n.defaultProps))for(c in a)u[c]===void 0&&(u[c]=a[c]);return ie.vnode&&ie.vnode(l),l}var Gt,Ne,ts,Ui,Sn=0,ma=[],xe=ie,zi=xe.__b,Hi=xe.__r,qi=xe.diffed,Wi=xe.__c,Vi=xe.unmount,Gi=xe.__;function Tn(n,e){xe.__h&&xe.__h(Ne,n,Sn||e),Sn=0;var t=Ne.__H||(Ne.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function b(n){return Sn=1,ur(ba,n)}function ur(n,e,t){var s=Tn(Gt++,2);if(s.t=n,!s.__c&&(s.__=[t?t(e):ba(void 0,e),function(c){var u=s.__N?s.__N[0]:s.__[0],l=s.t(u,c);u!==l&&(s.__N=[l,s.__[1]],s.__c.setState({}))}],s.__c=Ne,!Ne.__f)){var i=function(c,u,l){if(!s.__c.__H)return!0;var d=s.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!o||o.call(this,c,u,l);var h=s.__c.props!==c;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(h=!0)}}),o&&o.call(this,c,u,l)||h};Ne.__f=!0;var o=Ne.shouldComponentUpdate,a=Ne.componentWillUpdate;Ne.componentWillUpdate=function(c,u,l){if(this.__e){var d=o;o=void 0,i(c,u,l),o=d}a&&a.call(this,c,u,l)},Ne.shouldComponentUpdate=i}return s.__N||s.__}function J(n,e){var t=Tn(Gt++,3);!xe.__s&&mi(t.__H,e)&&(t.__=n,t.u=e,Ne.__H.__h.push(t))}function Yt(n,e){var t=Tn(Gt++,4);!xe.__s&&mi(t.__H,e)&&(t.__=n,t.u=e,Ne.__h.push(t))}function Oe(n){return Sn=5,Ce(function(){return{current:n}},[])}function pi(n,e,t){Sn=6,Yt(function(){if(typeof n=="function"){var s=n(e());return function(){n(null),s&&typeof s=="function"&&s()}}if(n)return n.current=e(),function(){return n.current=null}},t==null?t:t.concat(n))}function Ce(n,e){var t=Tn(Gt++,7);return mi(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function kn(n,e){return Sn=8,Ce(function(){return n},e)}function Qt(n){var e=Ne.context[n.__c],t=Tn(Gt++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(Ne)),e.props.value):n.__}function ga(n,e){xe.useDebugValue&&xe.useDebugValue(e?e(n):n)}function va(){var n=Tn(Gt++,11);if(!n.__){for(var e=Ne.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);n.__="P"+t[0]+"-"+t[1]++}return n.__}function Vc(){for(var n;n=ma.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Dr),n.__H.__h.forEach(Ms),n.__H.__h=[]}catch(e){n.__H.__h=[],xe.__e(e,n.__v)}}xe.__b=function(n){Ne=null,zi&&zi(n)},xe.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Gi&&Gi(n,e)},xe.__r=function(n){Hi&&Hi(n),Gt=0;var e=(Ne=n.__c).__H;e&&(ts===Ne?(e.__h=[],Ne.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Dr),e.__h.forEach(Ms),e.__h=[],Gt=0)),ts=Ne},xe.diffed=function(n){qi&&qi(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(ma.push(e)!==1&&Ui===xe.requestAnimationFrame||((Ui=xe.requestAnimationFrame)||Gc)(Vc)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),ts=Ne=null},xe.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Dr),t.__h=t.__h.filter(function(s){return!s.__||Ms(s)})}catch(s){e.some(function(i){i.__h&&(i.__h=[])}),e=[],xe.__e(s,t.__v)}}),Wi&&Wi(n,e)},xe.unmount=function(n){Vi&&Vi(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(s){try{Dr(s)}catch(i){e=i}}),t.__H=void 0,e&&xe.__e(e,t.__v))};var Ki=typeof requestAnimationFrame=="function";function Gc(n){var e,t=function(){clearTimeout(s),Ki&&cancelAnimationFrame(e),setTimeout(n)},s=setTimeout(t,35);Ki&&(e=requestAnimationFrame(t))}function Dr(n){var e=Ne,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),Ne=e}function Ms(n){var e=Ne;n.__c=n.__(),Ne=e}function mi(n,e){return!n||n.length!==e.length||e.some(function(t,s){return t!==n[s]})}function ba(n,e){return typeof e=="function"?e(n):e}let Nn,Yn;function Kc(n){return!Yn||(typeof Yn=="string"?n.startsWith(Yn):Yn.test(n))}function Yc(n,e){let t="";if(Nn=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return n;const s=e.composedPath().find(o=>o.nodeName=="A"&&o.href),i=s&&s.getAttribute("href");if(!s||s.origin!=location.origin||/^#/.test(i)||!/^(_?self)?$/i.test(s.target)||!Kc(i))return n;Nn=!0,e.preventDefault(),t=s.href.replace(location.origin,"")}else e&&e.url?(Nn=!e.replace,t=e.url):t=location.pathname+location.search;return Nn===!0?history.pushState(null,"",t):Nn===!1&&history.replaceState(null,"",t),t}const Qc=(n,e,t={})=>{n=n.split("/").filter(Boolean),e=(e||"").split("/").filter(Boolean),t.params||(t.params={});for(let s=0,i,o;s<Math.max(n.length,e.length);s++){let[,a,c,u]=(e[s]||"").match(/^(:?)(.*?)([+*?]?)$/);if(i=n[s],!(!a&&c==i)){if(!a&&i&&u=="*"){t.rest="/"+n.slice(s).map(decodeURIComponent).join("/");break}if(!a||!i&&u!="?"&&u!="*")return;if(o=u=="+"||u=="*",o?i=n.slice(s).map(decodeURIComponent).join("/")||void 0:i&&(i=decodeURIComponent(i)),t.params[c]=i,c in t||(t[c]=i),o)break}}return t};function dr(n){const[e,t]=ur(Yc,n.url||location.pathname+location.search);n.scope&&(Yn=n.scope);const s=Nn===!0,i=Ce(()=>{const o=new URL(e,location.origin),a=o.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:a,query:Object.fromEntries(o.searchParams),route:(c,u)=>t({url:c,replace:u}),wasPush:s}},[e]);return Yt(()=>(addEventListener("click",t),addEventListener("popstate",t),()=>{removeEventListener("click",t),removeEventListener("popstate",t)}),[]),Ge(dr.ctx.Provider,{value:i},n.children)}const Xc=Promise.resolve();function ya(n){const[e,t]=ur(P=>P+1,0),{url:s,query:i,wasPush:o,path:a}=mn();if(!s)throw new Error("preact-iso's <Router> must be used within a <LocationProvider>, see: https://github.com/preactjs/preact-iso#locationprovider");const{rest:c=a,params:u={}}=Qt(Yi),l=Oe(!1),d=Oe(a),h=Oe(0),f=Oe(),p=Oe(),m=Oe(),g=Oe(!1),y=Oe();y.current=!1;let _,w,O;St(n.children).some(P=>{if(Qc(c,P.props.path,O={...P.props,path:c,query:i,params:u,rest:""}))return _=Is(P,O);P.props.default&&(w=Is(P,O))});let x=_||w;const A=f.current&&f.current.__u&_r&&f.current.__u&wr,U=f.current&&f.current.__h,B=Ce(()=>{p.current=f.current,f.current=Ge(Yi.Provider,{value:O},x);const P=p.current&&p.current.props.children;return!P||!x||x.type!==P.type||x.props.component!==P.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),h.current++,!0):!1},[s,JSON.stringify(O)]);A?(f.current.__u|=_r,f.current.__u|=wr):U&&(f.current.__h=!0);const $=p.current;return p.current=null,this.__c=(P,T)=>{y.current=!0,p.current=$,n.onLoadStart&&n.onLoadStart(s),l.current=!0;let j=h.current;P.then(()=>{j===h.current&&(p.current=null,f.current&&(T.__h&&(f.current.__h=T.__h),T.__u&wr&&(f.current.__u|=wr),T.__u&_r&&(f.current.__u|=_r)),Xc.then(t))})},Yt(()=>{const P=this.__v&&this.__v.__e;if(y.current){!g.current&&!m.current&&(m.current=P);return}!g.current&&m.current&&(m.current!==P&&m.current.remove(),m.current=null),g.current=!0,d.current!==a&&(o&&scrollTo(0,0),n.onRouteChange&&n.onRouteChange(s),d.current=a),n.onLoadEnd&&l.current&&n.onLoadEnd(s),l.current=!1},[a,o,e]),B?[Ge(ns,{r:f}),Ge(ns,{r:p})]:Ge(ns,{r:f})}const _r=32,wr=128,ns=({r:n})=>n.current;ya.Provider=dr;dr.ctx=pn({});const Yi=pn({}),_e=n=>Ge(n.component,n),mn=()=>Qt(dr.ctx),Qi=ie.__b;ie.__b=n=>{n.type&&n.type._forwarded&&n.ref&&(n.props.ref=n.ref,n.ref=null),Qi&&Qi(n)};const Xi=ie.__e;ie.__e=(n,e,t)=>{if(n&&n.then){let s=e;for(;s=s.__;)if(s.__c&&s.__c.__c)return e.__e==null&&(e.__c.__z=[t.__e],e.__e=t.__e,e.__k=t.__k),e.__k||(e.__k=[]),s.__c.__c(n,e)}Xi&&Xi(n,e,t)};const _a="/assets/logo-gUhwRCmO.png";function Jc(){return r("footer",{className:"footer sm:footer-horizontal bg-neutral text-neutral-content items-center p-4",children:[r("aside",{className:"grid-flow-col items-center",children:[r("img",{src:_a,alt:"My Logo",class:"w-8 h-8"}),r("p",{children:["Copyright © ",new Date().getFullYear()," - All right reserved"]})]}),r("nav",{className:"grid-flow-col gap-4 md:place-self-center md:justify-self-end",children:[r("a",{children:r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:r("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),r("a",{children:r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:r("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),r("a",{children:r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:r("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})]})]})}function rs(n,e){if(!e.trim())return n;const s=e.toLowerCase().split(/\s+/).filter(o=>o.length>0).map(o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));let i=n;for(const o of s){const a=new RegExp(`(${o})`,"gi");i=i.replace(a,'<mark class="bg-info">$1</mark>')}return i}class Zc{constructor(e={}){this.baseUrl="",this.securityData=null,this.abortControllers=new Map,this.customFetch=(...t)=>fetch(...t),this.baseApiParams={credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"},this.setSecurityData=t=>{this.securityData=t},this.contentFormatters={"application/json":t=>t!==null&&(typeof t=="object"||typeof t=="string")?JSON.stringify(t):t,"application/vnd.api+json":t=>t!==null&&(typeof t=="object"||typeof t=="string")?JSON.stringify(t):t,"text/plain":t=>t!==null&&typeof t!="string"?JSON.stringify(t):t,"multipart/form-data":t=>t instanceof FormData?t:Object.keys(t||{}).reduce((s,i)=>{const o=t[i];return s.append(i,o instanceof Blob?o:typeof o=="object"&&o!==null?JSON.stringify(o):`${o}`),s},new FormData),"application/x-www-form-urlencoded":t=>this.toQueryString(t)},this.createAbortSignal=t=>{if(this.abortControllers.has(t)){const i=this.abortControllers.get(t);return i?i.signal:void 0}const s=new AbortController;return this.abortControllers.set(t,s),s.signal},this.abortRequest=t=>{const s=this.abortControllers.get(t);s&&(s.abort(),this.abortControllers.delete(t))},this.request=async({body:t,secure:s,path:i,type:o,query:a,format:c,baseUrl:u,cancelToken:l,...d})=>{const h=(typeof s=="boolean"?s:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},f=this.mergeRequestParams(d,h),p=a&&this.toQueryString(a),m=this.contentFormatters[o||"application/json"],g=c||f.format;return this.customFetch(`${u||this.baseUrl||""}${i}${p?`?${p}`:""}`,{...f,headers:{...f.headers||{},...o&&o!=="multipart/form-data"?{"Content-Type":o}:{}},signal:(l?this.createAbortSignal(l):f.signal)||null,body:typeof t>"u"||t===null?null:m(t)}).then(async y=>{const _=y.clone();_.data=null,_.error=null;const w=g?await y[g]().then(O=>(_.ok?_.data=O:_.error=O,_)).catch(O=>(_.error=O,_)):_;if(l&&this.abortControllers.delete(l),!y.ok)throw w;return w})},Object.assign(this,e)}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof t=="number"?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map(i=>this.encodeQueryParam(t,i)).join("&")}toQueryString(e){const t=e||{};return Object.keys(t).filter(i=>typeof t[i]<"u").map(i=>Array.isArray(t[i])?this.addArrayQueryParam(t,i):this.addQueryParam(t,i)).join("&")}addQueryParams(e){const t=this.toQueryString(e);return t?`?${t}`:""}mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}}class el extends Zc{constructor(){super(...arguments),this.getIndex=(e={})=>this.request({path:"/",method:"GET",...e}),this.avatar={getAvatar:(e,t={})=>this.request({path:"/avatar/",method:"GET",query:e,...t})},this.blog={getBlog:(e={})=>this.request({path:"/blog/",method:"GET",format:"json",...e}),getBlogById:(e,t={})=>this.request({path:`/blog/${e}`,method:"GET",format:"json",...t}),postBlogByIdComment:(e,t,s={})=>this.request({path:`/blog/${e}/comment`,method:"POST",body:t,secure:!0,type:"application/json",format:"json",...s}),getBlogByIdReaction:(e,t={})=>this.request({path:`/blog/${e}/reaction`,method:"GET",secure:!0,format:"json",...t}),patchBlogByIdReaction:(e,t,s={})=>this.request({path:`/blog/${e}/reaction`,method:"PATCH",body:t,secure:!0,type:"application/json",format:"json",...s}),getBlogAdminCommentsPending:(e={})=>this.request({path:"/blog/admin/comments/pending",method:"GET",secure:!0,format:"json",...e}),patchBlogAdminCommentsByCommentIdModerate:(e,t,s={})=>this.request({path:`/blog/admin/comments/${e}/moderate`,method:"PATCH",body:t,secure:!0,type:"application/json",format:"json",...s})},this.images={postImagesUpload:(e,t={})=>this.request({path:"/images/upload",method:"POST",body:e,secure:!0,type:"multipart/form-data",format:"json",...t}),getImages:(e={})=>this.request({path:"/images/",method:"GET",secure:!0,format:"json",...e}),getImagesByImageId:(e,t={})=>this.request({path:`/images/${e}`,method:"GET",secure:!0,format:"json",...t}),deleteImagesByImageId:(e,t={})=>this.request({path:`/images/${e}`,method:"DELETE",secure:!0,format:"json",...t})},this.profile={getProfileByUserId:(e,t={})=>this.request({path:`/profile/${e}`,method:"GET",format:"json",...t}),postProfileLogArithmetic:(e,t={})=>this.request({path:"/profile/log-arithmetic",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t})},this.admin={getAdminProfileUnverified:(e={})=>this.request({path:"/admin/profile/unverified",method:"GET",secure:!0,format:"json",...e}),postAdminProfileByUserIdVerify:(e,t={})=>this.request({path:`/admin/profile/${e}/verify`,method:"POST",secure:!0,format:"json",...t})},this.leaderboards={getLeaderboards:(e,t={})=>this.request({path:"/leaderboards/",method:"GET",query:e,format:"json",...t})},this.connections={getConnections:(e={})=>this.request({path:"/connections/",method:"GET",secure:!0,format:"json",...e}),postConnectionsSendEvent:(e,t={})=>this.request({path:"/connections/send-event",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),postConnectionsDisconnect:(e,t={})=>this.request({path:"/connections/disconnect",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t})},this.notifications={getNotificationsSubscriptions:(e={})=>this.request({path:"/notifications/subscriptions",method:"GET",secure:!0,format:"json",...e}),postNotificationsSubscribe:(e,t={})=>this.request({path:"/notifications/subscribe",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),postNotificationsUnsubscribe:(e,t={})=>this.request({path:"/notifications/unsubscribe",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),postNotificationsRegisterPush:(e,t={})=>this.request({path:"/notifications/register-push",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t})},this.me={getMe:(e={})=>this.request({path:"/me",method:"GET",...e})},this.auth={socialSignIn:(e,t={})=>this.request({path:"/auth/api/sign-in/social",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiGetSessionList:(e={})=>this.request({path:"/auth/api/get-session",method:"GET",secure:!0,format:"json",...e}),apiSignOutCreate:(e,t={})=>this.request({path:"/auth/api/sign-out",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiSignUpEmailCreate:(e,t={})=>this.request({path:"/auth/api/sign-up/email",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiSignInEmailCreate:(e,t={})=>this.request({path:"/auth/api/sign-in/email",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiForgetPasswordCreate:(e,t={})=>this.request({path:"/auth/api/forget-password",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiResetPasswordCreate:(e,t={})=>this.request({path:"/auth/api/reset-password",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiVerifyEmailList:(e,t={})=>this.request({path:"/auth/api/verify-email",method:"GET",query:e,secure:!0,format:"json",...t}),apiSendVerificationEmailCreate:(e,t={})=>this.request({path:"/auth/api/send-verification-email",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiChangeEmailCreate:(e,t={})=>this.request({path:"/auth/api/change-email",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiChangePasswordCreate:(e,t={})=>this.request({path:"/auth/api/change-password",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiUpdateUserCreate:(e,t={})=>this.request({path:"/auth/api/update-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiDeleteUserCreate:(e,t={})=>this.request({path:"/auth/api/delete-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiResetPasswordDetail:(e,t,s={})=>this.request({path:`/auth/api/reset-password/${e}`,method:"GET",query:t,secure:!0,format:"json",...s}),apiRequestPasswordResetCreate:(e,t={})=>this.request({path:"/auth/api/request-password-reset",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiListSessionsList:(e={})=>this.request({path:"/auth/api/list-sessions",method:"GET",secure:!0,format:"json",...e}),apiRevokeSessionCreate:(e,t={})=>this.request({path:"/auth/api/revoke-session",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiRevokeSessionsCreate:(e,t={})=>this.request({path:"/auth/api/revoke-sessions",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiRevokeOtherSessionsCreate:(e,t={})=>this.request({path:"/auth/api/revoke-other-sessions",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiLinkSocialCreate:(e,t={})=>this.request({path:"/auth/api/link-social",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiListAccountsList:(e={})=>this.request({path:"/auth/api/list-accounts",method:"GET",secure:!0,format:"json",...e}),apiDeleteUserCallbackList:(e,t={})=>this.request({path:"/auth/api/delete-user/callback",method:"GET",query:e,secure:!0,format:"json",...t}),apiUnlinkAccountCreate:(e,t={})=>this.request({path:"/auth/api/unlink-account",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiRefreshTokenCreate:(e,t={})=>this.request({path:"/auth/api/refresh-token",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiGetAccessTokenCreate:(e,t={})=>this.request({path:"/auth/api/get-access-token",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiAccountInfoCreate:(e,t={})=>this.request({path:"/auth/api/account-info",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiOkList:(e={})=>this.request({path:"/auth/api/ok",method:"GET",secure:!0,format:"json",...e}),apiErrorList:(e={})=>this.request({path:"/auth/api/error",method:"GET",secure:!0,...e}),setRole:(e,t={})=>this.request({path:"/auth/api/admin/set-role",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),getUser:(e,t={})=>this.request({path:"/auth/api/admin/get-user",method:"GET",query:e,secure:!0,format:"json",...t}),createUser:(e,t={})=>this.request({path:"/auth/api/admin/create-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),updateUser:(e,t={})=>this.request({path:"/auth/api/admin/update-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),listUsers:(e,t={})=>this.request({path:"/auth/api/admin/list-users",method:"GET",query:e,secure:!0,format:"json",...t}),listUserSessions:(e,t={})=>this.request({path:"/auth/api/admin/list-user-sessions",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),unbanUser:(e,t={})=>this.request({path:"/auth/api/admin/unban-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),banUser:(e,t={})=>this.request({path:"/auth/api/admin/ban-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),impersonateUser:(e,t={})=>this.request({path:"/auth/api/admin/impersonate-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiAdminStopImpersonatingCreate:(e={})=>this.request({path:"/auth/api/admin/stop-impersonating",method:"POST",secure:!0,...e}),revokeUserSession:(e,t={})=>this.request({path:"/auth/api/admin/revoke-user-session",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),revokeUserSessions:(e,t={})=>this.request({path:"/auth/api/admin/revoke-user-sessions",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),removeUser:(e,t={})=>this.request({path:"/auth/api/admin/remove-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),setUserPassword:(e,t={})=>this.request({path:"/auth/api/admin/set-user-password",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t}),apiAdminHasPermissionCreate:(e,t={})=>this.request({path:"/auth/api/admin/has-permission",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t})}}}const W=new el({baseUrl:"http://my-website.space/backend",securityWorker:()=>({credentials:"include"})});function wa(n,e){for(var t in e)n[t]=e[t];return n}function Rs(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var s in e)if(s!=="__source"&&n[s]!==e[s])return!0;return!1}function Na(n,e){var t=e(),s=b({t:{__:t,u:e}}),i=s[0].t,o=s[1];return Yt(function(){i.__=t,i.u=e,ss(i)&&o({t:i})},[n,t,e]),J(function(){return ss(i)&&o({t:i}),n(function(){ss(i)&&o({t:i})})},[n]),t}function ss(n){var e,t,s=n.u,i=n.__;try{var o=s();return!((e=i)===(t=o)&&(e!==0||1/e==1/t)||e!=e&&t!=t)}catch{return!0}}function xa(n){n()}function Ca(n){return n}function Sa(){return[!1,xa]}var Ea=Yt;function Bs(n,e){this.props=n,this.context=e}function Ta(n,e){function t(i){var o=this.props.ref,a=o==i.ref;return!a&&o&&(o.call?o(null):o.current=null),e?!e(this.props,i)||!a:Rs(this.props,i)}function s(i){return this.shouldComponentUpdate=t,Ge(n,i)}return s.displayName="Memo("+(n.displayName||n.name)+")",s.prototype.isReactComponent=!0,s.__f=!0,s.type=n,s}(Bs.prototype=new Ct).isPureReactComponent=!0,Bs.prototype.shouldComponentUpdate=function(n,e){return Rs(this.props,n)||Rs(this.state,e)};var Ji=ie.__b;ie.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),Ji&&Ji(n)};var tl=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function gi(n){function e(t){var s=wa({},t);return delete s.ref,n(s,t.ref||null)}return e.$$typeof=tl,e.render=n,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}var Zi=function(n,e){return n==null?null:St(St(n).map(e))},nl={map:Zi,forEach:Zi,count:function(n){return n?St(n).length:0},only:function(n){var e=St(n);if(e.length!==1)throw"Children.only";return e[0]},toArray:St},rl=ie.__e;ie.__e=function(n,e,t,s){if(n.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}rl(n,e,t,s)};var eo=ie.unmount;function ka(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),n.__c.__H=null),(n=wa({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(s){return ka(s,e,t)})),n}function Oa(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(s){return Oa(s,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function Pr(){this.__u=0,this.o=null,this.__b=null}function Aa(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function sl(n){var e,t,s;function i(o){if(e||(e=n()).then(function(a){t=a.default||a},function(a){s=a}),s)throw s;if(!t)throw e;return Ge(t,o)}return i.displayName="Lazy",i.__f=!0,i}function Qn(){this.i=null,this.l=null}ie.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),eo&&eo(n)},(Pr.prototype=new Ct).__c=function(n,e){var t=e.__c,s=this;s.o==null&&(s.o=[]),s.o.push(t);var i=Aa(s.__v),o=!1,a=function(){o||(o=!0,t.__R=null,i?i(c):c())};t.__R=a;var c=function(){if(!--s.__u){if(s.state.__a){var u=s.state.__a;s.__v.__k[0]=Oa(u,u.__c.__P,u.__c.__O)}var l;for(s.setState({__a:s.__b=null});l=s.o.pop();)l.forceUpdate()}};s.__u++||32&e.__u||s.setState({__a:s.__b=s.__v.__k[0]}),n.then(a,a)},Pr.prototype.componentWillUnmount=function(){this.o=[]},Pr.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=ka(this.__b,t,s.__O=s.__P)}this.__b=null}var i=e.__a&&Ge(z,null,n.fallback);return i&&(i.__u&=-33),[Ge(z,null,e.__a?null:n.children),i]};var to=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};function il(n){return this.getChildContext=function(){return n.context},n.children}function ol(n){var e=this,t=n.h;if(e.componentWillUnmount=function(){Cn(null,e.v),e.v=null,e.h=null},e.h&&e.h!==t&&e.componentWillUnmount(),!e.v){for(var s=e.__v;s!==null&&!s.__m&&s.__!==null;)s=s.__;e.h=t,e.v={nodeType:1,parentNode:t,childNodes:[],__k:{__m:s.__m},contains:function(){return!0},insertBefore:function(i,o){this.childNodes.push(i),e.h.insertBefore(i,o)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}}Cn(Ge(il,{context:e.context},n.__v),e.v)}function al(n,e){var t=Ge(ol,{__v:n,h:e});return t.containerInfo=e,t}(Qn.prototype=new Ct).__a=function(n){var e=this,t=Aa(e.__v),s=e.l.get(n);return s[0]++,function(i){var o=function(){e.props.revealOrder?(s.push(i),to(e,n,s)):i()};t?t(o):o()}},Qn.prototype.render=function(n){this.i=null,this.l=new Map;var e=St(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},Qn.prototype.componentDidUpdate=Qn.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){to(n,t,e)})};var Da=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,cl=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ll=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,ul=/[A-Z0-9]/g,dl=typeof document<"u",hl=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function fl(n,e,t){return e.__k==null&&(e.textContent=""),Cn(n,e),typeof t=="function"&&t(),n?n.__c:null}function pl(n,e,t){return pa(n,e),typeof t=="function"&&t(),n?n.__c:null}Ct.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Ct.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var no=ie.event;function ml(){}function gl(){return this.cancelBubble}function vl(){return this.defaultPrevented}ie.event=function(n){return no&&(n=no(n)),n.persist=ml,n.isPropagationStopped=gl,n.isDefaultPrevented=vl,n.nativeEvent=n};var vi,bl={enumerable:!1,configurable:!0,get:function(){return this.class}},ro=ie.vnode;ie.vnode=function(n){typeof n.type=="string"&&(function(e){var t=e.props,s=e.type,i={},o=s.indexOf("-")===-1;for(var a in t){var c=t[a];if(!(a==="value"&&"defaultValue"in t&&c==null||dl&&a==="children"&&s==="noscript"||a==="class"||a==="className")){var u=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&c===!0?c="":u==="translate"&&c==="no"?c=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?a="ondblclick":u!=="onchange"||s!=="input"&&s!=="textarea"||hl(t.type)?u==="onfocus"?a="onfocusin":u==="onblur"?a="onfocusout":ll.test(a)&&(a=u):u=a="oninput":o&&cl.test(a)?a=a.replace(ul,"-$&").toLowerCase():c===null&&(c=void 0),u==="oninput"&&i[a=u]&&(a="oninputCapture"),i[a]=c}}s=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=St(t.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),s=="select"&&i.defaultValue!=null&&(i.value=St(t.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",bl)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i})(n),n.$$typeof=Da,ro&&ro(n)};var so=ie.__r;ie.__r=function(n){so&&so(n),vi=n.__c};var io=ie.diffed;ie.diffed=function(n){io&&io(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),vi=null};var yl={ReactCurrentDispatcher:{current:{readContext:function(n){return vi.__n[n.__c].props.value},useCallback:kn,useContext:Qt,useDebugValue:ga,useDeferredValue:Ca,useEffect:J,useId:va,useImperativeHandle:pi,useInsertionEffect:Ea,useLayoutEffect:Yt,useMemo:Ce,useReducer:ur,useRef:Oe,useState:b,useSyncExternalStore:Na,useTransition:Sa}}};function _l(n){return Ge.bind(null,n)}function hr(n){return!!n&&n.$$typeof===Da}function wl(n){return hr(n)&&n.type===z}function Nl(n){return!!n&&!!n.displayName&&(typeof n.displayName=="string"||n.displayName instanceof String)&&n.displayName.startsWith("Memo(")}function Fs(n){return hr(n)?Is.apply(null,arguments):n}function xl(n){return!!n.__k&&(Cn(null,n),!0)}function Cl(n){return n&&(n.base||n.nodeType===1&&n)||null}var Sl=function(n,e){return n(e)},El=function(n,e){return n(e)},Tl=z,kl=hr,ln={useState:b,useId:va,useReducer:ur,useEffect:J,useLayoutEffect:Yt,useInsertionEffect:Ea,useTransition:Sa,useDeferredValue:Ca,useSyncExternalStore:Na,startTransition:xa,useRef:Oe,useImperativeHandle:pi,useMemo:Ce,useCallback:kn,useContext:Qt,useDebugValue:ga,version:"18.3.1",Children:nl,render:fl,hydrate:pl,unmountComponentAtNode:xl,createPortal:al,createElement:Ge,createContext:pn,createFactory:_l,cloneElement:Fs,createRef:$c,Fragment:z,isValidElement:hr,isElement:kl,isFragment:wl,isMemo:Nl,findDOMNode:Cl,Component:Ct,PureComponent:Bs,memo:Ta,forwardRef:gi,flushSync:El,unstable_batchedUpdates:Sl,StrictMode:Tl,Suspense:Pr,SuspenseList:Qn,lazy:sl,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:yl},Pa={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oo=ln.createContext&&ln.createContext(Pa),Ol=["attr","size","title"];function Al(n,e){if(n==null)return{};var t=Dl(n,e),s,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)s=o[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Dl(n,e){if(n==null)return{};var t={};for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){if(e.indexOf(s)>=0)continue;t[s]=n[s]}return t}function zr(){return zr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},zr.apply(this,arguments)}function ao(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,s)}return t}function Hr(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ao(Object(t),!0).forEach(function(s){Pl(n,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ao(Object(t)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(t,s))})}return n}function Pl(n,e,t){return e=Ll(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ll(n){var e=Il(n,"string");return typeof e=="symbol"?e:e+""}function Il(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var s=t.call(n,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function La(n){return n&&n.map((e,t)=>ln.createElement(e.tag,Hr({key:t},e.attr),La(e.child)))}function V(n){return e=>ln.createElement(Ml,zr({attr:Hr({},n.attr)},e),La(n.child))}function Ml(n){var e=t=>{var{attr:s,size:i,title:o}=n,a=Al(n,Ol),c=i||t.size||"1em",u;return t.className&&(u=t.className),n.className&&(u=(u?u+" ":"")+n.className),ln.createElement("svg",zr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,a,{className:u,style:Hr(Hr({color:n.color||t.color},t.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&ln.createElement("title",null,o),n.children)};return oo!==void 0?ln.createElement(oo.Consumer,null,t=>e(t)):e(Pa)}function Rl(n){return V({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(n)}function Bl(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(n)}function Fl(n){return V({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function fr(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(n)}function jl(n){return V({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-90.62-70.05c.19-1.38.8-2.66.8-4.06.05-7.55-2.61-15.27-8.61-21.71-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84c-40.33 8.38-74.66 31.07-97.59 62.57L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.35 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.42-6.97 4.17-17.02-2.81-22.45zM157.23 251.54c-8.61 67.96-36.41 93.33-52.62 110.75-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h241.92L157.23 251.54zM320 512c35.32 0 63.97-28.65 63.97-64H256.03c0 35.35 28.65 64 63.97 64z"},child:[]}]})(n)}function un(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(n)}function $l(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"},child:[]}]})(n)}function co(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(n)}function Ul(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(n)}function Kt(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(n)}function zl(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 448H48a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h352a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm16-288H256v-48h40a8 8 0 0 0 8-8V56a8 8 0 0 0-8-8h-40V8a8 8 0 0 0-8-8h-48a8 8 0 0 0-8 8v40h-40a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h40v48H32a32 32 0 0 0-30.52 41.54L74.56 416h298.88l73.08-214.46A32 32 0 0 0 416 160z"},child:[]}]})(n)}function Hl(n){return V({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M19 272.47l40.63 18.06a32 32 0 0 0 24.88.47l12.78-5.12a32 32 0 0 0 18.76-20.5l9.22-30.65a24 24 0 0 1 12.55-15.65L159.94 208v50.33a48 48 0 0 1-26.53 42.94l-57.22 28.65A80 80 0 0 0 32 401.48V416h319.86V224c0-106-85.92-192-191.92-192H12A12 12 0 0 0 0 44a16.9 16.9 0 0 0 1.79 7.58L16 80l-9 9a24 24 0 0 0-7 17v137.21a32 32 0 0 0 19 29.26zM52 128a20 20 0 1 1-20 20 20 20 0 0 1 20-20zm316 320H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h352a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(n)}function ql(n){return V({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M105.1 224H80a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h16v5.49c0 44-4.14 86.6-24 122.51h176c-19.89-35.91-24-78.51-24-122.51V288h16a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-25.1c29.39-18.38 49.1-50.78 49.1-88a104 104 0 0 0-208 0c0 37.22 19.71 69.62 49.1 88zM304 448H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(n)}function Wl(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(n)}function cn(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(n)}function Vl(n){return V({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(n)}function bi(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(n)}function Gl(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"},child:[]}]})(n)}function Kl(n){return V({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(n)}function Yl(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(n)}function js(n){return V({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(n)}function Ia(n){return V({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(n)}function On(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(n)}function bt(n){return V({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(n)}function Ql(n){return V({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"},child:[]}]})(n)}function Ma(n){return V({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v208c0 44.112 35.888 80 80 80h336zm96-80V80c0-26.51-21.49-48-48-48H144c-26.51 0-48 21.49-48 48v256c0 26.51 21.49 48 48 48h384c26.51 0 48-21.49 48-48zM256 128c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-96 144l55.515-55.515c4.686-4.686 12.284-4.686 16.971 0L272 256l135.515-135.515c4.686-4.686 12.284-4.686 16.971 0L512 208v112H160v-48z"},child:[]}]})(n)}function Xl(n){return V({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M471.1 96C405 96 353.3 137.3 320 174.6 286.7 137.3 235 96 168.9 96 75.8 96 0 167.8 0 256s75.8 160 168.9 160c66.1 0 117.8-41.3 151.1-78.6 33.3 37.3 85 78.6 151.1 78.6 93.1 0 168.9-71.8 168.9-160S564.2 96 471.1 96zM168.9 320c-40.2 0-72.9-28.7-72.9-64s32.7-64 72.9-64c38.2 0 73.4 36.1 94 64-20.4 27.6-55.9 64-94 64zm302.2 0c-38.2 0-73.4-36.1-94-64 20.4-27.6 55.9-64 94-64 40.2 0 72.9 28.7 72.9 64s-32.7 64-72.9 64z"},child:[]}]})(n)}function lo(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(n)}function sr(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"},child:[]}]})(n)}function yi(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(n)}function _i(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(n)}function Ra(n){return V({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"},child:[]}]})(n)}function is(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(n)}function $s(n){return V({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M320,32a32,32,0,0,0-64,0v96h64Zm48,128H16A16,16,0,0,0,0,176v32a16,16,0,0,0,16,16H32v32A160.07,160.07,0,0,0,160,412.8V512h64V412.8A160.07,160.07,0,0,0,352,256V224h16a16,16,0,0,0,16-16V176A16,16,0,0,0,368,160ZM128,32a32,32,0,0,0-64,0v96h64Z"},child:[]}]})(n)}function Jl(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(n)}function Zl(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(n)}function eu(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(n)}function tu(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(n)}function nu(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(n)}function ru(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM224 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm176-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h328c6.6 0 12 5.4 12 12v312z"},child:[]}]})(n)}function su(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 56v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56zm40 200c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24zm272 256c-20.183 0-29.485-39.293-33.931-57.795-5.206-21.666-10.589-44.07-25.393-58.902-32.469-32.524-49.503-73.967-89.117-113.111a11.98 11.98 0 0 1-3.558-8.521V59.901c0-6.541 5.243-11.878 11.783-11.998 15.831-.29 36.694-9.079 52.651-16.178C256.189 17.598 295.709.017 343.995 0h2.844c42.777 0 93.363.413 113.774 29.737 8.392 12.057 10.446 27.034 6.148 44.632 16.312 17.053 25.063 48.863 16.382 74.757 17.544 23.432 19.143 56.132 9.308 79.469l.11.11c11.893 11.949 19.523 31.259 19.439 49.197-.156 30.352-26.157 58.098-59.553 58.098H350.723C358.03 364.34 384 388.132 384 430.548 384 504 336 512 312 512z"},child:[]}]})(n)}function iu(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"},child:[]}]})(n)}function ir(n){return V({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(n)}function wi(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(n)}function Ba(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zM264 408c0 22.1-17.9 40-40 40s-40-17.9-40-40v-48c0-22.1 17.9-40 40-40s40 17.9 40 40v48z"},child:[]}]})(n)}function ou(n){return V({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"},child:[]}]})(n)}function Ni(n){return V({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(n)}function hn(n){return V({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(n)}function au(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 225.31c4.674-22.647.864-44.538-8.99-62.99 2.958-23.868-4.021-48.565-17.34-66.99C438.986 39.423 404.117 0 327 0c-7 0-15 .01-22.22.01C201.195.01 168.997 40 128 40h-10.845c-5.64-4.975-13.042-8-21.155-8H32C14.327 32 0 46.327 0 64v240c0 17.673 14.327 32 32 32h64c11.842 0 22.175-6.438 27.708-16h7.052c19.146 16.953 46.013 60.653 68.76 83.4 13.667 13.667 10.153 108.6 71.76 108.6 57.58 0 95.27-31.936 95.27-104.73 0-18.41-3.93-33.73-8.85-46.54h36.48c48.602 0 85.82-41.565 85.82-85.58 0-19.15-4.96-34.99-13.73-49.84zM64 296c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm330.18 16.73H290.19c0 37.82 28.36 55.37 28.36 94.54 0 23.75 0 56.73-47.27 56.73-18.91-18.91-9.46-66.18-37.82-94.54C206.9 342.89 167.28 272 138.92 272H128V85.83c53.611 0 100.001-37.82 171.64-37.82h37.82c35.512 0 60.82 17.12 53.12 65.9 15.2 8.16 26.5 36.44 13.94 57.57 21.581 20.384 18.699 51.065 5.21 65.62 9.45 0 22.36 18.91 22.27 37.81-.09 18.91-16.71 37.82-37.82 37.82z"},child:[]}]})(n)}function cu(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"},child:[]}]})(n)}function lu(n){const[e,t]=b(n.likes.valueOf()),[s,i]=b(n.dislikes.valueOf()),[o,a]=b(n.dislikes.valueOf()),[c,u]=b(!1),[l,d]=b(!1),[h,f]=b("");J(()=>{async function m(){try{const g=(await W.blog.getBlogByIdReaction(n.id)).data;u(g[0]),d(g[1])}catch(g){if(g?.status==401){console.log("Not logged in: won't fetch previous reactions");return}const y=g instanceof Error?g.message:"Fetching previous reactions failed";f(y),console.error("Error:",g)}}m()},[n.id]);async function p(m){try{const g=(await W.blog.patchBlogByIdReaction(n.id,{type:m?"like":"dislike"})).data;m?(t(c?e-1:e+1),l&&(i(s-1),d(!1))):(i(l?s-1:s+1),c&&(t(e-1),u(!1))),m?u(!c):d(!l)}catch(g){if(g?.status==401){console.log("401 error: redirecting to /login"),window.location.href="/login";return}const y=g instanceof Error?g.message:"Reacting failed";f(y),console.error("Error:",g)}}return h?r(z,{children:r("div",{role:"alert",className:"alert alert-error",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r("span",{children:h})]})}):r("div",{class:"pt-1 text-lg",children:[r("div",{class:"inline mr-4",children:[r("span",{children:e}),r("span",{className:"cursor-pointer px-2 text-green-500 hover:text-[#2196f3] inline-block",onClick:async()=>{await p(!0)},children:c?r(iu,{}):r(cu,{})})]}),r("div",{class:"inline mr-4",children:[r("span",{children:s}),r("span",{className:"cursor-pointer px-2 text-red-500 hover:text-[#2196f3] inline-block",onClick:async()=>{await p(!1)},children:l?r(su,{}):r(au,{})})]}),r("div",{class:"inline mr-4",children:[r("span",{children:n.comments}),r("span",{className:"cursor-pointer px-2 inline-block",onClick:async()=>{await p(!1)},children:r(bi,{})})]})]})}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Fa,setPrototypeOf:uo,isFrozen:uu,getPrototypeOf:du,getOwnPropertyDescriptor:hu}=Object;let{freeze:Ke,seal:ht,create:Us}=Object,{apply:zs,construct:Hs}=typeof Reflect<"u"&&Reflect;Ke||(Ke=function(e){return e});ht||(ht=function(e){return e});zs||(zs=function(e,t){for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];return e.apply(t,i)});Hs||(Hs=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return new e(...s)});const Nr=Ye(Array.prototype.forEach),fu=Ye(Array.prototype.lastIndexOf),ho=Ye(Array.prototype.pop),jn=Ye(Array.prototype.push),pu=Ye(Array.prototype.splice),Lr=Ye(String.prototype.toLowerCase),os=Ye(String.prototype.toString),as=Ye(String.prototype.match),$n=Ye(String.prototype.replace),mu=Ye(String.prototype.indexOf),gu=Ye(String.prototype.trim),gt=Ye(Object.prototype.hasOwnProperty),Ve=Ye(RegExp.prototype.test),Un=vu(TypeError);function Ye(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];return zs(n,e,s)}}function vu(n){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Hs(n,t)}}function he(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lr;uo&&uo(n,null);let s=e.length;for(;s--;){let i=e[s];if(typeof i=="string"){const o=t(i);o!==i&&(uu(e)||(e[s]=o),i=o)}n[i]=!0}return n}function bu(n){for(let e=0;e<n.length;e++)gt(n,e)||(n[e]=null);return n}function Pt(n){const e=Us(null);for(const[t,s]of Fa(n))gt(n,t)&&(Array.isArray(s)?e[t]=bu(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=Pt(s):e[t]=s);return e}function zn(n,e){for(;n!==null;){const s=hu(n,e);if(s){if(s.get)return Ye(s.get);if(typeof s.value=="function")return Ye(s.value)}n=du(n)}function t(){return null}return t}const fo=Ke(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cs=Ke(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ls=Ke(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yu=Ke(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),us=Ke(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),_u=Ke(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),po=Ke(["#text"]),mo=Ke(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ds=Ke(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),go=Ke(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xr=Ke(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),wu=ht(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Nu=ht(/<%[\w\W]*|[\w\W]*%>/gm),xu=ht(/\$\{[\w\W]*/gm),Cu=ht(/^data-[\-\w.\u00B7-\uFFFF]+$/),Su=ht(/^aria-[\-\w]+$/),ja=ht(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Eu=ht(/^(?:\w+script|data):/i),Tu=ht(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),$a=ht(/^html$/i),ku=ht(/^[a-z][.\w]*(-[.\w]+)+$/i);var vo=Object.freeze({__proto__:null,ARIA_ATTR:Su,ATTR_WHITESPACE:Tu,CUSTOM_ELEMENT:ku,DATA_ATTR:Cu,DOCTYPE_NAME:$a,ERB_EXPR:Nu,IS_ALLOWED_URI:ja,IS_SCRIPT_OR_DATA:Eu,MUSTACHE_EXPR:wu,TMPLIT_EXPR:xu});const Hn={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ou=function(){return typeof window>"u"?null:window},Au=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(s=t.getAttribute(i));const o="dompurify"+(s?"#"+s:"");try{return e.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},bo=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ua(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ou();const e=Y=>Ua(Y);if(e.version="3.3.0",e.removed=[],!n||!n.document||n.document.nodeType!==Hn.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n;const s=t,i=s.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:c,Element:u,NodeFilter:l,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:p}=n,m=u.prototype,g=zn(m,"cloneNode"),y=zn(m,"remove"),_=zn(m,"nextSibling"),w=zn(m,"childNodes"),O=zn(m,"parentNode");if(typeof a=="function"){const Y=t.createElement("template");Y.content&&Y.content.ownerDocument&&(t=Y.content.ownerDocument)}let x,A="";const{implementation:U,createNodeIterator:B,createDocumentFragment:$,getElementsByTagName:P}=t,{importNode:T}=s;let j=bo();e.isSupported=typeof Fa=="function"&&typeof O=="function"&&U&&U.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:H,ERB_EXPR:ue,TMPLIT_EXPR:de,DATA_ATTR:ce,ARIA_ATTR:k,IS_SCRIPT_OR_DATA:F,ATTR_WHITESPACE:I,CUSTOM_ELEMENT:Z}=vo;let{IS_ALLOWED_URI:R}=vo,L=null;const fe=he({},[...fo,...cs,...ls,...us,...po]);let le=null;const ge=he({},[...mo,...ds,...go,...xr]);let Q=Object.seal(Us(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),G=null,te=null;const Te=Object.seal(Us(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let qe=!0,ft=!0,De=!1,Be=!0,Je=!1,Rt=!0,Qe=!1,rt=!1,Jt=!1,Ze=!1,Bt=!1,kt=!1,vn=!0,Ft=!1;const Zt="user-content-";let Ot=!0,je=!1,st={},Xe=null;const bn=he({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let yn=null;const _n=he({},["audio","video","img","source","image","track"]);let yt=null;const At=he({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pt="http://www.w3.org/1998/Math/MathML",mt="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml";let _t=et,jt=!1,en=null;const tn=he({},[pt,mt,et],os);let $t=he({},["mi","mo","mn","ms","mtext"]),Ut=he({},["annotation-xml"]);const Pn=he({},["title","style","font","a","script"]);let Dt=null;const nn=["application/xhtml+xml","text/html"],Ln="text/html";let we=null,it=null;const In=t.createElement("form"),C=function(v){return v instanceof RegExp||v instanceof Function},ot=function(){let v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(it&&it===v)){if((!v||typeof v!="object")&&(v={}),v=Pt(v),Dt=nn.indexOf(v.PARSER_MEDIA_TYPE)===-1?Ln:v.PARSER_MEDIA_TYPE,we=Dt==="application/xhtml+xml"?os:Lr,L=gt(v,"ALLOWED_TAGS")?he({},v.ALLOWED_TAGS,we):fe,le=gt(v,"ALLOWED_ATTR")?he({},v.ALLOWED_ATTR,we):ge,en=gt(v,"ALLOWED_NAMESPACES")?he({},v.ALLOWED_NAMESPACES,os):tn,yt=gt(v,"ADD_URI_SAFE_ATTR")?he(Pt(At),v.ADD_URI_SAFE_ATTR,we):At,yn=gt(v,"ADD_DATA_URI_TAGS")?he(Pt(_n),v.ADD_DATA_URI_TAGS,we):_n,Xe=gt(v,"FORBID_CONTENTS")?he({},v.FORBID_CONTENTS,we):bn,G=gt(v,"FORBID_TAGS")?he({},v.FORBID_TAGS,we):Pt({}),te=gt(v,"FORBID_ATTR")?he({},v.FORBID_ATTR,we):Pt({}),st=gt(v,"USE_PROFILES")?v.USE_PROFILES:!1,qe=v.ALLOW_ARIA_ATTR!==!1,ft=v.ALLOW_DATA_ATTR!==!1,De=v.ALLOW_UNKNOWN_PROTOCOLS||!1,Be=v.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Je=v.SAFE_FOR_TEMPLATES||!1,Rt=v.SAFE_FOR_XML!==!1,Qe=v.WHOLE_DOCUMENT||!1,Ze=v.RETURN_DOM||!1,Bt=v.RETURN_DOM_FRAGMENT||!1,kt=v.RETURN_TRUSTED_TYPE||!1,Jt=v.FORCE_BODY||!1,vn=v.SANITIZE_DOM!==!1,Ft=v.SANITIZE_NAMED_PROPS||!1,Ot=v.KEEP_CONTENT!==!1,je=v.IN_PLACE||!1,R=v.ALLOWED_URI_REGEXP||ja,_t=v.NAMESPACE||et,$t=v.MATHML_TEXT_INTEGRATION_POINTS||$t,Ut=v.HTML_INTEGRATION_POINTS||Ut,Q=v.CUSTOM_ELEMENT_HANDLING||{},v.CUSTOM_ELEMENT_HANDLING&&C(v.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=v.CUSTOM_ELEMENT_HANDLING.tagNameCheck),v.CUSTOM_ELEMENT_HANDLING&&C(v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=v.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),v.CUSTOM_ELEMENT_HANDLING&&typeof v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=v.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Je&&(ft=!1),Bt&&(Ze=!0),st&&(L=he({},po),le=[],st.html===!0&&(he(L,fo),he(le,mo)),st.svg===!0&&(he(L,cs),he(le,ds),he(le,xr)),st.svgFilters===!0&&(he(L,ls),he(le,ds),he(le,xr)),st.mathMl===!0&&(he(L,us),he(le,go),he(le,xr))),v.ADD_TAGS&&(typeof v.ADD_TAGS=="function"?Te.tagCheck=v.ADD_TAGS:(L===fe&&(L=Pt(L)),he(L,v.ADD_TAGS,we))),v.ADD_ATTR&&(typeof v.ADD_ATTR=="function"?Te.attributeCheck=v.ADD_ATTR:(le===ge&&(le=Pt(le)),he(le,v.ADD_ATTR,we))),v.ADD_URI_SAFE_ATTR&&he(yt,v.ADD_URI_SAFE_ATTR,we),v.FORBID_CONTENTS&&(Xe===bn&&(Xe=Pt(Xe)),he(Xe,v.FORBID_CONTENTS,we)),Ot&&(L["#text"]=!0),Qe&&he(L,["html","head","body"]),L.table&&(he(L,["tbody"]),delete G.tbody),v.TRUSTED_TYPES_POLICY){if(typeof v.TRUSTED_TYPES_POLICY.createHTML!="function")throw Un('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof v.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Un('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=v.TRUSTED_TYPES_POLICY,A=x.createHTML("")}else x===void 0&&(x=Au(p,i)),x!==null&&typeof A=="string"&&(A=x.createHTML(""));Ke&&Ke(v),it=v}},$e=he({},[...cs,...ls,...yu]),me=he({},[...us,..._u]),D=function(v){let M=O(v);(!M||!M.tagName)&&(M={namespaceURI:_t,tagName:"template"});const q=Lr(v.tagName),ye=Lr(M.tagName);return en[v.namespaceURI]?v.namespaceURI===mt?M.namespaceURI===et?q==="svg":M.namespaceURI===pt?q==="svg"&&(ye==="annotation-xml"||$t[ye]):!!$e[q]:v.namespaceURI===pt?M.namespaceURI===et?q==="math":M.namespaceURI===mt?q==="math"&&Ut[ye]:!!me[q]:v.namespaceURI===et?M.namespaceURI===mt&&!Ut[ye]||M.namespaceURI===pt&&!$t[ye]?!1:!me[q]&&(Pn[q]||!$e[q]):!!(Dt==="application/xhtml+xml"&&en[v.namespaceURI]):!1},ve=function(v){jn(e.removed,{element:v});try{O(v).removeChild(v)}catch{y(v)}},oe=function(v,M){try{jn(e.removed,{attribute:M.getAttributeNode(v),from:M})}catch{jn(e.removed,{attribute:null,from:M})}if(M.removeAttribute(v),v==="is")if(Ze||Bt)try{ve(M)}catch{}else try{M.setAttribute(v,"")}catch{}},Se=function(v){let M=null,q=null;if(Jt)v="<remove></remove>"+v;else{const Ee=as(v,/^[\r\n\t ]+/);q=Ee&&Ee[0]}Dt==="application/xhtml+xml"&&_t===et&&(v='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+v+"</body></html>");const ye=x?x.createHTML(v):v;if(_t===et)try{M=new f().parseFromString(ye,Dt)}catch{}if(!M||!M.documentElement){M=U.createDocument(_t,"template",null);try{M.documentElement.innerHTML=jt?A:ye}catch{}}const Me=M.body||M.documentElement;return v&&q&&Me.insertBefore(t.createTextNode(q),Me.childNodes[0]||null),_t===et?P.call(M,Qe?"html":"body")[0]:Qe?M.documentElement:Me},Ue=function(v){return B.call(v.ownerDocument||v,v,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},Ie=function(v){return v instanceof h&&(typeof v.nodeName!="string"||typeof v.textContent!="string"||typeof v.removeChild!="function"||!(v.attributes instanceof d)||typeof v.removeAttribute!="function"||typeof v.setAttribute!="function"||typeof v.namespaceURI!="string"||typeof v.insertBefore!="function"||typeof v.hasChildNodes!="function")},Mn=function(v){return typeof c=="function"&&v instanceof c};function at(Y,v,M){Nr(Y,q=>{q.call(e,v,M,it)})}const K=function(v){let M=null;if(at(j.beforeSanitizeElements,v,null),Ie(v))return ve(v),!0;const q=we(v.nodeName);if(at(j.uponSanitizeElement,v,{tagName:q,allowedTags:L}),Rt&&v.hasChildNodes()&&!Mn(v.firstElementChild)&&Ve(/<[/\w!]/g,v.innerHTML)&&Ve(/<[/\w!]/g,v.textContent)||v.nodeType===Hn.progressingInstruction||Rt&&v.nodeType===Hn.comment&&Ve(/<[/\w]/g,v.data))return ve(v),!0;if(!(Te.tagCheck instanceof Function&&Te.tagCheck(q))&&(!L[q]||G[q])){if(!G[q]&&Rn(q)&&(Q.tagNameCheck instanceof RegExp&&Ve(Q.tagNameCheck,q)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(q)))return!1;if(Ot&&!Xe[q]){const ye=O(v)||v.parentNode,Me=w(v)||v.childNodes;if(Me&&ye){const Ee=Me.length;for(let ze=Ee-1;ze>=0;--ze){const ct=g(Me[ze],!0);ct.__removalCount=(v.__removalCount||0)+1,ye.insertBefore(ct,_(v))}}}return ve(v),!0}return v instanceof u&&!D(v)||(q==="noscript"||q==="noembed"||q==="noframes")&&Ve(/<\/no(script|embed|frames)/i,v.innerHTML)?(ve(v),!0):(Je&&v.nodeType===Hn.text&&(M=v.textContent,Nr([H,ue,de],ye=>{M=$n(M,ye," ")}),v.textContent!==M&&(jn(e.removed,{element:v.cloneNode()}),v.textContent=M)),at(j.afterSanitizeElements,v,null),!1)},pr=function(v,M,q){if(vn&&(M==="id"||M==="name")&&(q in t||q in In))return!1;if(!(ft&&!te[M]&&Ve(ce,M))){if(!(qe&&Ve(k,M))){if(!(Te.attributeCheck instanceof Function&&Te.attributeCheck(M,v))){if(!le[M]||te[M]){if(!(Rn(v)&&(Q.tagNameCheck instanceof RegExp&&Ve(Q.tagNameCheck,v)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(v))&&(Q.attributeNameCheck instanceof RegExp&&Ve(Q.attributeNameCheck,M)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(M,v))||M==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&Ve(Q.tagNameCheck,q)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(q))))return!1}else if(!yt[M]){if(!Ve(R,$n(q,I,""))){if(!((M==="src"||M==="xlink:href"||M==="href")&&v!=="script"&&mu(q,"data:")===0&&yn[v])){if(!(De&&!Ve(F,$n(q,I,"")))){if(q)return!1}}}}}}}return!0},Rn=function(v){return v!=="annotation-xml"&&as(v,Z)},mr=function(v){at(j.beforeSanitizeAttributes,v,null);const{attributes:M}=v;if(!M||Ie(v))return;const q={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le,forceKeepAttr:void 0};let ye=M.length;for(;ye--;){const Me=M[ye],{name:Ee,namespaceURI:ze,value:ct}=Me,wt=we(Ee),Bn=ct;let Pe=Ee==="value"?Bn:gu(Bn);if(q.attrName=wt,q.attrValue=Pe,q.keepAttr=!0,q.forceKeepAttr=void 0,at(j.uponSanitizeAttribute,v,q),Pe=q.attrValue,Ft&&(wt==="id"||wt==="name")&&(oe(Ee,v),Pe=Zt+Pe),Rt&&Ve(/((--!?|])>)|<\/(style|title|textarea)/i,Pe)){oe(Ee,v);continue}if(wt==="attributename"&&as(Pe,"href")){oe(Ee,v);continue}if(q.forceKeepAttr)continue;if(!q.keepAttr){oe(Ee,v);continue}if(!Be&&Ve(/\/>/i,Pe)){oe(Ee,v);continue}Je&&Nr([H,ue,de],vr=>{Pe=$n(Pe,vr," ")});const Fn=we(v.nodeName);if(!pr(Fn,wt,Pe)){oe(Ee,v);continue}if(x&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!ze)switch(p.getAttributeType(Fn,wt)){case"TrustedHTML":{Pe=x.createHTML(Pe);break}case"TrustedScriptURL":{Pe=x.createScriptURL(Pe);break}}if(Pe!==Bn)try{ze?v.setAttributeNS(ze,Ee,Pe):v.setAttribute(Ee,Pe),Ie(v)?ve(v):ho(e.removed)}catch{oe(Ee,v)}}at(j.afterSanitizeAttributes,v,null)},gr=function Y(v){let M=null;const q=Ue(v);for(at(j.beforeSanitizeShadowDOM,v,null);M=q.nextNode();)at(j.uponSanitizeShadowNode,M,null),K(M),mr(M),M.content instanceof o&&Y(M.content);at(j.afterSanitizeShadowDOM,v,null)};return e.sanitize=function(Y){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=null,q=null,ye=null,Me=null;if(jt=!Y,jt&&(Y="<!-->"),typeof Y!="string"&&!Mn(Y))if(typeof Y.toString=="function"){if(Y=Y.toString(),typeof Y!="string")throw Un("dirty is not a string, aborting")}else throw Un("toString is not a function");if(!e.isSupported)return Y;if(rt||ot(v),e.removed=[],typeof Y=="string"&&(je=!1),je){if(Y.nodeName){const ct=we(Y.nodeName);if(!L[ct]||G[ct])throw Un("root node is forbidden and cannot be sanitized in-place")}}else if(Y instanceof c)M=Se("<!---->"),q=M.ownerDocument.importNode(Y,!0),q.nodeType===Hn.element&&q.nodeName==="BODY"||q.nodeName==="HTML"?M=q:M.appendChild(q);else{if(!Ze&&!Je&&!Qe&&Y.indexOf("<")===-1)return x&&kt?x.createHTML(Y):Y;if(M=Se(Y),!M)return Ze?null:kt?A:""}M&&Jt&&ve(M.firstChild);const Ee=Ue(je?Y:M);for(;ye=Ee.nextNode();)K(ye),mr(ye),ye.content instanceof o&&gr(ye.content);if(je)return Y;if(Ze){if(Bt)for(Me=$.call(M.ownerDocument);M.firstChild;)Me.appendChild(M.firstChild);else Me=M;return(le.shadowroot||le.shadowrootmode)&&(Me=T.call(s,Me,!0)),Me}let ze=Qe?M.outerHTML:M.innerHTML;return Qe&&L["!doctype"]&&M.ownerDocument&&M.ownerDocument.doctype&&M.ownerDocument.doctype.name&&Ve($a,M.ownerDocument.doctype.name)&&(ze="<!DOCTYPE "+M.ownerDocument.doctype.name+`>
`+ze),Je&&Nr([H,ue,de],ct=>{ze=$n(ze,ct," ")}),x&&kt?x.createHTML(ze):ze},e.setConfig=function(){let Y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ot(Y),rt=!0},e.clearConfig=function(){it=null,rt=!1},e.isValidAttribute=function(Y,v,M){it||ot({});const q=we(Y),ye=we(v);return pr(q,ye,M)},e.addHook=function(Y,v){typeof v=="function"&&jn(j[Y],v)},e.removeHook=function(Y,v){if(v!==void 0){const M=fu(j[Y],v);return M===-1?void 0:pu(j[Y],M,1)[0]}return ho(j[Y])},e.removeHooks=function(Y){j[Y]=[]},e.removeAllHooks=function(){j=bo()},e}var za=Ua();function Lt(n){return Array.isArray?Array.isArray(n):Wa(n)==="[object Array]"}function Du(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-1/0?"-0":e}function Pu(n){return n==null?"":Du(n)}function xt(n){return typeof n=="string"}function Ha(n){return typeof n=="number"}function Lu(n){return n===!0||n===!1||Iu(n)&&Wa(n)=="[object Boolean]"}function qa(n){return typeof n=="object"}function Iu(n){return qa(n)&&n!==null}function nt(n){return n!=null}function hs(n){return!n.trim().length}function Wa(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Mu="Incorrect 'index' type",Ru=n=>`Invalid value for key ${n}`,Bu=n=>`Pattern length exceeds max of ${n}.`,Fu=n=>`Missing ${n} property in key`,ju=n=>`Property 'weight' in key '${n}' must be a positive integer`,yo=Object.prototype.hasOwnProperty;class $u{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach(s=>{let i=Va(s);this._keys.push(i),this._keyMap[i.id]=i,t+=i.weight}),this._keys.forEach(s=>{s.weight/=t})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Va(n){let e=null,t=null,s=null,i=1,o=null;if(xt(n)||Lt(n))s=n,e=_o(n),t=qs(n);else{if(!yo.call(n,"name"))throw new Error(Fu("name"));const a=n.name;if(s=a,yo.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(ju(a));e=_o(a),t=qs(a),o=n.getFn}return{path:e,id:t,weight:i,src:s,getFn:o}}function _o(n){return Lt(n)?n:n.split(".")}function qs(n){return Lt(n)?n.join("."):n}function Uu(n,e){let t=[],s=!1;const i=(o,a,c)=>{if(nt(o))if(!a[c])t.push(o);else{let u=a[c];const l=o[u];if(!nt(l))return;if(c===a.length-1&&(xt(l)||Ha(l)||Lu(l)))t.push(Pu(l));else if(Lt(l)){s=!0;for(let d=0,h=l.length;d<h;d+=1)i(l[d],a,c+1)}else a.length&&i(l,a,c+1)}};return i(n,xt(e)?e.split("."):e,0),s?t:t[0]}const zu={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Hu={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},qu={location:0,threshold:.6,distance:100},Wu={useExtendedSearch:!1,getFn:Uu,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var re={...Hu,...zu,...qu,...Wu};const Vu=/[^ ]+/g;function Gu(n=1,e=3){const t=new Map,s=Math.pow(10,e);return{get(i){const o=i.match(Vu).length;if(t.has(o))return t.get(o);const a=1/Math.pow(o,.5*n),c=parseFloat(Math.round(a*s)/s);return t.set(o,c),c},clear(){t.clear()}}}class xi{constructor({getFn:e=re.getFn,fieldNormWeight:t=re.fieldNormWeight}={}){this.norm=Gu(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((t,s)=>{this._keysMap[t.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,xt(this.docs[0])?this.docs.forEach((e,t)=>{this._addString(e,t)}):this.docs.forEach((e,t)=>{this._addObject(e,t)}),this.norm.clear())}add(e){const t=this.size();xt(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,s=this.size();t<s;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!nt(e)||hs(e))return;let s={v:e,i:t,n:this.norm.get(e)};this.records.push(s)}_addObject(e,t){let s={i:t,$:{}};this.keys.forEach((i,o)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(nt(a)){if(Lt(a)){let c=[];const u=[{nestedArrIndex:-1,value:a}];for(;u.length;){const{nestedArrIndex:l,value:d}=u.pop();if(nt(d))if(xt(d)&&!hs(d)){let h={v:d,i:l,n:this.norm.get(d)};c.push(h)}else Lt(d)&&d.forEach((h,f)=>{u.push({nestedArrIndex:f,value:h})})}s.$[o]=c}else if(xt(a)&&!hs(a)){let c={v:a,n:this.norm.get(a)};s.$[o]=c}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Ga(n,e,{getFn:t=re.getFn,fieldNormWeight:s=re.fieldNormWeight}={}){const i=new xi({getFn:t,fieldNormWeight:s});return i.setKeys(n.map(Va)),i.setSources(e),i.create(),i}function Ku(n,{getFn:e=re.getFn,fieldNormWeight:t=re.fieldNormWeight}={}){const{keys:s,records:i}=n,o=new xi({getFn:e,fieldNormWeight:t});return o.setKeys(s),o.setIndexRecords(i),o}function Cr(n,{errors:e=0,currentLocation:t=0,expectedLocation:s=0,distance:i=re.distance,ignoreLocation:o=re.ignoreLocation}={}){const a=e/n.length;if(o)return a;const c=Math.abs(s-t);return i?a+c/i:c?1:a}function Yu(n=[],e=re.minMatchCharLength){let t=[],s=-1,i=-1,o=0;for(let a=n.length;o<a;o+=1){let c=n[o];c&&s===-1?s=o:!c&&s!==-1&&(i=o-1,i-s+1>=e&&t.push([s,i]),s=-1)}return n[o-1]&&o-s>=e&&t.push([s,o-1]),t}const an=32;function Qu(n,e,t,{location:s=re.location,distance:i=re.distance,threshold:o=re.threshold,findAllMatches:a=re.findAllMatches,minMatchCharLength:c=re.minMatchCharLength,includeMatches:u=re.includeMatches,ignoreLocation:l=re.ignoreLocation}={}){if(e.length>an)throw new Error(Bu(an));const d=e.length,h=n.length,f=Math.max(0,Math.min(s,h));let p=o,m=f;const g=c>1||u,y=g?Array(h):[];let _;for(;(_=n.indexOf(e,m))>-1;){let B=Cr(e,{currentLocation:_,expectedLocation:f,distance:i,ignoreLocation:l});if(p=Math.min(B,p),m=_+d,g){let $=0;for(;$<d;)y[_+$]=1,$+=1}}m=-1;let w=[],O=1,x=d+h;const A=1<<d-1;for(let B=0;B<d;B+=1){let $=0,P=x;for(;$<P;)Cr(e,{errors:B,currentLocation:f+P,expectedLocation:f,distance:i,ignoreLocation:l})<=p?$=P:x=P,P=Math.floor((x-$)/2+$);x=P;let T=Math.max(1,f-P+1),j=a?h:Math.min(f+P,h)+d,H=Array(j+2);H[j+1]=(1<<B)-1;for(let de=j;de>=T;de-=1){let ce=de-1,k=t[n.charAt(ce)];if(g&&(y[ce]=+!!k),H[de]=(H[de+1]<<1|1)&k,B&&(H[de]|=(w[de+1]|w[de])<<1|1|w[de+1]),H[de]&A&&(O=Cr(e,{errors:B,currentLocation:ce,expectedLocation:f,distance:i,ignoreLocation:l}),O<=p)){if(p=O,m=ce,m<=f)break;T=Math.max(1,2*f-m)}}if(Cr(e,{errors:B+1,currentLocation:f,expectedLocation:f,distance:i,ignoreLocation:l})>p)break;w=H}const U={isMatch:m>=0,score:Math.max(.001,O)};if(g){const B=Yu(y,c);B.length?u&&(U.indices=B):U.isMatch=!1}return U}function Xu(n){let e={};for(let t=0,s=n.length;t<s;t+=1){const i=n.charAt(t);e[i]=(e[i]||0)|1<<s-t-1}return e}const qr=String.prototype.normalize?(n=>n.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(n=>n);class Ka{constructor(e,{location:t=re.location,threshold:s=re.threshold,distance:i=re.distance,includeMatches:o=re.includeMatches,findAllMatches:a=re.findAllMatches,minMatchCharLength:c=re.minMatchCharLength,isCaseSensitive:u=re.isCaseSensitive,ignoreDiacritics:l=re.ignoreDiacritics,ignoreLocation:d=re.ignoreLocation}={}){if(this.options={location:t,threshold:s,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:u,ignoreDiacritics:l,ignoreLocation:d},e=u?e:e.toLowerCase(),e=l?qr(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(p,m)=>{this.chunks.push({pattern:p,alphabet:Xu(p),startIndex:m})},f=this.pattern.length;if(f>an){let p=0;const m=f%an,g=f-m;for(;p<g;)h(this.pattern.substr(p,an),p),p+=an;if(m){const y=f-an;h(this.pattern.substr(y),y)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,ignoreDiacritics:s,includeMatches:i}=this.options;if(e=t?e:e.toLowerCase(),e=s?qr(e):e,this.pattern===e){let g={isMatch:!0,score:0};return i&&(g.indices=[[0,e.length-1]]),g}const{location:o,distance:a,threshold:c,findAllMatches:u,minMatchCharLength:l,ignoreLocation:d}=this.options;let h=[],f=0,p=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:_})=>{const{isMatch:w,score:O,indices:x}=Qu(e,g,y,{location:o+_,distance:a,threshold:c,findAllMatches:u,minMatchCharLength:l,includeMatches:i,ignoreLocation:d});w&&(p=!0),f+=O,w&&x&&(h=[...h,...x])});let m={isMatch:p,score:p?f/this.chunks.length:1};return p&&i&&(m.indices=h),m}}class Xt{constructor(e){this.pattern=e}static isMultiMatch(e){return wo(e,this.multiRegex)}static isSingleMatch(e){return wo(e,this.singleRegex)}search(){}}function wo(n,e){const t=n.match(e);return t?t[1]:null}class Ju extends Xt{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Zu extends Xt{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class ed extends Xt{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class td extends Xt{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class nd extends Xt{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class rd extends Xt{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}}class Ya extends Xt{constructor(e,{location:t=re.location,threshold:s=re.threshold,distance:i=re.distance,includeMatches:o=re.includeMatches,findAllMatches:a=re.findAllMatches,minMatchCharLength:c=re.minMatchCharLength,isCaseSensitive:u=re.isCaseSensitive,ignoreDiacritics:l=re.ignoreDiacritics,ignoreLocation:d=re.ignoreLocation}={}){super(e),this._bitapSearch=new Ka(e,{location:t,threshold:s,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:u,ignoreDiacritics:l,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class Qa extends Xt{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t=0,s;const i=[],o=this.pattern.length;for(;(s=e.indexOf(this.pattern,t))>-1;)t=s+o,i.push([s,t-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const Ws=[Ju,Qa,ed,td,rd,nd,Zu,Ya],No=Ws.length,sd=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,id="|";function od(n,e={}){return n.split(id).map(t=>{let s=t.trim().split(sd).filter(o=>o&&!!o.trim()),i=[];for(let o=0,a=s.length;o<a;o+=1){const c=s[o];let u=!1,l=-1;for(;!u&&++l<No;){const d=Ws[l];let h=d.isMultiMatch(c);h&&(i.push(new d(h,e)),u=!0)}if(!u)for(l=-1;++l<No;){const d=Ws[l];let h=d.isSingleMatch(c);if(h){i.push(new d(h,e));break}}}return i})}const ad=new Set([Ya.type,Qa.type]);class cd{constructor(e,{isCaseSensitive:t=re.isCaseSensitive,ignoreDiacritics:s=re.ignoreDiacritics,includeMatches:i=re.includeMatches,minMatchCharLength:o=re.minMatchCharLength,ignoreLocation:a=re.ignoreLocation,findAllMatches:c=re.findAllMatches,location:u=re.location,threshold:l=re.threshold,distance:d=re.distance}={}){this.query=null,this.options={isCaseSensitive:t,ignoreDiacritics:s,includeMatches:i,minMatchCharLength:o,findAllMatches:c,ignoreLocation:a,location:u,threshold:l,distance:d},e=t?e:e.toLowerCase(),e=s?qr(e):e,this.pattern=e,this.query=od(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:i,ignoreDiacritics:o}=this.options;e=i?e:e.toLowerCase(),e=o?qr(e):e;let a=0,c=[],u=0;for(let l=0,d=t.length;l<d;l+=1){const h=t[l];c.length=0,a=0;for(let f=0,p=h.length;f<p;f+=1){const m=h[f],{isMatch:g,indices:y,score:_}=m.search(e);if(g){if(a+=1,u+=_,s){const w=m.constructor.type;ad.has(w)?c=[...c,...y]:c.push(y)}}else{u=0,a=0,c.length=0;break}}if(a){let f={isMatch:!0,score:u/a};return s&&(f.indices=c),f}}return{isMatch:!1,score:1}}}const Vs=[];function ld(...n){Vs.push(...n)}function Gs(n,e){for(let t=0,s=Vs.length;t<s;t+=1){let i=Vs[t];if(i.condition(n,e))return new i(n,e)}return new Ka(n,e)}const Wr={AND:"$and",OR:"$or"},Ks={PATH:"$path",PATTERN:"$val"},Ys=n=>!!(n[Wr.AND]||n[Wr.OR]),ud=n=>!!n[Ks.PATH],dd=n=>!Lt(n)&&qa(n)&&!Ys(n),xo=n=>({[Wr.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function Xa(n,e,{auto:t=!0}={}){const s=i=>{let o=Object.keys(i);const a=ud(i);if(!a&&o.length>1&&!Ys(i))return s(xo(i));if(dd(i)){const u=a?i[Ks.PATH]:o[0],l=a?i[Ks.PATTERN]:i[u];if(!xt(l))throw new Error(Ru(u));const d={keyId:qs(u),pattern:l};return t&&(d.searcher=Gs(l,e)),d}let c={children:[],operator:o[0]};return o.forEach(u=>{const l=i[u];Lt(l)&&l.forEach(d=>{c.children.push(s(d))})}),c};return Ys(n)||(n=xo(n)),s(n)}function hd(n,{ignoreFieldNorm:e=re.ignoreFieldNorm}){n.forEach(t=>{let s=1;t.matches.forEach(({key:i,norm:o,score:a})=>{const c=i?i.weight:null;s*=Math.pow(a===0&&c?Number.EPSILON:a,(c||1)*(e?1:o))}),t.score=s})}function fd(n,e){const t=n.matches;e.matches=[],nt(t)&&t.forEach(s=>{if(!nt(s.indices)||!s.indices.length)return;const{indices:i,value:o}=s;let a={indices:i,value:o};s.key&&(a.key=s.key.src),s.idx>-1&&(a.refIndex=s.idx),e.matches.push(a)})}function pd(n,e){e.score=n.score}function md(n,e,{includeMatches:t=re.includeMatches,includeScore:s=re.includeScore}={}){const i=[];return t&&i.push(fd),s&&i.push(pd),n.map(o=>{const{idx:a}=o,c={item:e[a],refIndex:a};return i.length&&i.forEach(u=>{u(o,c)}),c})}class An{constructor(e,t={},s){this.options={...re,...t},this.options.useExtendedSearch,this._keyStore=new $u(this.options.keys),this.setCollection(e,s)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof xi))throw new Error(Mu);this._myIndex=t||Ga(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){nt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const t=[];for(let s=0,i=this._docs.length;s<i;s+=1){const o=this._docs[s];e(o,s)&&(this.removeAt(s),s-=1,i-=1,t.push(o))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:t=-1}={}){const{includeMatches:s,includeScore:i,shouldSort:o,sortFn:a,ignoreFieldNorm:c}=this.options;let u=xt(e)?xt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return hd(u,{ignoreFieldNorm:c}),o&&u.sort(a),Ha(t)&&t>-1&&(u=u.slice(0,t)),md(u,this._docs,{includeMatches:s,includeScore:i})}_searchStringList(e){const t=Gs(e,this.options),{records:s}=this._myIndex,i=[];return s.forEach(({v:o,i:a,n:c})=>{if(!nt(o))return;const{isMatch:u,score:l,indices:d}=t.searchIn(o);u&&i.push({item:o,idx:a,matches:[{score:l,value:o,norm:c,indices:d}]})}),i}_searchLogical(e){const t=Xa(e,this.options),s=(c,u,l)=>{if(!c.children){const{keyId:h,searcher:f}=c,p=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(u,h),searcher:f});return p&&p.length?[{idx:l,item:u,matches:p}]:[]}const d=[];for(let h=0,f=c.children.length;h<f;h+=1){const p=c.children[h],m=s(p,u,l);if(m.length)d.push(...m);else if(c.operator===Wr.AND)return[]}return d},i=this._myIndex.records,o={},a=[];return i.forEach(({$:c,i:u})=>{if(nt(c)){let l=s(t,c,u);l.length&&(o[u]||(o[u]={idx:u,item:c,matches:[]},a.push(o[u])),l.forEach(({matches:d})=>{o[u].matches.push(...d)}))}}),a}_searchObjectList(e){const t=Gs(e,this.options),{keys:s,records:i}=this._myIndex,o=[];return i.forEach(({$:a,i:c})=>{if(!nt(a))return;let u=[];s.forEach((l,d)=>{u.push(...this._findMatches({key:l,value:a[d],searcher:t}))}),u.length&&o.push({idx:c,item:a,matches:u})}),o}_findMatches({key:e,value:t,searcher:s}){if(!nt(t))return[];let i=[];if(Lt(t))t.forEach(({v:o,i:a,n:c})=>{if(!nt(o))return;const{isMatch:u,score:l,indices:d}=s.searchIn(o);u&&i.push({score:l,key:e,value:o,idx:a,norm:c,indices:d})});else{const{v:o,n:a}=t,{isMatch:c,score:u,indices:l}=s.searchIn(o);c&&i.push({score:u,key:e,value:o,norm:a,indices:l})}return i}}An.version="7.1.0";An.createIndex=Ga;An.parseIndex=Ku;An.config=re;An.parseQuery=Xa;ld(cd);function gd(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M428 224H288a48 48 0 0 1-48-48V36a4 4 0 0 0-4-4h-92a64 64 0 0 0-64 64v320a64 64 0 0 0 64 64h224a64 64 0 0 0 64-64V228a4 4 0 0 0-4-4zm-92 160H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32zm0-80H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32z"},child:[]},{tag:"path",attr:{d:"M419.22 188.59 275.41 44.78a2 2 0 0 0-3.41 1.41V176a16 16 0 0 0 16 16h129.81a2 2 0 0 0 1.41-3.41z"},child:[]}]})(n)}function vd(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M456.69 421.39 362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3zM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8z"},child:[]}]})(n)}function bd(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.12 48 48 141.12 48 256s93.12 208 208 208 208-93.12 208-208S370.88 48 256 48zm-82.33 114.34 105 71a32.5 32.5 0 0 1-37.25 53.26 33.21 33.21 0 0 1-8-8l-71-105a8.13 8.13 0 0 1 11.32-11.32zM256 432c-97 0-176-78.95-176-176a174.55 174.55 0 0 1 53.87-126.72 14.15 14.15 0 1 1 19.64 20.37A146.53 146.53 0 0 0 108.3 256c0 81.44 66.26 147.7 147.7 147.7S403.7 337.44 403.7 256c0-76.67-58.72-139.88-133.55-147v55a14.15 14.15 0 1 1-28.3 0V94.15A14.15 14.15 0 0 1 256 80c97.05 0 176 79 176 176s-78.95 176-176 176z"},child:[]}]})(n)}function yd(){const[n,e]=b([]),[t,s]=b(""),[i,o]=b(1),a=5,[c,u]=b(""),[l,d]=b(null);J(()=>{(async()=>{try{const _=(await W.blog.getBlog()).data;e(_);const w=new An(_,{keys:["title","snippet","markdownContent"],includeMatches:!0,threshold:.4,isCaseSensitive:!1});d(w)}catch(_){const w=_ instanceof Error?_.message:"Fetching blogs failed";s(w),console.error("Error:",_)}})()},[]);const h=c?l?.search(c).map(_=>({post:_.item,matches:_.matches}))||[]:n.map(_=>({post:_,matches:[]}));J(()=>{if(h.length>0){const _=Math.ceil(h.length/a);i>_&&o(1)}},[h.length,a,i]);const f=Math.ceil(h.length/a),p=i*a,m=p-a,g=h.slice(m,p),y=_=>o(_);return t?r(z,{children:r("div",{role:"alert",className:"alert alert-error",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r("span",{children:t})]})}):r(z,{children:r("div",{className:"container mx-auto p-4",children:[r("h1",{className:"text-2xl font-bold mb-4",children:"Blog Posts"}),r("div",{className:"mb-4",children:r("label",{className:"input items-center",children:[r(vd,{className:"opacity-50"}),r("input",{type:"text",className:"grow",placeholder:"Search blog posts...",value:c,onInput:_=>u(_.currentTarget.value)})]})}),r("div",{className:"space-y-6",children:g.map((_,w)=>r(Ja,{postData:_,search:c},w))}),f>1&&r("div",{className:"join mt-6 flex justify-center",children:Array.from({length:f},(_,w)=>w+1).map(_=>r("button",{className:`join-item btn ${i===_?"btn-active":""}`,onClick:()=>y(_),children:_},_))})]})})}function Ja(n){const{postData:e,search:t,post:s}=n;let i;if(e?e.post&&e.matches?(i=e.post,e.matches):i=e:i=s,!i)return null;!i.markdownContent&&i.content&&(i={...i,markdownContent:i.content});const o={ALLOWED_TAGS:["p","br","strong","em","u","a","ul","ol","li","blockquote","code","mark"],ALLOWED_ATTR:["href","target","rel","class"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^&\s]+)$/i},a=t?rs(i.title,t):i.title,c=t?rs(i.snippet,t):i.snippet,u=za.sanitize(c,o),l=i.markdownContent&&t&&i.markdownContent.toLowerCase().includes(t.toLowerCase())?(()=>{const d=i.markdownContent.length>200?i.markdownContent.substring(0,200)+"...":i.markdownContent;return rs(d,t)})():null;return r("div",{class:"card shadow transition-transform ease-in-out delay-0 hover:-translate-y-1 hover:scale-[1.02] duration-300",children:[r("a",{class:"card-body",href:`/blog/${i.id}`,children:[r("h1",{class:"text-4xl font-bold",dangerouslySetInnerHTML:{__html:a}}),r("time",{children:new Date(i.createdAt).toLocaleDateString("en-uk",{year:"numeric",month:"long",day:"numeric"})}),r("div",{class:"prose max-w-full mt-4",dangerouslySetInnerHTML:{__html:u}}),l&&r("div",{class:"mt-4 p-2 bg-neutral text-neutral-content rounded",children:[r("div",{class:"flex items-center gap-2 mb-1",children:[r(gd,{class:"text-lg"}),r("span",{class:"text-sm font-semibold",children:"Content preview:"})]}),r("div",{class:"text-sm",dangerouslySetInnerHTML:{__html:l}})]})]}),r("div",{class:"card-body pt-0",children:r(lu,{id:i.id,likes:i.likes,dislikes:i.dislikes,comments:i.commentCount})})]})}function It(n){if(!n.name)return;const[e,t]=b(""),s=Ce(()=>n.image?Promise.resolve(n.image):W.avatar.getAvatar({name:n.name}).then(i=>i.text()),[n?.image,n?.name]);return J(()=>{let i=!1;return s.then(o=>{i||(console.log("GOT IMAGE URL:",o),t(o))}).catch(o=>{if(!i){const a=o instanceof Error?o.message:"Generating or setting the user's avatar failed";alert(a),console.error("Error:",o)}}),()=>{i=!0}},[s]),r("div",{tabIndex:0,role:"button",className:"btn btn-ghost btn-circle avatar",children:r("div",{className:"w-10 rounded-full",children:r("img",{alt:"USER ICON",src:e})})})}function Za({content:n,createdAt:e,authorId:t,showAcceptButton:s=!1,onAccept:i,showDeleteButton:o=!1,onDelete:a,commentId:c}){const[u,l]=b(null),[d,h]=b(!0);J(()=>{f()},[t]);const f=async()=>{try{h(!0);const y=(await W.profile.getProfileByUserId(t)).data;l(y)}catch(y){console.log("Could not fetch user data:",y)}finally{h(!1)}},p={ALLOWED_TAGS:["p","br","strong","em","u","a","ul","ol","li","blockquote","code"],ALLOWED_ATTR:["href","target","rel"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^&\s]+)$/i},m=za.sanitize(n,p),g=y=>new Date(y).toLocaleDateString("en-uk",{hour:"numeric",minute:"numeric",year:"numeric",month:"numeric",day:"numeric"});return r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow mb-6",children:r("div",{className:"card-body",children:[r("div",{className:"flex justify-between items-start",children:[r("a",{className:"flex items-center gap-3 flex-1",href:`/profile/${t}`,children:[d?r("div",{className:"w-8 h-8 rounded-full bg-gray-300 animate-pulse"}):r(It,{name:u?.name,image:u?.image}),r("div",{className:"flex-1",children:r("div",{className:"flex items-center gap-2",children:[r("span",{className:"font-bold",children:u?u.name:`Deleted User ${t}`}),r("time",{className:"text-sm opacity-70",children:g(e)})]})})]}),r("div",{className:"flex gap-2",children:(s||o)&&c&&r(z,{children:[s&&i&&r("button",{className:"btn btn-sm btn-success",onClick:()=>i(c),title:"Accept comment",children:[r(Kt,{className:"w-4 h-4 mr-1"}),"Accept"]}),o&&a&&r("button",{className:"btn btn-sm btn-error",onClick:()=>a(c),title:"Delete comment",children:[r(wi,{className:"w-4 h-4 mr-1"}),"Delete"]})]})})]}),r("div",{className:"prose max-w-full mt-4",dangerouslySetInnerHTML:{__html:m}})]})})}function _d({id:n}){const[e,t]=b(""),[s,i]=b(null),[o,a]=b(""),c=l=>{t(l.target.value)};function u(){(async()=>{try{if(!e){alert("Comment cannot be empty");return}const l=(await W.blog.postBlogByIdComment(n,{content:e})).data;console.log("Comment post data:",l),alert(l.success?"Successfully posted a comment":"Failed to post a comment")}catch(l){if(l?.status==401){console.log("401 error: redirecting to /login"),window.location.href="/login";return}if(l?.status==429){console.log("421 error: sending alert"),alert("You are posting too many comments, try posting again later.");return}const d=l instanceof Error?l.message:"Posting blog comment failed";a(d),console.error("Error:",l)}})()}return J(()=>{(async()=>{try{const l=(await W.blog.getBlogById(n)).data;i(l)}catch(l){const d=l instanceof Error?l.message:"Fetching blog failed";a(d),console.error("Error:",l)}})()},[n]),o?r(z,{children:r("div",{role:"alert",className:"alert alert-error",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r("span",{children:o})]})}):s?r(z,{children:[r("div",{class:"card card-body max-w-full",children:r("div",{class:"text-center justify-center",children:r(Ja,{postData:s.blog})})}),r("div",{class:"prose max-w-full mx-8",dangerouslySetInnerHTML:{__html:s.blog.content}}),r("div",{class:"mx-8 mb-8",children:[r("div",{className:"divider"}),r("h1",{class:"text-3xl font-bold",children:"Comments"}),r("p",{children:["Comments do not allow any HTML, but they allow Markdown for styling. Once submitted, they need to be reviewed by the site administrator to be displayed for"," ",r("i",{children:r("b",{children:"obvious reasons"})}),"."]}),r("textarea",{id:"comment",class:"min-w-11/12 resize min-h-[10rem] p-4 my-4 rounded-lg outline-1",placeholder:"Write a Markdown comment...",required:!0,onInput:c}),r("div",{children:r("button",{class:"btn rounded-xl bg-blue-600 text-white",onClick:u,children:"Post comment"})}),s.comments.map((l,d)=>r(Za,{content:l.content,createdAt:l.createdAt,authorId:l.authorId}))]})]}):r(z,{children:r("p",{children:"Loading..."})})}function wd(){return r(z,{children:r("div",{className:"h-[100%] grid place-items-center",id:"homescreen",children:r("div",{className:"min-w-1/4 text-center p-8 bg-black/80 text-white",children:[r("h1",{className:"text-8xl font-semibold mb-2",children:["My",r("br",{}),"Website",r("span",{className:"blink",children:"_"})]}),r("p",{children:"Hi"})]})})})}const ec=pn(null);function Nd({children:n}){const[e,t]=b([]),s=kn(i=>{const o=Date.now();t(a=>[...a,{...i,id:o}]),setTimeout(()=>{t(a=>a.filter(c=>c.id!==o))},i.time)},[]);return r(ec.Provider,{value:s,children:[n,r("div",{className:"toast toast-end",children:e.map(i=>r("div",{className:`alert alert-${i.type}`,children:r("span",{children:i.text})},i.id))})]})}function Ci(){const n=Qt(ec);if(!n)throw new Error("useSpawnToast must be used within a ToastProvider");return n}function xd(){const n=Ci(),[e,t]=b(0);return r(z,{children:[r("div",{className:"sm:float-left sm:w-1/2 p-4",children:[r("h1",{class:"text-4xl font-bold mb-3",children:"About"}),r("p",{children:"Hello!"}),r("p",{children:"This is my website, which is yet to be completed."}),r("p",{children:["Check out"," ",r("a",{href:"/projects/pong",class:"text-blue-500",children:"my Rust pong game"})]})]}),r("div",{className:"sm:float-right sm:w-1/2 mx-auto",children:r("img",{src:_a,className:"p-4 w-[80%]"})}),r("button",{class:"btn btn-active",onClick:()=>{n({text:`Number: ${e}`,type:"success",time:3e3}),t(e+1)},children:"Click me"})]})}function Si(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(n)}function Ei(n){return V({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(n)}function Cd(){const[n,e]=b(""),[t,s]=b(""),[i,o]=b(!0),[a,c]=b(!1),[u,l]=b(""),{route:d}=mn(),h=_=>{e(_.target.value)},f=_=>{s(_.target.value)},p=_=>{o(_.target.checked)};async function m(){c(!0);try{await W.auth.apiSignInEmailCreate({email:n,password:t,rememberMe:i}),d("/")}catch(_){const w=_?.error?.message||"ERROR: LOGIN FAILED";l(w),console.log("ERROR:",_?.error?.message||_),c(!1)}}async function g(_){c(!0);try{const w=(await W.auth.socialSignIn({provider:_,callbackURL:new URL("/",window.location.origin).href})).data;window.location.href=w.url;return}catch(w){const O=w?.error?.message||"ERROR: LOGIN FAILED";l(O),console.log("ERROR:",w?.error?.message||w),c(!1)}}function y(_){_.preventDefault(),m()}return r(z,{children:r("div",{className:"mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full",children:r("div",{className:"card-body",children:[r("h1",{className:"text-center text-xl font-bold",children:"Login"}),r("form",{className:"fieldset",onSubmit:y,children:[r("label",{className:"label",children:"Email"}),r("label",{className:"input w-full",children:[r(On,{}),r("input",{type:"text",required:!0,placeholder:"Email",onInput:h})]}),r("label",{className:"label",children:"Password"}),r("label",{className:"input w-full",children:[r(sr,{}),r("input",{type:"password",required:!0,placeholder:"Password",onInput:f})]}),r("label",{className:"label",children:[r("input",{type:"checkbox",onChange:p,checked:i}),"Remember me"]}),r("button",{disabled:a,className:"btn btn-neutral mt-4",type:"submit",children:"Login"}),r("div",{children:r("p",{className:"text-center",children:["Don't have an account?"," ",r("a",{className:"link-accent",href:"/signup",children:"Sign up here"})]})})]}),u&&r("p",{className:"text-error",children:u}),r("div",{className:"divider",children:"Sign In With"}),r("button",{className:"btn text-black bg-white font-bold",onClick:()=>g("google"),children:[r(Ei,{}),"Google"]}),r("button",{className:"btn text-white bg-black font-bold",onClick:()=>g("twitter"),children:[r(Si,{}),"Twitter (X)"]})]})})})}function Co({title:n,description:e,technicalSpecs:t,backgroundImage:s,href:i}){return r("a",{href:i,children:r("div",{className:"h-full card card-side bg-neutral text-neutral-content border border-base-200 overflow-hidden relative group transition-all duration-500 hover:scale-[1.02] hover:shadow-2xl hover:shadow-accent/20 flex",children:[r("div",{className:"card-body p-8 flex flex-col justify-between w-3/5",children:[r("div",{children:[r("h2",{className:"card-title text-3xl mb-3 text-balance",children:n}),r("p",{className:"mb-4 leading-relaxed",children:e}),t&&r("div",{className:"text-sm bg-base-100 text-base-content p-3 rounded border border-base-300 my-4",children:[r("span",{className:"font-semibold text-accent",children:"Technical:"})," ",t]})]}),r("div",{className:"card-actions",children:r("a",{href:i,className:"btn btn-success px-6 py-3 transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary group-hover:shadow-lg group-hover:shadow-primary/50",children:"Play Now"})})]}),r("figure",{className:"w-1/4 relative brightness-75 group-hover:brightness-110 transition-all duration-500",children:[r("div",{className:"absolute inset-0 bg-gradient-to-l from-transparent to-base-100/20"}),r("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${s})`}})]})]})})}function Sd(){return r(z,{children:[r("h1",{class:"text-3xl mx-4 my-8",children:"Projects"}),r("div",{class:"m-8",children:r(Co,{title:"Chess",description:"A multiplayer chess web app built with Rust and Poem-WebSocket, enabling multiplayer gameplay.",technicalSpecs:"Move validation • Real-time multiplayer",backgroundImage:"/chess-board.png",href:"/projects/chess"})}),r("div",{class:"m-8",children:r(Co,{title:"Arithmetic Game",description:"Challenge your mental arithmetic skills in this arithmetic puzzle game.",technicalSpecs:"Dynamic problem generation • Multiplayer leaderboards • Timed solo mode",backgroundImage:"/stragedy-rush.png",href:"/projects/arithmetic"})}),r("a",{href:"https://altus.deno.dev/projects",class:"mx-8 my-4 btn btn-success",children:"More Projects"})]})}const Tt=Object.create(null);Tt.open="0";Tt.close="1";Tt.ping="2";Tt.pong="3";Tt.message="4";Tt.upgrade="5";Tt.noop="6";const Ir=Object.create(null);Object.keys(Tt).forEach(n=>{Ir[Tt[n]]=n});const Qs={type:"error",data:"parser error"},tc=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",nc=typeof ArrayBuffer=="function",rc=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,Ti=({type:n,data:e},t,s)=>tc&&e instanceof Blob?t?s(e):So(e,s):nc&&(e instanceof ArrayBuffer||rc(e))?t?s(e):So(new Blob([e]),s):s(Tt[n]+(e||"")),So=(n,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(n)};function Eo(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let fs;function Ed(n,e){if(tc&&n.data instanceof Blob)return n.data.arrayBuffer().then(Eo).then(e);if(nc&&(n.data instanceof ArrayBuffer||rc(n.data)))return e(Eo(n.data));Ti(n,!1,t=>{fs||(fs=new TextEncoder),e(fs.encode(t))})}const To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Xn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<To.length;n++)Xn[To.charCodeAt(n)]=n;const Td=n=>{let e=n.length*.75,t=n.length,s,i=0,o,a,c,u;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const l=new ArrayBuffer(e),d=new Uint8Array(l);for(s=0;s<t;s+=4)o=Xn[n.charCodeAt(s)],a=Xn[n.charCodeAt(s+1)],c=Xn[n.charCodeAt(s+2)],u=Xn[n.charCodeAt(s+3)],d[i++]=o<<2|a>>4,d[i++]=(a&15)<<4|c>>2,d[i++]=(c&3)<<6|u&63;return l},kd=typeof ArrayBuffer=="function",ki=(n,e)=>{if(typeof n!="string")return{type:"message",data:sc(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Od(n.substring(1),e)}:Ir[t]?n.length>1?{type:Ir[t],data:n.substring(1)}:{type:Ir[t]}:Qs},Od=(n,e)=>{if(kd){const t=Td(n);return sc(t,e)}else return{base64:!0,data:n}},sc=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},ic="",Ad=(n,e)=>{const t=n.length,s=new Array(t);let i=0;n.forEach((o,a)=>{Ti(o,!1,c=>{s[a]=c,++i===t&&e(s.join(ic))})})},Dd=(n,e)=>{const t=n.split(ic),s=[];for(let i=0;i<t.length;i++){const o=ki(t[i],e);if(s.push(o),o.type==="error")break}return s};function Pd(){return new TransformStream({transform(n,e){Ed(n,t=>{const s=t.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}n.data&&typeof n.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let ps;function Sr(n){return n.reduce((e,t)=>e+t.length,0)}function Er(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let s=0;for(let i=0;i<e;i++)t[i]=n[0][s++],s===n[0].length&&(n.shift(),s=0);return n.length&&s<n[0].length&&(n[0]=n[0].slice(s)),t}function Ld(n,e){ps||(ps=new TextDecoder);const t=[];let s=0,i=-1,o=!1;return new TransformStream({transform(a,c){for(t.push(a);;){if(s===0){if(Sr(t)<1)break;const u=Er(t,1);o=(u[0]&128)===128,i=u[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(Sr(t)<2)break;const u=Er(t,2);i=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),s=3}else if(s===2){if(Sr(t)<8)break;const u=Er(t,8),l=new DataView(u.buffer,u.byteOffset,u.length),d=l.getUint32(0);if(d>Math.pow(2,21)-1){c.enqueue(Qs);break}i=d*Math.pow(2,32)+l.getUint32(4),s=3}else{if(Sr(t)<i)break;const u=Er(t,i);c.enqueue(ki(o?u:ps.decode(u),e)),s=0}if(i===0||i>n){c.enqueue(Qs);break}}}})}const oc=4;function Ae(n){if(n)return Id(n)}function Id(n){for(var e in Ae.prototype)n[e]=Ae.prototype[e];return n}Ae.prototype.on=Ae.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};Ae.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};Ae.prototype.off=Ae.prototype.removeListener=Ae.prototype.removeAllListeners=Ae.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s,i=0;i<t.length;i++)if(s=t[i],s===e||s.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+n],this};Ae.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,i=t.length;s<i;++s)t[s].apply(this,e)}return this};Ae.prototype.emitReserved=Ae.prototype.emit;Ae.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};Ae.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Gr=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ut=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Md="arraybuffer";function ac(n,...e){return e.reduce((t,s)=>(n.hasOwnProperty(s)&&(t[s]=n[s]),t),{})}const Rd=ut.setTimeout,Bd=ut.clearTimeout;function Kr(n,e){e.useNativeTimers?(n.setTimeoutFn=Rd.bind(ut),n.clearTimeoutFn=Bd.bind(ut)):(n.setTimeoutFn=ut.setTimeout.bind(ut),n.clearTimeoutFn=ut.clearTimeout.bind(ut))}const Fd=1.33;function jd(n){return typeof n=="string"?$d(n):Math.ceil((n.byteLength||n.size)*Fd)}function $d(n){let e=0,t=0;for(let s=0,i=n.length;s<i;s++)e=n.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function cc(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Ud(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function zd(n){let e={},t=n.split("&");for(let s=0,i=t.length;s<i;s++){let o=t[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class Hd extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Oi extends Ae{constructor(e){super(),this.writable=!1,Kr(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new Hd(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=ki(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=Ud(e);return t.length?"?"+t:""}}class qd extends Oi{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};Dd(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Ad(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=cc()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let lc=!1;try{lc=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Wd=lc;function Vd(){}class Gd extends qd{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class Et extends Ae{constructor(e,t,s){super(),this.createRequest=e,Kr(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=ac(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Et.requestsCount++,Et.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Vd,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Et.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Et.requestsCount=0;Et.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ko);else if(typeof addEventListener=="function"){const n="onpagehide"in ut?"pagehide":"unload";addEventListener(n,ko,!1)}}function ko(){for(let n in Et.requests)Et.requests.hasOwnProperty(n)&&Et.requests[n].abort()}const Kd=(function(){const n=uc({xdomain:!1});return n&&n.responseType!==null})();class Yd extends Gd{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Kd&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Et(uc,this.uri(),e)}}function uc(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Wd))return new XMLHttpRequest}catch{}if(!e)try{return new ut[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const dc=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Qd extends Oi{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=dc?{}:ac(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;Ti(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}i&&Gr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=cc()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ms=ut.WebSocket||ut.MozWebSocket;class Xd extends Qd{createSocket(e,t,s){return dc?new ms(e,t,s):t?new ms(e,t):new ms(e)}doWrite(e,t){this.ws.send(t)}}class Jd extends Oi{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Ld(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),i=Pd();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{s.read().then(({done:c,value:u})=>{c||(this.onPacket(u),o())}).catch(c=>{})};o();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;this._writer.write(s).then(()=>{i&&Gr(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Zd={websocket:Xd,webtransport:Jd,polling:Yd},eh=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,th=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xs(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),s=n.indexOf("]");t!=-1&&s!=-1&&(n=n.substring(0,t)+n.substring(t,s).replace(/:/g,";")+n.substring(s,n.length));let i=eh.exec(n||""),o={},a=14;for(;a--;)o[th[a]]=i[a]||"";return t!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=nh(o,o.path),o.queryKey=rh(o,o.query),o}function nh(n,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function rh(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,o){i&&(t[i]=o)}),t}const Js=typeof addEventListener=="function"&&typeof removeEventListener=="function",Mr=[];Js&&addEventListener("offline",()=>{Mr.forEach(n=>n())},!1);class Wt extends Ae{constructor(e,t){if(super(),this.binaryType=Md,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=Xs(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=Xs(t.host).host);Kr(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=zd(this.opts.query)),Js&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Mr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=oc,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&Wt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",Wt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(t+=jd(i)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Gr(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,i){if(typeof t=="function"&&(i=t,t=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:e,data:t,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Wt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Js&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Mr.indexOf(this._offlineEventListener);s!==-1&&Mr.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Wt.protocol=oc;class sh extends Wt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;Wt.priorWebsocketSuccess=!1;const i=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Wt.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=t.name,this.emitReserved("upgradeError",f)}}))};function o(){s||(s=!0,d(),t.close(),t=null)}const a=h=>{const f=new Error("probe error: "+h);f.transport=t.name,o(),this.emitReserved("upgradeError",f)};function c(){a("transport closed")}function u(){a("socket closed")}function l(h){t&&h.name!==t.name&&o()}const d=()=>{t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",c),this.off("close",u),this.off("upgrading",l)};t.once("open",i),t.once("error",a),t.once("close",c),this.once("close",u),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let ih=class extends sh{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>Zd[i]).filter(i=>!!i)),super(e,s)}};function oh(n,e="",t){let s=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),s=Xs(n)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(t&&t.port===s.port?"":":"+s.port),s}const ah=typeof ArrayBuffer=="function",ch=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,hc=Object.prototype.toString,lh=typeof Blob=="function"||typeof Blob<"u"&&hc.call(Blob)==="[object BlobConstructor]",uh=typeof File=="function"||typeof File<"u"&&hc.call(File)==="[object FileConstructor]";function Ai(n){return ah&&(n instanceof ArrayBuffer||ch(n))||lh&&n instanceof Blob||uh&&n instanceof File}function Rr(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,s=n.length;t<s;t++)if(Rr(n[t]))return!0;return!1}if(Ai(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Rr(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Rr(n[t]))return!0;return!1}function dh(n){const e=[],t=n.data,s=n;return s.data=Zs(t,e),s.attachments=e.length,{packet:s,buffers:e}}function Zs(n,e){if(!n)return n;if(Ai(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let s=0;s<n.length;s++)t[s]=Zs(n[s],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=Zs(n[s],e));return t}return n}function hh(n,e){return n.data=ei(n.data,e),delete n.attachments,n}function ei(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=ei(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=ei(n[t],e));return n}const fh=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ph=5;var pe;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(pe||(pe={}));class mh{constructor(e){this.replacer=e}encode(e){return(e.type===pe.EVENT||e.type===pe.ACK)&&Rr(e)?this.encodeAsBinary({type:e.type===pe.EVENT?pe.BINARY_EVENT:pe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===pe.BINARY_EVENT||e.type===pe.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=dh(e),s=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(s),i}}function Oo(n){return Object.prototype.toString.call(n)==="[object Object]"}class Di extends Ae{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===pe.BINARY_EVENT;s||t.type===pe.BINARY_ACK?(t.type=s?pe.EVENT:pe.ACK,this.reconstructor=new gh(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Ai(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(pe[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===pe.BINARY_EVENT||s.type===pe.BINARY_ACK){const o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(o,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(e.charAt(t+1)==="/"){const o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(o,t)}else s.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const o=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}s.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(Di.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case pe.CONNECT:return Oo(t);case pe.DISCONNECT:return t===void 0;case pe.CONNECT_ERROR:return typeof t=="string"||Oo(t);case pe.EVENT:case pe.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&fh.indexOf(t[0])===-1);case pe.ACK:case pe.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class gh{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=hh(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const vh=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Di,Encoder:mh,get PacketType(){return pe},protocol:ph},Symbol.toStringTag,{value:"Module"}));function vt(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const bh=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class fc extends Ae{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[vt(e,"open",this.onopen.bind(this)),vt(e,"packet",this.onpacket.bind(this)),vt(e,"error",this.onerror.bind(this)),vt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,i,o;if(bh.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:pe.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const d=this.ids++,h=t.pop();this._registerAckCallback(d,h),a.id=d}const c=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,u=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(u?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);t.call(this,new Error("operation has timed out"))},i),a=(...c)=>{this.io.clearTimeoutFn(o),t.apply(this,c)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((s,i)=>{const o=(a,c)=>a?i(a):s(c);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:pe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case pe.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case pe.EVENT:case pe.BINARY_EVENT:this.onevent(e);break;case pe.ACK:case pe.BINARY_ACK:this.onack(e);break;case pe.DISCONNECT:this.ondisconnect();break;case pe.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...i){s||(s=!0,t.packet({type:pe.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:pe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Dn(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}Dn.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=(Math.floor(e*10)&1)==0?n-t:n+t}return Math.min(n,this.max)|0};Dn.prototype.reset=function(){this.attempts=0};Dn.prototype.setMin=function(n){this.ms=n};Dn.prototype.setMax=function(n){this.max=n};Dn.prototype.setJitter=function(n){this.jitter=n};class ti extends Ae{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Kr(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Dn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||vh;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ih(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=vt(t,"open",function(){s.onopen(),e&&e()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},a=vt(t,"error",o);if(this._timeout!==!1){const c=this._timeout,u=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),t.close()},c);this.opts.autoUnref&&u.unref(),this.subs.push(()=>{this.clearTimeoutFn(u)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(vt(e,"ping",this.onping.bind(this)),vt(e,"data",this.ondata.bind(this)),vt(e,"error",this.onerror.bind(this)),vt(e,"close",this.onclose.bind(this)),vt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Gr(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new fc(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const qn={};function er(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=oh(n,e.path||"/socket.io"),s=t.source,i=t.id,o=t.path,a=qn[i]&&o in qn[i].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let u;return c?u=new ti(s,e):(qn[i]||(qn[i]=new ti(s,e)),u=qn[i]),t.query&&!e.query&&(e.query=t.queryKey),u.socket(t.path,e)}Object.assign(er,{Manager:ti,Socket:fc,io:er,connect:er});function yh(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(n);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(n,s[i])&&(t[s[i]]=n[s[i]]);return t}const or="abcdefgh".split(""),Br={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},_h={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},wh={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},Nh=[7,6,5,4,3,2,1,0],xh=[0,1,2,3,4,5,6,7],Ao={wP:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[r("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),r("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),r("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),r("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),r("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),r("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),r("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[r("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),r("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),r("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),r("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[r("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[r("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),r("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),r("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),r("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[r("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),r("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),r("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),r("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),r("circle",{cx:"6",cy:"12",r:"2"}),r("circle",{cx:"14",cy:"9",r:"2"}),r("circle",{cx:"22.5",cy:"8",r:"2"}),r("circle",{cx:"31",cy:"9",r:"2"}),r("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[r("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),r("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),r("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),r("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),r("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),r("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),r("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[r("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),r("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),r("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),r("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),r("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),r("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),r("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),r("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),r("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),r("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),r("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[r("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),r("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),r("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),r("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),r("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[r("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[r("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),r("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),r("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),r("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[r("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),r("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),r("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),r("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),r("circle",{cx:"6",cy:"12",r:"2"}),r("circle",{cx:"14",cy:"9",r:"2"}),r("circle",{cx:"22.5",cy:"8",r:"2"}),r("circle",{cx:"31",cy:"9",r:"2"}),r("circle",{cx:"39",cy:"12",r:"2"}),r("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),r("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[r("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),r("path",{d:"M 12.5,31.5 L 32.5,31.5"}),r("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),r("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:r("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[r("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),r("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),r("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),r("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),r("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),r("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function ni(n,e,t){const s=e/8,i=n==="white"?_h:wh,o=n==="white"?Nh:xh,a=i[t[0]]*s+s/2,c=o[parseInt(t[1],10)-1]*s+s/2;return{x:a,y:c}}function Do(n){let e=!1;return Object.keys(Br).forEach(t=>{n[t]!==Br[t]&&(e=!0)}),Object.keys(n).forEach(t=>{Br[t]!==n[t]&&(e=!0)}),e}function Ch(n,e){const t={removed:{},added:{}};return Object.keys(n).forEach(s=>{e[s]!==n[s]&&(t.removed[s]=n[s])}),Object.keys(e).forEach(s=>{n[s]!==e[s]&&(t.added[s]=e[s])}),t}function Po(n){return n==="start"?Br:typeof n=="string"?Sh(n):n}function Sh(n){if(!Eh(n))return{};n=n.replace(/ .+$/,"");const e=n.split("/"),t={};let s=8;for(let i=0;i<8;i++){const o=e[i].split("");let a=0;for(let c=0;c<o.length;c++)if(o[c].search(/[1-8]/)!==-1){const u=parseInt(o[c],10);a=a+u}else{const u=or[a]+s;t[u]=kh(o[c]),a=a+1}s=s-1}return t}function Eh(n){n=n.replace(/ .+$/,""),n=Th(n);const e=n.split("/");if(e.length!==8)return!1;for(let t=0;t<8;t++)if(e[t].length!==8||e[t].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function Th(n){return n.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function kh(n){return n.toLowerCase()===n?"b"+n.toUpperCase():"w"+n.toUpperCase()}const Oh=(n,e=!0,t,s)=>{const[i,o]=b([]),[a,c]=b([]),[u,l]=b();J(()=>{Array.isArray(n)&&(d(),o(n?.filter(m=>m[0]!==m[1])))},[n]),J(()=>{t?.(a)},[a]);function d(){c([]),l(void 0)}const h=(m,g)=>{e&&l([m,g,s])},f=[...a,...i];return{arrows:f,newArrow:u,clearArrows:d,drawNewArrow:h,setArrows:c,onArrowDrawEnd:(m,g)=>{if(m===g||!e)return;let y;const _=[m,g,s];f.every(([O,x])=>!(O===m&&x===g))?y=[...a,_]:y=a.filter(([O,x])=>!(O===m&&x===g)),l(void 0),c(y)}}},pc=pn({}),Mt=()=>Qt(pc),Ah=gi(({allowDragOutsideBoard:n=!0,animationDuration:e=300,areArrowsAllowed:t=!0,arePiecesDraggable:s=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:o=!1,boardOrientation:a="white",boardWidth:c,children:u,clearPremovesOnRightClick:l=!0,customArrows:d,customArrowColor:h="rgb(255,170,0)",customBoardStyle:f,customNotationStyle:p,customDarkSquareStyle:m={backgroundColor:"#B58863"},customDropSquareStyle:g={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:y={backgroundColor:"#F0D9B5"},customPieces:_,customPremoveDarkSquareStyle:w={backgroundColor:"#A42323"},customPremoveLightSquareStyle:O={backgroundColor:"#BD2828"},customSquare:x="div",customSquareStyles:A,dropOffBoardAction:U="snapback",id:B=0,isDraggablePiece:$=()=>!0,getPositionObject:P=()=>{},onArrowsChange:T=()=>{},onDragOverSquare:j=()=>{},onMouseOutSquare:H=()=>{},onMouseOverSquare:ue=()=>{},onPieceClick:de=()=>{},onPieceDragBegin:ce=()=>{},onPieceDragEnd:k=()=>{},onPieceDrop:F=()=>!0,onPieceDropOffBoard:I=()=>{},onPromotionCheck:Z=(De,Be,Je)=>(Je==="wP"&&De[1]==="7"&&Be[1]==="8"||Je==="bP"&&De[1]==="2"&&Be[1]==="1")&&Math.abs(De.charCodeAt(0)-Be.charCodeAt(0))<=1,onPromotionPieceSelect:R=()=>!0,onSparePieceDrop:L=()=>!0,onSquareClick:fe=()=>{},onSquareRightClick:le=()=>{},position:ge="start",promotionDialogVariant:Q="default",promotionToSquare:G=null,showBoardNotation:te=!0,showPromotionDialog:Te=!1,snapToCursor:qe=!0},ft)=>{const[De,Be]=b(Po(ge)),[Je,Rt]=b({removed:{},added:{}}),[Qe,rt]=b(void 0),[Jt,Ze]=b(Te&&!o),[Bt,kt]=b(null),[vn,Ft]=b(G),[Zt,Ot]=b([]),je=Oe(Zt),[st,Xe]=b(),[bn,yn]=b(Object.assign(Object.assign({},Ao),_)),[_n,yt]=b(!1),At=Oe(),[pt,mt]=b(!1),[et,_t]=b(null);pi(ft,()=>({clearPremoves(me=!0){we(me)}})),J(()=>{yn(Object.assign(Object.assign({},Ao),_))},[_]),J(()=>{Ze(Te),Ft(G)},[G,Te]),J(()=>{var me,D,ve;it();const oe=Po(ge),Se=Ch(De,oe),Ue=((me=Object.keys(Se.added))===null||me===void 0?void 0:me.length)<=2?(ve=(D=Object.entries(Se.added))===null||D===void 0?void 0:D[0])===null||ve===void 0?void 0:ve[1][0]:void 0;if(pt)Be(oe),mt(!1),i&&nn(Ue),At.current&&clearTimeout(At.current);else if(_n)Be(oe),mt(!1),i&&nn(Ue);else{Do(oe)&&Qe!==void 0?rt(Ue):Do(oe)?rt(void 0):rt("b"),Rt(Se),mt(!0);const Ie=setTimeout(()=>{Be(oe),mt(!1),i&&nn(Ue)},e);At.current=Ie}return yt(!1),P(oe),tn(),()=>{clearTimeout(At.current)}},[ge]);const{arrows:jt,newArrow:en,clearArrows:tn,drawNewArrow:$t,onArrowDrawEnd:Ut}=Oh(d,t,T,h);function Pn(me,D,ve,oe){if(me===D)return;if(tn(),i&&pt||i&&(Qe===ve[0]||je.current.filter(Ue=>Ue.piece[0]===ve[0]).length>0)){const Ue=[...je.current];Ue.push({sourceSq:me,targetSq:D,piece:ve}),je.current=Ue,Ot([...Ue]),it();return}if(!i&&pt)return;const Se=Object.assign({},De);yt(!!oe),rt(ve[0]),F.length?F(me,D,ve)||(we(),yt(!1)):(delete Se[me],Se[D]=ve,Be(Se)),it(),P(Se)}function Dt(me){const D=Object.assign({},De);delete D[me],Be(D),P(D)}function nn(me){if(je.current.length===0)return;const D=je.current[0];if(D.piece[0]!==void 0&&D.piece[0]!==me&&F.length)if(rt(D.piece[0]),yt(!0),F(D.sourceSq,D.targetSq,D.piece)){const oe=[...je.current];oe.shift(),je.current=oe,Ot([...oe])}else we()}function Ln(me,D){if(!L(me,D))return;const oe=Object.assign({},De);oe[D]=me,Be(oe),P(oe)}function we(me=!0){me&&rt(void 0),je.current=[],Ot([])}function it(){kt(null),Ft(null),Ze(!1)}function In(me){Xe(me)}function C(me){if(st){if(st===me){Xe(void 0),l&&we(!1),le(me);return}}else Xe(void 0)}function ot(){Xe(void 0)}const $e={allowDragOutsideBoard:n,animationDuration:e,arePiecesDraggable:s,arePremovesAllowed:i,arrows:jt,autoPromoteToQueen:o,boardOrientation:a,boardWidth:c,chessPieces:bn,clearArrows:tn,clearCurrentRightClickDown:ot,currentPosition:De,currentRightClickDown:st,customArrowColor:h,customBoardStyle:f,customDarkSquareStyle:m,customDropSquareStyle:g,customLightSquareStyle:y,customNotationStyle:p,customPremoveDarkSquareStyle:w,customPremoveLightSquareStyle:O,customSquare:x,customSquareStyles:A,deletePieceFromSquare:Dt,drawNewArrow:$t,dropOffBoardAction:U,handleSetPosition:Pn,handleSparePieceDrop:Ln,id:B,isDraggablePiece:$,isWaitingForAnimation:pt,lastPieceColour:Qe,lastSquareDraggedOver:et,newArrow:en,onArrowDrawEnd:Ut,onDragOverSquare:j,onMouseOutSquare:H,onMouseOverSquare:ue,onPieceClick:de,onPieceDragBegin:ce,onPieceDragEnd:k,onPieceDrop:F,onPieceDropOffBoard:I,onPromotionCheck:Z,onPromotionPieceSelect:R,onRightClickDown:In,onRightClickUp:C,onSparePieceDrop:L,onSquareClick:fe,positionDifferences:Je,premoves:Zt,promoteFromSquare:Bt,promoteToSquare:vn,promotionDialogVariant:Q,setLastSquareDraggedOver:_t,setPromoteFromSquare:kt,setPromoteToSquare:Ft,setShowPromoteDialog:Ze,showBoardNotation:te,showPromoteDialog:Jt,snapToCursor:qe};return r(pc.Provider,Object.assign({value:$e},{children:u}))});function Dh({row:n,col:e}){const{boardOrientation:t,boardWidth:s,customDarkSquareStyle:i,customLightSquareStyle:o,customNotationStyle:a}=Mt(),c=o.backgroundColor,u=i.backgroundColor,l=e===0,d=n===7,h=l&&d;function f(){return t==="white"?8-n:n+1}function p(){return t==="black"?or[7-e]:or[e]}function m(){return r(z,{children:[r("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:c}),Io(s,a))},{children:f()})),r("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:c}),Lo(s,a))},{children:p()}))]})}function g(){return r("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?u:c}),Lo(s,a))},{children:p()}))}function y(){return r("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},t==="black"?{color:n%2===0?u:c}:{color:n%2===0?u:c}),Io(s,a))},{children:f()}))}return h?m():d?g():l?y():null}const Lo=(n,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:n/8-n/48,fontSize:n/48},e),Io=(n,e)=>Object.assign({alignSelf:"flex-start",paddingRight:n/8-n/48,fontSize:n/48},e),mc=pn({dragDropManager:void 0});function lt(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Mo=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),Ro=function(){return Math.random().toString(36).substring(7).split("").join(".")},Bo={INIT:"@@redux/INIT"+Ro(),REPLACE:"@@redux/REPLACE"+Ro()};function Ph(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function gc(n,e,t){var s;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(lt(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(lt(1));return t(gc)(n,e)}if(typeof n!="function")throw new Error(lt(2));var i=n,o=e,a=[],c=a,u=!1;function l(){c===a&&(c=a.slice())}function d(){if(u)throw new Error(lt(3));return o}function h(g){if(typeof g!="function")throw new Error(lt(4));if(u)throw new Error(lt(5));var y=!0;return l(),c.push(g),function(){if(y){if(u)throw new Error(lt(6));y=!1,l();var w=c.indexOf(g);c.splice(w,1),a=null}}}function f(g){if(!Ph(g))throw new Error(lt(7));if(typeof g.type>"u")throw new Error(lt(8));if(u)throw new Error(lt(9));try{u=!0,o=i(o,g)}finally{u=!1}for(var y=a=c,_=0;_<y.length;_++){var w=y[_];w()}return g}function p(g){if(typeof g!="function")throw new Error(lt(10));i=g,f({type:Bo.REPLACE})}function m(){var g,y=h;return g={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(lt(11));function O(){w.next&&w.next(d())}O();var x=y(O);return{unsubscribe:x}}},g[Mo]=function(){return this},g}return f({type:Bo.INIT}),s={dispatch:f,subscribe:h,getState:d,replaceReducer:p},s[Mo]=m,s}function ae(n,e,...t){if(Lh()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;s=new Error(e.replace(/%s/g,function(){return t[i++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}function Lh(){return typeof process<"u"&&!0}function Ih(n,e,t){return e.split(".").reduce((s,i)=>s&&s[i]?s[i]:t||null,n)}function Mh(n,e){return n.filter(t=>t!==e)}function vc(n){return typeof n=="object"}function Rh(n,e){const t=new Map,s=o=>{t.set(o,t.has(o)?t.get(o)+1:1)};n.forEach(s),e.forEach(s);const i=[];return t.forEach((o,a)=>{o===1&&i.push(a)}),i}function Bh(n,e){return n.filter(t=>e.indexOf(t)>-1)}const Pi="dnd-core/INIT_COORDS",Yr="dnd-core/BEGIN_DRAG",Li="dnd-core/PUBLISH_DRAG_SOURCE",Qr="dnd-core/HOVER",Xr="dnd-core/DROP",Jr="dnd-core/END_DRAG";function Fo(n,e){return{type:Pi,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const Fh={type:Pi,payload:{clientOffset:null,sourceClientOffset:null}};function jh(n){return function(t=[],s={publishSource:!0}){const{publishSource:i=!0,clientOffset:o,getSourceClientOffset:a}=s,c=n.getMonitor(),u=n.getRegistry();n.dispatch(Fo(o)),$h(t,c,u);const l=Hh(t,c);if(l==null){n.dispatch(Fh);return}let d=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");Uh(a),d=a(l)}n.dispatch(Fo(o,d));const f=u.getSource(l).beginDrag(c,l);if(f==null)return;zh(f),u.pinSource(l);const p=u.getSourceType(l);return{type:Yr,payload:{itemType:p,item:f,sourceId:l,clientOffset:o||null,sourceClientOffset:d||null,isSourcePublic:!!i}}}}function $h(n,e,t){ae(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(s){ae(t.getSource(s),"Expected sourceIds to be registered.")})}function Uh(n){ae(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function zh(n){ae(vc(n),"Item must be an object.")}function Hh(n,e){let t=null;for(let s=n.length-1;s>=0;s--)if(e.canDragSource(n[s])){t=n[s];break}return t}function qh(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){qh(n,i,t[i])})}return n}function Vh(n){return function(t={}){const s=n.getMonitor(),i=n.getRegistry();Gh(s),Qh(s).forEach((a,c)=>{const u=Kh(a,c,i,s),l={type:Xr,payload:{dropResult:Wh({},t,u)}};n.dispatch(l)})}}function Gh(n){ae(n.isDragging(),"Cannot call drop while not dragging."),ae(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function Kh(n,e,t,s){const i=t.getTarget(n);let o=i?i.drop(s,n):void 0;return Yh(o),typeof o>"u"&&(o=e===0?{}:s.getDropResult()),o}function Yh(n){ae(typeof n>"u"||vc(n),"Drop result must either be an object or undefined.")}function Qh(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function Xh(n){return function(){const t=n.getMonitor(),s=n.getRegistry();Jh(t);const i=t.getSourceId();return i!=null&&(s.getSource(i,!0).endDrag(t,i),s.unpinSource()),{type:Jr}}}function Jh(n){ae(n.isDragging(),"Cannot call endDrag while not dragging.")}function ri(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function Zh(n){return function(t,{clientOffset:s}={}){ef(t);const i=t.slice(0),o=n.getMonitor(),a=n.getRegistry(),c=o.getItemType();return nf(i,a,c),tf(i,o,a),rf(i,o,a),{type:Qr,payload:{targetIds:i,clientOffset:s||null}}}}function ef(n){ae(Array.isArray(n),"Expected targetIds to be an array.")}function tf(n,e,t){ae(e.isDragging(),"Cannot call hover while not dragging."),ae(!e.didDrop(),"Cannot call hover after drop.");for(let s=0;s<n.length;s++){const i=n[s];ae(n.lastIndexOf(i)===s,"Expected targetIds to be unique in the passed array.");const o=t.getTarget(i);ae(o,"Expected targetIds to be registered.")}}function nf(n,e,t){for(let s=n.length-1;s>=0;s--){const i=n[s],o=e.getTargetType(i);ri(o,t)||n.splice(s,1)}}function rf(n,e,t){n.forEach(function(s){t.getTarget(s).hover(e,s)})}function sf(n){return function(){if(n.getMonitor().isDragging())return{type:Li}}}function of(n){return{beginDrag:jh(n),publishDragSource:sf(n),hover:Zh(n),drop:Vh(n),endDrag:Xh(n)}}class af{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function s(o){return(...a)=>{const c=o.apply(e,a);typeof c<"u"&&t(c)}}const i=of(this);return Object.keys(i).reduce((o,a)=>{const c=i[a];return o[a]=s(c),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const s=this.store.getState().refCount>0;this.backend&&(s&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!s&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function cf(n,e){return{x:n.x+e.x,y:n.y+e.y}}function bc(n,e){return{x:n.x-e.x,y:n.y-e.y}}function lf(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:s}=n;return!e||!t||!s?null:bc(cf(e,s),t)}function uf(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:bc(e,t)}const tr=[],Ii=[];tr.__IS_NONE__=!0;Ii.__IS_ALL__=!0;function df(n,e){return n===tr?!1:n===Ii||typeof e>"u"?!0:Bh(e,n).length>0}class hf{subscribeToStateChange(e,t={}){const{handlerIds:s}=t;ae(typeof e=="function","listener must be a function."),ae(typeof s>"u"||Array.isArray(s),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const o=()=>{const a=this.store.getState(),c=a.stateId;try{c===i||c===i+1&&!df(a.dirtyHandlerIds,s)||e()}finally{i=c}};return this.store.subscribe(o)}subscribeToOffsetChange(e){ae(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const s=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(s)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return ae(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(ae(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const s=this.registry.getTargetType(e),i=this.getItemType();return ri(s,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(ae(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const s=this.registry.getSourceType(e),i=this.getItemType();return s!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:s}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),o=this.getItemType();if(o&&!ri(i,o))return!1;const a=this.getTargetIds();if(!a.length)return!1;const c=a.indexOf(e);return s?c===a.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return lf(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return uf(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const jo=typeof global<"u"?global:self,yc=jo.MutationObserver||jo.WebKitMutationObserver;function _c(n){return function(){const t=setTimeout(i,0),s=setInterval(i,50);function i(){clearTimeout(t),clearInterval(s),n()}}}function ff(n){let e=1;const t=new yc(n),s=document.createTextNode("");return t.observe(s,{characterData:!0}),function(){e=-e,s.data=e}}const pf=typeof yc=="function"?ff:_c;class mf{enqueueTask(e){const{queue:t,requestFlush:s}=this;t.length||(s(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let s=0,i=e.length-this.index;s<i;s++)e[s]=e[s+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=pf(this.flush),this.requestErrorThrow=_c(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class gf{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class vf{create(e){const t=this.freeTasks,s=t.length?t.pop():new gf(this.onError,i=>t[t.length]=i);return s.task=e,s}constructor(e){this.onError=e,this.freeTasks=[]}}const wc=new mf,bf=new vf(wc.registerPendingError);function yf(n){wc.enqueueTask(bf.create(n))}const Mi="dnd-core/ADD_SOURCE",Ri="dnd-core/ADD_TARGET",Bi="dnd-core/REMOVE_SOURCE",Zr="dnd-core/REMOVE_TARGET";function _f(n){return{type:Mi,payload:{sourceId:n}}}function wf(n){return{type:Ri,payload:{targetId:n}}}function Nf(n){return{type:Bi,payload:{sourceId:n}}}function xf(n){return{type:Zr,payload:{targetId:n}}}function Cf(n){ae(typeof n.canDrag=="function","Expected canDrag to be a function."),ae(typeof n.beginDrag=="function","Expected beginDrag to be a function."),ae(typeof n.endDrag=="function","Expected endDrag to be a function.")}function Sf(n){ae(typeof n.canDrop=="function","Expected canDrop to be a function."),ae(typeof n.hover=="function","Expected hover to be a function."),ae(typeof n.drop=="function","Expected beginDrag to be a function.")}function si(n,e){if(e&&Array.isArray(n)){n.forEach(t=>si(t,!1));return}ae(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var dt;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(dt||(dt={}));let Ef=0;function Tf(){return Ef++}function kf(n){const e=Tf().toString();switch(n){case dt.SOURCE:return`S${e}`;case dt.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function $o(n){switch(n[0]){case"S":return dt.SOURCE;case"T":return dt.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function Uo(n,e){const t=n.entries();let s=!1;do{const{done:i,value:[,o]}=t.next();if(o===e)return!0;s=!!i}while(!s);return!1}class Of{addSource(e,t){si(e),Cf(t);const s=this.addHandler(dt.SOURCE,e,t);return this.store.dispatch(_f(s)),s}addTarget(e,t){si(e,!0),Sf(t);const s=this.addHandler(dt.TARGET,e,t);return this.store.dispatch(wf(s)),s}containsHandler(e){return Uo(this.dragSources,e)||Uo(this.dropTargets,e)}getSource(e,t=!1){return ae(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return ae(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return ae(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return ae(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return $o(e)===dt.SOURCE}isTargetId(e){return $o(e)===dt.TARGET}removeSource(e){ae(this.getSource(e),"Expected an existing source."),this.store.dispatch(Nf(e)),yf(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){ae(this.getTarget(e),"Expected an existing target."),this.store.dispatch(xf(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);ae(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){ae(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,s){const i=kf(e);return this.types.set(i,t),e===dt.SOURCE?this.dragSources.set(i,s):e===dt.TARGET&&this.dropTargets.set(i,s),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Af=(n,e)=>n===e;function Df(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function Pf(n,e,t=Af){if(n.length!==e.length)return!1;for(let s=0;s<n.length;++s)if(!t(n[s],e[s]))return!1;return!0}function Lf(n=tr,e){switch(e.type){case Qr:break;case Mi:case Ri:case Zr:case Bi:return tr;case Yr:case Li:case Jr:case Xr:default:return Ii}const{targetIds:t=[],prevTargetIds:s=[]}=e.payload,i=Rh(t,s);if(!(i.length>0||!Pf(t,s)))return tr;const a=s[s.length-1],c=t[t.length-1];return a!==c&&(a&&i.push(a),c&&i.push(c)),i}function If(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Mf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){If(n,i,t[i])})}return n}const zo={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Rf(n=zo,e){const{payload:t}=e;switch(e.type){case Pi:case Yr:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case Qr:return Df(n.clientOffset,t.clientOffset)?n:Mf({},n,{clientOffset:t.clientOffset});case Jr:case Xr:return zo;default:return n}}function Bf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){Bf(n,i,t[i])})}return n}const Ff={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function jf(n=Ff,e){const{payload:t}=e;switch(e.type){case Yr:return wn({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case Li:return wn({},n,{isSourcePublic:!0});case Qr:return wn({},n,{targetIds:t.targetIds});case Zr:return n.targetIds.indexOf(t.targetId)===-1?n:wn({},n,{targetIds:Mh(n.targetIds,t.targetId)});case Xr:return wn({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case Jr:return wn({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function $f(n=0,e){switch(e.type){case Mi:case Ri:return n+1;case Bi:case Zr:return n-1;default:return n}}function Uf(n=0){return n+1}function zf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Hf(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){zf(n,i,t[i])})}return n}function qf(n={},e){return{dirtyHandlerIds:Lf(n.dirtyHandlerIds,{type:e.type,payload:Hf({},e.payload,{prevTargetIds:Ih(n,"dragOperation.targetIds",[])})}),dragOffset:Rf(n.dragOffset,e),refCount:$f(n.refCount,e),dragOperation:jf(n.dragOperation,e),stateId:Uf(n.stateId)}}function Wf(n,e=void 0,t={},s=!1){const i=Vf(s),o=new hf(i,new Of(i)),a=new af(i,o),c=n(a,e,t);return a.receiveBackend(c),a}function Vf(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return gc(qf,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Gf(n,e){if(n==null)return{};var t=Kf(n,e),s,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(i=0;i<o.length;i++)s=o[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(t[s]=n[s])}return t}function Kf(n,e){if(n==null)return{};var t={},s=Object.keys(n),i,o;for(o=0;o<s.length;o++)i=s[o],!(e.indexOf(i)>=0)&&(t[i]=n[i]);return t}let Ho=0;const Fr=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Yf=Ta(function(e){var{children:t}=e,s=Gf(e,["children"]);const[i,o]=Qf(s);return J(()=>{if(o){const a=Nc();return++Ho,()=>{--Ho===0&&(a[Fr]=null)}}},[]),r(mc.Provider,{value:i,children:t})});function Qf(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=Xf(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function Xf(n,e=Nc(),t,s){const i=e;return i[Fr]||(i[Fr]={dragDropManager:Wf(n,e,t,s)}),i[Fr]}function Nc(){return typeof global<"u"?global:window}var Jf=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,i,o;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=s;i--!==0;){var a=o[i];if(!n(e[a],t[a]))return!1}return!0}return e!==e&&t!==t};const fn=typeof window<"u"?Yt:J;function xc(n,e,t){const[s,i]=b(()=>e(n)),o=kn(()=>{const a=e(n);Jf(s,a)||(i(a),t&&t())},[s,n,t]);return fn(o),[s,o]}function Zf(n,e,t){const[s,i]=xc(n,e,t);return fn(function(){const a=n.getHandlerId();if(a!=null)return n.subscribeToStateChange(i,{handlerIds:[a]})},[n,i]),s}function Cc(n,e,t){return Zf(e,n||(()=>({})),()=>t.reconnect())}function Sc(n,e){const t=[...e||[]];return e==null&&typeof n!="function"&&t.push(n),Ce(()=>typeof n=="function"?n():n,t)}function ep(n){return Ce(()=>n.hooks.dragSource(),[n])}function tp(n){return Ce(()=>n.hooks.dragPreview(),[n])}let gs=!1,vs=!1;class np{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){ae(!gs,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return gs=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{gs=!1}}isDragging(){if(!this.sourceId)return!1;ae(!vs,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return vs=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{vs=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let bs=!1;class rp{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;ae(!bs,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return bs=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{bs=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function sp(n,e,t){const s=t.getRegistry(),i=s.addTarget(n,e);return[i,()=>s.removeTarget(i)]}function ip(n,e,t){const s=t.getRegistry(),i=s.addSource(n,e);return[i,()=>s.removeSource(i)]}function ii(n,e,t,s){let i;if(i!==void 0)return!!i;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const o=Object.keys(n),a=Object.keys(e);if(o.length!==a.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<o.length;u++){const l=o[u];if(!c(l))return!1;const d=n[l],h=e[l];if(i=void 0,i===!1||i===void 0&&d!==h)return!1}return!0}function oi(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function op(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function ap(n){return(e=null,t=null)=>{if(!hr(e)){const o=e;return n(o,t),o}const s=e;return op(s),cp(s,t?o=>n(o,t):n)}}function Ec(n){const e={};return Object.keys(n).forEach(t=>{const s=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const i=ap(s);e[t]=()=>i}}),e}function qo(n,e){typeof n=="function"?n(e):n.current=e}function cp(n,e){const t=n.ref;return ae(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?Fs(n,{ref:s=>{qo(t,s),qo(e,s)}}):Fs(n,{ref:e})}class lp{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,s=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(s&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ii(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ii(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Ec({dragSource:(t,s)=>{this.clearDragSource(),this.dragSourceOptions=s||null,oi(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,s)=>{this.clearDragPreview(),this.dragPreviewOptions=s||null,oi(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class up{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ii(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Ec({dropTarget:(t,s)=>{this.clearDropTarget(),this.dropTargetOptions=s,oi(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function gn(){const{dragDropManager:n}=Qt(mc);return ae(n!=null,"Expected drag drop context"),n}function dp(n,e){const t=gn(),s=Ce(()=>new lp(t.getBackend()),[t]);return fn(()=>(s.dragSourceOptions=n||null,s.reconnect(),()=>s.disconnectDragSource()),[s,n]),fn(()=>(s.dragPreviewOptions=e||null,s.reconnect(),()=>s.disconnectDragPreview()),[s,e]),s}function hp(){const n=gn();return Ce(()=>new np(n),[n])}class fp{beginDrag(){const e=this.spec,t=this.monitor;let s=null;return typeof e.item=="object"?s=e.item:typeof e.item=="function"?s=e.item(t):s={},s??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const s=this.spec,i=this.monitor,{isDragging:o}=s;return o?o(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,s=this.connector,{end:i}=e;i&&i(t.getItem(),t),s.reconnect()}constructor(e,t,s){this.spec=e,this.monitor=t,this.connector=s}}function pp(n,e,t){const s=Ce(()=>new fp(n,e,t),[e,t]);return J(()=>{s.spec=n},[n]),s}function mp(n){return Ce(()=>{const e=n.type;return ae(e!=null,"spec.type must be defined"),e},[n])}function gp(n,e,t){const s=gn(),i=pp(n,e,t),o=mp(n);fn(function(){if(o!=null){const[c,u]=ip(o,i,s);return e.receiveHandlerId(c),t.receiveHandlerId(c),u}},[s,e,t,i,o])}function vp(n,e){const t=Sc(n,e);ae(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const s=hp(),i=dp(t.options,t.previewOptions);return gp(t,s,i),[Cc(t.collect,s,i),ep(i),tp(i)]}function bp(n){const t=gn().getMonitor(),[s,i]=xc(t,n);return J(()=>t.subscribeToOffsetChange(i)),J(()=>t.subscribeToStateChange(i)),s}function yp(n){return Ce(()=>n.hooks.dropTarget(),[n])}function _p(n){const e=gn(),t=Ce(()=>new up(e.getBackend()),[e]);return fn(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function wp(){const n=gn();return Ce(()=>new rp(n),[n])}function Np(n){const{accept:e}=n;return Ce(()=>(ae(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class xp{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function Cp(n,e){const t=Ce(()=>new xp(n,e),[e]);return J(()=>{t.spec=n},[n]),t}function Sp(n,e,t){const s=gn(),i=Cp(n,e),o=Np(n);fn(function(){const[c,u]=sp(o,i,s);return e.receiveHandlerId(c),t.receiveHandlerId(c),u},[s,e,i,t,o.map(a=>a.toString()).join("|")])}function Ep(n,e){const t=Sc(n,e),s=wp(),i=_p(t.options);return Sp(t,s,i),[Cc(t.collect,s,i),yp(i)]}function Tc(n){let e=null;return()=>(e==null&&(e=n()),e)}function Tp(n,e){return n.filter(t=>t!==e)}function kp(n,e){const t=new Set,s=o=>t.add(o);n.forEach(s),e.forEach(s);const i=[];return t.forEach(o=>i.push(o)),i}class Op{enter(e){const t=this.entered.length,s=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=kp(this.entered.filter(s),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=Tp(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Ap{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(s=>{const i=this.config.exposeProperties[s];i!=null&&(t[s]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const kc="__NATIVE_FILE__",Oc="__NATIVE_URL__",Ac="__NATIVE_TEXT__",Dc="__NATIVE_HTML__";var Wo=Object.freeze({__proto__:null,FILE:kc,HTML:Dc,TEXT:Ac,URL:Oc});function ys(n,e,t){const s=e.reduce((i,o)=>i||n.getData(o),"");return s??t}const ai={[kc]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[Dc]:{exposeProperties:{html:(n,e)=>ys(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[Oc]:{exposeProperties:{urls:(n,e)=>ys(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[Ac]:{exposeProperties:{text:(n,e)=>ys(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function Dp(n,e){const t=ai[n];if(!t)throw new Error(`native type ${n} has no configuration`);const s=new Ap(t);return s.loadDataTransfer(e),s}function _s(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(ai).filter(t=>{const s=ai[t];return s?.matchesTypes?s.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const Pp=Tc(()=>/firefox/i.test(navigator.userAgent)),Pc=Tc(()=>!!window.safari);class Vo{interpolate(e){const{xs:t,ys:s,c1s:i,c2s:o,c3s:a}=this;let c=t.length-1;if(e===t[c])return s[c];let u=0,l=a.length-1,d;for(;u<=l;){d=Math.floor(.5*(u+l));const p=t[d];if(p<e)u=d+1;else if(p>e)l=d-1;else return s[d]}c=Math.max(0,l);const h=e-t[c],f=h*h;return s[c]+i[c]*h+o[c]*f+a[c]*h*f}constructor(e,t){const{length:s}=e,i=[];for(let p=0;p<s;p++)i.push(p);i.sort((p,m)=>e[p]<e[m]?-1:1);const o=[],a=[];let c,u;for(let p=0;p<s-1;p++)c=e[p+1]-e[p],u=t[p+1]-t[p],o.push(c),a.push(u/c);const l=[a[0]];for(let p=0;p<o.length-1;p++){const m=a[p],g=a[p+1];if(m*g<=0)l.push(0);else{c=o[p];const y=o[p+1],_=c+y;l.push(3*_/((_+y)/m+(_+c)/g))}}l.push(a[a.length-1]);const d=[],h=[];let f;for(let p=0;p<l.length-1;p++){f=a[p];const m=l[p],g=1/o[p],y=m+l[p+1]-f-f;d.push((f-m-y)*g),h.push(y*g*g)}this.xs=e,this.ys=t,this.c1s=l,this.c2s=d,this.c3s=h}}const Lp=1;function Lc(n){const e=n.nodeType===Lp?n:n.parentElement;if(!e)return null;const{top:t,left:s}=e.getBoundingClientRect();return{x:s,y:t}}function Tr(n){return{x:n.clientX,y:n.clientY}}function Ip(n){var e;return n.nodeName==="IMG"&&(Pp()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function Mp(n,e,t,s){let i=n?e.width:t,o=n?e.height:s;return Pc()&&n&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function Rp(n,e,t,s,i){const o=Ip(e),c=Lc(o?n:e),u={x:t.x-c.x,y:t.y-c.y},{offsetWidth:l,offsetHeight:d}=n,{anchorX:h,anchorY:f}=s,{dragPreviewWidth:p,dragPreviewHeight:m}=Mp(o,e,l,d),g=()=>{let U=new Vo([0,.5,1],[u.y,u.y/d*m,u.y+m-d]).interpolate(f);return Pc()&&o&&(U+=(window.devicePixelRatio-1)*m),U},y=()=>new Vo([0,.5,1],[u.x,u.x/l*p,u.x+p-l]).interpolate(h),{offsetX:_,offsetY:w}=i,O=_===0||_,x=w===0||w;return{x:O?_:y(),y:x?w:g()}}let Bp=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function Fp(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Go(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},s=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),s.forEach(function(i){Fp(n,i,t[i])})}return n}class jp{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,s){return this.sourcePreviewNodeOptions.set(e,s),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,s){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,s);const i=a=>this.handleDragStart(a,e),o=a=>this.handleSelectStart(a);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const s=a=>this.handleDragEnter(a,e),i=a=>this.handleDragOver(a,e),o=a=>this.handleDrop(a,e);return t.addEventListener("dragenter",s),t.addEventListener("dragover",i),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",s),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Go({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return Go({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Wo).some(t=>Wo[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=Dp(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var s;return(s=this.rootElement)===null||s===void 0?void 0:s.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,s){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&Lc(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const a=Tr(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:c}=i,u=_s(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){const d=this.monitor.getSourceId(),h=this.sourceNodes.get(d),f=this.sourcePreviewNodes.get(d)||h;if(f){const{anchorX:p,anchorY:m,offsetX:g,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),O=Rp(h,f,a,{anchorX:p,anchorY:m},{offsetX:g,offsetY:y});c.setDragImage(f,O.x,O.y)}}try{c?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:l}=this.getCurrentSourcePreviewNodeOptions();l?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(c&&!c.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:c}=i,u=_s(c);u&&this.beginDragNativeItem(u,c)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,o.length>0&&this.actions.hover(o,{clientOffset:Tr(i)}),o.some(c=>this.monitor.canDropOnTarget(c))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=Tr(i),this.scheduleHover(o),(o||[]).some(c=>this.monitor.canDropOnTarget(c))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;i.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}else _s(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:Tr(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const o=i.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(i.preventDefault(),o.dragDrop()))},this.options=new Bp(t,s),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new Op(this.isNodeInDocument)}}let kr;function $p(){return kr||(kr=new Image,kr.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),kr}const Up=function(e,t,s){return new jp(e,t,s)};function Ko({isPremovedPiece:n=!1,piece:e,square:t,squares:s}){const{animationDuration:i,arePiecesDraggable:o,boardWidth:a,boardOrientation:c,chessPieces:u,currentPosition:l,deletePieceFromSquare:d,dropOffBoardAction:h,id:f,isDraggablePiece:p,isWaitingForAnimation:m,onPieceClick:g,onPieceDragBegin:y,onPieceDragEnd:_,onPieceDropOffBoard:w,onPromotionCheck:O,positionDifferences:x}=Mt(),[A,U]=b({opacity:1,zIndex:5,touchAction:"none",cursor:o&&p({piece:e,sourceSquare:t})?"-webkit-grab":"default"}),[{canDrag:B,isDragging:$},P,T]=vp(()=>({type:"piece",item:()=>(y(e,t),{piece:e,square:t,id:f}),end:(H,ue)=>{_(e,t),!ue.didDrop()&&(h==="trash"&&d(t),w?.(t,e))},collect:H=>({canDrag:p({piece:e,sourceSquare:t}),isDragging:!!H.isDragging()})}),[e,t,l,f]);T($p(),{captureDraggingState:!0}),J(()=>{U(H=>Object.assign(Object.assign({},H),{opacity:$?0:1}))},[$]),J(()=>{var H;const ue=(H=x.removed)===null||H===void 0?void 0:H[t];if(!x.added||!ue)return;const de=Object.entries(x.added).find(([ce,k])=>k===ue||O(t,ce,ue));if(m&&ue&&de&&!n){const ce=t,k=de[0];if(ce&&k){const F=a/8;U(I=>Object.assign(Object.assign({},I),{transform:`translate(${(c==="black"?-1:1)*(k.charCodeAt(0)-ce.charCodeAt(0))*F}px, ${(c==="black"?-1:1)*(Number(ce[1])-Number(k[1]))*F}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[x]),J(()=>{const{sourceSq:H}=j();H&&U(ue=>Object.assign(Object.assign({},ue),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[l]),J(()=>{U(H=>Object.assign(Object.assign({},H),{cursor:o&&p({piece:e,sourceSquare:t})?"-webkit-grab":"default"}))},[t,l,o]);function j(){return{sourceSq:s[t]}}return r("div",Object.assign({ref:o&&B?P:null,onClick:()=>g(e,t),"data-piece":e,style:A},{children:typeof u[e]=="function"?u[e]({squareWidth:a/8,isDragging:$,square:t}):r("svg",Object.assign({viewBox:"1 1 43 43",width:a/8,height:a/8,style:{display:"block"}},{children:r("g",{children:u[e]})}))}))}function zp({square:n,squareColor:e,setSquares:t,squareHasPremove:s,children:i}){const o=Oe(null),{autoPromoteToQueen:a,boardWidth:c,boardOrientation:u,clearArrows:l,currentPosition:d,currentRightClickDown:h,customBoardStyle:f,customDarkSquareStyle:p,customDropSquareStyle:m,customLightSquareStyle:g,customPremoveDarkSquareStyle:y,customPremoveLightSquareStyle:_,customSquare:w,customSquareStyles:O,drawNewArrow:x,handleSetPosition:A,handleSparePieceDrop:U,isWaitingForAnimation:B,lastPieceColour:$,lastSquareDraggedOver:P,onArrowDrawEnd:T,onDragOverSquare:j,onMouseOutSquare:H,onMouseOverSquare:ue,onPieceDrop:de,onPromotionCheck:ce,onRightClickDown:k,onRightClickUp:F,onSquareClick:I,setLastSquareDraggedOver:Z,setPromoteFromSquare:R,setPromoteToSquare:L,setShowPromoteDialog:fe}=Mt(),[{isOver:le},ge]=Ep(()=>({accept:"piece",drop:Q,collect:te=>({isOver:!!te.isOver()})}),[n,d,de,B,$]);function Q(te){if(te.isSpare){U(te.piece,n);return}ce(te.square,n,te.piece)?a?A(te.square,n,te.piece[0]==="w"?"wQ":"bQ"):(R(te.square),L(n),fe(!0)):A(te.square,n,te.piece,!0)}J(()=>{if(o.current){const{x:te,y:Te}=o.current.getBoundingClientRect();t(qe=>Object.assign(Object.assign({},qe),{[n]:{x:te,y:Te}}))}},[c,u]);const G=Object.assign(Object.assign(Object.assign(Object.assign({},Hp(n,u,f)),e==="black"?p:g),s&&(e==="black"?y:_)),le&&m);return r("div",Object.assign({ref:ge,style:G,"data-square-color":e,"data-square":n,onTouchMove:te=>{var Te;const qe=te.touches[0],ft=document.elementsFromPoint(qe.clientX,qe.clientY),De=(Te=ft?.find(Be=>Be.getAttribute("data-square")))===null||Te===void 0?void 0:Te.getAttribute("data-square");De&&De!==P&&(Z(De),j(De))},onMouseOver:te=>{te.buttons===2&&h&&x(h,n),!(te.relatedTarget&&te.currentTarget.contains(te.relatedTarget))&&ue(n)},onMouseOut:te=>{te.relatedTarget&&te.currentTarget.contains(te.relatedTarget)||H(n)},onMouseDown:te=>{te.button===2&&k(n)},onMouseUp:te=>{te.button===2&&(h&&T(h,n),F(n))},onDragEnter:()=>j(n),onClick:()=>{const te=d[n];I(n,te),l()},onContextMenu:te=>{te.preventDefault()}},{children:typeof w=="string"?r(w,Object.assign({ref:o,style:Object.assign(Object.assign(Object.assign({},Qo(c)),Yo),!s&&O?.[n])},{children:i})):r(w,Object.assign({ref:o,square:n,squareColor:e,style:Object.assign(Object.assign(Object.assign({},Qo(c)),Yo),!s&&O?.[n])},{children:i}))}))}const Yo={display:"flex",justifyContent:"center"},Qo=n=>({width:n/8,height:n/8}),Hp=(n,e,t)=>t?.borderRadius?n==="a1"?e==="white"?{borderBottomLeftRadius:t.borderRadius}:{borderTopRightRadius:t.borderRadius}:n==="a8"?e==="white"?{borderTopLeftRadius:t.borderRadius}:{borderBottomRightRadius:t.borderRadius}:n==="h1"?e==="white"?{borderBottomRightRadius:t.borderRadius}:{borderTopLeftRadius:t.borderRadius}:n==="h8"?e==="white"?{borderTopRightRadius:t.borderRadius}:{borderBottomLeftRadius:t.borderRadius}:{}:{};function qp(){const[n,e]=b({}),{arePremovesAllowed:t,boardOrientation:s,boardWidth:i,currentPosition:o,id:a,premoves:c,showBoardNotation:u}=Mt(),l=Ce(()=>{const d=[];return t?(c.forEach((h,f)=>{const{sourceSq:p,targetSq:m,piece:g}=h,y=d.find(_=>{var w;return _.piece===g&&((w=_.premovesRoute.at(-1))===null||w===void 0?void 0:w.targetSq)===p});y?y.premovesRoute.push({sourceSq:p,targetSq:m,index:f}):d.push({piece:g,premovesRoute:[{sourceSq:p,targetSq:m,index:f}]})}),d):[]},[c]);return r("div",Object.assign({"data-boardid":a},{children:[...Array(8)].map((d,h)=>r("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((f,p)=>{const m=s==="black"?or[7-p]+(h+1):or[p]+(8-h),g=p%2===h%2?"white":"black",y=c.find(w=>w.sourceSq===m||w.targetSq===m),_=l.filter(({premovesRoute:w})=>{var O;return((O=w.at(-1))===null||O===void 0?void 0:O.targetSq)===m}).sort((w,O)=>{var x,A;return((x=O.premovesRoute.at(-1))===null||x===void 0?void 0:x.index)-((A=w.premovesRoute.at(-1))===null||A===void 0?void 0:A.index)}).at(0);return r(zp,Object.assign({square:m,squareColor:g,setSquares:e,squareHasPremove:!!y},{children:[!y&&o[m]&&r(Ko,{piece:o[m],square:m,squares:n}),_&&r(Ko,{isPremovedPiece:!0,piece:_.piece,square:m,squares:n}),u&&r(Dh,{row:h,col:p})]}),`${p}${h}`)})}),h.toString()))}))}const Wp=()=>{const{arrows:n,newArrow:e,boardOrientation:t,boardWidth:s,customArrowColor:i}=Mt(),o=[...n,e].filter(Boolean);return r("svg",Object.assign({width:s,height:s,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:o.map((a,c)=>{const[u,l,d]=a;if(u===l)return null;const h=ni(t,s,u),f=ni(t,s,l);let p=s/32;const m=c===n.length;n.some(O=>O[0]!==u&&O[1]===l)&&!m&&(p=s/16);const g=f.x-h.x,y=f.y-h.y,_=Math.hypot(y,g),w={x:h.x+g*(_-p)/_,y:h.y+y*(_-p)/_};return r(z,{children:[r("marker",Object.assign({id:`arrowhead-${c}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:r("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:d??i})})),r("line",{x1:h.x,y1:h.y,x2:w.x,y2:w.y,opacity:m?"0.5":"0.65",stroke:d??i,strokeWidth:m?.9*s/40:s/40,markerEnd:`url(#arrowhead-${c})`})]},`${u}-${l}${m?"-active":""}`)})}))};function Vp({option:n}){const[e,t]=b(!1),{boardWidth:s,chessPieces:i,customDarkSquareStyle:o,customLightSquareStyle:a,handleSetPosition:c,onPromotionPieceSelect:u,promoteFromSquare:l,promoteToSquare:d,promotionDialogVariant:h}=Mt(),f=()=>{switch(n[1]){case"Q":return o.backgroundColor;case"R":return a.backgroundColor;case"N":return h==="default"?a.backgroundColor:o.backgroundColor;case"B":return h==="default"?o.backgroundColor:a.backgroundColor}};return r("div",Object.assign({onClick:()=>{u(n,l??void 0,d??void 0)&&c(l,d,n,!0)},onMouseOver:()=>t(!0),onMouseOut:()=>t(!1),"data-piece":n,style:{cursor:"pointer",backgroundColor:e?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[n]=="function"?r("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[n]({squareWidth:s/8,isDragging:!1})})):r("svg",Object.assign({viewBox:"1 1 43 43",width:s/8,height:s/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:r("g",{children:i[n]})}))}))}function Gp(){const{boardOrientation:n,boardWidth:e,promotionDialogVariant:t,promoteToSquare:s}=Mt(),i=s?.[1]==="1"?"b":"w",o=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],a={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},c=ni(n,e,s||"a8");return r("div",Object.assign({style:Object.assign({position:"absolute",top:`${c?.y}px`,left:`${c?.x}px`,zIndex:1e3},a[t]),title:"Choose promotion piece"},{children:o.map(u=>r(Vp,{option:u},u))}))}const Kp={whiteKing:r("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:r("g",{children:r("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function Yp({children:n}){try{return r(z,{children:n})}catch(e){return console.log(e),r(Ic,{showError:!0})}}function Ic({showError:n=!1}){return r("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[r("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:Kp.whiteKing})),n&&r("h1",{children:"Something went wrong"})]}))}function Qp(){const n=Oe(null),{boardWidth:e,clearCurrentRightClickDown:t,onPromotionPieceSelect:s,setShowPromoteDialog:i,showPromoteDialog:o,customBoardStyle:a}=Mt();return J(()=>{function c(u){n.current&&!n.current.contains(u.target)&&t()}return document.addEventListener("mouseup",c),()=>{document.removeEventListener("mouseup",c)}},[]),e?r("div",Object.assign({style:{perspective:"1000px"}},{children:r("div",Object.assign({ref:n,style:Object.assign(Object.assign({position:"relative"},Xp(e)),a)},{children:[r(qp,{}),r(Wp,{}),o&&r(z,{children:[r("div",{onClick:()=>{i(!1),s?.()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),r(Gp,{})]})]}))})):r(Ic,{})}const Xp=n=>({cursor:"default",height:n,width:n});var Vt;(function(n){n.mouse="mouse",n.touch="touch",n.keyboard="keyboard"})(Vt||(Vt={}));class Jp{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,s,i;return(i=(s=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&s!==void 0?s:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,t,s,i;return(i=(s=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&s!==void 0?s:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}function Zp(n,e,t,s){return Math.sqrt(Math.pow(Math.abs(t-n),2)+Math.pow(Math.abs(s-e),2))}function e1(n,e,t,s,i){if(!i)return!1;const o=Math.atan2(s-e,t-n)*180/Math.PI+180;for(let a=0;a<i.length;++a){const c=i[a];if(c&&(c.start==null||o>=c.start)&&(c.end==null||o<=c.end))return!0}return!1}const t1={Left:1},n1={Left:0};function ws(n){return n.button===void 0||n.button===n1.Left}function r1(n){return n.buttons===void 0||(n.buttons&t1.Left)===0}function Mc(n){return!!n.targetTouches}const s1=1;function i1(n){const e=n.nodeType===s1?n:n.parentElement;if(!e)return;const{top:t,left:s}=e.getBoundingClientRect();return{x:s,y:t}}function o1(n,e){if(n.targetTouches.length===1)return Vr(n.targetTouches[0]);if(e&&n.touches.length===1&&n.touches[0].target===e.target)return Vr(n.touches[0])}function Vr(n,e){return Mc(n)?o1(n,e):{x:n.clientX,y:n.clientY}}const Xo=(()=>{let n=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return n=!0,!0}}))}catch{}return n})(),Wn={[Vt.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Vt.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Vt.keyboard]:{keydown:"keydown"}};class nr{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(ae(!nr.isSetUp,"Cannot have two Touch backends at the same time."),nr.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(nr.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,s,i=!1){const o=Xo?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(a){const c=Wn[a][t];c&&e.addEventListener(c,s,o)})}removeEventListener(e,t,s,i=!1){const o=Xo?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(a){const c=Wn[a][t];c&&e.removeEventListener(c,s,o)})}connectDragSource(e,t){const s=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",s),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",s)}}connectDragPreview(e,t,s){return this.sourcePreviewNodeOptions.set(e,s),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const s=this.options.rootElement;if(!this.document||!s)return()=>{};const i=o=>{if(!this.document||!s||!this.monitor.isDragging())return;let a;switch(o.type){case Wn.mouse.move:a={x:o.clientX,y:o.clientY};break;case Wn.touch.move:var c,u;a={x:((c=o.touches[0])===null||c===void 0?void 0:c.clientX)||0,y:((u=o.touches[0])===null||u===void 0?void 0:u.clientY)||0};break}const l=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,d=l&&t.contains(l);if(l===t||d)return this.handleMove(o,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,s){this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&i1(o)},this.handleTopMoveStartCapture=i=>{ws(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!ws(i))return;const o=Vr(i);o&&(Mc(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=o),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!ws(i))return;const o=i.type===Wn.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),o),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,o)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(o)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:o,dragOverTargetIds:a}=this,c=this.options.enableHoverOutsideTarget,u=Vr(i,this.lastTargetTouchFallback);if(!u)return;if(this._isScrolling||!this.monitor.isDragging()&&e1(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&o&&Zp(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,u.x,u.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(o,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const l=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(l),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const d=(a||[]).map(m=>this.targetNodes.get(m)).filter(m=>!!m),h=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(u.x,u.y,d):this.document.elementsFromPoint(u.x,u.y),f=[];for(const m in h){if(!h.hasOwnProperty(m))continue;let g=h[m];for(g!=null&&f.push(g);g;)g=g.parentElement,g&&f.indexOf(g)===-1&&f.push(g)}const p=f.filter(m=>d.indexOf(m)>-1).map(m=>this._getDropTargetId(m)).filter(m=>!!m).filter((m,g,y)=>y.indexOf(m)===g);if(c)for(const m in this.targetNodes){const g=this.targetNodes.get(m);if(l&&g&&g.contains(l)&&p.indexOf(m)===-1){p.unshift(m);break}}p.reverse(),this.actions.hover(p,{clientOffset:u})},this._getDropTargetId=i=>{const o=this.targetNodes.keys();let a=o.next();for(;a.done===!1;){const c=a.value;if(i===this.targetNodes.get(c))return c;a=o.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!r1(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new Jp(s,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Vt.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Vt.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Vt.keyboard)}}const a1=function(e,t={},s={}){return new nr(e,t,s)},c1=pn({isCustomDndProviderSet:!1}),l1=({children:n})=>r(z,{children:n}),u1=({customDndBackend:n,customDndBackendOptions:e,children:t})=>{const[s,i]=b(),[o,a]=b(!1),[c,u]=b(!1),{isCustomDndProviderSet:l}=Qt(c1);J(()=>{u("ontouchstart"in window),a(!0),i(window)},[]);const d=l?l1:Yf;return o?s?r(d,Object.assign({backend:n||(c?a1:Up),context:s,options:n?e:void 0},{children:t})):r(z,{children:t}):null};function d1({boardContainer:n}){const{boardWidth:e,chessPieces:t,id:s,snapToCursor:i,allowDragOutsideBoard:o}=Mt(),a=bp(f=>({item:f.getItem(),clientOffset:f.getClientOffset(),sourceClientOffset:f.getSourceClientOffset(),isDragging:f.isDragging()})),{isDragging:c,item:u,clientOffset:l,sourceClientOffset:d}=a,h=kn((f,p)=>{if(!f||!p)return{display:"none"};let{x:m,y:g}=i?f:p;const y=e/8/2;if(i&&(m-=y,g-=y),!o){const{left:w,top:O}=n,x=w-y,A=O-y,U=w+e-y,B=O+e-y;m=Math.max(x,Math.min(m,U)),g=Math.max(A,Math.min(g,B))}const _=`translate(${m}px, ${g}px)`;return{transform:_,WebkitTransform:_,touchAction:"none"}},[e,o,i,n]);return c&&u.id===s?r("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:r("div",Object.assign({style:h(l,d)},{children:typeof t[u.piece]=="function"?t[u.piece]({squareWidth:e/8,isDragging:!0}):r("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:r("g",{children:t[u.piece]})}))}))})):null}const h1=gi((n,e)=>{const{customDndBackend:t,customDndBackendOptions:s,onBoardWidthChange:i}=n,o=yh(n,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[a,c]=b(n.boardWidth),u=Oe(null),l=Oe(null),[d,h]=b({left:0,top:0}),f=Ce(()=>{var p;return(p=u.current)===null||p===void 0?void 0:p.getBoundingClientRect()},[u.current]);return J(()=>{a&&i?.(a)},[a]),J(()=>{h({left:f?.left?f?.left:0,top:f?.top?f?.top:0})},[f]),J(()=>{var p;if(n.boardWidth===void 0&&(!((p=u.current)===null||p===void 0)&&p.offsetWidth)){const m=new ResizeObserver(()=>{var g;c((g=u.current)===null||g===void 0?void 0:g.offsetWidth)});return m.observe(u.current),()=>{m.disconnect()}}},[u.current]),r(Yp,{children:r("div",Object.assign({ref:l,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[r("div",{ref:u,style:{width:"100%"}}),r(u1,Object.assign({customDndBackend:t,customDndBackendOptions:s},{children:a&&r(Ah,Object.assign({boardWidth:a},o,{ref:e},{children:[r(d1,{boardContainer:d}),r(Qp,{})]}))}))]}))})});function f1(n){return n!==null?{comment:n,variations:[]}:{variations:[]}}function p1(n,e,t,s,i){const o={move:n,variations:i};return e&&(o.suffix=e),t&&(o.nag=t),s!==null&&(o.comment=s),o}function m1(...n){const[e,...t]=n;let s=e;for(const i of t)i!==null&&(s.variations=[i,...i.variations],i.variations=[],s=i);return e}function g1(n,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const s=t.variations[0];if(!s){t.comment=e.marker.comment;break}t=s}}return{headers:n,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function v1(n,e){function t(){this.constructor=n}t.prototype=e.prototype,n.prototype=new t}function En(n,e,t,s){var i=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(i,En.prototype),i.expected=e,i.found=t,i.location=s,i.name="SyntaxError",i}v1(En,Error);function Ns(n,e,t){return t=t||" ",n.length>e?n:(e-=n.length,t+=t.repeat(e),n+t.slice(0,e))}En.prototype.format=function(n){var e="Error: "+this.message;if(this.location){var t=null,s;for(s=0;s<n.length;s++)if(n[s].source===this.location.source){t=n[s].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,a=this.location.source+":"+o.line+":"+o.column;if(t){var c=this.location.end,u=Ns("",o.line.toString().length," "),l=t[i.line-1],d=i.line===c.line?c.column:l.length+1,h=d-i.column||1;e+=`
 --> `+a+`
`+u+` |
`+o.line+" | "+l+`
`+u+" | "+Ns("",i.column-1," ")+Ns("",h,"^")}else e+=`
 at `+a}return e};En.buildMessage=function(n,e){var t={literal:function(l){return'"'+i(l.text)+'"'},class:function(l){var d=l.parts.map(function(h){return Array.isArray(h)?o(h[0])+"-"+o(h[1]):o(h)});return"["+(l.inverted?"^":"")+d.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(l){return l.description}};function s(l){return l.charCodeAt(0).toString(16).toUpperCase()}function i(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+s(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+s(d)})}function o(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+s(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+s(d)})}function a(l){return t[l.type](l)}function c(l){var d=l.map(a),h,f;if(d.sort(),d.length>0){for(h=1,f=1;h<d.length;h++)d[h-1]!==d[h]&&(d[f]=d[h],f++);d.length=f}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}function u(l){return l?'"'+i(l)+'"':"end of input"}return"Expected "+c(n)+" but "+u(e)+" found."};function b1(n,e){e=e!==void 0?e:{};var t={},s=e.grammarSource,i={pgn:Rn},o=Rn,a="[",c='"',u="]",l=".",d="O-O-O",h="O-O",f="0-0-0",p="0-0",m="$",g="{",y="}",_=";",w="(",O=")",x="1-0",A="0-1",U="1/2-1/2",B="*",$=/^[a-zA-Z]/,P=/^[^"]/,T=/^[0-9]/,j=/^[.]/,H=/^[a-zA-Z1-8\-=]/,ue=/^[+#]/,de=/^[!?]/,ce=/^[^}]/,k=/^[^\r\n]/,F=/^[ \t\r\n]/,I=Ie("tag pair"),Z=oe("[",!1),R=oe('"',!1),L=oe("]",!1),fe=Ie("tag name"),le=Se([["a","z"],["A","Z"]],!1,!1),ge=Ie("tag value"),Q=Se(['"'],!0,!1),G=Ie("move number"),te=Se([["0","9"]],!1,!1),Te=oe(".",!1),qe=Se(["."],!1,!1),ft=Ie("standard algebraic notation"),De=oe("O-O-O",!1),Be=oe("O-O",!1),Je=oe("0-0-0",!1),Rt=oe("0-0",!1),Qe=Se([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),rt=Se(["+","#"],!1,!1),Jt=Ie("suffix annotation"),Ze=Se(["!","?"],!1,!1),Bt=Ie("NAG"),kt=oe("$",!1),vn=Ie("brace comment"),Ft=oe("{",!1),Zt=Se(["}"],!0,!1),Ot=oe("}",!1),je=Ie("rest of line comment"),st=oe(";",!1),Xe=Se(["\r",`
`],!0,!1),bn=Ie("variation"),yn=oe("(",!1),_n=oe(")",!1),yt=Ie("game termination marker"),At=oe("1-0",!1),pt=oe("0-1",!1),mt=oe("1/2-1/2",!1),et=oe("*",!1),_t=Ie("whitespace"),jt=Se([" ","	","\r",`
`],!1,!1),en=function(N,S){return g1(N,S)},tn=function(N){return Object.fromEntries(N)},$t=function(N,S){return[N,S]},Ut=function(N,S){return{root:N,marker:S}},Pn=function(N,S){return m1(f1(N),...S.flat())},Dt=function(N,S,E,X,ee){return p1(N,S,E,X,ee)},nn=function(N){return N},Ln=function(N){return N.replace(/[\r\n]+/g," ")},we=function(N){return N.trim()},it=function(N){return N},In=function(N,S){return{result:N,comment:S}},C=e.peg$currPos|0,ot=[{line:1,column:1}],$e=C,me=e.peg$maxFailExpected||[],D=e.peg$silentFails|0,ve;if(e.startRule){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');o=i[e.startRule]}function oe(N,S){return{type:"literal",text:N,ignoreCase:S}}function Se(N,S,E){return{type:"class",parts:N,inverted:S,ignoreCase:E}}function Ue(){return{type:"end"}}function Ie(N){return{type:"other",description:N}}function Mn(N){var S=ot[N],E;if(S)return S;if(N>=ot.length)E=ot.length-1;else for(E=N;!ot[--E];);for(S=ot[E],S={line:S.line,column:S.column};E<N;)n.charCodeAt(E)===10?(S.line++,S.column=1):S.column++,E++;return ot[N]=S,S}function at(N,S,E){var X=Mn(N),ee=Mn(S),be={source:s,start:{offset:N,line:X.line,column:X.column},end:{offset:S,line:ee.line,column:ee.column}};return be}function K(N){C<$e||(C>$e&&($e=C,me=[]),me.push(N))}function pr(N,S,E){return new En(En.buildMessage(N,S),N,S,E)}function Rn(){var N,S,E;return N=C,S=mr(),E=M(),N=en(S,E),N}function mr(){var N,S,E;for(N=C,S=[],E=gr();E!==t;)S.push(E),E=gr();return E=We(),N=tn(S),N}function gr(){var N,S,E,X,ee,be,rn;return D++,N=C,We(),n.charCodeAt(C)===91?(S=a,C++):(S=t,D===0&&K(Z)),S!==t?(We(),E=Y(),E!==t?(We(),n.charCodeAt(C)===34?(X=c,C++):(X=t,D===0&&K(R)),X!==t?(ee=v(),n.charCodeAt(C)===34?(be=c,C++):(be=t,D===0&&K(R)),be!==t?(We(),n.charCodeAt(C)===93?(rn=u,C++):(rn=t,D===0&&K(L)),rn!==t?N=$t(E,ee):(C=N,N=t)):(C=N,N=t)):(C=N,N=t)):(C=N,N=t)):(C=N,N=t),D--,N===t&&D===0&&K(I),N}function Y(){var N,S,E;if(D++,N=C,S=[],E=n.charAt(C),$.test(E)?C++:(E=t,D===0&&K(le)),E!==t)for(;E!==t;)S.push(E),E=n.charAt(C),$.test(E)?C++:(E=t,D===0&&K(le));else S=t;return S!==t?N=n.substring(N,C):N=S,D--,N===t&&(S=t,D===0&&K(fe)),N}function v(){var N,S,E;for(D++,N=C,S=[],E=n.charAt(C),P.test(E)?C++:(E=t,D===0&&K(Q));E!==t;)S.push(E),E=n.charAt(C),P.test(E)?C++:(E=t,D===0&&K(Q));return N=n.substring(N,C),D--,S=t,D===0&&K(ge),N}function M(){var N,S,E;return N=C,S=q(),We(),E=vr(),E===t&&(E=null),We(),N=Ut(S,E),N}function q(){var N,S,E,X;for(N=C,S=wt(),S===t&&(S=null),E=[],X=ye();X!==t;)E.push(X),X=ye();return N=Pn(S,E),N}function ye(){var N,S,E,X,ee,be,rn,br;if(N=C,We(),Me(),We(),S=Ee(),S!==t){for(E=ze(),E===t&&(E=null),X=[],ee=ct();ee!==t;)X.push(ee),ee=ct();for(ee=We(),be=wt(),be===t&&(be=null),rn=[],br=Fn();br!==t;)rn.push(br),br=Fn();N=Dt(S,E,X,be,rn)}else C=N,N=t;return N}function Me(){var N,S,E,X,ee,be;for(D++,N=C,S=[],E=n.charAt(C),T.test(E)?C++:(E=t,D===0&&K(te));E!==t;)S.push(E),E=n.charAt(C),T.test(E)?C++:(E=t,D===0&&K(te));if(n.charCodeAt(C)===46?(E=l,C++):(E=t,D===0&&K(Te)),E!==t){for(X=We(),ee=[],be=n.charAt(C),j.test(be)?C++:(be=t,D===0&&K(qe));be!==t;)ee.push(be),be=n.charAt(C),j.test(be)?C++:(be=t,D===0&&K(qe));S=[S,E,X,ee],N=S}else C=N,N=t;return D--,N===t&&(S=t,D===0&&K(G)),N}function Ee(){var N,S,E,X,ee,be;if(D++,N=C,S=C,n.substr(C,5)===d?(E=d,C+=5):(E=t,D===0&&K(De)),E===t&&(n.substr(C,3)===h?(E=h,C+=3):(E=t,D===0&&K(Be)),E===t&&(n.substr(C,5)===f?(E=f,C+=5):(E=t,D===0&&K(Je)),E===t&&(n.substr(C,3)===p?(E=p,C+=3):(E=t,D===0&&K(Rt)),E===t))))if(E=C,X=n.charAt(C),$.test(X)?C++:(X=t,D===0&&K(le)),X!==t){if(ee=[],be=n.charAt(C),H.test(be)?C++:(be=t,D===0&&K(Qe)),be!==t)for(;be!==t;)ee.push(be),be=n.charAt(C),H.test(be)?C++:(be=t,D===0&&K(Qe));else ee=t;ee!==t?(X=[X,ee],E=X):(C=E,E=t)}else C=E,E=t;return E!==t?(X=n.charAt(C),ue.test(X)?C++:(X=t,D===0&&K(rt)),X===t&&(X=null),E=[E,X],S=E):(C=S,S=t),S!==t?N=n.substring(N,C):N=S,D--,N===t&&(S=t,D===0&&K(ft)),N}function ze(){var N,S,E;for(D++,N=C,S=[],E=n.charAt(C),de.test(E)?C++:(E=t,D===0&&K(Ze));E!==t;)S.push(E),S.length>=2?E=t:(E=n.charAt(C),de.test(E)?C++:(E=t,D===0&&K(Ze)));return S.length<1?(C=N,N=t):N=S,D--,N===t&&(S=t,D===0&&K(Jt)),N}function ct(){var N,S,E,X,ee;if(D++,N=C,We(),n.charCodeAt(C)===36?(S=m,C++):(S=t,D===0&&K(kt)),S!==t){if(E=C,X=[],ee=n.charAt(C),T.test(ee)?C++:(ee=t,D===0&&K(te)),ee!==t)for(;ee!==t;)X.push(ee),ee=n.charAt(C),T.test(ee)?C++:(ee=t,D===0&&K(te));else X=t;X!==t?E=n.substring(E,C):E=X,E!==t?N=nn(E):(C=N,N=t)}else C=N,N=t;return D--,N===t&&D===0&&K(Bt),N}function wt(){var N;return N=Bn(),N===t&&(N=Pe()),N}function Bn(){var N,S,E,X,ee;if(D++,N=C,n.charCodeAt(C)===123?(S=g,C++):(S=t,D===0&&K(Ft)),S!==t){for(E=C,X=[],ee=n.charAt(C),ce.test(ee)?C++:(ee=t,D===0&&K(Zt));ee!==t;)X.push(ee),ee=n.charAt(C),ce.test(ee)?C++:(ee=t,D===0&&K(Zt));E=n.substring(E,C),n.charCodeAt(C)===125?(X=y,C++):(X=t,D===0&&K(Ot)),X!==t?N=Ln(E):(C=N,N=t)}else C=N,N=t;return D--,N===t&&(S=t,D===0&&K(vn)),N}function Pe(){var N,S,E,X,ee;if(D++,N=C,n.charCodeAt(C)===59?(S=_,C++):(S=t,D===0&&K(st)),S!==t){for(E=C,X=[],ee=n.charAt(C),k.test(ee)?C++:(ee=t,D===0&&K(Xe));ee!==t;)X.push(ee),ee=n.charAt(C),k.test(ee)?C++:(ee=t,D===0&&K(Xe));E=n.substring(E,C),N=we(E)}else C=N,N=t;return D--,N===t&&(S=t,D===0&&K(je)),N}function Fn(){var N,S,E,X;return D++,N=C,We(),n.charCodeAt(C)===40?(S=w,C++):(S=t,D===0&&K(yn)),S!==t?(E=q(),E!==t?(We(),n.charCodeAt(C)===41?(X=O,C++):(X=t,D===0&&K(_n)),X!==t?N=it(E):(C=N,N=t)):(C=N,N=t)):(C=N,N=t),D--,N===t&&D===0&&K(bn),N}function vr(){var N,S,E;return D++,N=C,n.substr(C,3)===x?(S=x,C+=3):(S=t,D===0&&K(At)),S===t&&(n.substr(C,3)===A?(S=A,C+=3):(S=t,D===0&&K(pt)),S===t&&(n.substr(C,7)===U?(S=U,C+=7):(S=t,D===0&&K(mt)),S===t&&(n.charCodeAt(C)===42?(S=B,C++):(S=t,D===0&&K(et))))),S!==t?(We(),E=wt(),E===t&&(E=null),N=In(S,E)):(C=N,N=t),D--,N===t&&(S=t,D===0&&K(yt)),N}function We(){var N,S;for(D++,N=[],S=n.charAt(C),F.test(S)?C++:(S=t,D===0&&K(jt));S!==t;)N.push(S),S=n.charAt(C),F.test(S)?C++:(S=t,D===0&&K(jt));return D--,S=t,D===0&&K(_t),N}if(ve=o(),e.peg$library)return{peg$result:ve,peg$currPos:C,peg$FAILED:t,peg$maxFailExpected:me,peg$maxFailPos:$e};if(ve!==t&&C===n.length)return ve;throw ve!==t&&C<n.length&&K(Ue()),pr(me,$e<n.length?n.charAt($e):null,$e<n.length?at($e,$e+1):at($e,$e))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const jr=0xffffffffffffffffn;function xs(n,e){return(n<<e|n>>64n-e)&0xffffffffffffffffn}function Jo(n,e){return n*e&jr}function y1(n){return function(){let e=BigInt(n&jr),t=BigInt(n>>64n&jr);const s=Jo(xs(Jo(e,5n),7n),9n);return t^=e,e=(xs(e,24n)^t^t<<16n)&jr,t=xs(t,37n),n=t<<64n|e,s}}const es=y1(0xa187eb39cdcaed8f31c4b365b102e01en),_1=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>es()))),w1=Array.from({length:8},()=>es()),N1=Array.from({length:16},()=>es()),Cs=es(),He="w",tt="b",ke="p",ci="n",$r="b",Jn="r",qt="q",Le="k",Ss="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Or{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:s,piece:i,from:o,to:a,flags:c,captured:u,promotion:l}=t,d=Re(o),h=Re(a);this.color=s,this.piece=i,this.from=d,this.to=h,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=d+h,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const f in se)se[f]&c&&(this.flags+=sn[f]);u&&(this.captured=u),l&&(this.promotion=l,this.lan+=l)}isCapture(){return this.flags.indexOf(sn.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(sn.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(sn.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(sn.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(sn.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(sn.BIG_PAWN)>-1}}const Fe=-1,sn={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},se={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},li={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},x1={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},C1={...li,...x1},ne={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Es={b:[16,32,17,15],w:[-16,-32,-17,-15]},Zo={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},S1=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],E1=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],T1={p:1,n:2,b:4,r:8,q:16,k:32},k1="pnbrqkPNBRQK",ea=[ci,$r,Jn,qt],O1=7,A1=6,D1=1,P1=0,Ar={[Le]:se.KSIDE_CASTLE,[qt]:se.QSIDE_CASTLE},zt={w:[{square:ne.a1,flag:se.QSIDE_CASTLE},{square:ne.h1,flag:se.KSIDE_CASTLE}],b:[{square:ne.a8,flag:se.QSIDE_CASTLE},{square:ne.h8,flag:se.KSIDE_CASTLE}]},L1={b:D1,w:A1},Ts="--";function dn(n){return n>>4}function ar(n){return n&15}function Rc(n){return"0123456789".indexOf(n)!==-1}function Re(n){const e=ar(n),t=dn(n);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function Vn(n){return n===He?tt:He}function I1(n){const e=n.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(e[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<i.length;a++){let c=0,u=!1;for(let l=0;l<i[a].length;l++)if(Rc(i[a][l])){if(u)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};c+=parseInt(i[a][l],10),u=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[a][l]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};c+=1,u=!1}if(c!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const o=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:c}of o){if(!c.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((e[0].match(c)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(i[0]+i[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function M1(n,e){const t=n.from,s=n.to,i=n.piece;let o=0,a=0,c=0;for(let u=0,l=e.length;u<l;u++){const d=e[u].from,h=e[u].to,f=e[u].piece;i===f&&t!==d&&s===h&&(o++,dn(t)===dn(d)&&a++,ar(t)===ar(d)&&c++)}return o>0?a>0&&c>0?Re(t):c>0?Re(t).charAt(1):Re(t).charAt(0):""}function Ht(n,e,t,s,i,o=void 0,a=se.NORMAL){const c=dn(s);if(i===ke&&(c===O1||c===P1))for(let u=0;u<ea.length;u++){const l=ea[u];n.push({color:e,from:t,to:s,piece:i,captured:o,promotion:l,flags:a|se.PROMOTION})}else n.push({color:e,from:t,to:s,piece:i,captured:o,flags:a})}function ta(n){let e=n.charAt(0);return e>="a"&&e<="h"?n.match(/[a-h]\d.*[a-h]\d/)?void 0:ke:(e=e.toLowerCase(),e==="o"?Le:e)}function ks(n){return n.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class R1{_board=new Array(128);_turn=He;_header={};_kings={w:Fe,b:Fe};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=Ss,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Fe,b:Fe},this._turn=He,this._castling={w:0,b:0},this._epSquare=Fe,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...C1},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:s=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const c=["-","-","0","1"];e=i.concat(c.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!t){const{ok:c,error:u}=I1(e);if(!c)throw new Error(u)}const o=i[0];let a=0;this.clear({preserveHeaders:s});for(let c=0;c<o.length;c++){const u=o.charAt(c);if(u==="/")a+=8;else if(Rc(u))a+=parseInt(u,10);else{const l=u<"a"?He:tt;this._put({type:u.toLowerCase(),color:l},Re(a)),a++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=se.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=se.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=se.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=se.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Fe:ne[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,s="";for(let a=ne.a8;a<=ne.h1;a++){if(this._board[a]){t>0&&(s+=t,t=0);const{color:c,type:u}=this._board[a];s+=c===He?u.toUpperCase():u.toLowerCase()}else t++;a+1&136&&(t>0&&(s+=t),a!==ne.h1&&(s+="/"),t=0,a+=8)}let i="";this._castling[He]&se.KSIDE_CASTLE&&(i+="K"),this._castling[He]&se.QSIDE_CASTLE&&(i+="Q"),this._castling[tt]&se.KSIDE_CASTLE&&(i+="k"),this._castling[tt]&se.QSIDE_CASTLE&&(i+="q"),i=i||"-";let o="-";if(this._epSquare!==Fe)if(e)o=Re(this._epSquare);else{const a=this._epSquare+(this._turn===He?16:-16),c=[a+1,a-1];for(const u of c){if(u&136)continue;const l=this._turn;if(this._board[u]?.color===l&&this._board[u]?.type===ke){this._makeMove({color:l,from:u,to:this._epSquare,piece:ke,captured:ke,flags:se.EP_CAPTURE});const d=!this._isKingAttacked(l);if(this._undoMove(),d){o=Re(this._epSquare);break}}}}return[s,this._turn,i,o,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:s}=this._board[e],i={w:0,b:1}[t],o={p:0,n:1,b:2,r:3,q:4,k:5}[s];return _1[i][o][e]}_epKey(){return this._epSquare===Fe?0n:w1[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return N1[e]}_computeHash(){let e=0n;for(let t=ne.a8;t<=ne.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Cs),e}_updateSetup(e){this._history.length>0||(e!==Ss?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Ss)}get(e){return this._board[ne[e]]}findPiece(e){const t=[];for(let s=ne.a8;s<=ne.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==e.color||this._board[s].color===e.color&&this._board[s].type===e.type&&t.push(Re(s))}return t}put({type:e,color:t},s){return this._put({type:e,color:t},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},s){if(k1.indexOf(e.toLowerCase())===-1||!(s in ne))return!1;const i=ne[s];if(e==Le&&!(this._kings[t]==Fe||this._kings[t]==i))return!1;const o=this._board[i];return o&&o.type===Le&&(this._kings[o.color]=Fe),this._set(i,{type:e,color:t}),e===Le&&(this._kings[t]=i),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(ne[e]),t&&t.type===Le&&(this._kings[t.color]=Fe),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[ne.e1]?.type===Le&&this._board[ne.e1]?.color===He,t=this._board[ne.e8]?.type===Le&&this._board[ne.e8]?.color===tt;(!e||this._board[ne.a1]?.type!==Jn||this._board[ne.a1]?.color!==He)&&(this._castling.w&=-65),(!e||this._board[ne.h1]?.type!==Jn||this._board[ne.h1]?.color!==He)&&(this._castling.w&=-33),(!t||this._board[ne.a8]?.type!==Jn||this._board[ne.a8]?.color!==tt)&&(this._castling.b&=-65),(!t||this._board[ne.h8]?.type!==Jn||this._board[ne.h8]?.color!==tt)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Fe)return;const e=this._epSquare+(this._turn===He?-16:16),t=this._epSquare+(this._turn===He?16:-16),s=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==Vn(this._turn)||this._board[t]?.type!==ke){this._hash^=this._epKey(),this._epSquare=Fe;return}const i=o=>!(o&136)&&this._board[o]?.color===this._turn&&this._board[o]?.type===ke;s.some(i)||(this._hash^=this._epKey(),this._epSquare=Fe)}_attacked(e,t,s){const i=[];for(let o=ne.a8;o<=ne.h1;o++){if(o&136){o+=7;continue}if(this._board[o]===void 0||this._board[o].color!==e)continue;const a=this._board[o],c=o-t;if(c===0)continue;const u=c+119;if(S1[u]&T1[a.type]){if(a.type===ke){if(c>0&&a.color===He||c<=0&&a.color===tt)if(s)i.push(Re(o));else return!0;continue}if(a.type==="n"||a.type==="k")if(s){i.push(Re(o));continue}else return!0;const l=E1[u];let d=o+l,h=!1;for(;d!==t;){if(this._board[d]!=null){h=!0;break}d+=l}if(!h)if(s){i.push(Re(o));continue}else return!0}}return s?i:!1}attackers(e,t){return t?this._attacked(t,ne[e],!0):this._attacked(this._turn,ne[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(Vn(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,ne[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let s=0,i=0;for(let o=ne.a8;o<=ne.h1;o++){if(i=(i+1)%2,o&136){o+=7;continue}const a=this._board[o];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===$r&&t.push(i),s++)}if(s===2)return!0;if(s===3&&(e[$r]===1||e[ci]===1))return!0;if(s===e[$r]+2){let o=0;const a=t.length;for(let c=0;c<a;c++)o+=t[c];if(o===0||o===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:s=void 0}={}){const i=this._moves({square:t,piece:s});return e?i.map(o=>new Or(this,o)):i.map(o=>this._moveToSan(o,i))}_moves({legal:e=!0,piece:t=void 0,square:s=void 0}={}){const i=s?s.toLowerCase():void 0,o=t?.toLowerCase(),a=[],c=this._turn,u=Vn(c);let l=ne.a8,d=ne.h1,h=!1;if(i)if(i in ne)l=d=ne[i],h=!0;else return[];for(let p=l;p<=d;p++){if(p&136){p+=7;continue}if(!this._board[p]||this._board[p].color===u)continue;const{type:m}=this._board[p];let g;if(m===ke){if(o&&o!==m)continue;g=p+Es[c][0],this._board[g]||(Ht(a,c,p,g,ke),g=p+Es[c][1],L1[c]===dn(p)&&!this._board[g]&&Ht(a,c,p,g,ke,void 0,se.BIG_PAWN));for(let y=2;y<4;y++)g=p+Es[c][y],!(g&136)&&(this._board[g]?.color===u?Ht(a,c,p,g,ke,this._board[g].type,se.CAPTURE):g===this._epSquare&&Ht(a,c,p,g,ke,ke,se.EP_CAPTURE))}else{if(o&&o!==m)continue;for(let y=0,_=Zo[m].length;y<_;y++){const w=Zo[m][y];for(g=p;g+=w,!(g&136);){if(!this._board[g])Ht(a,c,p,g,m);else{if(this._board[g].color===c)break;Ht(a,c,p,g,m,this._board[g].type,se.CAPTURE);break}if(m===ci||m===Le)break}}}}if((o===void 0||o===Le)&&(!h||d===this._kings[c])){if(this._castling[c]&se.KSIDE_CASTLE){const p=this._kings[c],m=p+2;!this._board[p+1]&&!this._board[m]&&!this._attacked(u,this._kings[c])&&!this._attacked(u,p+1)&&!this._attacked(u,m)&&Ht(a,c,this._kings[c],m,Le,void 0,se.KSIDE_CASTLE)}if(this._castling[c]&se.QSIDE_CASTLE){const p=this._kings[c],m=p-2;!this._board[p-1]&&!this._board[p-2]&&!this._board[p-3]&&!this._attacked(u,this._kings[c])&&!this._attacked(u,p-1)&&!this._attacked(u,m)&&Ht(a,c,this._kings[c],m,Le,void 0,se.QSIDE_CASTLE)}}if(!e||this._kings[c]===-1)return a;const f=[];for(let p=0,m=a.length;p<m;p++)this._makeMove(a[p]),this._isKingAttacked(c)||f.push(a[p]),this._undoMove();return f}move(e,{strict:t=!1}={}){let s=null;if(typeof e=="string")s=this._moveFromSan(e,t);else if(e===null)s=this._moveFromSan(Ts,t);else if(typeof e=="object"){const o=this._moves();for(let a=0,c=o.length;a<c;a++)if(e.from===Re(o[a].from)&&e.to===Re(o[a].to)&&(!("promotion"in o[a])||e.promotion===o[a].promotion)){s=o[a];break}}if(!s)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&s.flags&se.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new Or(this,s);return this._makeMove(s),this._incPositionCount(),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,s=Vn(t);if(this._push(e),e.flags&se.NULL_MOVE){t===tt&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=Fe;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&se.EP_CAPTURE&&(this._turn===tt?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===Le){if(this._kings[t]=e.to,e.flags&se.KSIDE_CASTLE){const i=e.to-1,o=e.to+1;this._movePiece(o,i)}else if(e.flags&se.QSIDE_CASTLE){const i=e.to+1,o=e.to-2;this._movePiece(o,i)}this._castling[t]=0}if(this._castling[t]){for(let i=0,o=zt[t].length;i<o;i++)if(e.from===zt[t][i].square&&this._castling[t]&zt[t][i].flag){this._castling[t]^=zt[t][i].flag;break}}if(this._castling[s]){for(let i=0,o=zt[s].length;i<o;i++)if(e.to===zt[s][i].square&&this._castling[s]&zt[s][i].flag){this._castling[s]^=zt[s][i].flag;break}}if(this._hash^=this._castlingKey(),e.flags&se.BIG_PAWN){let i;t===tt?i=e.to-16:i=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===ke&&this._board[e.to-1]?.color===s||!(e.to+1&136)&&this._board[e.to+1]?.type===ke&&this._board[e.to+1]?.color===s?(this._epSquare=i,this._hash^=this._epKey()):this._epSquare=Fe}else this._epSquare=Fe;e.piece===ke?this._halfMoves=0:e.flags&(se.CAPTURE|se.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===tt&&this._moveNumber++,this._turn=s,this._hash^=Cs}undo(){const e=this._hash,t=this._undoMove();if(t){const s=new Or(this,t);return this._decPositionCount(e),s}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Cs;const s=this._turn,i=Vn(s);if(t.flags&se.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:s})),t.captured)if(t.flags&se.EP_CAPTURE){let o;s===tt?o=t.to-16:o=t.to+16,this._set(o,{type:ke,color:i})}else this._set(t.to,{type:t.captured,color:i});if(t.flags&(se.KSIDE_CASTLE|se.QSIDE_CASTLE)){let o,a;t.flags&se.KSIDE_CASTLE?(o=t.to+1,a=t.to-1):(o=t.to-2,a=t.to+1),this._movePiece(a,o)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const s=[];let i=!1;for(const f in this._header)this._header[f]&&s.push(`[${f} "${this._header[f]}"]`+e),i=!0;i&&this._history.length&&s.push(e);const o=f=>{const p=this._comments[this.fen()];if(typeof p<"u"){const m=f.length>0?" ":"";f=`${f}${m}{${p}}`}return f},a=[];for(;this._history.length>0;)a.push(this._undoMove());const c=[];let u="";for(a.length===0&&c.push(o(""));a.length>0;){u=o(u);const f=a.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const p=`${this._moveNumber}. ...`;u=u?`${u} ${p}`:p}else f.color==="w"&&(u.length&&c.push(u),u=this._moveNumber+".");u=u+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(u.length&&c.push(o(u)),c.push(this._header.Result||"*"),t===0)return s.join("")+c.join(" ");const l=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},d=function(f,p){for(const m of p.split(" "))if(m){if(f+m.length>t){for(;l();)f--;s.push(e),f=0}s.push(m),f+=m.length,s.push(" "),f++}return l()&&f--,f};let h=0;for(let f=0;f<c.length;f++){if(h+c[f].length>t&&c[f].includes("{")){h=d(h,c[f]);continue}h+c[f].length>t&&f!==0?(s[s.length-1]===" "&&s.pop(),s.push(e),h=0):f!==0&&(s.push(" "),h++),s.push(c[f]),h+=c[f].length}return s.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??li[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=li[e]||null,!0):!1}getHeaders(){const e={};for(const[t,s]of Object.entries(this._header))s!==null&&(e[t]=s);return e}loadPgn(e,{strict:t=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(e=e.replace(new RegExp(s,"g"),`
`));const i=b1(e);this.reset();const o=i.headers;let a="";for(const l in o)l.toLowerCase()==="fen"&&(a=o[l]),this.header(l,o[l]);if(!t)a&&this.load(a,{preserveHeaders:!0});else if(o.SetUp==="1"){if(!("FEN"in o))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}let c=i.root;for(;c;){if(c.move){const l=this._moveFromSan(c.move,t);if(l==null)throw new Error(`Invalid move in PGN: ${c.move}`);this._makeMove(l),this._incPositionCount()}c.comment!==void 0&&(this._comments[this.fen()]=c.comment),c=c.variations[0]}const u=i.result;u&&Object.keys(this._header).length&&this._header.Result!==u&&this.setHeader("Result",u)}_moveToSan(e,t){let s="";if(e.flags&se.KSIDE_CASTLE)s="O-O";else if(e.flags&se.QSIDE_CASTLE)s="O-O-O";else{if(e.flags&se.NULL_MOVE)return Ts;if(e.piece!==ke){const i=M1(e,t);s+=e.piece.toUpperCase()+i}e.flags&(se.CAPTURE|se.EP_CAPTURE)&&(e.piece===ke&&(s+=Re(e.from)[0]),s+="x"),s+=Re(e.to),e.promotion&&(s+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(e,t=!1){let s=ks(e);if(t||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==Ts)return{color:this._turn,from:0,to:0,piece:"k",flags:se.NULL_MOVE};let i=ta(s),o=this._moves({legal:!0,piece:i});for(let f=0,p=o.length;f<p;f++)if(s===ks(this._moveToSan(o[f],o)))return o[f];if(t)return null;let a,c,u,l,d,h=!1;if(c=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),c?(a=c[1],u=c[2],l=c[3],d=c[4],u.length==1&&(h=!0)):(c=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),c&&(a=c[1],u=c[2],l=c[3],d=c[4],u.length==1&&(h=!0))),i=ta(s),o=this._moves({legal:!0,piece:a||i}),!l)return null;for(let f=0,p=o.length;f<p;f++)if(u){if((!a||a.toLowerCase()==o[f].piece)&&ne[u]==o[f].from&&ne[l]==o[f].to&&(!d||d.toLowerCase()==o[f].promotion))return o[f];if(h){const m=Re(o[f].from);if((!a||a.toLowerCase()==o[f].piece)&&ne[l]==o[f].to&&(u==m[0]||u==m[1])&&(!d||d.toLowerCase()==o[f].promotion))return o[f]}}else if(s===ks(this._moveToSan(o[f],o)).replace("x",""))return o[f];return null}ascii(){let e=`   +------------------------+
`;for(let t=ne.a8;t<=ne.h1;t++){if(ar(t)===0&&(e+=" "+"87654321"[dn(t)]+" |"),this._board[t]){const s=this._board[t].type,o=this._board[t].color===He?s.toUpperCase():s.toLowerCase();e+=" "+o+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let s=0;const i=this._turn;for(let o=0,a=t.length;o<a;o++)this._makeMove(t[o]),this._isKingAttacked(i)||(e-1>0?s+=this.perft(e-1):s++),this._undoMove();return s}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let s=ne.a8;s<=ne.h1;s++)this._board[s]==null?t.push(null):t.push({square:Re(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(e.push(t),t=[],s+=8);return e}squareColor(e){if(e in ne){const t=ne[e];return(dn(t)+ar(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],s=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const i=t.pop();if(!i)break;e?s.push(new Or(this,i)):s.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return s}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},s=i=>{i in this._comments&&(t[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(s(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),s(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const i of[Le,qt])t[i]!==void 0&&(t[i]?this._castling[e]|=Ar[i]:this._castling[e]&=~Ar[i]);this._updateCastlingRights();const s=this.getCastlingRights(e);return(t[Le]===void 0||t[Le]===s[Le])&&(t[qt]===void 0||t[qt]===s[qt])}getCastlingRights(e){return{[Le]:(this._castling[e]&Ar[Le])!==0,[qt]:(this._castling[e]&Ar[qt])!==0}}moveNumber(){return this._moveNumber}}function B1(){const n=Ce(()=>new R1,[]),[e,t]=b(n.fen()),[s,i]=b(null),[o,a]=b(null),[c,u]=b("Connecting..."),[l,d]=b(!1),[h,f]=b(null),[p,m]=b("connecting"),[g,y]=b(60),[_,w]=b(0),[O,x]=b(0),[A,U]=b(!1),[B,$]=b(null),[P,T]=b(null),[j,H]=b(!1),[ue,de]=b(!1);J(()=>{de(p==="playing"&&o!==null&&s!==null&&!l&&ce())},[p,o,s,l,e]);const ce=()=>{if(!s)return!1;const L=n.turn();return L==="w"&&s==="white"||L==="b"&&s==="black"};J(()=>{async function L(){try{const fe=await(await W.auth.apiGetSessionList()).json();if(!fe||!fe.user){console.warn("No active session, redirecting to login"),window.location.href="/login";return}$(fe.user.name);const le=W.baseUrl,ge=new URL("/sockets/chess",le).href;console.log("Using Chess socket base URL:",le),console.log("Using Chess socket full path:",ge);const Q=er(ge,{path:"/sockets/",transports:["websocket","polling"],withCredentials:!0});f(Q),Q.on("connect",()=>{m("connecting"),u("Connected, joining game...")}),Q.on("waiting",()=>{m("waiting"),u("Waiting for opponent...")}),Q.on("paired",G=>{console.log("Received paired message:",G),a(G.opponent),m("bidding"),U(!1),u(`Paired with ${G.opponent}. Bid your preferred game time (min 60s):`)}),Q.on("start",G=>{console.log("Received start message:",G),n.load(G.fen),t(n.fen()),i(G.your_color),a(G.opponent),w(G.whiteTime),x(G.blackTime),m("playing"),u(`Playing as ${G.your_color} against ${G.opponent}`),console.log(`Game started. Your color: ${G.your_color}, Turn: ${n.turn()}`)}),Q.on("time_update",G=>{w(G.whiteTime),x(G.blackTime)}),Q.on("opponent_disconnected",G=>{console.log("Received opponent_disconnected message:",G),u(G.message||"Opponent disconnected"),m("waiting"),n.reset(),t(n.fen()),i(null),a(null),w(0),x(0),console.warn("Opponent disconnected")}),Q.on("update",G=>{console.log("Received update message:",G),n.load(G.fen),t(n.fen()),d(!1),console.log(`Board updated. Turn: ${n.turn()}, Your turn: ${ce()}`)}),Q.on("win",G=>{console.log("Received win message:",G),m("ended");const Te=G.winner===B?"You win!":`${G.winner} wins!`,qe=G.reason?` (${G.reason})`:"";u(`Game over: ${Te}${qe}`),console.log(`Game ended: ${Te}${qe}`)}),Q.on("draw",G=>{console.log("Received draw message:",G),m("ended");const te=G.reason?` (${G.reason})`:"";u(`Game over: Draw!${te}`),console.log(`Game ended: Draw${te}`)}),Q.on("error",G=>{console.log("Received error message:",G),l&&(n.undo(),t(n.fen()),d(!1)),T(G.message||"An error occurred"),console.error("Server error:",G)}),Q.on("connect_error",G=>{T(`Connection error: ${G.message}`),console.error("Connect error:",G)}),Q.on("disconnect",G=>{u(`Disconnected: ${G}`),console.warn("Socket disconnected:",G)})}catch(fe){console.error("Initialization error:",fe),T("Failed to initialize the game")}}return L(),()=>{h&&h.disconnect()}},[]);const k=L=>{h&&!A&&L>=60?(h.emit("bid",{time:L}),U(!0),u(`Bid sent (${L}s), waiting for opponent...`)):L<60?T("Bid time must be at least 60s"):T("Unable to send bid")},F=L=>{h&&(h.emit("move",{move:L}),console.log("Move sent:",L))},I=(L,fe,le)=>{if(l||p!=="playing"||!ce())return!1;try{const ge=n.get(L);if(!ge||ge.color!==n.turn())return!1;let Q;if(ge.type==="p"&&(ge.color==="w"&&fe[1]==="8"||ge.color==="b"&&fe[1]==="1")){const te=le?le[1].toLowerCase():"q";Q=n.move({from:L,to:fe,promotion:te})}else Q=n.move({from:L,to:fe});return Q?(t(n.fen()),F(Q.san),d(!0),console.log("Local move:",Q.san),!0):!1}catch(ge){return console.error("Invalid move:",ge),!1}},Z=L=>{const fe=Math.floor(L/60),le=L%60;return`${fe}:${le.toString().padStart(2,"0")}`},R=async()=>{try{await navigator.clipboard.writeText(n.fen()),H(!0),setTimeout(()=>H(!1),2e3)}catch(L){console.error("Failed to copy FEN:",L),T("Failed to copy FEN")}};return console.log("Your color",s),r("div",{className:"container mx-auto p-4",children:[r("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Multiplayer Chess"}),r("div",{className:"flex flex-col lg:flex-row gap-8 justify-center",children:[r("div",{className:"card bg-base-100 shadow-xl w-full lg:w-1/2",children:r("div",{className:"card-body p-0",children:r(h1,{position:e,onPieceDrop:I,arePiecesDraggable:ue,isDraggablePiece:({piece:L})=>(s&&L[0].toLowerCase()===(s&&s[0].toLowerCase())&&ce(),!0),boardOrientation:s||"white",showPromotionDialog:!0})})}),r("div",{className:"card bg-base-100 shadow-2xl w-full lg:w-1/3",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title mb-4",children:"Game Info"}),r("div",{className:"alert alert-info mb-4",children:[r(bt,{className:"h-5 w-5"}),r("span",{children:c})]}),P&&r("div",{className:"alert alert-error mb-4",children:[r(bt,{className:"h-5 w-5"}),r("span",{children:P})]}),r("div",{className:"flex flex-col gap-2 mb-4",children:[r("div",{className:"flex items-center gap-2",children:[r(hn,{className:"h-5 w-5"}),r("span",{children:[r("strong",{children:"You:"})," ",B||"Loading..."]})]}),r("div",{className:"flex items-center gap-2",children:[r(hn,{className:"h-5 w-5"}),r("span",{children:[r("strong",{children:"Opponent:"})," ",o||"Waiting..."]})]}),r("div",{className:"flex items-center gap-2",children:[r(ql,{className:"h-5 w-5"}),r("span",{children:[r("strong",{children:"Your Color:"})," ",s?s.charAt(0).toUpperCase()+s.slice(1):"Not assigned"]})]})]}),p==="playing"&&r("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[r("div",{className:"card shadow-lg "+(ce()?"bg-success text-success-content":"bg-base-300 text-base-content"),children:r("div",{className:"card-body p-3",children:r("div",{className:"flex items-center justify-between",children:[r("div",{className:"flex items-center gap-2",children:[r(cn,{className:"h-5 w-5"}),r("span",{className:"font-semibold",children:"Your Time"})]}),r("span",{className:"text-lg font-mono",children:Z(s==="white"?_:O)})]})})}),r("div",{className:"card shadow-lg "+(ce()?"bg-base-300 text-base-content":"bg-success text-success-content"),children:r("div",{className:"card-body p-3",children:r("div",{className:"flex items-center justify-between",children:[r("div",{className:"flex items-center gap-2",children:[r(cn,{className:"h-5 w-5"}),r("span",{className:"font-semibold",children:"Opponent's Time"})]}),r("span",{className:"text-lg font-mono",children:Z(s==="white"?O:_)})]})})})]}),p==="playing"&&r("div",{className:`alert ${ce()?"alert-success":"alert-warning"} mb-4`,children:[r(zl,{className:"h-5 w-5"}),r("span",{children:ce()?"Your Turn":"Opponent's Turn"})]}),p==="bidding"&&!A&&r("div",{className:"form-control mb-4",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Bid Time (seconds, min 60)"})}),r("div",{className:"join",children:[r("input",{type:"number",value:g,onInput:L=>y(parseInt(L.target.value,10)||60),min:"60",step:"1",className:"input input-bordered join-item w-full"}),r("button",{onClick:()=>k(g),className:"btn btn-primary join-item",children:"Submit Bid"})]})]}),r("div",{className:"flex flex-col gap-2",children:[r("button",{onClick:R,className:"btn btn-outline",children:[r(Yl,{className:"h-5 w-5 mr-2"}),"Copy FEN"]}),j&&r("div",{className:"alert alert-success text-sm",children:"FEN copied to clipboard!"})]})]})})]})]})}function F1(n){return V({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M392 105c.9-27 .2-56 .1-57H119.3c0 1-.8 30 .1 57H48c0 68 9.9 102.3 21 126.7S95.4 277 127.7 302c30.1 23.3 95.5 53.6 104.3 57.6v28.3c-4.6 10-23.5 28.2-83.3 28.2H128v48h256v-48h-25.7c-60.7 0-75-19.1-78.3-28.2v-28.3c9.3-4.6 80.9-40.3 104.4-57.5 25.2-18.4 50.9-51.5 58.7-70.3S464 167 464 105h-72zM109.6 211.9c-8.8-18.2-14-37.9-15.7-61.9h28.7c.7 6 1.4 11.3 2.3 16.3 6.6 39.2 14.8 70.2 25.7 96.5-17.3-13.5-31.3-30.8-41-50.9zm292.8 0c-9.9 20.3-24 37.7-41.6 51.3 11-26.2 19-56.8 25.8-96.9.8-5 1.6-10.3 2.3-16.3h29.3c-1.8 24-6.9 43.7-15.8 61.9z"},child:[]}]})(n)}function j1(n){return V({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 7a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 12 7Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"},child:[]},{tag:"path",attr:{d:"M7.328 1.47a.749.749 0 0 1 .53-.22h8.284c.199 0 .389.079.53.22l5.858 5.858c.141.14.22.33.22.53v8.284a.749.749 0 0 1-.22.53l-5.858 5.858a.749.749 0 0 1-.53.22H7.858a.749.749 0 0 1-.53-.22L1.47 16.672a.749.749 0 0 1-.22-.53V7.858c0-.199.079-.389.22-.53Zm.84 1.28L2.75 8.169v7.662l5.419 5.419h7.662l5.419-5.418V8.168L15.832 2.75Z"},child:[]}]})(n)}const Gn=(n,e)=>Math.floor(Math.random()*(e-n+1))+n,$1=["add","sub","mult","div"];function U1(){const e=new URLSearchParams(window.location.search).get("config");let t={min1:2,max1:100,min2:2,max2:100},s={min1:2,max1:12,min2:2,max2:100},i=120,o={add:!0,sub:!0,mult:!0,div:!0},a=!1;if(e)try{const I=JSON.parse(atob(e));t=I.addRange,s=I.multRange,i=I.duration,o=I.selectedOps,a=!0}catch{}const[c,u]=b(t),[l,d]=b(s),[h,f]=b(i),[p,m]=b(o),[g,y]=b("start"),[_,w]=b(0),[O,x]=b(0),[A,U]=b(null),[B,$]=b(""),[P,T]=b(!1),j=Oe(null),H=()=>{const I=$1.filter(ge=>p[ge]);if(I.length===0)return;const Z=I[Gn(0,I.length-1)];let R,L,fe,le;if(Z==="add"||Z==="sub"?(R=Gn(c.min1,c.max1),L=Gn(c.min2,c.max2)):(R=Gn(l.min1,l.max1),L=Gn(l.min2,l.max2)),Z==="add")fe=`${R} + ${L} = `,le=R+L;else if(Z==="sub"){const ge=R+L,Q=Math.random()>.5?R:L;fe=`${ge} - ${Q} = `,le=ge-Q}else if(Z==="mult")fe=`${R} × ${L} = `,le=R*L;else{const ge=R*L,Q=Math.random()>.5?R:L;fe=`${ge} ÷ ${Q} = `,le=ge/Q}U({question:fe,answer:le}),$("")},ue=()=>{if(!Object.values(p).some(Z=>Z)){alert("Please select at least one operation.");return}w(0),x(h),y("playing"),H()};J(()=>{a&&ue()},[]),J(()=>{if(g!=="playing")return;if(O<=0){y("ended");return}const I=setInterval(()=>{x(Z=>Z-1)},1e3);return()=>clearInterval(I)},[g,O]),J(()=>{g==="playing"&&j.current&&j.current.focus()},[g,A]),J(()=>{(async()=>{if(g==="ended"){const I={additionRange:c,multiplicationRange:l,duration:h,finalScore:_};console.log(JSON.stringify(I,null,2));const Z=(await W.profile.postProfileLogArithmetic(I)).data;T(Z.counted)}})()},[g,c,l,h,_]);const de=()=>{if(!A)return;const I=parseFloat(B);if(isNaN(I)){$("");return}Math.abs(I-A.answer)<1e-4?(w(Z=>Z+1),H()):$("")},ce=I=>{I.key==="Enter"&&de()},k=(I,Z,R,L)=>{const fe=parseInt(L,10);isNaN(fe)||I({...Z,[R]:fe})},F=()=>{const Z=btoa(JSON.stringify({addRange:c,multRange:l,duration:h,selectedOps:p})),R=`${window.location.origin}${window.location.pathname}?config=${Z}`;navigator.clipboard.writeText(R).then(()=>{alert("Shareable link copied to clipboard!")})};return g==="start"?r(z,{children:r("div",{className:"bg-base-100 mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full p-4",children:[r("h1",{className:"text-2xl font-bold mb-4",children:"Arithmetic Game"}),r("p",{className:"mb-4",children:"The Arithmetic Game is a fast-paced speed drill where you are given two minutes to solve as many arithmetic problems as you can."}),r("p",{className:"mb-4",children:"If you have any questions, please contact me."}),r("h2",{className:"text-xl font-semibold mb-2",children:"Addition"}),r("p",{className:"mb-4",children:[r("input",{type:"checkbox",checked:p.add,onChange:()=>m(I=>({...I,add:!I.add}))})," ","Range: (",r("input",{type:"number",className:"border p-1 w-16 mx-1",value:c.min1,onChange:I=>k(u,c,"min1",I.currentTarget.value)}),"to",r("input",{type:"number",className:"border p-1 w-16 mx-1",value:c.max1,onChange:I=>k(u,c,"max1",I.currentTarget.value)}),") + (",r("input",{type:"number",className:"border p-1 w-16 mx-1",value:c.min2,onChange:I=>k(u,c,"min2",I.currentTarget.value)}),"to",r("input",{type:"number",className:"border p-1 w-16 mx-1",value:c.max2,onChange:I=>k(u,c,"max2",I.currentTarget.value)}),")"]}),r("h2",{className:"text-xl font-semibold mb-2",children:"Subtraction"}),r("p",{className:"mb-4",children:[r("input",{type:"checkbox",checked:p.sub,onChange:()=>m(I=>({...I,sub:!I.sub}))})," ","Addition problems in reverse."]}),r("h2",{className:"text-xl font-semibold mb-2",children:"Multiplication"}),r("p",{className:"mb-4",children:[r("input",{type:"checkbox",checked:p.mult,onChange:()=>m(I=>({...I,mult:!I.mult}))})," ","Range: (",r("input",{type:"number",className:"border p-1 w-16 mx-1",value:l.min1,onChange:I=>k(d,l,"min1",I.currentTarget.value)}),"to",r("input",{type:"number",className:"border p-1 w-16 mx-1",value:l.max1,onChange:I=>k(d,l,"max1",I.currentTarget.value)}),") × (",r("input",{type:"number",className:"border p-1 w-16 mx-1",value:l.min2,onChange:I=>k(d,l,"min2",I.currentTarget.value)}),"to",r("input",{type:"number",className:"border p-1 w-16 mx-1",value:l.max2,onChange:I=>k(d,l,"max2",I.currentTarget.value)}),")"]}),r("h2",{className:"text-xl font-semibold mb-2",children:"Division"}),r("p",{className:"mb-4",children:[r("input",{type:"checkbox",checked:p.div,onChange:()=>m(I=>({...I,div:!I.div}))})," ","Multiplication problems in reverse."]}),r("h2",{className:"text-xl font-semibold mb-2",children:"Duration:"}),r("input",{type:"number",className:"border p-1 w-20",value:h,onChange:I=>{const Z=parseInt(I.currentTarget.value,10);isNaN(Z)||f(Z)}}),r("button",{className:"bg-blue-500 text-white p-2 rounded mt-4 mr-4",onClick:ue,children:"Start"}),r("button",{className:"bg-green-500 text-white p-2 rounded",onClick:F,children:"Share Config"})]})}):g==="playing"?r(z,{children:r("div",{className:"relative flex flex-col items-center justify-center h-[100%]",children:[r("div",{className:"absolute top-4 left-4 text-2xl font-bold",children:[r("div",{className:"flex items-center gap-2",children:[r(bd,{}),"Seconds left: ",O]}),r("div",{className:"flex items-center gap-2 mt-2",children:[r(F1,{}),"Score: ",_]}),r("button",{className:"flex items-center gap-2 mt-2 btn btn-error text-lg",onClick:()=>y("ended"),children:[r(j1,{}),"End Game Early"]})]}),r("div",{className:"flex flex-col items-center",children:A&&r("div",{className:"bg-base-300 w-[100vw] p-4 flex items-center justify-center text-4xl",children:[r("span",{children:A.question}),r("input",{type:"number",className:"border p-2 text-2xl w-32 ml-2",value:B,onChange:I=>$(I.currentTarget.value),onKeyDown:ce,ref:j})]})})]})}):r(z,{children:r("div",{className:"flex flex-col items-center justify-center h-[100%]",children:[r("h1",{className:"text-3xl font-bold mb-4",children:"Game Over"}),r("p",{className:"text-2xl",children:["Score: ",_]}),r("p",{className:"mb-4",children:P?"Your result was successfully recorded":"Your result did not meet the criteria to be recorded"}),r("button",{className:"bg-blue-500 text-white p-2 rounded",onClick:()=>y("start"),children:"Play Again"})]})})}function z1(){const[n,e]=b(""),[t,s]=b(""),[i,o]=b(""),[a,c]=b(""),[u,l]=b(!1),[d,h]=b(""),{route:f}=mn(),p=x=>{e(x.target.value)},m=x=>{s(x.target.value)},g=x=>{o(x.target.value)},y=x=>{c(x.target.value)};async function _(){if(l(!0),i!=a){h("Passwords must match"),l(!1);return}try{const x=await W.auth.apiSignUpEmailCreate({name:n,email:t,password:i,rememberMe:!0});if(x.data?.user&&!x.data.user.emailVerified){f(`/email-verification?email=${encodeURIComponent(t)}`);return}f("/")}catch(x){console.log(x);const A=x?.error?.message||"ERROR: REGISTER FAILED";h(A),console.log("ERROR:",x?.error?.message||x),l(!1)}}async function w(x){l(!0);try{const A=(await W.auth.socialSignIn({provider:x,callbackURL:new URL("/",window.location.origin).href})).data;window.location.href=A.url;return}catch(A){const U=A?.error?.message||"ERROR: REGISTER FAILED";h(U),console.log("ERROR:",A?.error?.message||A),l(!1)}}function O(x){x.preventDefault(),_()}return r(z,{children:r("div",{className:"mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full",children:r("div",{className:"card-body",children:[r("h1",{className:"text-center text-xl font-bold",children:"Create Your Account"}),r("form",{className:"fieldset",onSubmit:O,children:[r("label",{className:"label",children:"Name"}),r("label",{className:"input w-full",children:[r(hn,{}),r("input",{type:"text",required:!0,placeholder:"Name",onInput:p})]}),r("label",{className:"label",children:"Email"}),r("label",{className:"input w-full",children:[r(On,{}),r("input",{type:"text",required:!0,placeholder:"Email",onInput:m})]}),r("label",{className:"label",children:"Password"}),r("label",{className:"input w-full",children:[r(sr,{}),r("input",{type:"password",required:!0,placeholder:"Password",onInput:g})]}),r("label",{className:"label",children:"Confirm Password"}),r("label",{className:"input w-full",children:[r(sr,{}),r("input",{type:"password",required:!0,placeholder:"Confirm Password",onInput:y})]}),r("button",{disabled:u,className:"btn btn-neutral mt-4",type:"submit",children:"Sign Up"}),r("div",{children:r("p",{className:"text-center",children:["Already have an account?"," ",r("a",{className:"link-accent",href:"/login",children:"Sign in here"})]})})]}),d&&r("p",{className:"text-error",children:d}),r("div",{className:"divider",children:"Sign Up With"}),r("button",{className:"btn text-black bg-white font-bold",onClick:()=>w("google"),children:[r(Ei,{}),"Google"]}),r("button",{className:"btn text-white bg-black font-bold",onClick:()=>w("twitter"),children:[r(Si,{}),"Twitter (X)"]}),r("div",{className:"alert alert-info mt-3",children:r("div",{children:[r("h3",{className:"font-bold",children:"Note"}),r("div",{className:"text-sm",children:"Account name & icon changes require manual verification before being publicly displayed."})]})})]})})})}function H1(){const[n,e]=b(null),[t,s]=b(null),[i,o]=b("loading"),[a,c]=b(!1),[u,l]=b(!1),[d,h]=b(60),p=new URLSearchParams(window.location.search).get("email");J(()=>{m()},[]);const m=async()=>{try{const w=await W.auth.apiGetSessionList();w.data?(s(w.data),e(w.data.user),w.data.user.emailVerified?o("success"):p?await g(p):o("error")):o("error")}catch(w){console.error("Session check error:",w),o("error")}},g=async w=>{c(!0);try{await W.auth.apiSendVerificationEmailCreate({email:w,callbackURL:window.location.origin+"/email-verification"}),o("idle"),y()}catch(O){console.error("Send email error:",O),o("error")}finally{c(!1)}},y=()=>{l(!1);let w=60;h(w);const O=setInterval(()=>{w-=1,h(w),w<=0&&(clearInterval(O),l(!0))},1e3)},_=async()=>{!n||!u||await g(n.email)};return r("div",{className:"min-h-screen flex items-center justify-center bg-base-200 px-4",children:r("div",{className:"max-w-md w-full",children:r("div",{className:"card bg-base-100 shadow-xl",children:r("div",{className:"card-body text-center",children:[r("div",{className:"mb-4",children:[i==="loading"&&r("div",{className:"flex justify-center mb-4",children:r("span",{className:"loading loading-spinner loading-lg"})}),i==="success"&&r(Ul,{className:"mx-auto text-6xl text-success mb-4"}),i==="error"&&r(bt,{className:"mx-auto text-6xl text-error mb-4"}),i==="idle"&&r(On,{className:"mx-auto text-6xl text-primary mb-4"})]}),r("h1",{className:"card-title text-2xl justify-center mb-4",children:[i==="loading"&&"Checking Status...",i==="success"&&"Email Verified!",i==="error"&&"Verification Failed",i==="idle"&&"Check Your Email"]}),r("p",{className:"text-base-content/70 mb-6",children:[i==="loading"&&"Checking your email verification status...",i==="success"&&"Your email has been successfully verified! You can now access all features of the application.",i==="error"&&"There was an issue with email verification. Please try again or contact support.",i==="idle"&&`Please check your email (${n?.email}) for a verification link.`]}),i==="success"&&r("div",{className:"space-y-4",children:r("a",{href:"/profile",className:"btn btn-primary w-full",children:"Go to Profile"})}),(i==="error"||i==="idle")&&p&&r("div",{className:"space-y-4",children:[r("button",{onClick:_,disabled:!u||a,className:"btn btn-outline btn-primary w-full",children:a?r("span",{className:"loading loading-spinner loading-sm"}):r(z,{children:[r(Zl,{className:"mr-2"}),"Resend Verification Email"]})}),!u&&d>0&&r("p",{className:"text-sm text-base-content/60",children:["Resend available in ",d," seconds"]}),r("div",{className:"divider",children:"Already verified?"}),r("a",{href:"/profile",className:"btn btn-neutral w-full",children:"Go to Profile"})]}),r("div",{className:"mt-8 text-xs text-base-content/50",children:r("p",{children:"Didn't receive the email? Check your spam folder or contact support if you're still having issues."})})]})})})})}function q1(){return r(z,{children:r("div",{className:"container mx-auto p-4",children:[r("h1",{className:"text-3xl font-bold mb-8 flex items-center gap-3",children:[r(eu,{}),"Admin Panel"]}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r("a",{href:"/admin/users",className:"card shadow-lg hover:shadow-xl transition-shadow duration-300",children:r("div",{className:"card-body items-center text-center",children:[r(Ni,{className:"w-12 h-12 text-primary mb-4"}),r("h2",{className:"card-title",children:"User Management"}),r("p",{children:"Manage users, ban/unban, change passwords, and add custom fields"})]})}),r("a",{href:"/admin/comments",className:"card shadow-lg hover:shadow-xl transition-shadow duration-300",children:r("div",{className:"card-body items-center text-center",children:[r(bi,{className:"w-12 h-12 text-secondary mb-4"}),r("h2",{className:"card-title",children:"Pending Comments"}),r("p",{children:"Review and accept pending blog comments"})]})}),r("a",{href:"/admin/connections",className:"card shadow-lg hover:shadow-xl transition-shadow duration-300",children:r("div",{className:"card-body items-center text-center",children:[r($s,{className:"w-12 h-12 text-success mb-4"}),r("h2",{className:"card-title",children:"Connection Management"}),r("p",{children:"Monitor active WebSocket connections, send events and notifications"})]})}),r("a",{href:"/admin/profiles",className:"card shadow-lg hover:shadow-xl transition-shadow duration-300",children:r("div",{className:"card-body items-center text-center",children:[r(ou,{className:"w-12 h-12 text-info mb-4"}),r("h2",{className:"card-title",children:"Profile Verification"}),r("p",{children:"Verify or reject changes to user profiles including names and icons"})]})})]})]})})}function W1(){const[n,e]=b([]),[t,s]=b(!0),[i,o]=b(""),[a,c]=b(null),[u,l]=b(!1),[d,h]=b(!1),[f,p]=b(!1),[m,g]=b(""),[y,_]=b(""),[w,O]=b(null),[x,A]=b(""),[U,B]=b("permanent"),[$,P]=b(1);J(()=>{T()},[]);const T=async()=>{try{s(!0);const R=await W.auth.listUsers();e(R.data.users),o("")}catch(R){o(R instanceof Error?R.message:"Failed to fetch users"),console.error("Error fetching users:",R)}finally{s(!1)}},j=async R=>{try{await W.auth.unbanUser({userId:R}),await T()}catch(L){o(L instanceof Error?L.message:"Failed to unban user")}},H=async()=>{if(!(!a||!m.trim()))try{await W.auth.setUserPassword({userId:a.id,newPassword:m}),l(!1),g(""),c(null),o("")}catch(R){o(R instanceof Error?R.message:"Failed to change password")}},ue=async R=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await W.auth.removeUser({userId:R}),await T()}catch(L){o(L instanceof Error?L.message:"Failed to delete user")}},de=async()=>{if(!(!a||!y.trim()))try{const R={customField:y};await W.auth.updateUser({userId:a.id,data:JSON.stringify(R)}),h(!1),_(""),c(null),await T()}catch(R){o(R instanceof Error?R.message:"Failed to add custom field")}},ce=R=>new Date(R).toLocaleDateString("en-uk",{year:"numeric",month:"long",day:"numeric"}),k=(R,L)=>{if(R==="permanent")return null;const fe=new Date;switch(R){case"hours":return fe.getTime()+L*60*60*1e3;case"days":return fe.getTime()+L*24*60*60*1e3;case"weeks":return fe.getTime()+L*7*24*60*60*1e3;case"months":return fe.getTime()+L*30*24*60*60*1e3;default:return null}},F=R=>{O(R),A(""),B("permanent"),P(1),p(!0)},I=async()=>{if(!w)return;const R=U==="permanent"?void 0:k(U,$);try{const L={userId:w.id};x.trim()&&(L.banReason=x.trim()),R!=null&&(L.banExpiresIn=Math.floor(R/1e3)),await W.auth.banUser(L),p(!1),O(null),A(""),await T(),o("")}catch(L){o(L instanceof Error?L.message:"Failed to ban user")}},Z=()=>["Spam","Harassment","Inappropriate content","Violation of terms","Multiple complaints","Impersonation","Malicious behavior","Admin discretion"];return r(z,{children:r("div",{className:"container mx-auto p-4",children:[r("h1",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[r("a",{href:"/admin",class:"btn btn-ghost btn-sm",children:"← Back to Admin"}),r(Ni,{}),"User Management"]}),i&&r("div",{role:"alert",className:"alert alert-error mb-4",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r("span",{children:i})]}),t?r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})}):r("div",{className:"overflow-x-auto",children:r("table",{className:"table table-zebra w-full",children:[r("thead",{children:r("tr",{children:[r("th",{children:"Name"}),r("th",{children:"Email"}),r("th",{children:"ID"}),r("th",{children:"Role"}),r("th",{children:"Status"}),r("th",{children:"Created"}),r("th",{children:"Actions"})]})}),r("tbody",{children:n.map(R=>r("tr",{children:[r("td",{children:r("a",{href:`/profile/${R.id}`,className:"flex items-center gap-3",children:[r(It,{name:R.name,image:R.image}),r("div",{children:[r("div",{className:"font-bold",children:R.name}),R.emailVerified&&r("span",{className:"badge badge-success badge-sm",children:"Verified EMail"})]})]})}),r("td",{children:R.email}),r("td",{children:R.id}),r("td",{children:r("span",{className:`badge ${R.role==="admin"?"badge-primary":"badge-secondary"}`,children:R.role||"user"})}),r("td",{children:R.banned?r("span",{className:"badge badge-error",children:"Banned"}):r("span",{className:"badge badge-success",children:"Normal"})}),r("td",{children:ce(R.createdAt)}),r("td",{children:r("div",{className:"flex gap-1",children:[R.banned?r("button",{className:"btn btn-sm btn-success",onClick:()=>j(R.id),title:"Unban user",children:r(Ba,{})}):r("button",{className:"btn btn-sm btn-error",onClick:()=>F(R),title:"Ban user",children:r(fr,{})}),r("button",{className:"btn btn-sm btn-secondary",onClick:()=>{c(R),l(!0)},title:"Change password",children:r(sr,{})}),r("button",{className:"btn btn-sm btn-info",onClick:()=>{c(R),h(!0)},title:"Set user data",children:r(Jl,{})}),r("button",{className:"btn btn-sm btn-error",onClick:()=>ue(R.id),title:"Delete user",children:r(wi,{})})]})})]},R.id))})]})}),u&&a&&r("div",{className:"modal modal-open",children:r("div",{className:"modal-box",children:[r("h3",{className:"font-bold text-lg flex items-center gap-2",children:[r(sr,{}),"Change Password for ",a.name]}),r("div",{className:"py-4",children:r("input",{type:"password",placeholder:"Enter new password",className:"input input-bordered w-full",value:m,onChange:R=>g(R.currentTarget.value)})}),r("div",{className:"modal-action",children:[r("button",{className:"btn btn-ghost",onClick:()=>{l(!1),g(""),c(null)},children:"Cancel"}),r("button",{className:"btn btn-primary",onClick:H,disabled:!m.trim(),children:"Change Password"})]})]})}),d&&a&&r("div",{className:"modal modal-open",children:r("div",{className:"modal-box",children:[r("h3",{className:"font-bold text-lg flex items-center gap-2",children:[r(Ia,{}),"Set User Data for ",a.name]}),r("p",{className:"text-sm text-base-content/70 mb-4",children:["Store arbitrary JSON data with this user (e.g., custom fields, metadata). This will be stored as ",'{ "customField": "value" }',"."]}),r("div",{className:"py-4",children:r("input",{type:"text",placeholder:"Enter value (e.g., admin notes, internal flags)",className:"input input-bordered w-full",value:y,onChange:R=>_(R.currentTarget.value)})}),r("div",{className:"modal-action",children:[r("button",{className:"btn btn-ghost",onClick:()=>{h(!1),_(""),c(null)},children:"Cancel"}),r("button",{className:"btn btn-primary",onClick:de,disabled:!y.trim(),children:"Save Data"})]})]})}),r(Bc,{isOpen:f,user:w,onClose:()=>{p(!1),O(null),A("")},onSubmit:()=>I(),banReason:x,setBanReason:A,banDuration:U,setBanDuration:B,banDurationValue:$,setBanDurationValue:P,getPresetBanReasons:Z})]})})}const V1=(n,e)=>{if(n==="permanent")return null;const t=new Date;switch(n){case"hours":return t.getTime()+e*60*60*1e3;case"days":return t.getTime()+e*24*60*60*1e3;case"weeks":return t.getTime()+e*7*24*60*60*1e3;case"months":return t.getTime()+e*30*24*60*60*1e3;default:return null}};function G1(n){const[e,t]=b(null),[s,i]=b(""),[o,a]=b("permanent"),[c,u]=b(1);return{banUserSelected:e,setBanUserSelected:t,banReason:s,setBanReason:i,banDuration:o,setBanDuration:a,banDurationValue:c,setBanDurationValue:u,openBanDialog:f=>{t(f),i(""),a("permanent"),u(1)},handleAdvancedBanUser:async()=>{if(!e)return;const f=o==="permanent"?void 0:V1(o,c);try{const p={userId:e.id};s.trim()&&(p.banReason=s.trim()),f!=null&&(p.banExpiresIn=Math.floor(f/1e3)),await W.auth.banUser(p),t(null),i(""),n()}catch(p){console.error("Failed to ban user:",p)}},getPresetBanReasons:()=>["Spam","Harassment","Inappropriate content","Violation of terms","Multiple complaints","Impersonation","Malicious behavior","Admin discretion"]}}function Bc({isOpen:n,user:e,onClose:t,onSubmit:s,banReason:i,setBanReason:o,banDuration:a,setBanDuration:c,banDurationValue:u,setBanDurationValue:l,getPresetBanReasons:d}){if(!n||!e)return null;const h=(f,p)=>{if(f==="permanent")return null;const m=new Date;switch(f){case"hours":return m.getTime()+p*60*60*1e3;case"days":return m.getTime()+p*24*60*60*1e3;case"weeks":return m.getTime()+p*7*24*60*60*1e3;case"months":return m.getTime()+p*30*24*60*60*1e3;default:return null}};return r("div",{className:"modal modal-open",children:r("div",{className:"modal-box max-w-md",children:[r("h3",{className:"font-bold text-lg flex items-center gap-2 mb-4",children:[r(bt,{className:"text-error"}),"Ban User: ",e.name]}),r("div",{className:"space-y-4",children:[r("div",{children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Ban Reason (Optional)"})}),r("textarea",{className:"textarea textarea-bordered w-full h-24 resize-none",placeholder:"Enter reason for ban...",value:i,onChange:f=>o(f.currentTarget.value),maxLength:500}),r("div",{className:"label",children:r("span",{className:"label-text-alt text-base-content/60",children:[i.length,"/500 characters"]})}),r("div",{className:"mt-2",children:[r("label",{className:"label",children:r("span",{className:"label-text text-sm",children:"Quick Select:"})}),r("div",{className:"flex flex-wrap gap-1",children:d().map(f=>r("button",{className:"btn btn-xs btn-outline",onClick:()=>o(f),type:"button",children:f},f))})]})]}),r("div",{children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Ban Duration"})}),r("div",{className:"flex gap-2",children:[r("select",{className:"select select-bordered flex-1",value:a,onChange:f=>c(f.currentTarget.value),children:[r("option",{value:"permanent",children:[r(Xl,{className:"inline mr-2"}),"Permanent"]}),r("option",{value:"hours",children:[r(cn,{className:"inline mr-2"}),"Hours"]}),r("option",{value:"days",children:[r(cn,{className:"inline mr-2"}),"Days"]}),r("option",{value:"weeks",children:[r(cn,{className:"inline mr-2"}),"Weeks"]}),r("option",{value:"months",children:[r(cn,{className:"inline mr-2"}),"Months"]})]}),a!=="permanent"&&r("input",{type:"number",className:"input input-bordered w-20",min:"1",max:"999",value:u,onChange:f=>l(parseInt(f.currentTarget.value)||1)})]}),a!=="permanent"&&r("div",{className:"label",children:r("span",{className:"label-text-alt text-base-content/60",children:["Expires:"," ",h(a,u)?new Date(h(a,u)).toLocaleString():"Invalid date"]})})]})]}),r("div",{className:"alert alert-warning mt-4",children:[r(bt,{}),r("div",{children:[r("div",{className:"font-semibold",children:"Warning"}),r("div",{className:"text-sm",children:"This will restrict the user's access. Ensure the ban is justified and follows community guidelines."})]})]}),r("div",{className:"modal-action",children:[r("button",{className:"btn btn-ghost",onClick:()=>{t(),o("")},children:"Cancel"}),r("button",{className:"btn btn-error",onClick:s,children:[r(fr,{className:"mr-2"}),"Ban User"]})]})]})})}function K1(){const[n,e]=b([]),[t,s]=b(!0),[i,o]=b("");J(()=>{a()},[]);const a=async()=>{try{s(!0);const l=await W.blog.getBlogAdminCommentsPending();e(l.data),o("")}catch(l){o(l instanceof Error?l.message:"Failed to fetch pending comments"),console.error("Error fetching comments:",l)}finally{s(!1)}},c=async l=>{try{await W.blog.patchBlogAdminCommentsByCommentIdModerate(l,{action:"accept"}),e(d=>d.filter(h=>h._id!==l))}catch(d){o(d instanceof Error?d.message:"Failed to accept comment")}},u=async l=>{try{await W.blog.patchBlogAdminCommentsByCommentIdModerate(l,{action:"delete"}),e(d=>d.filter(h=>h._id!==l))}catch(d){o(d instanceof Error?d.message:"Failed to delete comment")}};return r(z,{children:r("div",{className:"container mx-auto p-4",children:[r("h1",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[r("a",{href:"/admin",class:"btn btn-ghost btn-sm",children:"← Back to Admin"}),r(bi,{}),"Pending Comments"]}),i&&r("div",{role:"alert",className:"alert alert-error mb-4",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r("span",{children:i})]}),t?r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})}):n.length===0?r("div",{className:"text-center py-8",children:r("h2",{className:"text-lg font-medium text-base-content/70",children:"No pending comments"})}):r("div",{className:"space-y-6",children:n.map((l,d)=>r(Za,{content:l.content,createdAt:l.createdAt,authorId:l.authorId,showAcceptButton:!0,onAccept:c,showDeleteButton:!0,onDelete:u,commentId:l._id},l._id||d))})]})})}function Y1(){const[n,e]=b([]),[t,s]=b(!0),[i,o]=b(""),[a,c]=b(null),[u,l]=b(!1),[d,h]=b(!1),[f,p]=b(!1),[m,g]=b(!1),[y,_]=b({eventName:"",eventPayload:""}),[w,O]=b({type:"info",text:"",time:"3000"});J(()=>{x()},[]);const x=async()=>{try{s(!0);const P=await W.connections.getConnections();e(P.data.connections),o("")}catch(P){o(P instanceof Error?P.message:"Failed to fetch connections")}finally{s(!1)}},A=async P=>{try{let T;try{T=JSON.parse(y.eventPayload||"{}")}catch{o("Invalid JSON payload");return}await W.connections.postConnectionsSendEvent({socketId:P,event:y.eventName,data:T}),l(!1),p(!1),_({eventName:"",eventPayload:""}),o(""),o("Event sent successfully"),setTimeout(()=>o(""),3e3)}catch(T){o(T instanceof Error?T.message:"Failed to send event")}},U=async P=>{try{const T={type:w.type,text:w.text,time:parseInt(w.time)||3e3};await W.connections.postConnectionsSendEvent({socketId:P,event:"notification",data:T}),h(!1),g(!1),O({type:"info",text:"",time:"3000"}),o(""),o("Notification sent successfully"),setTimeout(()=>o(""),3e3)}catch(T){o(T instanceof Error?T.message:"Failed to send notification")}},B=async P=>{if(confirm("Are you sure you want to disconnect this connection? The user will reconnect automatically unless their client has issues."))try{await W.connections.postConnectionsDisconnect({socketId:P}),await x(),o("")}catch(T){o(T instanceof Error?T.message:"Failed to disconnect connection")}},$=P=>new Date(P).toLocaleString("en-uk",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return r(z,{children:r("div",{className:"container mx-auto p-4",children:[r("h1",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[r("a",{href:"/admin",className:"btn btn-ghost btn-sm",children:"← Back to Admin"}),r($s,{}),"Connection Management"]}),r("div",{className:"mb-4 flex gap-2",children:[r("button",{className:"btn btn-primary",onClick:()=>p(!0),children:[r(is,{}),"Broadcast Event"]}),r("button",{className:"btn btn-secondary",onClick:()=>g(!0),children:[r(un,{}),"Broadcast Notification"]})]}),i&&r("div",{role:"alert",className:`alert mb-4 ${i.includes("success")?"alert-success":"alert-error"}`,children:r("span",{children:i})}),t?r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})}):r("div",{className:"overflow-x-auto",children:r("table",{className:"table table-zebra w-full",children:[r("thead",{children:r("tr",{children:[r("th",{children:"User"}),r("th",{children:"IP Address"}),r("th",{children:"Connected At"}),r("th",{children:"Route"}),r("th",{children:"Actions"})]})}),r("tbody",{children:n.map(P=>r("tr",{children:[r("td",{children:P.userData?r("a",{href:`/profile/${P.userData.id}`,className:"flex items-center gap-3",children:[r(It,{name:P.userData.name,image:P.userData.image}),r("div",{className:"flex flex-col",children:[r("div",{className:"font-bold",children:P.userData.name}),P.userData.banned&&r("span",{className:"badge badge-error badge-sm",children:"Banned"})]})]}):r("div",{className:"flex items-center gap-3",children:[r($s,{className:"w-8 h-8 text-base-content opacity-40"}),r("span",{children:"Anonymous"})]})}),r("td",{children:P.socketInfo.ip||"Unknown"}),r("td",{children:$(P.connectedAt)}),r("td",{className:"font-mono text-sm",children:P.route}),r("td",{children:r("div",{className:"flex gap-1",children:[r("button",{className:"btn btn-sm btn-info",title:"Send custom event",onClick:()=>{c(P),l(!0)},children:r(is,{})}),r("button",{className:"btn btn-sm btn-warning",title:"Send notification",onClick:()=>{c(P),h(!0)},children:r(un,{})}),r("button",{className:"btn btn-sm btn-error",title:"Force disconnect",onClick:()=>B(P.socketId),children:r(ir,{})})]})})]},P.socketId))})]})}),(u||f)&&r("div",{className:"modal modal-open",children:r("div",{className:"modal-box",children:[r("h3",{className:"font-bold text-lg flex items-center gap-2",children:[r(is,{}),u?"Send Event to Connection":"Broadcast Event"]}),r("div",{className:"py-4",children:[r("div",{className:"form-control mb-4",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Event Name"})}),r("input",{type:"text",placeholder:"notification",className:"input input-bordered",value:y.eventName,onChange:P=>_(T=>({...T,eventName:P.currentTarget.value}))})]}),r("div",{className:"form-control",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Event Payload (JSON)"})}),r("textarea",{placeholder:'{"key": "value"}',className:"textarea textarea-bordered",value:y.eventPayload,onChange:P=>_(T=>({...T,eventPayload:P.currentTarget.value})),rows:4})]})]}),r("div",{className:"modal-action",children:[r("button",{className:"btn btn-ghost",onClick:()=>{l(!1),p(!1),_({eventName:"",eventPayload:""})},children:"Cancel"}),r("button",{className:"btn btn-primary",onClick:()=>A(u?a?.socketId:void 0),disabled:!y.eventName.trim(),children:"Send Event"})]})]})}),(d||m)&&r("div",{className:"modal modal-open",children:r("div",{className:"modal-box",children:[r("h3",{className:"font-bold text-lg flex items-center gap-2",children:[r(un,{}),d?"Send Notification to Connection":"Broadcast Notification"]}),r("div",{className:"py-4",children:[r("div",{className:"form-control mb-4",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Notification Type"})}),r("select",{className:"select select-bordered",value:w.type,onChange:P=>O(T=>({...T,type:P.currentTarget.value})),children:[r("option",{value:"info",children:"Info"}),r("option",{value:"success",children:"Success"}),r("option",{value:"warning",children:"Warning"}),r("option",{value:"error",children:"Error"})]})]}),r("div",{className:"form-control mb-4",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Message Text"})}),r("textarea",{placeholder:"Enter notification message...",className:"textarea textarea-bordered",value:w.text,onChange:P=>O(T=>({...T,text:P.currentTarget.value})),rows:3})]}),r("div",{className:"form-control",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Duration (ms)"})}),r("input",{type:"number",placeholder:"3000",className:"input input-bordered",value:w.time,onChange:P=>O(T=>({...T,time:P.currentTarget.value})),min:"1000",max:"10000"})]})]}),r("div",{className:"modal-action",children:[r("button",{className:"btn btn-ghost",onClick:()=>{h(!1),g(!1),O({type:"info",text:"",time:"3000"})},children:"Cancel"}),r("button",{className:"btn btn-primary",onClick:()=>U(d?a?.socketId:void 0),disabled:!w.text.trim(),children:"Send Notification"})]})]})})]})})}function Fc({banned:n,banReason:e,banExpires:t,className:s=""}){if(!n)return null;const i=new Date,o=t?new Date(t):null;if(o&&o<=i)return null;const c=u=>new Date(u).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return r("div",{className:`alert alert-error ${s}`,children:[r(fr,{}),r("div",{className:"flex flex-col gap-1",children:[r("div",{className:"font-semibold",children:"User is Banned"}),e&&r("div",{className:"flex items-start gap-2 text-sm",children:[r(Gl,{className:"mt-0.5 flex-shrink-0"}),r("span",{children:e})]}),o&&r("div",{className:"flex items-center gap-2 text-sm",children:[r(cn,{}),r("span",{children:["Expires: ",c(o)]})]})]})]})}function Q1(){const[n,e]=b([]),[t,s]=b([]),[i,o]=b(!0),[a,c]=b(""),u=async()=>{try{o(!0);const[p,m]=await Promise.all([W.admin.getAdminProfileUnverified(),W.auth.listUsers()]);e(p.data),s(m.data.users||[]),c("")}catch(p){c(p instanceof Error?p.message:"Failed to fetch data"),console.error("Error fetching data:",p)}finally{o(!1)}},l=G1(u);J(()=>{u()},[]);const d=p=>t.find(m=>m.id===p),h=async p=>{try{await W.admin.postAdminProfileByUserIdVerify(p),await u()}catch(m){c(m instanceof Error?m.message:"Failed to verify profile")}},f=async p=>{try{await W.auth.unbanUser({userId:p}),await u()}catch(m){c(m instanceof Error?m.message:"Failed to unban user")}};return r(z,{children:r("div",{className:"container mx-auto p-4",children:[r("h1",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[r("a",{href:"/admin",className:"btn btn-ghost btn-sm",children:"← Back to Admin"}),r(Ni,{}),"Profile Verification"]}),a&&r("div",{role:"alert",className:"alert alert-error mb-4",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r("span",{children:a})]}),i?r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})}):n.length===0?r("div",{className:"text-center py-8",children:r("h2",{className:"text-lg font-medium text-base-content/70",children:"No unverified profiles"})}):r("div",{className:"overflow-x-auto",children:r("table",{className:"table table-zebra w-full",children:[r("thead",{children:r("tr",{children:[r("th",{children:"User ID"}),r("th",{children:"Current Profile"}),r("th",{children:"Proposed Changes"}),r("th",{children:"Status"}),r("th",{children:"Actions"})]})}),r("tbody",{children:n.map(p=>{const m=d(p.id);return r("tr",{children:[r("td",{children:p.id}),r("td",{children:r("a",{href:`/profile/${p.id}`,className:"flex items-center gap-3",children:[r(It,{name:p.verifiedName||"No Name",image:p.verifiedImage}),r("div",{children:r("div",{className:"font-bold",children:p.verifiedName||"No verified name"})})]})}),r("td",{children:r("a",{href:`/profile/${p.id}`,className:"flex items-center gap-3",children:[r(It,{name:p.name,image:p.image}),r("div",{children:[r("div",{className:"font-bold",children:p.name}),r("div",{className:"text-sm opacity-70",children:["New Icon:"," ",p.image!=p.verifiedImage?"Yes":"No"]})]})]})}),r("td",{children:m?m.banned?r(Fc,{banned:m.banned,banReason:m.banReason,banExpires:m.banExpires,className:"text-xs"}):r("span",{className:"badge badge-success",children:"Active"}):r("span",{className:"badge badge-neutral",children:"Unknown"})}),r("td",{children:r("div",{className:"flex gap-1",children:[r("button",{className:"btn btn-sm btn-success",onClick:()=>h(p.id),title:"Verify profile changes",children:r(Kt,{})}),m?.banned?r("button",{className:"btn btn-sm btn-success",onClick:()=>f(p.id),title:"Unban user",children:r(Ba,{})}):r("button",{className:"btn btn-sm btn-error",onClick:()=>{const g=d(p.id);g&&l.openBanDialog(g)},title:"Ban user",children:r(fr,{})})]})})]},p.id)})})]})}),r(Bc,{isOpen:!!l.banUserSelected,user:l.banUserSelected,onClose:()=>l.setBanUserSelected(null),onSubmit:l.handleAdvancedBanUser,banReason:l.banReason,setBanReason:l.setBanReason,banDuration:l.banDuration,setBanDuration:l.setBanDuration,banDurationValue:l.banDurationValue,setBanDurationValue:l.setBanDurationValue,getPresetBanReasons:l.getPresetBanReasons})]})})}function X1(n){const[e,t]=b(null),[s,i]=b(null),[o,a]=b(!0),[c,u]=b(null);J(()=>{l()},[]);const l=async()=>{try{a(!0),u(null);const d=await W.auth.apiGetSessionList();if(!d.data)throw new Error("No session data received");i(d.data),t(d.data.user)}catch(d){if(console.error("Settings user data load error:",d),d?.error?.status===401){u("Session expired. Please log in again.");return}u(d?.error?.message||d?.message||"Failed to load user data. Please try refreshing the page.")}finally{a(!1)}};return o?r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})})})}):c||!e?r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"alert alert-error",children:r("span",{children:c||"User not authenticated"})})})}):r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"max-w-4xl mx-auto",children:[r("h1",{className:"text-3xl font-bold mb-8",children:"Account Settings"}),r("div",{className:"card bg-base-100 shadow-xl mb-8",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title",children:"Profile Information"}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r("div",{children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Name"})}),r("input",{type:"text",value:e.name,className:"input input-bordered w-full",readOnly:!0})]}),r("div",{children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Email"})}),r("input",{type:"email",value:e.email,className:"input input-bordered w-full",readOnly:!0})]}),r("div",{children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Verified"})}),r("div",{className:"flex items-center gap-2",children:e.emailVerified?r(z,{children:[r(Kt,{className:"text-success"}),r("span",{children:"Email Verified"})]}):r(z,{children:[r(ir,{className:"text-error"}),r("span",{children:"Email Not verified"})]})}),r("div",{className:"flex items-center gap-2",children:e.verifiedName==e.name&&(e.verifiedImage||null)==(e.image||null)?r(z,{children:[r(Kt,{className:"text-success"}),r("span",{children:"Profile Verified"})]}):r(z,{children:[r(ir,{className:"text-error"}),r("span",{children:"Profile Not verified"})]})})]}),r("div",{children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Joined"})}),r("div",{children:r("span",{children:new Date(e.createdAt).toLocaleDateString()})})]})]})]})}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:r("div",{className:"card-body",children:[r("div",{className:"flex items-center gap-3",children:[r(hn,{size:32}),r("div",{children:[r("h3",{className:"card-title text-lg",children:"Change Name"}),r("p",{className:"text-sm opacity-70",children:"Update your display name"})]})]}),r("div",{className:"card-actions justify-end mt-4",children:r("a",{href:"/settings/name",className:"btn btn-primary btn-sm",children:"Change Name"})})]})}),r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:r("div",{className:"card-body",children:[r("div",{className:"flex items-center gap-3",children:[r(_i,{size:32}),r("div",{children:[r("h3",{className:"card-title text-lg",children:"Change Password"}),r("p",{className:"text-sm opacity-70",children:"Update your password"})]})]}),r("div",{className:"card-actions justify-end mt-4",children:r("a",{href:"/settings/password",className:"btn btn-primary btn-sm",children:"Change Password"})})]})}),!e.emailVerified&&r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow border-warning border-2",children:r("div",{className:"card-body",children:[r("div",{className:"flex items-center gap-3",children:[r(On,{size:32,className:"text-warning"}),r("div",{children:[r("h3",{className:"card-title text-lg",children:"Verify Email"}),r("p",{className:"text-sm opacity-70",children:"Your email is not verified. Verify it to access all features."})]})]}),r("div",{className:"card-actions justify-end mt-4",children:r("a",{href:`/email-verification?email=${encodeURIComponent(e.email)}`,className:"btn btn-warning btn-sm",children:"Verify Email"})})]})}),r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:r("div",{className:"card-body",children:[r("div",{className:"flex items-center gap-3",children:[r(yi,{size:32}),r("div",{children:[r("h3",{className:"card-title text-lg",children:"Connected Accounts"}),r("p",{className:"text-sm opacity-70",children:"Manage social logins"})]})]}),r("div",{className:"card-actions justify-end mt-4",children:r("a",{href:"/settings/accounts",className:"btn btn-primary btn-sm",children:"Manage Accounts"})})]})}),r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:r("div",{className:"card-body",children:[r("div",{className:"flex items-center gap-3",children:[r(Ra,{size:32}),r("div",{children:[r("h3",{className:"card-title text-lg",children:"Active Sessions"}),r("p",{className:"text-sm opacity-70",children:"View and manage sessions"})]})]}),r("div",{className:"card-actions justify-end mt-4",children:r("a",{href:"/settings/sessions",className:"btn btn-primary btn-sm",children:"View Sessions"})})]})}),r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:r("div",{className:"card-body",children:[r("div",{className:"flex items-center gap-3",children:[r(un,{size:32}),r("div",{children:[r("h3",{className:"card-title text-lg",children:"Notifications"}),r("p",{className:"text-sm opacity-70",children:"Manage email and push notification preferences"})]})]}),r("div",{className:"card-actions justify-end mt-4",children:r("a",{href:"/settings/notifications",className:"btn btn-primary btn-sm",children:"Notification Settings"})})]})}),r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:r("div",{className:"card-body",children:[r("div",{className:"flex items-center gap-3",children:[r(Ma,{size:32}),r("div",{children:[r("h3",{className:"card-title text-lg",children:"Uploaded Images"}),r("p",{className:"text-sm opacity-70",children:"Manage your account images, including profile picture"})]})]}),r("div",{className:"card-actions justify-end mt-4",children:r("a",{href:"/settings/images",className:"btn btn-primary btn-sm",children:"Manage Images"})})]})}),r("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow border-red-500 border-2",children:r("div",{className:"card-body",children:[r("div",{className:"flex items-center gap-3",children:[r(bt,{size:32,className:"text-red-500"}),r("div",{children:[r("h3",{className:"card-title text-lg text-error",children:"Danger Zone"}),r("p",{className:"text-sm opacity-70",children:"Delete your account"})]})]}),r("div",{className:"card-actions justify-end mt-4",children:r("a",{href:"/settings/delete",className:"btn btn-error btn-outline btn-sm",children:"Delete Account"})})]})})]})]})})})}function J1(n){const[e,t]=b(null),[s,i]=b(""),[o,a]=b(!0),[c,u]=b(!1),[l,d]=b(null),[h,f]=b(!1);J(()=>{p()},[]);const p=async()=>{try{a(!0),d(null);const y=await W.auth.apiGetSessionList();if(!y.data)throw new Error("No session data received");t(y.data.user),i(y.data.user.name)}catch(y){if(console.error("Name settings user data load error:",y),y?.error?.status===401){d("Session expired. Please log in again.");return}d(y?.error?.message||y?.message||"Failed to load user data. Please try refreshing the page.")}finally{a(!1)}},m=async()=>{if(!(!s.trim()||s.trim()===e?.name))try{u(!0),d(null),f(!1),await W.auth.apiUpdateUserCreate({name:s.trim()}),await p(),f(!0),setTimeout(()=>f(!1),3e3)}catch(y){console.error("Name update error:",y),d(y?.error?.message||y?.message||"Failed to update name")}finally{u(!1)}};if(o)return r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})})})});if(l&&!e)return r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"alert alert-error",children:r("span",{children:l})})})});const g=s.trim()!==e?.name&&s.trim()!=="";return r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"max-w-2xl mx-auto",children:[r("div",{className:"flex items-center gap-4 mb-8",children:[r("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),r("h1",{className:"text-3xl font-bold",children:"Change Name"})]}),r("div",{className:"card bg-base-100 shadow-xl",children:r("div",{className:"card-body",children:[r("div",{className:"form-control",children:[r("label",{className:"label",children:[r("span",{className:"label-text",children:"Display Name"}),r("span",{className:"label-text-alt",children:"Visible to other users"})]}),r("input",{type:"text",placeholder:"Enter your name",className:"input input-bordered w-full",value:s,onInput:y=>i(y.target.value),maxLength:50}),r("label",{className:"label",children:r("span",{className:"label-text-alt",children:[s.length,"/50 characters"]})})]}),l&&r("div",{className:"alert alert-error mt-4",children:r("span",{children:l})}),h&&r("div",{className:"alert alert-success mt-4",children:r("span",{children:"Name updated successfully!"})}),r("div",{className:"card-actions justify-between mt-6",children:[r("a",{href:"/settings",className:"btn btn-ghost",children:"Cancel"}),r("button",{className:`btn btn-primary ${c?"loading":""}`,onClick:m,disabled:!g||c,children:c?"Updating...":"Update Name"})]})]})}),r("div",{className:"alert alert-info mt-6",children:r("div",{children:[r("h3",{className:"font-bold",children:"Name Guidelines"}),r("div",{className:"text-sm",children:r("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[r("li",{children:"Your name should be appropriate and respectful"}),r("li",{children:"Maximum 50 characters allowed"}),r("li",{children:"This name will be visible to other users"}),r("li",{children:"Name and profile image require verification before public display"})]})})]})})]})})})}function Z1(n){const[e,t]=b(""),[s,i]=b(""),[o,a]=b(""),[c,u]=b(!1),[l,d]=b(null),[h,f]=b(!1),[p,m]=b(!1),{route:g}=mn(),y=()=>e.trim()?s.trim()?s.length<8?(d("New password must be at least 8 characters long"),!1):s!==o?(d("Passwords do not match"),!1):e===s?(d("New password must be different from current password"),!1):!0:(d("New password is required"),!1):(d("Current password is required"),!1),_=async()=>{if(y())try{u(!0),d(null),f(!1),await W.auth.apiChangePasswordCreate({newPassword:s,currentPassword:e,revokeOtherSessions:p}),f(!0),t(""),i(""),a(""),setTimeout(()=>{f(!1),g("/settings")},5e3)}catch(A){console.error("Password update error:",A),d(A?.error?.message||A?.message||"Failed to update password")}finally{u(!1)}},w=A=>{let U=0;return A.length>=8&&U++,/[A-Z]/.test(A)&&U++,/[a-z]/.test(A)&&U++,/[0-9]/.test(A)&&U++,/[^A-Za-z0-9]/.test(A)&&U++,U},O=A=>["Very Weak","Weak","Fair","Good","Strong"][A-1]||"Very Weak",x=A=>["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"][A-1]||"bg-red-500";return r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"max-w-2xl mx-auto",children:[r("div",{className:"flex items-center gap-4 mb-8",children:[r("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),r("h1",{className:"text-3xl font-bold",children:"Change Password"})]}),r("div",{className:"card bg-base-100 shadow-xl",children:r("div",{className:"card-body",children:[r("div",{className:"form-control",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Current Password"})}),r("input",{type:"password",placeholder:"Enter current password",className:"input input-bordered w-full",value:e,onInput:A=>t(A.target.value)})]}),r("div",{className:"form-control mt-4",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"New Password"})}),r("input",{type:"password",placeholder:"Enter new password",className:"input input-bordered w-full",value:s,onInput:A=>i(A.target.value)}),s&&r("div",{className:"mt-2",children:[r("div",{className:"flex items-center justify-between text-sm",children:[r("span",{children:"Password strength:"}),r("span",{className:`font-medium ${x(w(s)).replace("bg-","text-")}`,children:O(w(s))})]}),r("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:r("div",{className:`h-2 rounded-full ${x(w(s))}`,style:{width:`${w(s)/5*100}%`}})})]})]}),r("div",{className:"form-control mt-4",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Confirm New Password"})}),r("input",{type:"password",placeholder:"Confirm new password",className:"input input-bordered w-full",value:o,onInput:A=>a(A.target.value)}),o&&s&&r("div",{className:"mt-1 flex items-center gap-1",children:s===o?r("span",{className:"text-success text-sm",children:[r(Kt,{})," Passwords match"]}):r("span",{className:"text-error text-sm",children:[r(ir,{})," Passwords do not match"]})})]}),r("div",{className:"form-control mt-4",children:r("label",{className:"label cursor-pointer",children:[r("input",{type:"checkbox",className:"checkbox",checked:p,onChange:A=>m(A.target.checked)}),r("span",{className:"label-text",children:["Revoke all other sessions",r("span",{className:"text-sm opacity-70 block",children:"Log out from all devices and browsers after password change"})]})]})}),l&&r("div",{className:"alert alert-error mt-4",children:r("span",{children:l})}),h&&r("div",{className:"alert alert-success mt-4",children:r("span",{children:"Password updated successfully! All other sessions have been revoked if selected."})}),r("div",{className:"card-actions justify-between mt-6",children:[r("a",{href:"/settings",className:"btn btn-ghost",children:"Cancel"}),r("button",{className:`btn btn-primary ${c?"loading":""}`,onClick:_,disabled:c||!e||!s||!o,children:c?"Updating...":"Update Password"})]})]})}),r("div",{className:"alert alert-info mt-6",children:r("div",{children:[r("h3",{className:"font-bold",children:"Password Requirements"}),r("div",{className:"text-sm",children:r("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[r("li",{children:"Minimum 8 characters long"}),r("li",{children:"Use a mix of uppercase and lowercase letters"}),r("li",{children:"Include at least one number"}),r("li",{children:"Add special characters for extra strength"}),r("li",{children:"Choose a password different from your current one"})]})})]})})]})})})}function em(n){const[e,t]=b([]),[s,i]=b(!0),[o,a]=b(null),[c,u]=b(null),[l,d]=b(null),[h,f]=b(null);J(()=>{p()},[]);const p=async()=>{try{i(!0),d(null);const x=await W.auth.apiListAccountsList();t(x.data||[])}catch(x){console.error("Connected accounts load error:",x),d(x?.error?.message||x?.message||"Failed to load accounts")}finally{i(!1)}},m=async(x,A)=>{try{a(x),d(null),await W.auth.apiUnlinkAccountCreate({providerId:x,accountId:A}),f(`Successfully unlinked ${y(x)}`),await p(),setTimeout(()=>f(null),3e3)}catch(U){console.error("Unlink account error:",U),d(U?.error?.message||U?.message||"Failed to unlink account")}finally{a(null)}},g=async x=>{try{u(x),d(null);const A=(await W.auth.apiLinkSocialCreate({provider:x,callbackURL:`${window.location.origin}/settings/accounts`})).data;window.location.href=A.url,await p()}catch(A){console.error("Link account error:",A),d(A?.error?.message||A?.message||"Failed to link account")}finally{u(null)}},y=x=>({google:"Google",twitter:"Twitter",github:"GitHub",discord:"Discord",facebook:"Facebook"})[x]||x,_=x=>({google:r(Ei,{size:32}),twitter:r(Si,{size:32}),github:r(Fl,{size:32}),discord:r(Rl,{size:32}),facebook:r(Bl,{size:32})})[x]||r(yi,{}),w=x=>e.some(A=>A.providerId===x),O=["google","twitter","github","discord"];return s?r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})})})}):r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"max-w-3xl mx-auto",children:[r("div",{className:"flex items-center gap-4 mb-8",children:[r("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),r("h1",{className:"text-3xl font-bold",children:"Connected Accounts"})]}),r("div",{className:"card bg-base-100 shadow-xl mb-8",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title text-xl mb-4",children:"Linked Accounts"}),e.length===0?r("p",{className:"text-gray-500",children:"No accounts linked yet. Connect your social accounts below."}):r("div",{className:"space-y-4",children:e.map(x=>r("div",{className:"flex items-center justify-between p-4 border border-base-300 rounded-lg",children:[r("div",{className:"flex items-center gap-3",children:[r("span",{className:"text-lg",children:_(x.providerId)}),r("div",{children:[r("div",{className:"font-semibold",children:y(x.providerId)}),r("div",{className:"text-sm text-gray-500",children:["Connected on"," ",new Date(x.createdAt).toLocaleDateString()]}),x.scopes&&x.scopes.length>0&&r("div",{className:"text-xs text-gray-400",children:["Scopes: ",x.scopes.join(", ")]})]})]}),r("button",{className:`btn btn-sm btn-outline btn-error ${o===x.providerId?"loading":""}`,onClick:()=>m(x.providerId,x.accountId),disabled:o!==null,children:o===x.providerId?"Unlinking...":"Unlink"})]},x.id))})]})}),r("div",{className:"card bg-base-100 shadow-xl",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title text-xl mb-4",children:"Connect New Account"}),r("p",{className:"text-sm text-gray-600 mb-6",children:"Connect your social accounts to easily sign in and link your profiles."}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:O.map(x=>{const A=w(x);return r("div",{className:`flex items-center justify-between p-4 border border-base-300 rounded-lg ${A?"bg-base-200":""}`,children:[r("div",{className:"flex items-center gap-3",children:[r("span",{className:"text-lg",children:_(x)}),r("div",{children:[r("div",{className:"font-semibold",children:y(x)}),r("div",{className:"text-sm text-gray-500",children:A?"Already connected":"Available to connect"})]})]}),r("button",{className:`btn btn-sm ${A?"btn-disabled":"btn-primary"} ${c===x?"loading":""}`,onClick:()=>g(x),disabled:A||c!==null,children:A?"Connected":c===x?"Connecting...":"Connect"})]},x)})})]})}),l&&r("div",{className:"alert alert-error mt-6",children:r("span",{children:l})}),h&&r("div",{className:"alert alert-success mt-6",children:r("span",{children:h})}),r("div",{className:"alert alert-info mt-6",children:r("div",{children:[r("h3",{className:"font-bold",children:"About Connected Accounts"}),r("div",{className:"text-sm mt-2",children:[r("p",{className:"mb-2",children:"Connecting social accounts allows you to:"}),r("ul",{className:"list-disc list-inside space-y-1",children:[r("li",{children:"Sign in more easily using your social credentials"}),r("li",{children:"Link your profiles across different platforms"}),r("li",{children:"Import profile information and avatars"}),r("li",{children:"Maintain a unified account across services"})]}),r("p",{className:"mt-2",children:[r("strong",{children:"Note:"})," Unlinking an account will remove the connection but won't delete your account. Make sure you have other ways to sign in before unlinking your last connected account."]})]})]})})]})})})}function tm(n){const[e,t]=b([]),[s,i]=b(!0),[o,a]=b(null),[c,u]=b(!1),[l,d]=b(null),[h,f]=b(null),[p,m]=b(null);J(()=>{g()},[]);const g=async()=>{try{i(!0),d(null);const B=await W.auth.apiGetSessionList();if(!B.data)throw new Error("No session data received");m(B.data.session.id);const $=await W.auth.apiListSessionsList();t($.data||[])}catch(B){if(console.error("Sessions load error:",B),B?.error?.status===401){d("Session expired. Please log in again.");return}d(B?.error?.message||B?.message||"Failed to load sessions. Please try refreshing the page.")}finally{i(!1)}},y=B=>{if(!B)return r(js,{});const $=B.toLowerCase();return $.includes("mobile")||$.includes("android")||$.includes("iphone")?r(Ra,{}):$.includes("tablet")||$.includes("ipad")?r(ru,{}):r(js,{})},_=B=>{if(!B)return"Desktop";const $=B.toLowerCase();return $.includes("mobile")?"Mobile":$.includes("tablet")?"Tablet":$.includes("android")?"Android":$.includes("iphone")||$.includes("ipad")?"iOS":$.includes("windows")?"Windows":$.includes("mac")?"macOS":$.includes("linux")?"Linux":"Desktop"},w=async(B,$=!1)=>{if($){await O();return}try{a(B),d(null),await W.auth.apiRevokeSessionCreate({token:B}),f("Session revoked successfully"),await g(),setTimeout(()=>f(null),3e3)}catch(P){console.error("Revoke session error:",P),d(P?.error?.message||P?.message||"Failed to revoke session")}finally{a(null)}},O=async()=>{try{u(!0),d(null),await W.auth.apiRevokeOtherSessionsCreate({}),f("All other sessions revoked successfully"),await g(),setTimeout(()=>f(null),3e3)}catch(B){console.error("Revoke other sessions error:",B),d(B?.error?.message||B?.message||"Failed to revoke other sessions")}finally{u(!1)}},x=B=>{const $=new Date(B),T=new Date().getTime()-$.getTime(),j=Math.floor(T/(1e3*60*60*24)),H=Math.floor(T/(1e3*60*60)),ue=Math.floor(T/(1e3*60));return ue<1?"Just now":ue<60?`${ue} minutes ago`:H<24?`${H} hours ago`:j<7?`${j} days ago`:$.toLocaleDateString()+" "+$.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},A=e.filter(B=>B.id!==p),U=A.length>0;return s?r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})})})}):r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"max-w-4xl mx-auto",children:[r("div",{className:"flex items-center gap-4 mb-8",children:[r("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),r("h1",{className:"text-3xl font-bold",children:"Active Sessions"})]}),U&&r("div",{className:"card bg-base-100 shadow-xl mb-8",children:r("div",{className:"card-body",children:r("div",{className:"flex items-center justify-between",children:[r("div",{children:[r("h3",{className:"card-title text-lg",children:"Active Sessions"}),r("p",{className:"text-sm opacity-70",children:[A.length," other session",A.length!==1?"s":""," active"]})]}),r("button",{className:`btn btn-outline btn-error ${c?"loading":""}`,onClick:O,disabled:c,children:c?"Revoking...":"Revoke All Others"})]})})}),p&&r("div",{className:"card bg-base-100 shadow-xl mb-8",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title text-xl mb-4",children:"Current Session"}),r("div",{className:"space-y-4",children:e.filter(B=>B.id===p).map(B=>r("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-success text-success-content bg-opacity-10 border-success border-opacity-30",children:[r("div",{className:"flex items-center gap-3",children:[r(Kt,{size:32}),r("div",{children:[r("div",{className:"font-semibold flex items-center gap-2",children:[_(B.userAgent||""),r("span",{className:"badge badge-success badge-sm",children:"Current"})]}),r("div",{className:"text-sm",children:["IP: ",B.ipAddress||"Unknown"]}),r("div",{className:"text-sm",children:["Started: ",x(B.createdAt)]})]})]}),r("div",{className:"text-xs opacity-50",children:"Active now"})]},B.id))})]})}),r("div",{className:"card bg-base-100 shadow-xl",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title text-xl mb-4",children:"Other Sessions"}),U?r("div",{className:"space-y-4",children:A.map(B=>r("div",{className:"flex items-center justify-between p-4 border border-base-300 rounded-lg",children:[r("div",{className:"flex items-center gap-3",children:[r("div",{className:"avatar placeholder",children:r("div",{className:"bg-neutral text-neutral-content rounded-full w-10 flex items-center justify-center text-sm",children:y(B.userAgent||"")})}),r("div",{children:[r("div",{className:"font-semibold",children:_(B.userAgent||"")}),r("div",{className:"text-sm text-gray-500",children:["IP: ",B.ipAddress||"Unknown"]}),r("div",{className:"text-sm text-gray-500",children:["Started: ",x(B.createdAt)]}),r("div",{className:"text-sm text-gray-500",children:["Last active: ",x(B.updatedAt)]})]})]}),r("button",{className:`btn btn-sm btn-outline btn-error ${o===B.token?"loading":""}`,onClick:()=>w(B.token),disabled:o!==null||c,children:o===B.token?"Revoking...":"Revoke"})]},B.id))}):r("div",{className:"text-center py-8",children:[r(_i,{className:"text-6xl mb-4 mx-auto"}),r("h3",{className:"font-bold text-lg mb-2",children:"No Other Active Sessions"}),r("p",{className:"text-gray-500 text-sm",children:"Other devices and browsers where you're signed in will appear here."})]})]})}),l&&r("div",{className:"alert alert-error mt-6",children:r("span",{children:l})}),h&&r("div",{className:"alert alert-success mt-6",children:r("span",{children:h})}),r("div",{className:"alert alert-info mt-6",children:r("div",{children:[r("h3",{className:"font-bold",children:"Session Security"}),r("div",{className:"text-sm mt-2",children:[r("p",{className:"mb-2",children:"Active sessions represent devices and browsers where you're currently signed in."}),r("ul",{className:"list-disc list-inside space-y-1",children:[r("li",{children:"Monitor and revoke access from suspicious or unused devices"}),r("li",{children:"Regularly review your active sessions for security"}),r("li",{children:"Revoking a session immediately logs it out"}),r("li",{children:"If you suspect unauthorized access, change your password immediately"})]})]})]})})]})})})}function nm(n){const e=Ci(),[t,s]=b(null),[i,o]=b([]),[a,c]=b(!0),[u,l]=b(!1),[d,h]=b(!1),[f,p]=b(null),[m,g]=b(null),[y,_]=b(null),w=Oe(null);J(()=>{O()},[]);const O=async()=>{try{c(!0),g(null);const T=await W.auth.apiGetSessionList();if(!T.data)throw new Error("No session data received");s(T.data.user),await x()}catch(T){if(console.error("Settings data load error:",T),T?.error?.status===401){g("Session expired. Please log in again.");return}g(T?.error?.message||T?.message||"Failed to load data. Please try refreshing the page.")}finally{c(!1)}},x=async()=>{try{const T=await W.images.getImages();if(T.data&&T.data.images){const j=T.data.images.map(H=>({id:H.id,filename:H.filename,url:H.url,createdAt:new Date(H.uploadedAt).toISOString()}));o(j)}else o([])}catch(T){console.error("Failed to load images:",T),o([])}},A=T=>T.size>5242880?"File size must be less than 5MB":["image/jpeg","image/png","image/gif","image/webp"].includes(T.type)?null:"Only JPEG, PNG, GIF, and WebP images are allowed",U=async(T,j=0)=>{const H=T.target,ue=H.files?.[0];if(!ue)return;_(null);const de=A(ue);if(de){_(de),H&&(H.value="");return}try{l(!0),_(null),await W.images.postImagesUpload({image:ue}),await x(),e({text:"Image uploaded successfully!",type:"success",time:3e3}),H&&(H.value="")}catch(ce){if(console.error("Upload error:",ce),j<2&&(!ce?.error?.status||ce?.error?.status>=500)){_(`Upload failed, retrying... (${j+1}/3)`),setTimeout(()=>U(T,j+1),1e3+j*2e3);return}_(ce?.error?.message||ce?.message||"Failed to upload image")}finally{l(!1)}},B=async T=>{try{h(!0),await W.auth.apiUpdateUserCreate({image:T}),s(j=>j?{...j,image:T}:null),e({text:"Profile picture updated successfully!",type:"success",time:3e3})}catch(j){console.error("Profile update error:",j),e({text:j?.error?.message||j?.message||"Failed to update profile picture",type:"error",time:5e3})}finally{h(!1)}},$=async T=>{if(confirm("Are you sure you want to delete this image?"))try{p(T),await W.images.deleteImagesByImageId(T),await x(),e({text:"Image deleted successfully!",type:"success",time:3e3}),t?.image===T&&s(j=>j?{...j,image:null}:null)}catch(j){console.error("Delete error:",j),e({text:j?.error?.message||j?.message||"Failed to delete image",type:"error",time:5e3})}finally{p(null)}},P=T=>`http://my-website.space/backend/images/${T}`;return a?r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})})})}):m&&!t?r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"alert alert-error",children:r("span",{children:m})})})}):r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"max-w-4xl mx-auto",children:[r("div",{className:"flex items-center gap-4 mb-8",children:[r("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),r("h1",{className:"text-3xl font-bold",children:"Uploaded Images"})]}),r("div",{className:"card bg-base-100 shadow-xl mb-6",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title",children:["Current Profile Picture"," ",r("button",{class:"btn btn-error btn-xs",onClick:()=>B(""),children:"Reset Profile Picture"})]}),r("div",{className:"flex items-center gap-4",children:[t&&r(It,{name:t.name,image:t.image||""}),r("div",{children:[r("p",{className:"text-sm opacity-70",children:"Your profile picture will be visible to other users on the site."}),t?.image&&r("p",{className:"text-sm mt-2",children:[r(Kt,{className:"text-success inline mr-1"}),"Profile picture is set"]}),!t?.image&&r("p",{className:"text-sm mt-2",children:[r(ir,{className:"text-warning inline mr-1"}),"No profile picture set"]})]})]})]})}),r("div",{className:"card bg-base-100 shadow-xl mb-6",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title",children:"Upload New Image"}),r("div",{className:"form-control",children:[r("input",{ref:w,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"file-input file-input-bordered w-full",onChange:U,disabled:u,"aria-label":"Upload new profile image","aria-describedby":"file-upload-help file-error-message"}),r("label",{className:"label",children:r("span",{id:"file-upload-help",className:"label-text-alt",children:"Maximum file size: 5MB. Supported formats: JPEG, PNG, GIF, WebP"})})]}),y&&r("div",{id:"file-error-message",className:"alert alert-error mt-4",role:"alert","aria-live":"polite",children:r("span",{children:y})}),u&&r("div",{className:"alert alert-info mt-4","aria-live":"polite",children:[r("span",{className:"loading loading-spinner loading-sm"}),r("span",{children:"Uploading image..."})]})]})}),r("div",{className:"card bg-base-100 shadow-xl",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title",children:"Your Images"}),i.length===0?r("div",{className:"text-center py-8 opacity-70",children:[r(Ma,{size:48,className:"mx-auto mb-4"}),r("p",{children:"No images uploaded yet. Upload your first profile image above."})]}):r("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",role:"grid","aria-label":"Image gallery",children:i.map(T=>r("div",{className:"card bg-base-200 shadow-md",role:"gridcell",children:[r("figure",{className:"px-4 pt-4",children:r("img",{src:P(T.id),alt:T.filename,className:"rounded-xl w-full h-32 object-cover",onError:j=>{const H=j.target;H.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjOWNhM2FmIiBkPSJNMTIgMkM5LjIyIDIgNi4xNSA0Ljg3IDUuNTQgOC4wOGMtMC4xNiAwLjQzLTAuMjcgMC44OS0wLjI3IDEuMzh2MTAuNzVjMCAxLjEwLjg5IDIgMiAycTE2LjY3IDAgMTEuMzMtMTMuNzJDMTYuODMgNC42IDE0Ljc5IDIgMTIgMnoiLz48L3N2Zz4="}})}),r("div",{className:"card-body p-4",children:[r("div",{className:"card-actions justify-center gap-2",children:[r("button",{className:`btn btn-primary btn-xs ${d?"loading":""}`,onClick:()=>B(new URL("/images/"+T.id,W.baseUrl).href),disabled:d||t?.image===T.id,"aria-label":t?.image===new URL("/images/"+T.id,W.baseUrl).href?`Current profile picture: ${T.filename}`:`Set ${T.filename} as profile picture`,children:t?.image===new URL("/images/"+T.id,W.baseUrl).href?r(z,{children:[r(Kt,{size:12}),"Current"]}):"Set as Profile"}),r("button",{className:`btn btn-error btn-xs ${f===T.id?"loading":""}`,onClick:()=>$(T.id),disabled:f===T.id,"aria-label":`Delete image: ${T.filename}${t?.image===T.id?" (currently set as profile picture)":""}`,children:r(wi,{size:12})})]}),t?.image===T.id&&r("p",{className:"text-xs text-center mt-2 text-primary font-medium","aria-live":"polite",children:"Currently set as profile picture"})]})]},T.id))})]})}),m&&r("div",{className:"alert alert-error mt-6",children:r("span",{children:m})}),r("div",{className:"alert alert-info mt-6",children:r("div",{children:[r("h3",{className:"font-bold",children:"Image Guidelines"}),r("div",{className:"text-sm",children:r("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[r("li",{children:"Maximum file size: 5MB"}),r("li",{children:"Supported formats: JPEG, PNG, GIF, WebP"}),r("li",{children:"Images will be accessible to other logged-in users"}),r("li",{children:"Profile images require verification before public display"})]})})]})})]})})})}const rm=[{key:"chess_match_created",displayName:"Match Notices",description:"Receive notifications when chess matches are created or updated."}],Kn=[{key:"email",displayName:"Email",icon:r(On,{}),supported:!0},{key:"push",displayName:"Browser Push",icon:r(js,{}),supported:!1}];function sm(n){const[e,t]=b([]),[s,i]=b(!0),[o,a]=b(null),[c,u]=b(!1),[l,d]=b(!1),[h,f]=b("default"),[p,m]=b(!1),[g,y]=b(null),[_,w]=b(null),O="BP7lZ9EBTKuO9ArR-ymCZoCauu0VJYxCrn09weZ7fCPMVpTxvUHoUoG2TY_I2ELGx512TOc1AuP3uMAk2nMug1Y",x=k=>/^[A-Za-z0-9\-_]{80,100}$/.test(k);J(()=>{A()},[]);const A=async()=>{try{const k="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;console.log("Browser support check:",{serviceWorker:"serviceWorker"in navigator,PushManager:"PushManager"in window,Notification:"Notification"in window,isPushSupported:k});const F=x(O);if(d(k&&F),Kn[1].supported=k&&F,k){try{f(Notification.permission)}catch(I){console.warn("Could not get notification permission status:",I),f("default")}await U()}await B()}catch(k){console.error("Failed to initialize notifications:",k),y("Failed to initialize notification system")}},U=async()=>{if(l)try{console.log("Checking for existing service worker registration...");let F=(await navigator.serviceWorker.getRegistrations()).find(Z=>Z.scope.includes("/sw.js"));if(F)if(console.log("Service Worker already registered:",F),F.active&&F.active.scriptURL.includes("/sw.js"))if(console.log("Existing registration is valid"),F.pushManager){console.log("Push manager is available on existing registration"),m(!0);return}else throw new Error("Push manager not available on existing registration");else console.log("Existing registration is outdated or incorrect, unregistering..."),await F.unregister(),F=null;if(F||(console.log("Registering new service worker..."),F=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),console.log("Service Worker registered successfully:",F)),await navigator.serviceWorker.ready,console.log("Service Worker is ready"),F.pushManager)console.log("Push manager is available"),m(!0);else throw new Error("Push manager not available on registration")}catch(k){console.error("Service Worker registration failed:",k);let F="Failed to register service worker for push notifications";throw k.name==="SecurityError"?F="Security error: Cannot register service worker. This may be due to browser security policies.":k.name==="NotSupportedError"?F="Service workers are not supported in this browser or context.":k.message?.includes("network")?F="Network error while loading service worker. Check your internet connection.":k.message?.includes("script")&&(F="Service worker script not found. Ensure /sw.js exists and is accessible."),y(F),m(!1),k}},B=async()=>{try{i(!0),y(null);const k=await W.notifications.getNotificationsSubscriptions();t(k.data||[])}catch(k){if(console.error("Load subscriptions error:",k),k?.error?.status===401){y("Session expired. Please log in again.");return}y(k?.error?.message||k?.message||"Failed to load notification settings. Please try refreshing the page.")}finally{i(!1)}},$=async()=>{if(!l)return!1;try{y(null);const k=await Notification.requestPermission();return f(k),k==="granted"?(w("Push notification permission granted!"),setTimeout(()=>w(null),3e3),!0):(y("Push notification permission denied. You can change this in your browser settings."),!1)}catch(k){return console.error("Permission request failed:",k),y("Failed to request permission for notifications"),!1}},P=async()=>{if(!l||!p)throw new Error("Push notifications not supported");if(c)throw new Error("Push registration already in progress");try{if(u(!0),y(null),!x(O))throw new Error("Invalid VAPID key format. Push notifications require a valid VAPID public key.");const k=await navigator.serviceWorker.ready;let F=await k.pushManager.getSubscription();if(!F)try{F=await k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:H(O)})}catch(L){throw console.error("Push subscription failed:",L),L.name==="NotAllowedError"?new Error("Push permission was denied. Please enable notifications in your browser settings and try again."):L.name==="AbortError"?new Error("Push subscription was cancelled. Please try again."):L.message?.includes("VAPID")?new Error("Invalid VAPID key. Push notifications cannot be enabled until a valid VAPID key is configured by the administrator."):L.message?.includes("network")||L.message?.includes("fetch")?new Error("Network error during push subscription. Check your internet connection and try again."):new Error(`Push subscription failed: ${L.message||L.name||"Unknown error"}`)}const I=F.getKey("p256dh"),Z=F.getKey("auth");if(!I||!Z)throw new Error("Failed to get subscription keys");const R={endpoint:F.endpoint,keys:{p256dh:ue(I),auth:ue(Z)}};await W.notifications.postNotificationsRegisterPush({pushSubscription:R}),w("Push notifications registered successfully!"),setTimeout(()=>w(null),3e3)}catch(k){console.error("Push registration error:",k);let F="Failed to register for push notifications";throw k.message?.includes("permission")||k.message?.includes("denied")?F="Push notification permission required. Please allow notifications in your browser and try again.":k.message?.includes("VAPID")||k.message?.includes("key")?F="Push notifications are not properly configured. Contact the administrator to set up VAPID keys.":k.message?.includes("network")||k.message?.includes("connection")?F="Network error. Please check your internet connection and try again.":k.message?.includes("in progress")&&(F="Push registration already in progress. Please wait and try again."),y(F),k}finally{u(!1)}},T=async(k,F)=>{try{const I=`${k}-${F}`;a(I),y(null),w(null),e.find(R=>R.eventType===k&&R.methods.includes(F))?(await W.notifications.postNotificationsUnsubscribe({eventType:k}),w(`${F==="email"?"Email":"Push"} notifications disabled for ${k.replace("_"," ")}`)):(await j(k,F),w(`${F==="email"?"Email":"Push"} notifications enabled for ${k.replace("_"," ")}`)),setTimeout(()=>w(null),3e3),await B()}catch(I){console.error("Toggle subscription error:",I),y(I?.error?.message||I?.message||"Failed to update notification settings")}finally{a(null)}},j=async(k,F)=>{if(F==="push"){if(h!=="granted"&&!await $())throw new Error("Push permission denied");await P()}await W.notifications.postNotificationsSubscribe({eventType:k,methods:[F]})},H=k=>{const F="=".repeat((4-k.length%4)%4),I=(k+F).replace(/-/g,"+").replace(/_/g,"/"),Z=window.atob(I),R=new Uint8Array(Z.length);for(let L=0;L<Z.length;++L)R[L]=Z.charCodeAt(L);return R},ue=k=>{const F=new Uint8Array(k);let I="";for(let Z=0;Z<F.byteLength;Z++)I+=String.fromCharCode(F[Z]);return window.btoa(I)},de=(k,F)=>e.some(I=>I.eventType===k&&I.methods.includes(F)),ce=k=>Kn.find(F=>F.key===k)?.displayName||k;return s?r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})})}):r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"max-w-6xl mx-auto",children:[r("div",{className:"flex items-center gap-4 mb-8",children:[r("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),r("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r(un,{}),"Notification Settings"]})]}),l&&r("div",{className:"alert alert-info mb-6",children:[r(lo,{}),r("div",{children:[r("h3",{className:"font-bold",children:"Push Notification Status"}),r("div",{className:"text-sm mt-1 space-y-1",children:[r("div",{children:[r("strong",{children:"Browser Support:"})," ",r("span",{className:"text-success",children:"Supported"})]}),r("div",{children:[r("strong",{children:"Permission:"})," ",r("span",{className:`font-semibold ${h==="granted"?"text-success":h==="denied"?"text-error":"text-warning"}`,children:h==="granted"?"Granted":h==="denied"?"Blocked":"Not Requested"})]}),r("div",{children:[r("strong",{children:"Service Worker:"})," ",r("span",{className:`font-semibold ${p?"text-success":"text-error"}`,children:p?"Registered":"Failed"}),!p&&r("button",{className:"btn btn-xs btn-primary ml-2",onClick:async()=>{try{y(null),await U(),w("Service Worker registered successfully!"),setTimeout(()=>w(null),3e3)}catch{y("Failed to register service worker. Check the browser console for details.")}},children:"Retry Registration"})]}),h==="denied"&&r("div",{className:"mt-2 text-xs",children:[r(bt,{className:"inline mr-1"}),"Browser notifications are blocked. You can enable them in your browser settings to receive push notifications."]})]})]})]}),!x(O)&&r("div",{className:"alert alert-error mb-6",children:[r(bt,{}),r("div",{children:[r("h3",{className:"font-bold",children:"Push Notifications Unavailable"}),r("div",{className:"text-sm mt-1 space-y-2",children:[r("p",{children:[r("strong",{children:"⚠️ VAPID Key Issue:"})," Push notifications are disabled because"," ","the configured VAPID public key is invalid (wrong format)","."]}),r("div",{className:"bg-base-200 p-3 rounded text-xs font-mono",children:[r("p",{className:"font-semibold mb-2",children:"To enable push notifications:"}),r("div",{className:"space-y-1",children:[r("p",{className:"text-primary",children:"1. Install web-push CLI tool globally:"}),r("code",{className:"block bg-base-300 p-1 rounded mt-1",children:"npm install -g web-push"}),r("p",{className:"text-primary mt-2",children:"2. Generate VAPID keypair:"}),r("code",{className:"block bg-base-300 p-1 rounded mt-1",children:"web-push generate-vapid-keys"}),r("p",{className:"text-primary mt-2",children:"3. Copy the PUBLIC key output and replace the invalid key:"}),r("code",{className:"block bg-base-300 p-1 rounded mt-1",children:'const VAPID_PUBLIC_KEY = "YOUR_PUBLIC_KEY_HERE";'}),r("p",{className:"text-primary mt-2",children:"4. Also save the PRIVATE key for your backend server."})]})]}),r("p",{className:"text-xs opacity-70",children:[r("strong",{children:"What are VAPID keys?"})," They identify your application server for push notifications, enabling secure communication between your backend and push services (FCM, Apple, Mozilla, etc.)."]})]})]})]}),x(O)&&!l&&r("div",{className:"alert alert-warning mb-6",children:[r(bt,{}),r("div",{children:[r("h3",{className:"font-bold",children:"Browser Not Supported"}),r("div",{className:"text-sm",children:"Your browser doesn't support push notifications. Browser push notifications will not be available. Email notifications are still supported."})]})]}),r("div",{className:"card bg-base-100 shadow-xl mb-6",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title text-xl mb-4",children:"Notification Preferences"}),r("p",{className:"text-sm opacity-70 mb-6",children:"Configure how you want to be notified about different events on the platform."}),r("div",{className:"overflow-x-auto",children:r("table",{className:"table table-zebra",children:[r("thead",{children:r("tr",{children:[r("th",{children:"Event"}),r("th",{children:"Description"}),Kn.map(k=>r("th",{className:"text-center",children:r("div",{className:"flex items-center justify-center gap-2",children:[k.icon,k.displayName,!k.supported&&r("span",{className:"text-xs text-error",children:"(Not supported)"}),k.key==="push"&&h==="denied"&&r("span",{className:"text-xs text-error",children:"(Blocked)"})]})},k.key))]})}),r("tbody",{children:rm.map(k=>r("tr",{children:[r("td",{className:"font-semibold",children:k.displayName}),r("td",{className:"text-sm opacity-80 max-w-xs",children:k.description}),Kn.map(F=>{const I=`${k.key}-${F.key}`,Z=de(k.key,F.key),R=o===I;return r("td",{className:"text-center",children:r("button",{className:`btn btn-sm ${Z?"btn-success":"btn-outline btn-neutral"} ${R||c?"loading":""}`,onClick:()=>T(k.key,F.key),disabled:R||!F.supported||F.key==="push"&&h==="denied"||c,children:!R&&!c&&r(z,{children:Z?r(z,{children:[r(jl,{className:"mr-1"}),"On"]}):r(z,{children:[r(un,{className:"mr-1"}),"Off"]})})})},F.key)})]},k.key))})]})})]})}),e.length>0&&r("div",{className:"card bg-base-100 shadow-xl mb-6",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title text-xl",children:"Active Notifications"}),r("p",{className:"text-sm opacity-70 mb-4",children:"Overview of your current notification subscriptions."}),r("div",{className:"overflow-x-auto",children:r("table",{className:"table",children:[r("thead",{children:r("tr",{children:[r("th",{children:"Event"}),r("th",{children:"Methods"}),r("th",{children:"Created"})]})}),r("tbody",{children:e.map(k=>r("tr",{children:[r("td",{className:"font-semibold",children:k.eventType.replace("_"," ").replace(/\b\w/g,F=>F.toUpperCase())}),r("td",{children:r("div",{className:"flex gap-2",children:k.methods.map(F=>r("div",{className:"flex items-center gap-2 badge badge-outline",children:[Kn.find(I=>I.key===F)?.icon,ce(F)]},F))})}),r("td",{className:"text-sm opacity-80",children:new Date(k.createdAt).toLocaleDateString()})]},k.id))})]})})]})}),r("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r("div",{className:"alert alert-info",children:[r(lo,{}),r("div",{children:[r("h3",{className:"font-bold",children:"Browser Notifications"}),r("div",{className:"text-sm mt-1",children:"Push notifications require permission and a modern browser. You'll be prompted to allow notifications when enabling them."})]})]}),r("div",{className:"alert alert-info",children:[r(On,{}),r("div",{children:[r("h3",{className:"font-bold",children:"Email Notifications"}),r("div",{className:"text-sm mt-1",children:"Email notifications are sent to your registered email address. Make sure your email is verified for reliable delivery."})]})]})]}),g&&r("div",{className:"alert alert-error mt-6",children:[r(bt,{}),r("span",{children:g})]}),_&&r("div",{className:"alert alert-success mt-6",children:[r(un,{}),r("span",{children:_})]})]})})}function im(n){const[e,t]=b(""),[s,i]=b(""),[o,a]=b(!1),[c,u]=b(null),[l,d]=b(null),{route:h}=mn();return r(z,{children:r("div",{className:"container mx-auto px-4 py-8",children:r("div",{className:"max-w-2xl mx-auto",children:[r("div",{className:"flex items-center gap-4 mb-8",children:[r("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),r("h1",{className:"text-3xl font-bold text-error",children:"Delete Account"})]}),r("div",{className:"alert alert-error mb-8",children:r("div",{children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.268 16.5c-.77.833 0 2.5 1.732 2.5z"})}),r("div",{children:[r("h3",{className:"font-bold text-lg",children:"Danger Zone"}),r("div",{className:"text-sm",children:"Deleting your account is permanent and cannot be undone. All your data, posts, comments, and settings will be permanently removed."})]})]})}),r("div",{className:"card bg-base-100 shadow-xl mb-8",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title text-xl text-error",children:"What will be deleted?"}),r("div",{className:"space-y-3",children:[r("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[r(hn,{className:"text-error text-xl"}),r("div",{className:"text-sm",children:[r("strong",{children:"Profile & Personal Data:"})," Your name, email, profile picture, and personal information"]})]}),r("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[r(Kl,{className:"text-error text-xl"}),r("div",{className:"text-sm",children:[r("strong",{children:"Content & Activity:"})," All posts, comments, likes, and any content you've created"]})]}),r("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[r(yi,{className:"text-error text-xl"}),r("div",{className:"text-sm",children:[r("strong",{children:"Connected Accounts:"})," All social media links and connected services will be disconnected"]})]}),r("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[r(_i,{className:"text-error text-xl"}),r("div",{className:"text-sm",children:[r("strong",{children:"Sessions:"})," All active sessions will be terminated"]})]}),r("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[r(Vl,{className:"text-error text-xl"}),r("div",{className:"text-sm",children:[r("strong",{children:"Settings & Preferences:"})," All personal settings, themes, and customizations"]})]})]}),r("div",{className:"mt-6 p-4 bg-warning text-warning-content bg-opacity-10 border border-warning rounded-lg",children:[r("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[r(bt,{}),"Important Considerations"]}),r("ul",{className:"text-sm list-disc list-inside space-y-1",children:[r("li",{children:[r("strong",{children:"Backup your data:"})," Download or save any important content before deleting"]}),r("li",{children:[r("strong",{children:"Connected services:"})," You may need to re-authorize with other services"]}),r("li",{children:[r("strong",{children:"Premium features:"})," Any paid features or subscriptions will be immediately canceled"]}),r("li",{children:[r("strong",{children:"No recovery:"})," Once deleted, accounts cannot be recovered"]})]})]})]})}),r("div",{className:"card bg-base-100 shadow-xl border-red-500 border-2",children:r("div",{className:"card-body",children:[r("h2",{className:"card-title text-xl text-error",children:"Confirm Account Deletion"}),r("div",{className:"form-control",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:"Enter your password to confirm"})}),r("input",{type:"password",placeholder:"Enter your current password",className:"input input-bordered w-full",value:e,onInput:p=>t(p.target.value)})]}),r("div",{className:"form-control mt-4",children:[r("label",{className:"label",children:r("span",{className:"label-text",children:'Type "DELETE" to confirm permanent deletion'})}),r("input",{type:"text",placeholder:"Type DELETE here",className:"input input-bordered w-full",value:s,onInput:p=>i(p.target.value)}),r("label",{className:"label",children:r("span",{className:"label-text-alt",children:"This action cannot be undone"})})]}),c&&r("div",{className:"alert alert-error mt-4",children:r("span",{children:c})}),r("div",{className:"card-actions justify-between mt-8",children:[r("a",{href:"/settings",className:"btn btn-ghost",children:"Cancel"}),r("button",{className:`btn btn-error ${o?"loading":""}`,onClick:async()=>{if(!e.trim()){u("Password is required to delete your account");return}if(s!=="DELETE"){u("Please type 'DELETE' to confirm account deletion");return}try{a(!0),u(null);const p=await W.auth.apiDeleteUserCreate({password:e.trim(),callbackURL:`${window.location.origin}/settings`});p.data?.message==="Verification email sent"?(alert("A confirmation email has been sent to your email address. Please check your email and click the confirmation link to complete the account deletion."),h("/settings")):p.data?.success&&(alert("Your account has been successfully deleted."),h("/"))}catch(p){console.error("Delete account error:",p),u(p?.error?.message||p?.message||"Failed to delete account")}finally{a(!1)}},disabled:o||!e.trim()||s!=="DELETE",children:o?"Deleting Account...":"Delete My Account"})]})]})}),r("div",{className:"alert alert-warning mt-6",children:r("div",{children:[r("h3",{className:"font-bold",children:"Think twice before deleting"}),r("div",{className:"text-sm mt-2",children:[r("p",{className:"mb-2",children:"Before you proceed, consider these alternatives:"}),r("ul",{className:"list-disc list-inside space-y-1",children:[r("li",{children:[r("strong",{children:"Take a break:"})," Temporarily deactivate your account instead (contact support)"]}),r("li",{children:[r("strong",{children:"Download your data:"})," Export your content and data first"]}),r("li",{children:[r("strong",{children:"Think about recovery:"})," Consider if you might want to return in the future"]}),r("li",{children:[r("strong",{children:"Contact support:"})," Reach out to us if you're experiencing issues we can help resolve"]})]})]})]})})]})})})}function om(){return r(z,{children:r("section",{children:[r("h1",{children:"404: Not Found"}),r("p",{children:"It's gone :("})]})})}function am({id:n}){const{route:e}=mn(),[t,s]=b(null),[i,o]=b(null),[a,c]=b(!0),[u,l]=b(null);J(()=>{d()},[n]);const d=async()=>{try{c(!0),l(null);const h=await W.auth.apiGetSessionList();if(!h.data)throw new Error("No session data received");if(o(h.data.user),n){const f=await W.profile.getProfileByUserId(n);if(!f.data)throw new Error("Profile not found");s({id:f.data.id,name:f.data.name,image:f.data.image,email:"",emailVerified:!1,createdAt:f.data.createdAt,updatedAt:f.data.updatedAt,chessWins:f.data.chessWins,chessLosses:f.data.chessLosses,draughtsWins:f.data.draughtsWins,draughtsLosses:f.data.draughtsLosses,arithmeticScore:f.data.arithmeticScore,role:null,banned:f.data.banned,banReason:f.data.banReason,banExpires:f.data.banExpires,age:null})}else s(h.data.user)}catch(h){if(console.error("Profile load error:",h),h?.error?.status===401){e("/login");return}l(h?.error?.message||h?.message||"Failed to load profile. Please try refreshing the page.")}finally{c(!1)}};return a?r(z,{children:r("div",{className:"h-[100%] flex items-center justify-center",id:"profile-background",children:r("span",{className:"loading loading-spinner loading-lg"})})}):u||!t?r(z,{children:r("div",{className:"h-[100%] flex items-center justify-center",id:"profile-background",children:r("div",{className:"alert alert-error",children:r("span",{children:u||"Profile not found"})})})}):r(z,{children:[r("div",{className:"h-[100%] flex items-center justify-center",id:"profile-background",children:r("div",{className:"card bg-base-100 shadow-2xl max-w-md w-full mx-4",children:r("div",{className:"card-body items-center text-center",children:[r(It,{name:t.name,image:t.image}),r(Fc,{banned:t.banned,banReason:t.banReason,banExpires:t.banExpires,className:"w-full max-w-sm"}),r("h2",{className:"card-title text-2xl font-bold mt-4",children:[r(hn,{className:"inline mr-2"}),t.name]}),r("div",{className:"flex items-center gap-2 text-sm opacity-70",children:[r(Ql,{}),r("span",{children:t.id})]}),t.createdAt&&r("div",{className:"flex items-center gap-2 text-sm opacity-70 mt-2",children:[r(co,{}),r("span",{children:["Created:"," ",new Date(t.createdAt).toLocaleDateString()]})]}),t.updatedAt&&r("div",{className:"flex items-center gap-2 text-sm opacity-70 mt-2",children:[r(co,{}),r("span",{children:["Updated:"," ",new Date(t.updatedAt).toLocaleDateString()]})]}),(t.chessWins!==void 0||t.chessLosses!==void 0)&&r("div",{className:"flex items-center gap-2 text-sm opacity-70 mt-2",children:[r(Hl,{}),r("span",{children:["Chess: Wins: ",t.chessWins??0,", Losses:"," ",t.chessLosses??0]})]}),(t.draughtsWins!==void 0||t.draughtsLosses!==void 0)&&r("div",{className:"flex items-center gap-2 text-sm opacity-70 mt-2",children:[r(Wl,{}),r("span",{children:["Draughts: Wins: ",t.draughtsWins??0,", Losses:"," ",t.draughtsLosses??0]})]}),t.arithmeticScore!==void 0&&t.arithmeticScore!==null&&r("div",{className:"flex items-center gap-2 text-sm opacity-70 mt-2",children:[r($l,{}),r("span",{children:["Arithmetic Score: ",t.arithmeticScore]})]}),i&&i.id===t.id&&t.createdAt&&r("div",{className:"card-actions justify-center mt-6",children:r("button",{className:"btn btn-primary btn-sm",onClick:()=>e("/settings"),children:[r(Ia,{className:"mr-2"}),"Edit Profile"]})})]})})}),r("style",{jsx:!0,children:`
        #profile-background {
          background-image: url("/random-image.jpg");
          background-size: cover;
        }
      `})]})}function cm(n){return V({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7.5 21H2V9h5.5v12zm7.25-18h-5.5v18h5.5V3zM22 11h-5.5v10H22V11z"},child:[]}]})(n)}function lm(n){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(n)}function um(n){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(n)}function dm(n){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"13 17 18 12 13 7"},child:[]},{tag:"polyline",attr:{points:"6 17 11 12 6 7"},child:[]}]})(n)}function hm(n){return V({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(n)}function fm({columns:n,data:e,renderCell:t,initialSort:s,className:i="",loading:o=!1,emptyMessage:a="No data available"}){const[c,u]=b(s||null),l=Ce(()=>!c||!e?.length?e||[]:[...e].sort((p,m)=>{const g=p[c.key],y=m[c.key];if(g==null&&y==null)return 0;if(g==null)return c.direction==="asc"?1:-1;if(y==null)return c.direction==="asc"?-1:1;let _=0;return typeof g=="string"&&typeof y=="string"?_=g.localeCompare(y):typeof g=="number"&&typeof y=="number"?_=g-y:_=String(g).localeCompare(String(y)),c.direction==="asc"?_:-_}),[e,c]),d=f=>{u(p=>p?.key===f?p.direction==="asc"?{key:f,direction:"desc"}:{key:f,direction:"asc"}:{key:f,direction:"asc"})},h=f=>!c||c.key!==f?r(dm,{className:"w-4 h-4 opacity-30"}):c.direction==="asc"?r(um,{className:"w-4 h-4"}):r(lm,{className:"w-4 h-4"});return o?r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})}):r("div",{className:"overflow-x-auto",children:r("table",{className:`table table-zebra table-fixed w-full ${i}`,children:[r("thead",{children:r("tr",{children:n.map(f=>r("th",{className:f.width?"":void 0,style:f.width?{width:f.width}:void 0,children:f.sortable!==!1?r("button",{onClick:()=>d(f.key),className:"flex items-center gap-1 hover:bg-base-200 px-2 py-1 rounded",type:"button",children:[r("span",{children:f.title}),h(f.key)]}):r("span",{children:f.title})},f.key))})}),r("tbody",{children:l.length===0?r("tr",{children:r("td",{colSpan:n.length,className:"text-center py-8 text-base-content/60",children:a})}):l.map((f,p)=>r("tr",{children:n.map(m=>r("td",{children:t?t(f,m.key):f[m.key]??"-"},m.key))},f.id||p))})]})})}function Os(n){const e=n.attributes?n.attributes[0]:n.attribute;if(!e)return;const t=n.attributes||[n.attribute],s=n.attributeTitles||[n.attributeTitle],[i,o]=b([]),[a,c]=b(null),[u,l]=b(!0);return J(()=>{(async()=>{try{const d=(await W.leaderboards.getLeaderboards({attribute:e})).data;console.log("FETCHED LEADERBOARD"),o(d),l(!1)}catch(d){if(d?.status==404){console.log("404 error: no users with attribute"),c(`No users found with attribute "${e}"`),l(!1);return}c(d instanceof Error?d.message:"Failed to fetch leaderboard"),console.error("Error:",d),l(!1)}})()},[e]),r(z,{children:a?r("div",{role:"alert",className:"alert alert-error mb-4",children:[r("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:r("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r("span",{children:a})]}):u?r("div",{className:"flex justify-center",children:r("span",{className:"loading loading-spinner loading-lg"})}):r(fm,{columns:[{key:"name",title:"Name",sortable:!0,width:"300px"},...t.map((d,h)=>({key:d,title:s[h]||d,sortable:!0}))],data:i,renderCell:(d,h)=>{if(h==="name"){const f=new Date,p=d.banned&&(!d.banExpires||new Date(d.banExpires)>f);return r("a",{href:`/profile/${d.id}`,className:"flex items-center gap-3",children:[r(It,{name:d.name,image:d.image}),r("div",{className:"font-bold flex items-center gap-2",children:[d.name,p&&r(fr,{className:"text-error text-sm",title:"Banned user"})]})]})}return d[h]||"-"},loading:!1,emptyMessage:"No users found"})})}function pm(){return r(z,{children:r("div",{className:"container mx-auto p-4",children:[r("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r(cm,{}),"Leaderboards"]}),r("p",{className:"mb-8",children:"For Chess | Draughts, get at least 1 win to show up on the leaderboards"}),r("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[r("div",{children:[r("h2",{className:"text-2xl font-bold mb-2",children:"Chess Wins/Losses"}),r(Os,{attributes:["chessWins","chessLosses"],attributeTitles:["Chess Wins","Chess Losses"]})]}),r("div",{children:[r("h2",{className:"text-2xl font-bold mb-2",children:"Draughts Wins/Losses"}),r(Os,{attributes:["draughtsWins","draughtsLosses"],attributeTitles:["Draughts Wins","Draughts Losses"]})]}),r("div",{children:[r("h2",{className:"text-2xl font-bold mb-2",children:"Arithmetic Score"}),r(Os,{attributes:["arithmeticScore"],attributeTitles:["Arithmetic Score"]})]})]})]})})}function mm(){const n=e=>{const t=e.target.value;localStorage.setItem("theme",t),document.documentElement.setAttribute("data-theme",t)};return J(()=>{const e=localStorage.getItem("theme")||"dark";document.documentElement.setAttribute("data-theme",e)},[]),r("div",{className:"dropdown",children:[r("div",{tabIndex:0,role:"button",className:"btn btn-sm mx-2",children:["Theme",r("svg",{width:"12px",height:"12px",className:"inline-block h-2 w-2 fill-current opacity-60",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",children:r("path",{d:"M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"})})]}),r("ul",{tabIndex:0,className:"dropdown-content bg-base-300 rounded-box z-1 w-36 p-2 shadow-2xl mt-4",children:[r("li",{children:r("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"System theme",value:"default",onClick:n})}),r("li",{children:r("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Dark",value:"dark",onClick:n})}),r("li",{children:r("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Light",value:"light",onClick:n})}),r("li",{children:r("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Retro",value:"retro",onClick:n})}),r("li",{children:r("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Cyberpunk",value:"cyberpunk",onClick:n})}),r("li",{children:r("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Aqua",value:"aqua",onClick:n})})]})]})}function gm(){const{route:n,url:e}=mn(),[t,s]=b(null),[i,o]=b(""),a=Oe(null);J(()=>{async function u(){try{const l=(await W.auth.apiGetSessionList()).data;s(l?.user||null)}catch(l){s(null);const d=l instanceof Error?l.message:"Fetching user data failed";o(d),console.error("Error:",l)}}u()},[e]),J(()=>{const u=l=>{a.current&&!a.current.contains(l.target)&&(a.current.open=!1)};return document.addEventListener("click",u),document.addEventListener("mousedown",u),()=>{document.removeEventListener("click",u),document.removeEventListener("mousedown",u)}},[]);function c(){W.auth.apiSignOutCreate({}),n("/login")}return r("div",{className:"navbar bg-neutral text-neutral-content shadow-sm",children:[r("div",{className:"navbar-start",children:r("a",{className:"btn btn-ghost text-xl",href:"/",children:"My Website"})}),r("div",{className:"navbar-center",children:r("ul",{className:"menu menu-horizontal px-1",children:[r("li",{children:r("a",{href:"/",children:"Home"})}),r("li",{children:r("details",{ref:a,children:[r("summary",{children:"Info"}),r("ul",{className:"dropdown-content bg-base-300 rounded-box z-1 w-26 p-2 shadow-2xl",children:[r("li",{children:r("a",{href:"/about",className:"btn btn-sm btn-block",children:"About"})}),r("li",{children:r("a",{href:"/contact",className:"btn btn-sm btn-block",children:"Contact"})})]})]})}),r("li",{children:r("a",{href:"/blog",children:"Blog"})}),r("li",{children:r("a",{href:"/projects",children:"Projects"})}),r("li",{children:r("a",{href:"/leaderboards",children:"Leaderboards"})})]})}),r("div",{className:"navbar-end",children:[r(mm,{}),t?r("div",{className:"mx-2 dropdown dropdown-end",children:[r(It,{name:t.name,image:t.image}),r("ul",{tabIndex:-1,className:"menu menu-sm dropdown-content bg-base-300 text-base-content rounded-box z-1 w-36 p-2 shadow-2xl mt-3",children:[r("li",{children:r("a",{href:"/profile",className:"justify-between",children:[r(hn,{})," Profile",r("span",{className:"badge",children:"New"})]})}),r("li",{children:r("a",{href:"/settings",children:[r(hm,{})," Settings"]})}),r("li",{children:r("button",{onClick:c,children:[r(nu,{})," Logout"]})})]})]}):r("a",{className:"btn btn-sm",href:"/login",children:[r(tu,{}),"Login"]})]})]})}function vm(){const n=Ci(),e=Oe(null),t=kn(s=>{s.onAny((i,o)=>{console.log(`[Connection Socket] Received event: ${i}`,o)}),s.on("notification",i=>{try{if(!i.text){console.error("[Connection] Notification event missing required 'text' property:",i);return}const o=i.type||"info",a=i.time||3e3;n({text:i.text,type:o,time:a}),console.log(`[Connection] Notification toast sent: ${o} - "${i.text}"`)}catch(o){console.error("[Connection] Error handling notification event:",o)}}),s.on("connect",()=>{console.log("[Connection Socket] Connected to server")}),s.on("disconnect",i=>{console.log(`[Connection Socket] Disconnected: ${i}`)}),s.on("connect_error",i=>{console.error("[Connection Socket] Connection error:",i.message)}),s.on("error",i=>{console.error("[Connection Socket] Server error:",i)})},[n]);return J(()=>{if(e.current){console.log("[Connection] Socket already initialized, skipping");return}console.log("[Connection] Initializing session connection...");try{const s=W.baseUrl,i=new URL("/sockets/connection",s).href;console.log("[Connection] Connecting to:",i);const o=er(i,{path:"/sockets/",transports:["websocket","polling"],withCredentials:!0,timeout:2e4,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});return t(o),e.current=o,()=>{console.log("[Connection] Cleaning up socket connection"),e.current?.disconnect(),e.current=null}}catch(s){console.error("[Connection] Failed to initialize socket:",s)}},[t]),null}function bm(){return r(dr,{children:r(Nd,{children:[r(vm,{}),r("div",{class:"flex min-h-screen flex-col",children:[r(gm,{}),r("main",{children:r(ya,{children:[r(_e,{path:"/",component:wd}),r(_e,{path:"/blog",component:yd}),r(_e,{path:"/blog/:id",component:_d}),r(_e,{path:"/about",component:xd}),r(_e,{path:"/leaderboards",component:pm}),r(_e,{path:"/login",component:Cd}),r(_e,{path:"/projects",component:Sd}),r(_e,{path:"/projects/chess",component:B1}),r(_e,{path:"/projects/arithmetic",component:U1}),r(_e,{path:"/signup",component:z1}),r(_e,{path:"/email-verification",component:H1}),r(_e,{path:"/admin",component:q1}),r(_e,{path:"/admin/users",component:W1}),r(_e,{path:"/admin/comments",component:K1}),r(_e,{path:"/admin/connections",component:Y1}),r(_e,{path:"/admin/profiles",component:Q1}),r(_e,{path:"/settings",component:X1}),r(_e,{path:"/settings/name",component:J1}),r(_e,{path:"/settings/password",component:Z1}),r(_e,{path:"/settings/accounts",component:em}),r(_e,{path:"/settings/sessions",component:tm}),r(_e,{path:"/settings/notifications",component:sm}),r(_e,{path:"/settings/images",component:nm}),r(_e,{path:"/settings/delete",component:im}),r(_e,{path:"/profile/:id?",component:am}),r(_e,{default:!0,component:om})]})}),r(Jc,{})]})]})})}Cn(r(bm,{}),document.getElementById("app"));
