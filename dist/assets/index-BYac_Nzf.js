(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Ft,M,Ai,Ge,$n,$i,ji,Fi,gn,Xr,Jr,Hi,At={},Ui=[],Xo=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ht=Array.isArray;function Ee(r,e){for(var t in e)r[t]=e[t];return r}function mn(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function ce(r,e,t){var n,i,o,a={};for(o in e)o=="key"?n=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?Ft.call(arguments,2):t),typeof r=="function"&&r.defaultProps!=null)for(o in r.defaultProps)a[o]===void 0&&(a[o]=r.defaultProps[o]);return Lt(r,a,n,i,null)}function Lt(r,e,t,n,i){var o={type:r,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Ai,__i:-1,__u:0};return i==null&&M.vnode!=null&&M.vnode(o),o}function Jo(){return{current:null}}function W(r){return r.children}function ke(r,e){this.props=r,this.context=e}function ft(r,e){if(e==null)return r.__?ft(r.__,r.__i+1):null;for(var t;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null)return t.__e;return typeof r.type=="function"?ft(r):null}function qi(r){var e,t;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((t=r.__k[e])!=null&&t.__e!=null){r.__e=r.__c.base=t.__e;break}return qi(r)}}function Zr(r){(!r.__d&&(r.__d=!0)&&Ge.push(r)&&!ar.__r++||$n!=M.debounceRendering)&&(($n=M.debounceRendering)||$i)(ar)}function ar(){for(var r,e,t,n,i,o,a,l=1;Ge.length;)Ge.length>l&&Ge.sort(ji),r=Ge.shift(),l=Ge.length,r.__d&&(t=void 0,i=(n=(e=r).__v).__e,o=[],a=[],e.__P&&((t=Ee({},n)).__v=n.__v+1,M.vnode&&M.vnode(t),_n(e.__P,t,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,o,i??ft(n),!!(32&n.__u),a),t.__v=n.__v,t.__.__k[t.__i]=t,zi(o,t,a),t.__e!=i&&qi(t)));ar.__r=0}function Wi(r,e,t,n,i,o,a,l,c,d,p){var u,f,h,g,v,S,w,O=n&&n.__k||Ui,D=e.length;for(c=Zo(t,e,O,c,D),u=0;u<D;u++)(h=t.__k[u])!=null&&(f=h.__i==-1?At:O[h.__i]||At,h.__i=u,S=_n(r,h,f,i,o,a,l,c,d,p),g=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&vn(f.ref,null,h),p.push(h.ref,h.__c||g,h)),v==null&&g!=null&&(v=g),(w=!!(4&h.__u))||f.__k===h.__k?c=Bi(h,c,r,w):typeof h.type=="function"&&S!==void 0?c=S:g&&(c=g.nextSibling),h.__u&=-7);return t.__e=v,c}function Zo(r,e,t,n,i){var o,a,l,c,d,p=t.length,u=p,f=0;for(r.__k=new Array(i),o=0;o<i;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(c=o+f,(a=r.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Lt(null,a,null,null,null):Ht(a)?Lt(W,{children:a},null,null,null):a.constructor==null&&a.__b>0?Lt(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=r,a.__b=r.__b+1,l=null,(d=a.__i=es(a,t,c,u))!=-1&&(u--,(l=t[d])&&(l.__u|=2)),l==null||l.__v==null?(d==-1&&(i>p?f--:i<p&&f++),typeof a.type!="function"&&(a.__u|=4)):d!=c&&(d==c-1?f--:d==c+1?f++:(d>c?f--:f++,a.__u|=4))):r.__k[o]=null;if(u)for(o=0;o<p;o++)(l=t[o])!=null&&(2&l.__u)==0&&(l.__e==n&&(n=ft(l)),Gi(l,l));return n}function Bi(r,e,t,n){var i,o;if(typeof r.type=="function"){for(i=r.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=r,e=Bi(i[o],e,t,n));return e}r.__e!=e&&(n&&(e&&r.type&&!e.parentNode&&(e=ft(r)),t.insertBefore(r.__e,e||null)),e=r.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Te(r,e){return e=e||[],r==null||typeof r=="boolean"||(Ht(r)?r.some(function(t){Te(t,e)}):e.push(r)),e}function es(r,e,t,n){var i,o,a,l=r.key,c=r.type,d=e[t],p=d!=null&&(2&d.__u)==0;if(d===null&&r.key==null||p&&l==d.key&&c==d.type)return t;if(n>(p?1:0)){for(i=t-1,o=t+1;i>=0||o<e.length;)if((d=e[a=i>=0?i--:o++])!=null&&(2&d.__u)==0&&l==d.key&&c==d.type)return a}return-1}function jn(r,e,t){e[0]=="-"?r.setProperty(e,t??""):r[e]=t==null?"":typeof t!="number"||Xo.test(e)?t:t+"px"}function Qt(r,e,t,n,i){var o,a;e:if(e=="style")if(typeof t=="string")r.style.cssText=t;else{if(typeof n=="string"&&(r.style.cssText=n=""),n)for(e in n)t&&e in t||jn(r.style,e,"");if(t)for(e in t)n&&t[e]==n[e]||jn(r.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Fi,"$1")),a=e.toLowerCase(),e=a in r||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),r.l||(r.l={}),r.l[e+o]=t,t?n?t.u=n.u:(t.u=gn,r.addEventListener(e,o?Jr:Xr,o)):r.removeEventListener(e,o?Jr:Xr,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in r)try{r[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?r.removeAttribute(e):r.setAttribute(e,e=="popover"&&t==1?"":t))}}function Fn(r){return function(e){if(this.l){var t=this.l[e.type+r];if(e.t==null)e.t=gn++;else if(e.t<t.u)return;return t(M.event?M.event(e):e)}}}function _n(r,e,t,n,i,o,a,l,c,d){var p,u,f,h,g,v,S,w,O,D,E,U,T,j,B,A,z,Q=e.type;if(e.constructor!=null)return null;128&t.__u&&(c=!!(32&t.__u),o=[l=e.__e=t.__e]),(p=M.__b)&&p(e);e:if(typeof Q=="function")try{if(w=e.props,O="prototype"in Q&&Q.prototype.render,D=(p=Q.contextType)&&n[p.__c],E=p?D?D.props.value:p.__:n,t.__c?S=(u=e.__c=t.__c).__=u.__E:(O?e.__c=u=new Q(w,E):(e.__c=u=new ke(w,E),u.constructor=Q,u.render=rs),D&&D.sub(u),u.props=w,u.state||(u.state={}),u.context=E,u.__n=n,f=u.__d=!0,u.__h=[],u._sb=[]),O&&u.__s==null&&(u.__s=u.state),O&&Q.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Ee({},u.__s)),Ee(u.__s,Q.getDerivedStateFromProps(w,u.__s))),h=u.props,g=u.state,u.__v=e,f)O&&Q.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),O&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(O&&Q.getDerivedStateFromProps==null&&w!==h&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(w,E),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(w,u.__s,E)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(u.props=w,u.state=u.__s,u.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(q){q&&(q.__=e)}),U=0;U<u._sb.length;U++)u.__h.push(u._sb[U]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(w,u.__s,E),O&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(h,g,v)})}if(u.context=E,u.props=w,u.__P=r,u.__e=!1,T=M.__r,j=0,O){for(u.state=u.__s,u.__d=!1,T&&T(e),p=u.render(u.props,u.state,u.context),B=0;B<u._sb.length;B++)u.__h.push(u._sb[B]);u._sb=[]}else do u.__d=!1,T&&T(e),p=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++j<25);u.state=u.__s,u.getChildContext!=null&&(n=Ee(Ee({},n),u.getChildContext())),O&&!f&&u.getSnapshotBeforeUpdate!=null&&(v=u.getSnapshotBeforeUpdate(h,g)),A=p,p!=null&&p.type===W&&p.key==null&&(A=Ki(p.props.children)),l=Wi(r,Ht(A)?A:[A],e,t,n,i,o,a,l,c,d),u.base=e.__e,e.__u&=-161,u.__h.length&&a.push(u),S&&(u.__E=u.__=null)}catch(q){if(e.__v=null,c||o!=null)if(q.then){for(e.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;o[o.indexOf(l)]=null,e.__e=l}else{for(z=o.length;z--;)mn(o[z]);en(e)}else e.__e=t.__e,e.__k=t.__k,q.then||en(e);M.__e(q,e,t)}else o==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):l=e.__e=ts(t.__e,e,t,n,i,o,a,c,d);return(p=M.diffed)&&p(e),128&e.__u?void 0:l}function en(r){r&&r.__c&&(r.__c.__e=!0),r&&r.__k&&r.__k.forEach(en)}function zi(r,e,t){for(var n=0;n<t.length;n++)vn(t[n],t[++n],t[++n]);M.__c&&M.__c(e,r),r.some(function(i){try{r=i.__h,i.__h=[],r.some(function(o){o.call(i)})}catch(o){M.__e(o,i.__v)}})}function Ki(r){return typeof r!="object"||r==null||r.__b&&r.__b>0?r:Ht(r)?r.map(Ki):Ee({},r)}function ts(r,e,t,n,i,o,a,l,c){var d,p,u,f,h,g,v,S=t.props,w=e.props,O=e.type;if(O=="svg"?i="http://www.w3.org/2000/svg":O=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(d=0;d<o.length;d++)if((h=o[d])&&"setAttribute"in h==!!O&&(O?h.localName==O:h.nodeType==3)){r=h,o[d]=null;break}}if(r==null){if(O==null)return document.createTextNode(w);r=document.createElementNS(i,O,w.is&&w),l&&(M.__m&&M.__m(e,o),l=!1),o=null}if(O==null)S===w||l&&r.data==w||(r.data=w);else{if(o=o&&Ft.call(r.childNodes),S=t.props||At,!l&&o!=null)for(S={},d=0;d<r.attributes.length;d++)S[(h=r.attributes[d]).name]=h.value;for(d in S)if(h=S[d],d!="children"){if(d=="dangerouslySetInnerHTML")u=h;else if(!(d in w)){if(d=="value"&&"defaultValue"in w||d=="checked"&&"defaultChecked"in w)continue;Qt(r,d,null,h,i)}}for(d in w)h=w[d],d=="children"?f=h:d=="dangerouslySetInnerHTML"?p=h:d=="value"?g=h:d=="checked"?v=h:l&&typeof h!="function"||S[d]===h||Qt(r,d,h,S[d],i);if(p)l||u&&(p.__html==u.__html||p.__html==r.innerHTML)||(r.innerHTML=p.__html),e.__k=[];else if(u&&(r.innerHTML=""),Wi(e.type=="template"?r.content:r,Ht(f)?f:[f],e,t,n,O=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:t.__k&&ft(t,0),l,c),o!=null)for(d=o.length;d--;)mn(o[d]);l||(d="value",O=="progress"&&g==null?r.removeAttribute("value"):g!=null&&(g!==r[d]||O=="progress"&&!g||O=="option"&&g!=S[d])&&Qt(r,d,g,S[d],i),d="checked",v!=null&&v!=r[d]&&Qt(r,d,v,S[d],i))}return r}function vn(r,e,t){try{if(typeof r=="function"){var n=typeof r.__u=="function";n&&r.__u(),n&&e==null||(r.__u=r(e))}else r.current=e}catch(i){M.__e(i,t)}}function Gi(r,e,t){var n,i;if(M.unmount&&M.unmount(r),(n=r.ref)&&(n.current&&n.current!=r.__e||vn(n,null,e)),(n=r.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){M.__e(o,e)}n.base=n.__P=null}if(n=r.__k)for(i=0;i<n.length;i++)n[i]&&Gi(n[i],e,t||typeof r.type!="function");t||mn(r.__e),r.__c=r.__=r.__e=void 0}function rs(r,e,t){return this.constructor(r,t)}function ht(r,e,t){var n,i,o,a;e==document&&(e=document.documentElement),M.__&&M.__(r,e),i=(n=typeof t=="function")?null:t&&t.__k||e.__k,o=[],a=[],_n(e,r=(!n&&t||e).__k=ce(W,null,[r]),i||At,At,e.namespaceURI,!n&&t?[t]:i?null:e.firstChild?Ft.call(e.childNodes):null,o,!n&&t?t:i?i.__e:e.firstChild,n,a),zi(o,r,a)}function Qi(r,e){ht(r,e,Qi)}function tn(r,e,t){var n,i,o,a,l=Ee({},r.props);for(o in r.type&&r.type.defaultProps&&(a=r.type.defaultProps),e)o=="key"?n=e[o]:o=="ref"?i=e[o]:l[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(l.children=arguments.length>3?Ft.call(arguments,2):t),Lt(r.type,l,n||r.key,i||r.ref,null)}function mt(r){function e(t){var n,i;return this.getChildContext||(n=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&n.forEach(function(a){a.__e=!0,Zr(a)})},this.sub=function(o){n.add(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){n&&n.delete(o),a&&a.call(o)}}),t.children}return e.__c="__cC"+Hi++,e.__=r,e.Provider=e.__l=(e.Consumer=function(t,n){return t.children(n)}).contextType=e,e}Ft=Ui.slice,M={__e:function(r,e,t,n){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(r)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(r,n||{}),a=i.__d),a)return i.__E=i}catch(l){r=l}throw r}},Ai=0,ke.prototype.setState=function(r,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ee({},this.state),typeof r=="function"&&(r=r(Ee({},t),this.props)),r&&Ee(t,r),r!=null&&this.__v&&(e&&this._sb.push(e),Zr(this))},ke.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),Zr(this))},ke.prototype.render=W,Ge=[],$i=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ji=function(r,e){return r.__v.__b-e.__v.__b},ar.__r=0,Fi=/(PointerCapture)$|Capture$/i,gn=0,Xr=Fn(!1),Jr=Fn(!0),Hi=0;var ns=0;function s(r,e,t,n,i,o){e||(e={});var a,l,c=e;if("ref"in c)for(l in c={},e)l=="ref"?a=e[l]:c[l]=e[l];var d={type:r,props:c,key:t,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ns,__i:-1,__u:0,__source:i,__self:o};if(typeof r=="function"&&(a=r.defaultProps))for(l in a)c[l]===void 0&&(c[l]=a[l]);return M.vnode&&M.vnode(d),d}var $e,V,Rr,Hn,pt=0,Vi=[],Y=M,Un=Y.__b,qn=Y.__r,Wn=Y.diffed,Bn=Y.__c,zn=Y.unmount,Kn=Y.__;function _t(r,e){Y.__h&&Y.__h(V,r,pt||e),pt=0;var t=V.__H||(V.__H={__:[],__h:[]});return r>=t.__.length&&t.__.push({}),t.__[r]}function k(r){return pt=1,Ut(Ji,r)}function Ut(r,e,t){var n=_t($e++,2);if(n.t=r,!n.__c&&(n.__=[t?t(e):Ji(void 0,e),function(l){var c=n.__N?n.__N[0]:n.__[0],d=n.t(c,l);c!==d&&(n.__N=[d,n.__[1]],n.__c.setState({}))}],n.__c=V,!V.__f)){var i=function(l,c,d){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!o||o.call(this,l,c,d);var u=n.__c.props!==l;return p.forEach(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(u=!0)}}),o&&o.call(this,l,c,d)||u};V.__f=!0;var o=V.shouldComponentUpdate,a=V.componentWillUpdate;V.componentWillUpdate=function(l,c,d){if(this.__e){var p=o;o=void 0,i(l,c,d),o=p}a&&a.call(this,l,c,d)},V.shouldComponentUpdate=i}return n.__N||n.__}function H(r,e){var t=_t($e++,3);!Y.__s&&yn(t.__H,e)&&(t.__=r,t.u=e,V.__H.__h.push(t))}function je(r,e){var t=_t($e++,4);!Y.__s&&yn(t.__H,e)&&(t.__=r,t.u=e,V.__h.push(t))}function ne(r){return pt=5,J(function(){return{current:r}},[])}function bn(r,e,t){pt=6,je(function(){if(typeof r=="function"){var n=r(e());return function(){r(null),n&&typeof n=="function"&&n()}}if(r)return r.current=e(),function(){return r.current=null}},t==null?t:t.concat(r))}function J(r,e){var t=_t($e++,7);return yn(t.__H,e)&&(t.__=r(),t.__H=e,t.__h=r),t.__}function dr(r,e){return pt=8,J(function(){return r},e)}function Xe(r){var e=V.context[r.__c],t=_t($e++,9);return t.c=r,e?(t.__==null&&(t.__=!0,e.sub(V)),e.props.value):r.__}function Yi(r,e){Y.useDebugValue&&Y.useDebugValue(e?e(r):r)}function Xi(){var r=_t($e++,11);if(!r.__){for(var e=V.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);r.__="P"+t[0]+"-"+t[1]++}return r.__}function is(){for(var r;r=Vi.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(tr),r.__H.__h.forEach(rn),r.__H.__h=[]}catch(e){r.__H.__h=[],Y.__e(e,r.__v)}}Y.__b=function(r){V=null,Un&&Un(r)},Y.__=function(r,e){r&&e.__k&&e.__k.__m&&(r.__m=e.__k.__m),Kn&&Kn(r,e)},Y.__r=function(r){qn&&qn(r),$e=0;var e=(V=r.__c).__H;e&&(Rr===V?(e.__h=[],V.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(tr),e.__h.forEach(rn),e.__h=[],$e=0)),Rr=V},Y.diffed=function(r){Wn&&Wn(r);var e=r.__c;e&&e.__H&&(e.__H.__h.length&&(Vi.push(e)!==1&&Hn===Y.requestAnimationFrame||((Hn=Y.requestAnimationFrame)||os)(is)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),Rr=V=null},Y.__c=function(r,e){e.some(function(t){try{t.__h.forEach(tr),t.__h=t.__h.filter(function(n){return!n.__||rn(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Y.__e(n,t.__v)}}),Bn&&Bn(r,e)},Y.unmount=function(r){zn&&zn(r);var e,t=r.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{tr(n)}catch(i){e=i}}),t.__H=void 0,e&&Y.__e(e,t.__v))};var Gn=typeof requestAnimationFrame=="function";function os(r){var e,t=function(){clearTimeout(n),Gn&&cancelAnimationFrame(e),setTimeout(r)},n=setTimeout(t,35);Gn&&(e=requestAnimationFrame(t))}function tr(r){var e=V,t=r.__c;typeof t=="function"&&(r.__c=void 0,t()),V=e}function rn(r){var e=V;r.__c=r.__(),V=e}function yn(r,e){return!r||r.length!==e.length||e.some(function(t,n){return t!==r[n]})}function Ji(r,e){return typeof e=="function"?e(r):e}let dt,Pt;function ss(r){return!Pt||(typeof Pt=="string"?r.startsWith(Pt):Pt.test(r))}function as(r,e){let t="";if(dt=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return r;const n=e.composedPath().find(o=>o.nodeName=="A"&&o.href),i=n&&n.getAttribute("href");if(!n||n.origin!=location.origin||/^#/.test(i)||!/^(_?self)?$/i.test(n.target)||!ss(i))return r;dt=!0,e.preventDefault(),t=n.href.replace(location.origin,"")}else e&&e.url?(dt=!e.replace,t=e.url):t=location.pathname+location.search;return dt===!0?history.pushState(null,"",t):dt===!1&&history.replaceState(null,"",t),t}const ls=(r,e,t={})=>{r=r.split("/").filter(Boolean),e=(e||"").split("/").filter(Boolean),t.params||(t.params={});for(let n=0,i,o;n<Math.max(r.length,e.length);n++){let[,a,l,c]=(e[n]||"").match(/^(:?)(.*?)([+*?]?)$/);if(i=r[n],!(!a&&l==i)){if(!a&&i&&c=="*"){t.rest="/"+r.slice(n).map(decodeURIComponent).join("/");break}if(!a||!i&&c!="?"&&c!="*")return;if(o=c=="+"||c=="*",o?i=r.slice(n).map(decodeURIComponent).join("/")||void 0:i&&(i=decodeURIComponent(i)),t.params[l]=i,l in t||(t[l]=i),o)break}}return t};function qt(r){const[e,t]=Ut(as,r.url||location.pathname+location.search);r.scope&&(Pt=r.scope);const n=dt===!0,i=J(()=>{const o=new URL(e,location.origin),a=o.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:a,query:Object.fromEntries(o.searchParams),route:(l,c)=>t({url:l,replace:c}),wasPush:n}},[e]);return je(()=>(addEventListener("click",t),addEventListener("popstate",t),()=>{removeEventListener("click",t),removeEventListener("popstate",t)}),[]),ce(qt.ctx.Provider,{value:i},r.children)}const cs=Promise.resolve();function Zi(r){const[e,t]=Ut(A=>A+1,0),{url:n,query:i,wasPush:o,path:a}=eo();if(!n)throw new Error("preact-iso's <Router> must be used within a <LocationProvider>, see: https://github.com/preactjs/preact-iso#locationprovider");const{rest:l=a,params:c={}}=Xe(Qn),d=ne(!1),p=ne(a),u=ne(0),f=ne(),h=ne(),g=ne(),v=ne(!1),S=ne();S.current=!1;let w,O,D;Te(r.children).some(A=>{if(ls(l,A.props.path,D={...A.props,path:l,query:i,params:c,rest:""}))return w=tn(A,D);A.props.default&&(O=tn(A,D))});let E=w||O;const U=f.current&&f.current.__u&Vt&&f.current.__u&Yt,T=f.current&&f.current.__h,j=J(()=>{h.current=f.current,f.current=ce(Qn.Provider,{value:D},E);const A=h.current&&h.current.props.children;return!A||!E||E.type!==A.type||E.props.component!==A.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),u.current++,!0):!1},[n,JSON.stringify(D)]);U?(f.current.__u|=Vt,f.current.__u|=Yt):T&&(f.current.__h=!0);const B=h.current;return h.current=null,this.__c=(A,z)=>{S.current=!0,h.current=B,r.onLoadStart&&r.onLoadStart(n),d.current=!0;let Q=u.current;A.then(()=>{Q===u.current&&(h.current=null,f.current&&(z.__h&&(f.current.__h=z.__h),z.__u&Yt&&(f.current.__u|=Yt),z.__u&Vt&&(f.current.__u|=Vt)),cs.then(t))})},je(()=>{const A=this.__v&&this.__v.__e;if(S.current){!v.current&&!g.current&&(g.current=A);return}!v.current&&g.current&&(g.current!==A&&g.current.remove(),g.current=null),v.current=!0,p.current!==a&&(o&&scrollTo(0,0),r.onRouteChange&&r.onRouteChange(n),p.current=a),r.onLoadEnd&&d.current&&r.onLoadEnd(n),d.current=!1},[a,o,e]),j?[ce(Ar,{r:f}),ce(Ar,{r:h})]:ce(Ar,{r:f})}const Vt=32,Yt=128,Ar=({r})=>r.current;Zi.Provider=qt;qt.ctx=mt({});const Qn=mt({}),Ce=r=>ce(r.component,r),eo=()=>Xe(qt.ctx),Vn=M.__b;M.__b=r=>{r.type&&r.type._forwarded&&r.ref&&(r.props.ref=r.ref,r.ref=null),Vn&&Vn(r)};const Yn=M.__e;M.__e=(r,e,t)=>{if(r&&r.then){let n=e;for(;n=n.__;)if(n.__c&&n.__c.__c)return e.__e==null&&(e.__c.__z=[t.__e],e.__e=t.__e,e.__k=t.__k),e.__k||(e.__k=[]),n.__c.__c(r,e)}Yn&&Yn(r,e,t)};const to="/assets/logo-gUhwRCmO.png";function us(){return s("footer",{className:"footer sm:footer-horizontal bg-neutral text-neutral-content items-center p-4",children:[s("aside",{className:"grid-flow-col items-center",children:[s("img",{src:to,alt:"My Logo",class:"w-8 h-8"}),s("p",{children:["Copyright © ",new Date().getFullYear()," - All right reserved"]})]}),s("nav",{className:"grid-flow-col gap-4 md:place-self-center md:justify-self-end",children:[s("a",{children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:s("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),s("a",{children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:s("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),s("a",{children:s("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:s("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})]})]})}function ds(){const r=e=>{const t=e.target.value;localStorage.setItem("theme",t),document.documentElement.setAttribute("data-theme",t)};return H(()=>{const e=localStorage.getItem("theme")||"dark";document.documentElement.setAttribute("data-theme",e)},[]),s("div",{className:"dropdown",children:[s("div",{tabIndex:0,role:"button",className:"btn btn-sm mx-2",children:["Theme",s("svg",{width:"12px",height:"12px",className:"inline-block h-2 w-2 fill-current opacity-60",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",children:s("path",{d:"M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"})})]}),s("ul",{tabIndex:0,className:"dropdown-content bg-base-300 rounded-box z-1 w-36 p-2 shadow-2xl mt-4",children:[s("li",{children:s("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"System theme",value:"default",onClick:r})}),s("li",{children:s("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Dark",value:"dark",onClick:r})}),s("li",{children:s("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Light",value:"light",onClick:r})}),s("li",{children:s("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Retro",value:"retro",onClick:r})}),s("li",{children:s("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Cyberpunk",value:"cyberpunk",onClick:r})}),s("li",{children:s("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Aqua",value:"aqua",onClick:r})})]})]})}function ae(){const{url:r}=eo();return s("div",{className:"navbar bg-neutral text-neutral-content shadow-sm",children:[s("div",{className:"navbar-start",children:s("a",{className:"btn btn-ghost text-xl",href:"/",children:"My Website"})}),s("div",{className:"navbar-center",children:s("ul",{className:"menu menu-horizontal px-1",children:[s("li",{children:s("a",{href:"/",children:"Home"})}),s("li",{children:s("details",{children:[s("summary",{children:"Info"}),s("ul",{className:"dropdown-content bg-base-300 rounded-box z-1 w-26 p-2 shadow-2xl",children:[s("li",{children:s("a",{href:"/about",className:"btn btn-sm btn-block",children:"About"})}),s("li",{children:s("a",{href:"/contact",className:"btn btn-sm btn-block",children:"Contact"})})]})]})}),s("li",{children:s("a",{href:"/blog",children:"Blog"})}),s("li",{children:s("a",{href:"/projects",children:"Projects"})})]})}),s("div",{className:"navbar-end",children:[s(ds,{}),s("a",{className:"btn btn-sm",href:"/login",children:"Login"})]})]})}class fs{constructor(e={}){this.baseUrl="/backend/api",this.securityData=null,this.abortControllers=new Map,this.customFetch=(...t)=>fetch(...t),this.baseApiParams={credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"},this.setSecurityData=t=>{this.securityData=t},this.contentFormatters={"application/json":t=>t!==null&&(typeof t=="object"||typeof t=="string")?JSON.stringify(t):t,"application/vnd.api+json":t=>t!==null&&(typeof t=="object"||typeof t=="string")?JSON.stringify(t):t,"text/plain":t=>t!==null&&typeof t!="string"?JSON.stringify(t):t,"multipart/form-data":t=>t instanceof FormData?t:Object.keys(t||{}).reduce((n,i)=>{const o=t[i];return n.append(i,o instanceof Blob?o:typeof o=="object"&&o!==null?JSON.stringify(o):`${o}`),n},new FormData),"application/x-www-form-urlencoded":t=>this.toQueryString(t)},this.createAbortSignal=t=>{if(this.abortControllers.has(t)){const i=this.abortControllers.get(t);return i?i.signal:void 0}const n=new AbortController;return this.abortControllers.set(t,n),n.signal},this.abortRequest=t=>{const n=this.abortControllers.get(t);n&&(n.abort(),this.abortControllers.delete(t))},this.request=async({body:t,secure:n,path:i,type:o,query:a,format:l,baseUrl:c,cancelToken:d,...p})=>{const u=(typeof n=="boolean"?n:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},f=this.mergeRequestParams(p,u),h=a&&this.toQueryString(a),g=this.contentFormatters[o||"application/json"],v=l||f.format;return this.customFetch(`${c||this.baseUrl||""}${i}${h?`?${h}`:""}`,{...f,headers:{...f.headers||{},...o&&o!=="multipart/form-data"?{"Content-Type":o}:{}},signal:(d?this.createAbortSignal(d):f.signal)||null,body:typeof t>"u"||t===null?null:g(t)}).then(async S=>{const w=S.clone();w.data=null,w.error=null;const O=v?await S[v]().then(D=>(w.ok?w.data=D:w.error=D,w)).catch(D=>(w.error=D,w)):w;if(d&&this.abortControllers.delete(d),!S.ok)throw O;return O})},Object.assign(this,e)}encodeQueryParam(e,t){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof t=="number"?t:`${t}`)}`}addQueryParam(e,t){return this.encodeQueryParam(t,e[t])}addArrayQueryParam(e,t){return e[t].map(i=>this.encodeQueryParam(t,i)).join("&")}toQueryString(e){const t=e||{};return Object.keys(t).filter(i=>typeof t[i]<"u").map(i=>Array.isArray(t[i])?this.addArrayQueryParam(t,i):this.addQueryParam(t,i)).join("&")}addQueryParams(e){const t=this.toQueryString(e);return t?`?${t}`:""}mergeRequestParams(e,t){return{...this.baseApiParams,...e,...t||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...t&&t.headers||{}}}}}class hs extends fs{constructor(){super(...arguments),this.register={registerCreate:(e,t={})=>this.request({path:"/register",method:"POST",body:e,type:"application/json",...t})},this.login={loginCreate:(e,t={})=>this.request({path:"/login",method:"POST",body:e,type:"application/json",...t})},this.hello={helloList:(e={})=>this.request({path:"/hello",method:"GET",secure:!0,format:"json",...e})},this.posts={postsList:(e={})=>this.request({path:"/posts",method:"GET",format:"json",...e})},this.post={postCreate:(e,t={})=>this.request({path:"/post",method:"POST",body:e,type:"application/json",format:"json",...t})},this.postReaction={postReactionCreate:(e,t={})=>this.request({path:"/post_reaction",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...t})},this.postLike={postLikeCreate:(e,t={})=>this.request({path:"/post_like",method:"POST",body:e,secure:!0,type:"application/json",...t})},this.postDislike={postDislikeCreate:(e,t={})=>this.request({path:"/post_dislike",method:"POST",body:e,secure:!0,type:"application/json",...t})},this.postComment={postCommentCreate:(e,t={})=>this.request({path:"/post_comment",method:"POST",body:e,secure:!0,type:"application/json",...t})},this.postComments={postCommentsCreate:(e,t={})=>this.request({path:"/post_comments",method:"POST",body:e,type:"application/json",format:"json",...t})}}}const Se=new hs({securityWorker:()=>({headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})});function ro(r,e){for(var t in e)r[t]=e[t];return r}function nn(r,e){for(var t in r)if(t!=="__source"&&!(t in e))return!0;for(var n in e)if(n!=="__source"&&r[n]!==e[n])return!0;return!1}function no(r,e){var t=e(),n=k({t:{__:t,u:e}}),i=n[0].t,o=n[1];return je(function(){i.__=t,i.u=e,$r(i)&&o({t:i})},[r,t,e]),H(function(){return $r(i)&&o({t:i}),r(function(){$r(i)&&o({t:i})})},[r]),t}function $r(r){var e,t,n=r.u,i=r.__;try{var o=n();return!((e=i)===(t=o)&&(e!==0||1/e==1/t)||e!=e&&t!=t)}catch{return!0}}function io(r){r()}function oo(r){return r}function so(){return[!1,io]}var ao=je;function on(r,e){this.props=r,this.context=e}function lo(r,e){function t(i){var o=this.props.ref,a=o==i.ref;return!a&&o&&(o.call?o(null):o.current=null),e?!e(this.props,i)||!a:nn(this.props,i)}function n(i){return this.shouldComponentUpdate=t,ce(r,i)}return n.displayName="Memo("+(r.displayName||r.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n.type=r,n}(on.prototype=new ke).isPureReactComponent=!0,on.prototype.shouldComponentUpdate=function(r,e){return nn(this.props,r)||nn(this.state,e)};var Xn=M.__b;M.__b=function(r){r.type&&r.type.__f&&r.ref&&(r.props.ref=r.ref,r.ref=null),Xn&&Xn(r)};var ps=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function wn(r){function e(t){var n=ro({},t);return delete n.ref,r(n,t.ref||null)}return e.$$typeof=ps,e.render=r,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(r.displayName||r.name)+")",e}var Jn=function(r,e){return r==null?null:Te(Te(r).map(e))},gs={map:Jn,forEach:Jn,count:function(r){return r?Te(r).length:0},only:function(r){var e=Te(r);if(e.length!==1)throw"Children.only";return e[0]},toArray:Te},ms=M.__e;M.__e=function(r,e,t,n){if(r.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(r,e)}ms(r,e,t,n)};var Zn=M.unmount;function co(r,e,t){return r&&(r.__c&&r.__c.__H&&(r.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),r.__c.__H=null),(r=ro({},r)).__c!=null&&(r.__c.__P===t&&(r.__c.__P=e),r.__c.__e=!0,r.__c=null),r.__k=r.__k&&r.__k.map(function(n){return co(n,e,t)})),r}function uo(r,e,t){return r&&t&&(r.__v=null,r.__k=r.__k&&r.__k.map(function(n){return uo(n,e,t)}),r.__c&&r.__c.__P===e&&(r.__e&&t.appendChild(r.__e),r.__c.__e=!0,r.__c.__P=t)),r}function rr(){this.__u=0,this.o=null,this.__b=null}function fo(r){var e=r.__.__c;return e&&e.__a&&e.__a(r)}function _s(r){var e,t,n;function i(o){if(e||(e=r()).then(function(a){t=a.default||a},function(a){n=a}),n)throw n;if(!t)throw e;return ce(t,o)}return i.displayName="Lazy",i.__f=!0,i}function Nt(){this.i=null,this.l=null}M.unmount=function(r){var e=r.__c;e&&e.__R&&e.__R(),e&&32&r.__u&&(r.type=null),Zn&&Zn(r)},(rr.prototype=new ke).__c=function(r,e){var t=e.__c,n=this;n.o==null&&(n.o=[]),n.o.push(t);var i=fo(n.__v),o=!1,a=function(){o||(o=!0,t.__R=null,i?i(l):l())};t.__R=a;var l=function(){if(!--n.__u){if(n.state.__a){var c=n.state.__a;n.__v.__k[0]=uo(c,c.__c.__P,c.__c.__O)}var d;for(n.setState({__a:n.__b=null});d=n.o.pop();)d.forceUpdate()}};n.__u++||32&e.__u||n.setState({__a:n.__b=n.__v.__k[0]}),r.then(a,a)},rr.prototype.componentWillUnmount=function(){this.o=[]},rr.prototype.render=function(r,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=co(this.__b,t,n.__O=n.__P)}this.__b=null}var i=e.__a&&ce(W,null,r.fallback);return i&&(i.__u&=-33),[ce(W,null,e.__a?null:r.children),i]};var ei=function(r,e,t){if(++t[1]===t[0]&&r.l.delete(e),r.props.revealOrder&&(r.props.revealOrder[0]!=="t"||!r.l.size))for(t=r.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;r.i=t=t[2]}};function vs(r){return this.getChildContext=function(){return r.context},r.children}function bs(r){var e=this,t=r.h;if(e.componentWillUnmount=function(){ht(null,e.v),e.v=null,e.h=null},e.h&&e.h!==t&&e.componentWillUnmount(),!e.v){for(var n=e.__v;n!==null&&!n.__m&&n.__!==null;)n=n.__;e.h=t,e.v={nodeType:1,parentNode:t,childNodes:[],__k:{__m:n.__m},contains:function(){return!0},insertBefore:function(i,o){this.childNodes.push(i),e.h.insertBefore(i,o)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}}ht(ce(vs,{context:e.context},r.__v),e.v)}function ys(r,e){var t=ce(bs,{__v:r,h:e});return t.containerInfo=e,t}(Nt.prototype=new ke).__a=function(r){var e=this,t=fo(e.__v),n=e.l.get(r);return n[0]++,function(i){var o=function(){e.props.revealOrder?(n.push(i),ei(e,r,n)):i()};t?t(o):o()}},Nt.prototype.render=function(r){this.i=null,this.l=new Map;var e=Te(r.children);r.revealOrder&&r.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return r.children},Nt.prototype.componentDidUpdate=Nt.prototype.componentDidMount=function(){var r=this;this.l.forEach(function(e,t){ei(r,t,e)})};var ho=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ws=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Cs=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ss=/[A-Z0-9]/g,Os=typeof document<"u",Ds=function(r){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(r)};function Es(r,e,t){return e.__k==null&&(e.textContent=""),ht(r,e),typeof t=="function"&&t(),r?r.__c:null}function ks(r,e,t){return Qi(r,e),typeof t=="function"&&t(),r?r.__c:null}ke.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(r){Object.defineProperty(ke.prototype,r,{configurable:!0,get:function(){return this["UNSAFE_"+r]},set:function(e){Object.defineProperty(this,r,{configurable:!0,writable:!0,value:e})}})});var ti=M.event;function Ts(){}function xs(){return this.cancelBubble}function Ps(){return this.defaultPrevented}M.event=function(r){return ti&&(r=ti(r)),r.persist=Ts,r.isPropagationStopped=xs,r.isDefaultPrevented=Ps,r.nativeEvent=r};var Cn,Ns={enumerable:!1,configurable:!0,get:function(){return this.class}},ri=M.vnode;M.vnode=function(r){typeof r.type=="string"&&(function(e){var t=e.props,n=e.type,i={},o=n.indexOf("-")===-1;for(var a in t){var l=t[a];if(!(a==="value"&&"defaultValue"in t&&l==null||Os&&a==="children"&&n==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in t&&t.value==null?a="value":a==="download"&&l===!0?l="":c==="translate"&&l==="no"?l=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||n!=="input"&&n!=="textarea"||Ds(t.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":Cs.test(a)&&(a=c):c=a="oninput":o&&ws.test(a)?a=a.replace(Ss,"-$&").toLowerCase():l===null&&(l=void 0),c==="oninput"&&i[a=c]&&(a="oninputCapture"),i[a]=l}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Te(t.children).forEach(function(d){d.props.selected=i.value.indexOf(d.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Te(t.children).forEach(function(d){d.props.selected=i.multiple?i.defaultValue.indexOf(d.props.value)!=-1:i.defaultValue==d.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",Ns)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i})(r),r.$$typeof=ho,ri&&ri(r)};var ni=M.__r;M.__r=function(r){ni&&ni(r),Cn=r.__c};var ii=M.diffed;M.diffed=function(r){ii&&ii(r);var e=r.props,t=r.__e;t!=null&&r.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),Cn=null};var Is={ReactCurrentDispatcher:{current:{readContext:function(r){return Cn.__n[r.__c].props.value},useCallback:dr,useContext:Xe,useDebugValue:Yi,useDeferredValue:oo,useEffect:H,useId:Xi,useImperativeHandle:bn,useInsertionEffect:ao,useLayoutEffect:je,useMemo:J,useReducer:Ut,useRef:ne,useState:k,useSyncExternalStore:no,useTransition:so}}};function Ls(r){return ce.bind(null,r)}function Wt(r){return!!r&&r.$$typeof===ho}function Ms(r){return Wt(r)&&r.type===W}function Rs(r){return!!r&&!!r.displayName&&(typeof r.displayName=="string"||r.displayName instanceof String)&&r.displayName.startsWith("Memo(")}function sn(r){return Wt(r)?tn.apply(null,arguments):r}function As(r){return!!r.__k&&(ht(null,r),!0)}function $s(r){return r&&(r.base||r.nodeType===1&&r)||null}var js=function(r,e){return r(e)},Fs=function(r,e){return r(e)},Hs=W,Us=Wt,Qe={useState:k,useId:Xi,useReducer:Ut,useEffect:H,useLayoutEffect:je,useInsertionEffect:ao,useTransition:so,useDeferredValue:oo,useSyncExternalStore:no,startTransition:io,useRef:ne,useImperativeHandle:bn,useMemo:J,useCallback:dr,useContext:Xe,useDebugValue:Yi,version:"18.3.1",Children:gs,render:Es,hydrate:ks,unmountComponentAtNode:As,createPortal:ys,createElement:ce,createContext:mt,createFactory:Ls,cloneElement:sn,createRef:Jo,Fragment:W,isValidElement:Wt,isElement:Us,isFragment:Ms,isMemo:Rs,findDOMNode:$s,Component:ke,PureComponent:on,memo:lo,forwardRef:wn,flushSync:Fs,unstable_batchedUpdates:js,StrictMode:Hs,Suspense:rr,SuspenseList:Nt,lazy:_s,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Is},po={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},oi=Qe.createContext&&Qe.createContext(po),qs=["attr","size","title"];function Ws(r,e){if(r==null)return{};var t=Bs(r,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function Bs(r,e){if(r==null)return{};var t={};for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){if(e.indexOf(n)>=0)continue;t[n]=r[n]}return t}function lr(){return lr=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},lr.apply(this,arguments)}function si(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function cr(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?si(Object(t),!0).forEach(function(n){zs(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):si(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function zs(r,e,t){return e=Ks(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ks(r){var e=Gs(r,"string");return typeof e=="symbol"?e:e+""}function Gs(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function go(r){return r&&r.map((e,t)=>Qe.createElement(e.tag,cr({key:t},e.attr),go(e.child)))}function Bt(r){return e=>Qe.createElement(Qs,lr({attr:cr({},r.attr)},e),go(r.child))}function Qs(r){var e=t=>{var{attr:n,size:i,title:o}=r,a=Ws(r,qs),l=i||t.size||"1em",c;return t.className&&(c=t.className),r.className&&(c=(c?c+" ":"")+r.className),Qe.createElement("svg",lr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:c,style:cr(cr({color:r.color||t.color},t.style),r.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),o&&Qe.createElement("title",null,o),r.children)};return oi!==void 0?Qe.createElement(oi.Consumer,null,t=>e(t)):e(po)}function Vs(r){return Bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(r)}function Ys(r){return Bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 56v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56zm40 200c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24zm272 256c-20.183 0-29.485-39.293-33.931-57.795-5.206-21.666-10.589-44.07-25.393-58.902-32.469-32.524-49.503-73.967-89.117-113.111a11.98 11.98 0 0 1-3.558-8.521V59.901c0-6.541 5.243-11.878 11.783-11.998 15.831-.29 36.694-9.079 52.651-16.178C256.189 17.598 295.709.017 343.995 0h2.844c42.777 0 93.363.413 113.774 29.737 8.392 12.057 10.446 27.034 6.148 44.632 16.312 17.053 25.063 48.863 16.382 74.757 17.544 23.432 19.143 56.132 9.308 79.469l.11.11c11.893 11.949 19.523 31.259 19.439 49.197-.156 30.352-26.157 58.098-59.553 58.098H350.723C358.03 364.34 384 388.132 384 430.548 384 504 336 512 312 512z"},child:[]}]})(r)}function Xs(r){return Bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"},child:[]}]})(r)}function Js(r){return Bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 225.31c4.674-22.647.864-44.538-8.99-62.99 2.958-23.868-4.021-48.565-17.34-66.99C438.986 39.423 404.117 0 327 0c-7 0-15 .01-22.22.01C201.195.01 168.997 40 128 40h-10.845c-5.64-4.975-13.042-8-21.155-8H32C14.327 32 0 46.327 0 64v240c0 17.673 14.327 32 32 32h64c11.842 0 22.175-6.438 27.708-16h7.052c19.146 16.953 46.013 60.653 68.76 83.4 13.667 13.667 10.153 108.6 71.76 108.6 57.58 0 95.27-31.936 95.27-104.73 0-18.41-3.93-33.73-8.85-46.54h36.48c48.602 0 85.82-41.565 85.82-85.58 0-19.15-4.96-34.99-13.73-49.84zM64 296c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm330.18 16.73H290.19c0 37.82 28.36 55.37 28.36 94.54 0 23.75 0 56.73-47.27 56.73-18.91-18.91-9.46-66.18-37.82-94.54C206.9 342.89 167.28 272 138.92 272H128V85.83c53.611 0 100.001-37.82 171.64-37.82h37.82c35.512 0 60.82 17.12 53.12 65.9 15.2 8.16 26.5 36.44 13.94 57.57 21.581 20.384 18.699 51.065 5.21 65.62 9.45 0 22.36 18.91 22.27 37.81-.09 18.91-16.71 37.82-37.82 37.82z"},child:[]}]})(r)}function Zs(r){return Bt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"},child:[]}]})(r)}function ea(r){const[e,t]=k(r.likes.valueOf()),[n,i]=k(r.dislikes.valueOf()),[o,a]=k(!1),[l,c]=k(!1),[d,p]=k("");H(()=>{async function f(){try{const g=await(await Se.postReaction.postReactionCreate({post_id:r.post_id.valueOf()})).json();a(g[0]),c(g[1])}catch(h){if(h?.status==401){console.log("Not logged in: won't fetch previous reactions");return}const g=h instanceof Error?h.message:"Fetching previous reactions failed";p(g),console.error("Error:",h)}}f()},[r.post_id]);async function u(f){try{const h={post_id:Object(r.post_id)},v=await(await(f?Se.postLike.postLikeCreate(h):Se.postDislike.postDislikeCreate(h))).text;console.log("data"),f?(t(o?e-1:e+1),l&&(i(n-1),c(!1))):(i(l?n-1:n+1),o&&(t(e-1),a(!1))),f?a(!o):c(!l)}catch(h){if(h?.status==401){console.log("401 error: redirecting to /login"),window.location.href="/login";return}const g=h instanceof Error?h.message:"Reacting failed";p(g),console.error("Error:",h)}}return d?s(W,{children:s("div",{role:"alert",className:"alert alert-error",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("span",{children:d})]})}):s("div",{class:"pt-1 text-lg",children:[s("div",{class:"inline mr-4",children:[s("span",{children:e}),s("span",{className:"cursor-pointer px-2 text-green-500 hover:text-[#2196f3] inline-block",onClick:async()=>{await u(!0)},children:o?s(Xs,{}):s(Zs,{})})]}),s("div",{class:"inline mr-4",children:[s("span",{children:n}),s("span",{className:"cursor-pointer px-2 text-red-500 hover:text-[#2196f3] inline-block",onClick:async()=>{await u(!1)},children:l?s(Ys,{}):s(Js,{})})]}),s("div",{class:"inline mr-4",children:[s("span",{children:r.comments?.length}),s("span",{className:"cursor-pointer px-2 inline-block",onClick:async()=>{await u(!1)},children:s(Vs,{})})]})]})}function ta(){const[r,e]=k([]),[t,n]=k({}),[i,o]=k(""),[a,l]=k(1),c=5;H(()=>{(async()=>{try{const v=await(await Se.posts.postsList()).json();e(v)}catch(g){const v=g instanceof Error?g.message:"Fetching blogs failed";o(v),console.error("Error:",g)}})()},[]),H(()=>{(async()=>{try{const g=r.map(async w=>{const D=await(await Se.postComments.postCommentsCreate({post_id:w.post_id})).json();return{post_id:w.post_id,comments:D}}),S=(await Promise.all(g)).reduce((w,{post_id:O,comments:D})=>(w[O]=D,w),{});n(S)}catch(g){const v=g instanceof Error?g.message:"Fetching comments failed";o(v),console.error("Error:",g)}})()},[r]);const d=Math.ceil(r.length/c),p=a*c,u=p-c,f=r.slice(u,p),h=g=>l(g);return i?s(W,{children:[s(ae,{}),s("div",{role:"alert",className:"alert alert-error",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("span",{children:i})]})]}):s(W,{children:[s(ae,{}),s("div",{className:"container mx-auto p-4",children:[s("h1",{className:"text-2xl font-bold mb-4",children:"Blog Posts"}),s("div",{className:"space-y-6",children:f.map((g,v)=>s(mo,{post:g,comments:t[g.post_id]},v))}),d>1&&s("div",{className:"join mt-6 flex justify-center",children:Array.from({length:d},(g,v)=>v+1).map(g=>s("button",{className:`join-item btn ${a===g?"btn-active":""}`,onClick:()=>h(g),children:g},g))})]})]})}function mo(r){const{post:e}=r,{comments:t}=r;return s("div",{class:"card shadow transition-transform ease-in-out delay-0 hover:-translate-y-1 hover:scale-[1.02] duration-300",children:[s("a",{class:"card-body",href:`/blog/${e.post_id}`,children:[s("h1",{class:"text-4xl font-bold",children:e.title}),s("time",{children:new Date(e.created_at).toLocaleDateString("en-uk",{year:"numeric",month:"long",day:"numeric"})}),s("div",{class:"prose max-w-full mt-4",dangerouslySetInnerHTML:{__html:e.snippet}})]}),s("div",{class:"card-body pt-0",children:s(ea,{post_id:e.post_id,likes:e.likes,dislikes:e.dislikes,comments:t})})]})}function ra({id:r}){const[e,t]=k(""),[n,i]=k([]),[o,a]=k(null),[l,c]=k(""),d=u=>{t(u.target.value)};function p(){(async()=>{try{const f=await(await Se.postComment.postCommentCreate({post_id:parseInt(r),content:e})).text();console.log(f),alert(f)}catch(u){if(u?.status==401){console.log("401 error: redirecting to /login"),window.location.href="/login";return}const f=u instanceof Error?u.message:"Posting blog comment failed";c(f),console.error("Error:",u)}})()}return H(()=>{(async()=>{try{const f=await(await Se.post.postCreate({post_id:parseInt(r)})).json();a(f)}catch(u){const f=u instanceof Error?u.message:"Fetching blog failed";c(f),console.error("Error:",u)}})()},[r]),H(()=>{(async()=>{try{const f=await(await Se.postComments.postCommentsCreate({post_id:parseInt(r)})).json();i(f)}catch(u){const f=u instanceof Error?u.message:"Fetching comments failed";c(f),console.error("Error:",u)}})()},[]),l?s(W,{children:[s(ae,{}),s("div",{role:"alert",className:"alert alert-error",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("span",{children:l})]})]}):o?s(W,{children:[s(ae,{}),s("div",{class:"card card-body max-w-full",children:s("div",{class:"text-center justify-center",children:s(mo,{post:o,comments:n})})}),s("div",{class:"prose max-w-full mx-8",dangerouslySetInnerHTML:{__html:o?.content}}),s("div",{class:"mx-8 mb-8",children:[s("div",{className:"divider"}),s("h1",{class:"text-3xl font-bold",children:"Comments"}),s("p",{children:"Comments do not allow any HTML, but they allow Markdown for styling. Once submitted, they need to be reviewed by the site administrator to be displayed for obvious reasons."}),s("textarea",{id:"comment",class:"min-w-11/12 resize min-h-[10rem] p-4 my-4 rounded-lg outline-1",placeholder:"Write a Markdown comment...",required:!0,onInput:d}),s("div",{children:s("button",{class:"btn rounded-xl bg-blue-600 text-white",onClick:p,children:"Post comment"})}),n.map((u,f)=>s(na,{content:u.content,created_at:u.created_at,user_id:u.user_id}))]})]}):s(W,{children:[s(ae,{}),s("p",{children:"Loading..."})]})}function na(r){return s("div",{class:"card",children:s("div",{class:"card-body pb-8 text-[1.0625rem]",children:[s("div",{class:"inline",children:[s("span",{class:"font-bold",children:["ID: ",r.user_id]}),s("time",{class:"ml-4",children:new Date(r.created_at).toLocaleDateString("en-uk",{hour:"numeric",minute:"numeric",year:"numeric",month:"numeric",day:"numeric"})})]}),s("div",{class:"prose max-w-full",dangerouslySetInnerHTML:{__html:r.content}})]})})}function ia(){return s(W,{children:[s(ae,{}),s("div",{className:"h-[99%] grid place-items-center",id:"homescreen",children:s("div",{className:"min-w-1/4 text-center p-8 bg-black/80 text-white",children:[s("h1",{className:"text-8xl font-semibold mb-2",children:["My",s("br",{}),"Website",s("span",{className:"blink",children:"_"})]}),s("p",{children:"Hi"})]})})]})}function oa(){return s(W,{children:[s(ae,{}),s("div",{className:"sm:float-left sm:w-1/2 p-4",children:[s("h1",{class:"text-4xl font-bold mb-3",children:"About"}),s("p",{children:"Hello!"}),s("p",{children:"This is my website, which is yet to be completed."}),s("p",{children:["Check out"," ",s("a",{href:"/projects/pong",class:"text-blue-500",children:"my Rust pong game"})]})]}),s("div",{className:"sm:float-right sm:w-1/2 mx-auto",children:s("img",{src:to,className:"p-4 w-[80%]"})})]})}function sa(){const[r,e]=k(""),[t,n]=k(""),[i,o]=k(!1),[a,l]=k("");return s(W,{children:[s(ae,{}),s("div",{className:"bg-base-100 mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full",children:s("div",{className:"card-body",children:[s("h1",{className:"text-center text-xl font-bold",children:"Login"}),s("fieldset",{className:"fieldset",children:[s("label",{className:"label",children:"Username"}),s("label",{className:"input w-full",children:[s(la,{}),s("input",{type:"text",required:!0,placeholder:"Username",onInput:u=>{e(u.target.value)}})]}),s("label",{className:"label",children:"Password"}),s("label",{className:"input w-full",children:[s(aa,{}),s("input",{type:"password",required:!0,placeholder:"Password",onInput:u=>{n(u.target.value)}})]}),s("button",{disabled:i,className:"btn btn-neutral mt-4",onClick:async()=>{o(!0);try{const u=await(await Se.login.loginCreate({username:r,password:t})).text();console.log("JWT Token:",u),localStorage.setItem("token",u),o(!1),window.location.href="/"}catch(u){const f=u instanceof Error?u.message:"Login failed";l(f),console.log("Error:",u),o(!1)}},children:"Sign In"}),s("div",{children:s("p",{className:"text-center",children:["Don't have an account?"," ",s("a",{className:"link-accent",href:"/signup",children:"Sign up here"})]})})]}),a&&s("p",{className:"text-error",children:a})]})})]})}function aa(){return s("svg",{className:"h-[1em] opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:s("g",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2.5",fill:"none",stroke:"currentColor",children:[s("path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}),s("circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"})]})})}function la(){return s("svg",{className:"h-[1em] opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:s("g",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2.5",fill:"none",stroke:"currentColor",children:[s("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),s("circle",{cx:"12",cy:"7",r:"4"})]})})}function ai({title:r,description:e,technicalSpecs:t,backgroundImage:n,href:i}){return s("a",{href:i,children:s("div",{className:"card card-side bg-neutral text-neutral-content border border-base-200 overflow-hidden relative group transition-all duration-500 hover:scale-[1.02] hover:shadow-2xl hover:shadow-accent/20 flex",children:[s("div",{className:"card-body p-8 flex flex-col justify-between w-3/4",children:[s("div",{children:[s("h2",{className:"card-title text-3xl mb-3 text-balance",children:r}),s("p",{className:"mb-4 leading-relaxed",children:e}),s("div",{className:"text-sm bg-base-100 text-base-content p-3 rounded border border-base-300 my-4",children:[s("span",{className:"font-semibold text-accent",children:"Technical:"})," ",t]})]}),s("div",{className:"card-actions",children:s("a",{href:i,className:"btn btn-success px-6 py-3 transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary group-hover:shadow-lg group-hover:shadow-primary/50",children:"Play Now"})})]}),s("figure",{className:"w-1/4 relative brightness-75 group-hover:brightness-110 transition-all duration-500",children:[s("div",{className:"absolute inset-0 bg-gradient-to-l from-transparent to-base-100/20"}),s("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${n})`}})]})]})})}function ca(){return s(W,{children:[s(ae,{}),s("h1",{class:"text-3xl mx-4 my-8",children:"Projects"}),s("div",{class:"m-8",children:s(ai,{title:"Chess",description:"A multiplayer chess web app built with Rust and Poem-WebSocket, enabling real-time gameplay via WebSockets.",technicalSpecs:"Turn-based strategy • Move validation engine • Real-time multiplayer",backgroundImage:"/chess-board.png",href:"/projects/chess"})}),s("div",{class:"m-8",children:s(ai,{title:"Arithmetic Game",description:"Challenge your mental math skills in this fast-paced arithmetic puzzle game. Solve complex calculations under time pressure, compete against others, and climb the global leaderboards.",technicalSpecs:"Real-time mental math challenges • Dynamic problem generation • Multiplayer leaderboards • Timed solo mode",backgroundImage:"/stragedy-rush.png",href:"/projects/arithmetic"})}),s("a",{href:"https://altus.deno.dev/projects",class:"mx-8 my-4 btn btn-success",children:"More Projects"})]})}function ua(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}const $t="abcdefgh".split(""),nr={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},da={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},fa={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},ha=[7,6,5,4,3,2,1,0],pa=[0,1,2,3,4,5,6,7],li={wP:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[s("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),s("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),s("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),s("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),s("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),s("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),s("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[s("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),s("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),s("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),s("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[s("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[s("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),s("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),s("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),s("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[s("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),s("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),s("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),s("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),s("circle",{cx:"6",cy:"12",r:"2"}),s("circle",{cx:"14",cy:"9",r:"2"}),s("circle",{cx:"22.5",cy:"8",r:"2"}),s("circle",{cx:"31",cy:"9",r:"2"}),s("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[s("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),s("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),s("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),s("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),s("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),s("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),s("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[s("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),s("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),s("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),s("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),s("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),s("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),s("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),s("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),s("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),s("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),s("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[s("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),s("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),s("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),s("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),s("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[s("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[s("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),s("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),s("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),s("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[s("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),s("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),s("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),s("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),s("circle",{cx:"6",cy:"12",r:"2"}),s("circle",{cx:"14",cy:"9",r:"2"}),s("circle",{cx:"22.5",cy:"8",r:"2"}),s("circle",{cx:"31",cy:"9",r:"2"}),s("circle",{cx:"39",cy:"12",r:"2"}),s("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),s("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[s("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),s("path",{d:"M 12.5,31.5 L 32.5,31.5"}),s("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),s("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:s("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[s("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),s("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),s("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),s("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),s("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),s("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function an(r,e,t){const n=e/8,i=r==="white"?da:fa,o=r==="white"?ha:pa,a=i[t[0]]*n+n/2,l=o[parseInt(t[1],10)-1]*n+n/2;return{x:a,y:l}}function ci(r){let e=!1;return Object.keys(nr).forEach(t=>{r[t]!==nr[t]&&(e=!0)}),Object.keys(r).forEach(t=>{nr[t]!==r[t]&&(e=!0)}),e}function ga(r,e){const t={removed:{},added:{}};return Object.keys(r).forEach(n=>{e[n]!==r[n]&&(t.removed[n]=r[n])}),Object.keys(e).forEach(n=>{r[n]!==e[n]&&(t.added[n]=e[n])}),t}function ui(r){return r==="start"?nr:typeof r=="string"?ma(r):r}function ma(r){if(!_a(r))return{};r=r.replace(/ .+$/,"");const e=r.split("/"),t={};let n=8;for(let i=0;i<8;i++){const o=e[i].split("");let a=0;for(let l=0;l<o.length;l++)if(o[l].search(/[1-8]/)!==-1){const c=parseInt(o[l],10);a=a+c}else{const c=$t[a]+n;t[c]=ba(o[l]),a=a+1}n=n-1}return t}function _a(r){r=r.replace(/ .+$/,""),r=va(r);const e=r.split("/");if(e.length!==8)return!1;for(let t=0;t<8;t++)if(e[t].length!==8||e[t].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function va(r){return r.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function ba(r){return r.toLowerCase()===r?"b"+r.toUpperCase():"w"+r.toUpperCase()}const ya=(r,e=!0,t,n)=>{const[i,o]=k([]),[a,l]=k([]),[c,d]=k();H(()=>{Array.isArray(r)&&(p(),o(r?.filter(g=>g[0]!==g[1])))},[r]),H(()=>{t?.(a)},[a]);function p(){l([]),d(void 0)}const u=(g,v)=>{e&&d([g,v,n])},f=[...a,...i];return{arrows:f,newArrow:c,clearArrows:p,drawNewArrow:u,setArrows:l,onArrowDrawEnd:(g,v)=>{if(g===v||!e)return;let S;const w=[g,v,n];f.every(([D,E])=>!(D===g&&E===v))?S=[...a,w]:S=a.filter(([D,E])=>!(D===g&&E===v)),d(void 0),l(S)}}},_o=mt({}),Pe=()=>Xe(_o),wa=wn(({allowDragOutsideBoard:r=!0,animationDuration:e=300,areArrowsAllowed:t=!0,arePiecesDraggable:n=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:o=!1,boardOrientation:a="white",boardWidth:l,children:c,clearPremovesOnRightClick:d=!0,customArrows:p,customArrowColor:u="rgb(255,170,0)",customBoardStyle:f,customNotationStyle:h,customDarkSquareStyle:g={backgroundColor:"#B58863"},customDropSquareStyle:v={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:S={backgroundColor:"#F0D9B5"},customPieces:w,customPremoveDarkSquareStyle:O={backgroundColor:"#A42323"},customPremoveLightSquareStyle:D={backgroundColor:"#BD2828"},customSquare:E="div",customSquareStyles:U,dropOffBoardAction:T="snapback",id:j=0,isDraggablePiece:B=()=>!0,getPositionObject:A=()=>{},onArrowsChange:z=()=>{},onDragOverSquare:Q=()=>{},onMouseOutSquare:q=()=>{},onMouseOverSquare:ue=()=>{},onPieceClick:Oe=()=>{},onPieceDragBegin:_e=()=>{},onPieceDragEnd:ve=()=>{},onPieceDrop:he=()=>!0,onPieceDropOffBoard:Fe=()=>{},onPromotionCheck:vt=(oe,de,rt)=>(rt==="wP"&&oe[1]==="7"&&de[1]==="8"||rt==="bP"&&oe[1]==="2"&&de[1]==="1")&&Math.abs(oe.charCodeAt(0)-de.charCodeAt(0))<=1,onPromotionPieceSelect:Ze=()=>!0,onSparePieceDrop:et=()=>!0,onSquareClick:bt=()=>{},onSquareRightClick:He=()=>{},position:Ue="start",promotionDialogVariant:tt="default",promotionToSquare:qe=null,showBoardNotation:$=!0,showPromotionDialog:we=!1,snapToCursor:xe=!0},We)=>{const[oe,de]=k(ui(Ue)),[rt,vr]=k({removed:{},added:{}}),[nt,Ne]=k(void 0),[br,it]=k(we&&!o),[yr,zt]=k(null),[wr,yt]=k(qe),[wt,Ct]=k([]),De=ne(wt),[St,Be]=k(),[Cr,Sr]=k(Object.assign(Object.assign({},li),w)),[Or,ot]=k(!1),st=ne(),[at,lt]=k(!1),[Dr,Er]=k(null);bn(We,()=>({clearPremoves(K=!0){ct(K)}})),H(()=>{Sr(Object.assign(Object.assign({},li),w))},[w]),H(()=>{it(we),yt(qe)},[qe,we]),H(()=>{var K,C,te;Et();const F=ui(Ue),Z=ga(oe,F),ge=((K=Object.keys(Z.added))===null||K===void 0?void 0:K.length)<=2?(te=(C=Object.entries(Z.added))===null||C===void 0?void 0:C[0])===null||te===void 0?void 0:te[1][0]:void 0;if(at)de(F),lt(!1),i&&Dt(ge),st.current&&clearTimeout(st.current);else if(Or)de(F),lt(!1),i&&Dt(ge);else{ci(F)&&nt!==void 0?Ne(ge):ci(F)?Ne(void 0):Ne("b"),vr(Z),lt(!0);const fe=setTimeout(()=>{de(F),lt(!1),i&&Dt(ge)},e);st.current=fe}return ot(!1),A(F),Ot(),()=>{clearTimeout(st.current)}},[Ue]);const{arrows:Kt,newArrow:kr,clearArrows:Ot,drawNewArrow:Tr,onArrowDrawEnd:xr}=ya(p,t,z,u);function Pr(K,C,te,F){if(K===C)return;if(Ot(),i&&at||i&&(nt===te[0]||De.current.filter(ge=>ge.piece[0]===te[0]).length>0)){const ge=[...De.current];ge.push({sourceSq:K,targetSq:C,piece:te}),De.current=ge,Ct([...ge]),Et();return}if(!i&&at)return;const Z=Object.assign({},oe);ot(!!F),Ne(te[0]),he.length?he(K,C,te)||(ct(),ot(!1)):(delete Z[K],Z[C]=te,de(Z)),Et(),A(Z)}function Nr(K){const C=Object.assign({},oe);delete C[K],de(C),A(C)}function Dt(K){if(De.current.length===0)return;const C=De.current[0];if(C.piece[0]!==void 0&&C.piece[0]!==K&&he.length)if(Ne(C.piece[0]),ot(!0),he(C.sourceSq,C.targetSq,C.piece)){const F=[...De.current];F.shift(),De.current=F,Ct([...F])}else ct()}function Ir(K,C){if(!et(K,C))return;const F=Object.assign({},oe);F[C]=K,de(F),A(F)}function ct(K=!0){K&&Ne(void 0),De.current=[],Ct([])}function Et(){zt(null),yt(null),it(!1)}function Lr(K){Be(K)}function _(K){if(St){if(St===K){Be(void 0),d&&ct(!1),He(K);return}}else Be(void 0)}function Ie(){Be(void 0)}const pe={allowDragOutsideBoard:r,animationDuration:e,arePiecesDraggable:n,arePremovesAllowed:i,arrows:Kt,autoPromoteToQueen:o,boardOrientation:a,boardWidth:l,chessPieces:Cr,clearArrows:Ot,clearCurrentRightClickDown:Ie,currentPosition:oe,currentRightClickDown:St,customArrowColor:u,customBoardStyle:f,customDarkSquareStyle:g,customDropSquareStyle:v,customLightSquareStyle:S,customNotationStyle:h,customPremoveDarkSquareStyle:O,customPremoveLightSquareStyle:D,customSquare:E,customSquareStyles:U,deletePieceFromSquare:Nr,drawNewArrow:Tr,dropOffBoardAction:T,handleSetPosition:Pr,handleSparePieceDrop:Ir,id:j,isDraggablePiece:B,isWaitingForAnimation:at,lastPieceColour:nt,lastSquareDraggedOver:Dr,newArrow:kr,onArrowDrawEnd:xr,onDragOverSquare:Q,onMouseOutSquare:q,onMouseOverSquare:ue,onPieceClick:Oe,onPieceDragBegin:_e,onPieceDragEnd:ve,onPieceDrop:he,onPieceDropOffBoard:Fe,onPromotionCheck:vt,onPromotionPieceSelect:Ze,onRightClickDown:Lr,onRightClickUp:_,onSparePieceDrop:et,onSquareClick:bt,positionDifferences:rt,premoves:wt,promoteFromSquare:yr,promoteToSquare:wr,promotionDialogVariant:tt,setLastSquareDraggedOver:Er,setPromoteFromSquare:zt,setPromoteToSquare:yt,setShowPromoteDialog:it,showBoardNotation:$,showPromoteDialog:br,snapToCursor:xe};return s(_o.Provider,Object.assign({value:pe},{children:c}))});function Ca({row:r,col:e}){const{boardOrientation:t,boardWidth:n,customDarkSquareStyle:i,customLightSquareStyle:o,customNotationStyle:a}=Pe(),l=o.backgroundColor,c=i.backgroundColor,d=e===0,p=r===7,u=d&&p;function f(){return t==="white"?8-r:r+1}function h(){return t==="black"?$t[7-e]:$t[e]}function g(){return s(W,{children:[s("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:l}),fi(n,a))},{children:f()})),s("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:l}),di(n,a))},{children:h()}))]})}function v(){return s("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?c:l}),di(n,a))},{children:h()}))}function S(){return s("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},t==="black"?{color:r%2===0?c:l}:{color:r%2===0?c:l}),fi(n,a))},{children:f()}))}return u?g():p?v():d?S():null}const di=(r,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:r/8-r/48,fontSize:r/48},e),fi=(r,e)=>Object.assign({alignSelf:"flex-start",paddingRight:r/8-r/48,fontSize:r/48},e),vo=mt({dragDropManager:void 0});function be(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var hi=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),pi=function(){return Math.random().toString(36).substring(7).split("").join(".")},gi={INIT:"@@redux/INIT"+pi(),REPLACE:"@@redux/REPLACE"+pi()};function Sa(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function bo(r,e,t){var n;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(be(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(be(1));return t(bo)(r,e)}if(typeof r!="function")throw new Error(be(2));var i=r,o=e,a=[],l=a,c=!1;function d(){l===a&&(l=a.slice())}function p(){if(c)throw new Error(be(3));return o}function u(v){if(typeof v!="function")throw new Error(be(4));if(c)throw new Error(be(5));var S=!0;return d(),l.push(v),function(){if(S){if(c)throw new Error(be(6));S=!1,d();var O=l.indexOf(v);l.splice(O,1),a=null}}}function f(v){if(!Sa(v))throw new Error(be(7));if(typeof v.type>"u")throw new Error(be(8));if(c)throw new Error(be(9));try{c=!0,o=i(o,v)}finally{c=!1}for(var S=a=l,w=0;w<S.length;w++){var O=S[w];O()}return v}function h(v){if(typeof v!="function")throw new Error(be(10));i=v,f({type:gi.REPLACE})}function g(){var v,S=u;return v={subscribe:function(O){if(typeof O!="object"||O===null)throw new Error(be(11));function D(){O.next&&O.next(p())}D();var E=S(D);return{unsubscribe:E}}},v[hi]=function(){return this},v}return f({type:gi.INIT}),n={dispatch:f,subscribe:u,getState:p,replaceReducer:h},n[hi]=g,n}function R(r,e,...t){if(Oa()&&e===void 0)throw new Error("invariant requires an error message argument");if(!r){let n;if(e===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;n=new Error(e.replace(/%s/g,function(){return t[i++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Oa(){return typeof process<"u"&&!0}function Da(r,e,t){return e.split(".").reduce((n,i)=>n&&n[i]?n[i]:t||null,r)}function Ea(r,e){return r.filter(t=>t!==e)}function yo(r){return typeof r=="object"}function ka(r,e){const t=new Map,n=o=>{t.set(o,t.has(o)?t.get(o)+1:1)};r.forEach(n),e.forEach(n);const i=[];return t.forEach((o,a)=>{o===1&&i.push(a)}),i}function Ta(r,e){return r.filter(t=>e.indexOf(t)>-1)}const Sn="dnd-core/INIT_COORDS",fr="dnd-core/BEGIN_DRAG",On="dnd-core/PUBLISH_DRAG_SOURCE",hr="dnd-core/HOVER",pr="dnd-core/DROP",gr="dnd-core/END_DRAG";function mi(r,e){return{type:Sn,payload:{sourceClientOffset:e||null,clientOffset:r||null}}}const xa={type:Sn,payload:{clientOffset:null,sourceClientOffset:null}};function Pa(r){return function(t=[],n={publishSource:!0}){const{publishSource:i=!0,clientOffset:o,getSourceClientOffset:a}=n,l=r.getMonitor(),c=r.getRegistry();r.dispatch(mi(o)),Na(t,l,c);const d=Ma(t,l);if(d==null){r.dispatch(xa);return}let p=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");Ia(a),p=a(d)}r.dispatch(mi(o,p));const f=c.getSource(d).beginDrag(l,d);if(f==null)return;La(f),c.pinSource(d);const h=c.getSourceType(d);return{type:fr,payload:{itemType:h,item:f,sourceId:d,clientOffset:o||null,sourceClientOffset:p||null,isSourcePublic:!!i}}}}function Na(r,e,t){R(!e.isDragging(),"Cannot call beginDrag while dragging."),r.forEach(function(n){R(t.getSource(n),"Expected sourceIds to be registered.")})}function Ia(r){R(typeof r=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function La(r){R(yo(r),"Item must be an object.")}function Ma(r,e){let t=null;for(let n=r.length-1;n>=0;n--)if(e.canDragSource(r[n])){t=r[n];break}return t}function Ra(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Aa(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){Ra(r,i,t[i])})}return r}function $a(r){return function(t={}){const n=r.getMonitor(),i=r.getRegistry();ja(n),Ua(n).forEach((a,l)=>{const c=Fa(a,l,i,n),d={type:pr,payload:{dropResult:Aa({},t,c)}};r.dispatch(d)})}}function ja(r){R(r.isDragging(),"Cannot call drop while not dragging."),R(!r.didDrop(),"Cannot call drop twice during one drag operation.")}function Fa(r,e,t,n){const i=t.getTarget(r);let o=i?i.drop(n,r):void 0;return Ha(o),typeof o>"u"&&(o=e===0?{}:n.getDropResult()),o}function Ha(r){R(typeof r>"u"||yo(r),"Drop result must either be an object or undefined.")}function Ua(r){const e=r.getTargetIds().filter(r.canDropOnTarget,r);return e.reverse(),e}function qa(r){return function(){const t=r.getMonitor(),n=r.getRegistry();Wa(t);const i=t.getSourceId();return i!=null&&(n.getSource(i,!0).endDrag(t,i),n.unpinSource()),{type:gr}}}function Wa(r){R(r.isDragging(),"Cannot call endDrag while not dragging.")}function ln(r,e){return e===null?r===null:Array.isArray(r)?r.some(t=>t===e):r===e}function Ba(r){return function(t,{clientOffset:n}={}){za(t);const i=t.slice(0),o=r.getMonitor(),a=r.getRegistry(),l=o.getItemType();return Ga(i,a,l),Ka(i,o,a),Qa(i,o,a),{type:hr,payload:{targetIds:i,clientOffset:n||null}}}}function za(r){R(Array.isArray(r),"Expected targetIds to be an array.")}function Ka(r,e,t){R(e.isDragging(),"Cannot call hover while not dragging."),R(!e.didDrop(),"Cannot call hover after drop.");for(let n=0;n<r.length;n++){const i=r[n];R(r.lastIndexOf(i)===n,"Expected targetIds to be unique in the passed array.");const o=t.getTarget(i);R(o,"Expected targetIds to be registered.")}}function Ga(r,e,t){for(let n=r.length-1;n>=0;n--){const i=r[n],o=e.getTargetType(i);ln(o,t)||r.splice(n,1)}}function Qa(r,e,t){r.forEach(function(n){t.getTarget(n).hover(e,n)})}function Va(r){return function(){if(r.getMonitor().isDragging())return{type:On}}}function Ya(r){return{beginDrag:Pa(r),publishDragSource:Va(r),hover:Ba(r),drop:$a(r),endDrag:qa(r)}}class Xa{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function n(o){return(...a)=>{const l=o.apply(e,a);typeof l<"u"&&t(l)}}const i=Ya(this);return Object.keys(i).reduce((o,a)=>{const l=i[a];return o[a]=n(l),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const n=this.store.getState().refCount>0;this.backend&&(n&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!n&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function Ja(r,e){return{x:r.x+e.x,y:r.y+e.y}}function wo(r,e){return{x:r.x-e.x,y:r.y-e.y}}function Za(r){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:n}=r;return!e||!t||!n?null:wo(Ja(e,n),t)}function el(r){const{clientOffset:e,initialClientOffset:t}=r;return!e||!t?null:wo(e,t)}const Mt=[],Dn=[];Mt.__IS_NONE__=!0;Dn.__IS_ALL__=!0;function tl(r,e){return r===Mt?!1:r===Dn||typeof e>"u"?!0:Ta(e,r).length>0}class rl{subscribeToStateChange(e,t={}){const{handlerIds:n}=t;R(typeof e=="function","listener must be a function."),R(typeof n>"u"||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const o=()=>{const a=this.store.getState(),l=a.stateId;try{l===i||l===i+1&&!tl(a.dirtyHandlerIds,n)||e()}finally{i=l}};return this.store.subscribe(o)}subscribeToOffsetChange(e){R(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const n=()=>{const i=this.store.getState().dragOffset;i!==t&&(t=i,e())};return this.store.subscribe(n)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return R(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(R(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();return ln(n,i)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(R(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const n=this.registry.getSourceType(e),i=this.getItemType();return n!==i?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:n}=t;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),o=this.getItemType();if(o&&!ln(i,o))return!1;const a=this.getTargetIds();if(!a.length)return!1;const l=a.indexOf(e);return n?l===a.length-1:l>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Za(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return el(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const _i=typeof global<"u"?global:self,Co=_i.MutationObserver||_i.WebKitMutationObserver;function So(r){return function(){const t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),r()}}}function nl(r){let e=1;const t=new Co(r),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){e=-e,n.data=e}}const il=typeof Co=="function"?nl:So;class ol{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let n=0,i=e.length-this.index;n<i;n++)e[n]=e[n+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=il(this.flush),this.requestErrorThrow=So(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class sl{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class al{create(e){const t=this.freeTasks,n=t.length?t.pop():new sl(this.onError,i=>t[t.length]=i);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}const Oo=new ol,ll=new al(Oo.registerPendingError);function cl(r){Oo.enqueueTask(ll.create(r))}const En="dnd-core/ADD_SOURCE",kn="dnd-core/ADD_TARGET",Tn="dnd-core/REMOVE_SOURCE",mr="dnd-core/REMOVE_TARGET";function ul(r){return{type:En,payload:{sourceId:r}}}function dl(r){return{type:kn,payload:{targetId:r}}}function fl(r){return{type:Tn,payload:{sourceId:r}}}function hl(r){return{type:mr,payload:{targetId:r}}}function pl(r){R(typeof r.canDrag=="function","Expected canDrag to be a function."),R(typeof r.beginDrag=="function","Expected beginDrag to be a function."),R(typeof r.endDrag=="function","Expected endDrag to be a function.")}function gl(r){R(typeof r.canDrop=="function","Expected canDrop to be a function."),R(typeof r.hover=="function","Expected hover to be a function."),R(typeof r.drop=="function","Expected beginDrag to be a function.")}function cn(r,e){if(e&&Array.isArray(r)){r.forEach(t=>cn(t,!1));return}R(typeof r=="string"||typeof r=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var ye;(function(r){r.SOURCE="SOURCE",r.TARGET="TARGET"})(ye||(ye={}));let ml=0;function _l(){return ml++}function vl(r){const e=_l().toString();switch(r){case ye.SOURCE:return`S${e}`;case ye.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${r}`)}}function vi(r){switch(r[0]){case"S":return ye.SOURCE;case"T":return ye.TARGET;default:throw new Error(`Cannot parse handler ID: ${r}`)}}function bi(r,e){const t=r.entries();let n=!1;do{const{done:i,value:[,o]}=t.next();if(o===e)return!0;n=!!i}while(!n);return!1}class bl{addSource(e,t){cn(e),pl(t);const n=this.addHandler(ye.SOURCE,e,t);return this.store.dispatch(ul(n)),n}addTarget(e,t){cn(e,!0),gl(t);const n=this.addHandler(ye.TARGET,e,t);return this.store.dispatch(dl(n)),n}containsHandler(e){return bi(this.dragSources,e)||bi(this.dropTargets,e)}getSource(e,t=!1){return R(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return R(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return R(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return R(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return vi(e)===ye.SOURCE}isTargetId(e){return vi(e)===ye.TARGET}removeSource(e){R(this.getSource(e),"Expected an existing source."),this.store.dispatch(fl(e)),cl(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){R(this.getTarget(e),"Expected an existing target."),this.store.dispatch(hl(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);R(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){R(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,n){const i=vl(e);return this.types.set(i,t),e===ye.SOURCE?this.dragSources.set(i,n):e===ye.TARGET&&this.dropTargets.set(i,n),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const yl=(r,e)=>r===e;function wl(r,e){return!r&&!e?!0:!r||!e?!1:r.x===e.x&&r.y===e.y}function Cl(r,e,t=yl){if(r.length!==e.length)return!1;for(let n=0;n<r.length;++n)if(!t(r[n],e[n]))return!1;return!0}function Sl(r=Mt,e){switch(e.type){case hr:break;case En:case kn:case mr:case Tn:return Mt;case fr:case On:case gr:case pr:default:return Dn}const{targetIds:t=[],prevTargetIds:n=[]}=e.payload,i=ka(t,n);if(!(i.length>0||!Cl(t,n)))return Mt;const a=n[n.length-1],l=t[t.length-1];return a!==l&&(a&&i.push(a),l&&i.push(l)),i}function Ol(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Dl(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){Ol(r,i,t[i])})}return r}const yi={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function El(r=yi,e){const{payload:t}=e;switch(e.type){case Sn:case fr:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case hr:return wl(r.clientOffset,t.clientOffset)?r:Dl({},r,{clientOffset:t.clientOffset});case gr:case pr:return yi;default:return r}}function kl(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ut(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){kl(r,i,t[i])})}return r}const Tl={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function xl(r=Tl,e){const{payload:t}=e;switch(e.type){case fr:return ut({},r,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case On:return ut({},r,{isSourcePublic:!0});case hr:return ut({},r,{targetIds:t.targetIds});case mr:return r.targetIds.indexOf(t.targetId)===-1?r:ut({},r,{targetIds:Ea(r.targetIds,t.targetId)});case pr:return ut({},r,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case gr:return ut({},r,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return r}}function Pl(r=0,e){switch(e.type){case En:case kn:return r+1;case Tn:case mr:return r-1;default:return r}}function Nl(r=0){return r+1}function Il(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ll(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){Il(r,i,t[i])})}return r}function Ml(r={},e){return{dirtyHandlerIds:Sl(r.dirtyHandlerIds,{type:e.type,payload:Ll({},e.payload,{prevTargetIds:Da(r,"dragOperation.targetIds",[])})}),dragOffset:El(r.dragOffset,e),refCount:Pl(r.refCount,e),dragOperation:xl(r.dragOperation,e),stateId:Nl(r.stateId)}}function Rl(r,e=void 0,t={},n=!1){const i=Al(n),o=new rl(i,new bl(i)),a=new Xa(i,o),l=r(a,e,t);return a.receiveBackend(l),a}function Al(r){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return bo(Ml,r&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function $l(r,e){if(r==null)return{};var t=jl(r,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(t[n]=r[n])}return t}function jl(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}let wi=0;const ir=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Fl=lo(function(e){var{children:t}=e,n=$l(e,["children"]);const[i,o]=Hl(n);return H(()=>{if(o){const a=Do();return++wi,()=>{--wi===0&&(a[ir]=null)}}},[]),s(vo.Provider,{value:i,children:t})});function Hl(r){if("manager"in r)return[{dragDropManager:r.manager},!1];const e=Ul(r.backend,r.context,r.options,r.debugMode),t=!r.context;return[e,t]}function Ul(r,e=Do(),t,n){const i=e;return i[ir]||(i[ir]={dragDropManager:Rl(r,e,t,n)}),i[ir]}function Do(){return typeof global<"u"?global:window}var ql=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!r(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=n;i--!==0;){var a=o[i];if(!r(e[a],t[a]))return!1}return!0}return e!==e&&t!==t};const Ye=typeof window<"u"?je:H;function Eo(r,e,t){const[n,i]=k(()=>e(r)),o=dr(()=>{const a=e(r);ql(n,a)||(i(a),t&&t())},[n,r,t]);return Ye(o),[n,o]}function Wl(r,e,t){const[n,i]=Eo(r,e,t);return Ye(function(){const a=r.getHandlerId();if(a!=null)return r.subscribeToStateChange(i,{handlerIds:[a]})},[r,i]),n}function ko(r,e,t){return Wl(e,r||(()=>({})),()=>t.reconnect())}function To(r,e){const t=[...e||[]];return e==null&&typeof r!="function"&&t.push(r),J(()=>typeof r=="function"?r():r,t)}function Bl(r){return J(()=>r.hooks.dragSource(),[r])}function zl(r){return J(()=>r.hooks.dragPreview(),[r])}let jr=!1,Fr=!1;class Kl{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){R(!jr,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return jr=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{jr=!1}}isDragging(){if(!this.sourceId)return!1;R(!Fr,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Fr=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Fr=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Hr=!1;class Gl{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;R(!Hr,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Hr=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Hr=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Ql(r,e,t){const n=t.getRegistry(),i=n.addTarget(r,e);return[i,()=>n.removeTarget(i)]}function Vl(r,e,t){const n=t.getRegistry(),i=n.addSource(r,e);return[i,()=>n.removeSource(i)]}function un(r,e,t,n){let i;if(i!==void 0)return!!i;if(r===e)return!0;if(typeof r!="object"||!r||typeof e!="object"||!e)return!1;const o=Object.keys(r),a=Object.keys(e);if(o.length!==a.length)return!1;const l=Object.prototype.hasOwnProperty.bind(e);for(let c=0;c<o.length;c++){const d=o[c];if(!l(d))return!1;const p=r[d],u=e[d];if(i=void 0,i===!1||i===void 0&&p!==u)return!1}return!0}function dn(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Yl(r){if(typeof r.type=="string")return;const e=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Xl(r){return(e=null,t=null)=>{if(!Wt(e)){const o=e;return r(o,t),o}const n=e;return Yl(n),Jl(n,t?o=>r(o,t):r)}}function xo(r){const e={};return Object.keys(r).forEach(t=>{const n=r[t];if(t.endsWith("Ref"))e[t]=r[t];else{const i=Xl(n);e[t]=()=>i}}),e}function Ci(r,e){typeof r=="function"?r(e):r.current=e}function Jl(r,e){const t=r.ref;return R(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?sn(r,{ref:n=>{Ci(t,n),Ci(e,n)}}):sn(r,{ref:e})}class Zl{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,n=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!un(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!un(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=xo({dragSource:(t,n)=>{this.clearDragSource(),this.dragSourceOptions=n||null,dn(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,n)=>{this.clearDragPreview(),this.dragPreviewOptions=n||null,dn(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class ec{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!un(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=xo({dropTarget:(t,n)=>{this.clearDropTarget(),this.dropTargetOptions=n,dn(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Je(){const{dragDropManager:r}=Xe(vo);return R(r!=null,"Expected drag drop context"),r}function tc(r,e){const t=Je(),n=J(()=>new Zl(t.getBackend()),[t]);return Ye(()=>(n.dragSourceOptions=r||null,n.reconnect(),()=>n.disconnectDragSource()),[n,r]),Ye(()=>(n.dragPreviewOptions=e||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,e]),n}function rc(){const r=Je();return J(()=>new Kl(r),[r])}class nc{beginDrag(){const e=this.spec,t=this.monitor;let n=null;return typeof e.item=="object"?n=e.item:typeof e.item=="function"?n=e.item(t):n={},n??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const n=this.spec,i=this.monitor,{isDragging:o}=n;return o?o(i):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,n=this.connector,{end:i}=e;i&&i(t.getItem(),t),n.reconnect()}constructor(e,t,n){this.spec=e,this.monitor=t,this.connector=n}}function ic(r,e,t){const n=J(()=>new nc(r,e,t),[e,t]);return H(()=>{n.spec=r},[r]),n}function oc(r){return J(()=>{const e=r.type;return R(e!=null,"spec.type must be defined"),e},[r])}function sc(r,e,t){const n=Je(),i=ic(r,e,t),o=oc(r);Ye(function(){if(o!=null){const[l,c]=Vl(o,i,n);return e.receiveHandlerId(l),t.receiveHandlerId(l),c}},[n,e,t,i,o])}function ac(r,e){const t=To(r,e);R(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const n=rc(),i=tc(t.options,t.previewOptions);return sc(t,n,i),[ko(t.collect,n,i),Bl(i),zl(i)]}function lc(r){const t=Je().getMonitor(),[n,i]=Eo(t,r);return H(()=>t.subscribeToOffsetChange(i)),H(()=>t.subscribeToStateChange(i)),n}function cc(r){return J(()=>r.hooks.dropTarget(),[r])}function uc(r){const e=Je(),t=J(()=>new ec(e.getBackend()),[e]);return Ye(()=>(t.dropTargetOptions=r||null,t.reconnect(),()=>t.disconnectDropTarget()),[r]),t}function dc(){const r=Je();return J(()=>new Gl(r),[r])}function fc(r){const{accept:e}=r;return J(()=>(R(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class hc{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function pc(r,e){const t=J(()=>new hc(r,e),[e]);return H(()=>{t.spec=r},[r]),t}function gc(r,e,t){const n=Je(),i=pc(r,e),o=fc(r);Ye(function(){const[l,c]=Ql(o,i,n);return e.receiveHandlerId(l),t.receiveHandlerId(l),c},[n,e,i,t,o.map(a=>a.toString()).join("|")])}function mc(r,e){const t=To(r,e),n=dc(),i=uc(t.options);return gc(t,n,i),[ko(t.collect,n,i),cc(i)]}function Po(r){let e=null;return()=>(e==null&&(e=r()),e)}function _c(r,e){return r.filter(t=>t!==e)}function vc(r,e){const t=new Set,n=o=>t.add(o);r.forEach(n),e.forEach(n);const i=[];return t.forEach(o=>i.push(o)),i}class bc{enter(e){const t=this.entered.length,n=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=vc(this.entered.filter(n),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=_c(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class yc{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(n=>{const i=this.config.exposeProperties[n];i!=null&&(t[n]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const No="__NATIVE_FILE__",Io="__NATIVE_URL__",Lo="__NATIVE_TEXT__",Mo="__NATIVE_HTML__";var Si=Object.freeze({__proto__:null,FILE:No,HTML:Mo,TEXT:Lo,URL:Io});function Ur(r,e,t){const n=e.reduce((i,o)=>i||r.getData(o),"");return n??t}const fn={[No]:{exposeProperties:{files:r=>Array.prototype.slice.call(r.files),items:r=>r.items,dataTransfer:r=>r},matchesTypes:["Files"]},[Mo]:{exposeProperties:{html:(r,e)=>Ur(r,e,""),dataTransfer:r=>r},matchesTypes:["Html","text/html"]},[Io]:{exposeProperties:{urls:(r,e)=>Ur(r,e,"").split(`
`),dataTransfer:r=>r},matchesTypes:["Url","text/uri-list"]},[Lo]:{exposeProperties:{text:(r,e)=>Ur(r,e,""),dataTransfer:r=>r},matchesTypes:["Text","text/plain"]}};function wc(r,e){const t=fn[r];if(!t)throw new Error(`native type ${r} has no configuration`);const n=new yc(t);return n.loadDataTransfer(e),n}function qr(r){if(!r)return null;const e=Array.prototype.slice.call(r.types||[]);return Object.keys(fn).filter(t=>{const n=fn[t];return n?.matchesTypes?n.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const Cc=Po(()=>/firefox/i.test(navigator.userAgent)),Ro=Po(()=>!!window.safari);class Oi{interpolate(e){const{xs:t,ys:n,c1s:i,c2s:o,c3s:a}=this;let l=t.length-1;if(e===t[l])return n[l];let c=0,d=a.length-1,p;for(;c<=d;){p=Math.floor(.5*(c+d));const h=t[p];if(h<e)c=p+1;else if(h>e)d=p-1;else return n[p]}l=Math.max(0,d);const u=e-t[l],f=u*u;return n[l]+i[l]*u+o[l]*f+a[l]*u*f}constructor(e,t){const{length:n}=e,i=[];for(let h=0;h<n;h++)i.push(h);i.sort((h,g)=>e[h]<e[g]?-1:1);const o=[],a=[];let l,c;for(let h=0;h<n-1;h++)l=e[h+1]-e[h],c=t[h+1]-t[h],o.push(l),a.push(c/l);const d=[a[0]];for(let h=0;h<o.length-1;h++){const g=a[h],v=a[h+1];if(g*v<=0)d.push(0);else{l=o[h];const S=o[h+1],w=l+S;d.push(3*w/((w+S)/g+(w+l)/v))}}d.push(a[a.length-1]);const p=[],u=[];let f;for(let h=0;h<d.length-1;h++){f=a[h];const g=d[h],v=1/o[h],S=g+d[h+1]-f-f;p.push((f-g-S)*v),u.push(S*v*v)}this.xs=e,this.ys=t,this.c1s=d,this.c2s=p,this.c3s=u}}const Sc=1;function Ao(r){const e=r.nodeType===Sc?r:r.parentElement;if(!e)return null;const{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function Xt(r){return{x:r.clientX,y:r.clientY}}function Oc(r){var e;return r.nodeName==="IMG"&&(Cc()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(r)))}function Dc(r,e,t,n){let i=r?e.width:t,o=r?e.height:n;return Ro()&&r&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function Ec(r,e,t,n,i){const o=Oc(e),l=Ao(o?r:e),c={x:t.x-l.x,y:t.y-l.y},{offsetWidth:d,offsetHeight:p}=r,{anchorX:u,anchorY:f}=n,{dragPreviewWidth:h,dragPreviewHeight:g}=Dc(o,e,d,p),v=()=>{let T=new Oi([0,.5,1],[c.y,c.y/p*g,c.y+g-p]).interpolate(f);return Ro()&&o&&(T+=(window.devicePixelRatio-1)*g),T},S=()=>new Oi([0,.5,1],[c.x,c.x/d*h,c.x+h-d]).interpolate(u),{offsetX:w,offsetY:O}=i,D=w===0||w,E=O===0||O;return{x:D?w:S(),y:E?O:v()}}let kc=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function Tc(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Di(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){Tc(r,i,t[i])})}return r}class xc{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,n){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);const i=a=>this.handleDragStart(a,e),o=a=>this.handleSelectStart(a);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const n=a=>this.handleDragEnter(a,e),i=a=>this.handleDragOver(a,e),o=a=>this.handleDrop(a,e);return t.addEventListener("dragenter",n),t.addEventListener("dragover",i),t.addEventListener("drop",o),()=>{t.removeEventListener("dragenter",n),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return Di({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return Di({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Si).some(t=>Si[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=wc(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var n;return(n=this.rootElement)===null||n===void 0?void 0:n.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,n){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&Ao(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const a=Xt(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:l}=i,c=qr(l);if(this.monitor.isDragging()){if(l&&typeof l.setDragImage=="function"){const p=this.monitor.getSourceId(),u=this.sourceNodes.get(p),f=this.sourcePreviewNodes.get(p)||u;if(f){const{anchorX:h,anchorY:g,offsetX:v,offsetY:S}=this.getCurrentSourcePreviewNodeOptions(),D=Ec(u,f,a,{anchorX:h,anchorY:g},{offsetX:v,offsetY:S});l.setDragImage(f,D.x,D.y)}}try{l?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(c)this.beginDragNativeItem(c);else{if(l&&!l.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:l}=i,c=qr(l);c&&this.beginDragNativeItem(c,l)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,o.length>0&&this.actions.hover(o,{clientOffset:Xt(i)}),o.some(l=>this.monitor.canDropOnTarget(l))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=Xt(i),this.scheduleHover(o),(o||[]).some(l=>this.monitor.canDropOnTarget(l))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;i.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}else qr(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:Xt(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const o=i.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(i.preventDefault(),o.dragDrop()))},this.options=new kc(t,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new bc(this.isNodeInDocument)}}let Jt;function Pc(){return Jt||(Jt=new Image,Jt.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),Jt}const Nc=function(e,t,n){return new xc(e,t,n)};function Ei({isPremovedPiece:r=!1,piece:e,square:t,squares:n}){const{animationDuration:i,arePiecesDraggable:o,boardWidth:a,boardOrientation:l,chessPieces:c,currentPosition:d,deletePieceFromSquare:p,dropOffBoardAction:u,id:f,isDraggablePiece:h,isWaitingForAnimation:g,onPieceClick:v,onPieceDragBegin:S,onPieceDragEnd:w,onPieceDropOffBoard:O,onPromotionCheck:D,positionDifferences:E}=Pe(),[U,T]=k({opacity:1,zIndex:5,touchAction:"none",cursor:o&&h({piece:e,sourceSquare:t})?"-webkit-grab":"default"}),[{canDrag:j,isDragging:B},A,z]=ac(()=>({type:"piece",item:()=>(S(e,t),{piece:e,square:t,id:f}),end:(q,ue)=>{w(e,t),!ue.didDrop()&&(u==="trash"&&p(t),O?.(t,e))},collect:q=>({canDrag:h({piece:e,sourceSquare:t}),isDragging:!!q.isDragging()})}),[e,t,d,f]);z(Pc(),{captureDraggingState:!0}),H(()=>{T(q=>Object.assign(Object.assign({},q),{opacity:B?0:1}))},[B]),H(()=>{var q;const ue=(q=E.removed)===null||q===void 0?void 0:q[t];if(!E.added||!ue)return;const Oe=Object.entries(E.added).find(([_e,ve])=>ve===ue||D(t,_e,ue));if(g&&ue&&Oe&&!r){const _e=t,ve=Oe[0];if(_e&&ve){const he=a/8;T(Fe=>Object.assign(Object.assign({},Fe),{transform:`translate(${(l==="black"?-1:1)*(ve.charCodeAt(0)-_e.charCodeAt(0))*he}px, ${(l==="black"?-1:1)*(Number(_e[1])-Number(ve[1]))*he}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[E]),H(()=>{const{sourceSq:q}=Q();q&&T(ue=>Object.assign(Object.assign({},ue),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[d]),H(()=>{T(q=>Object.assign(Object.assign({},q),{cursor:o&&h({piece:e,sourceSquare:t})?"-webkit-grab":"default"}))},[t,d,o]);function Q(){return{sourceSq:n[t]}}return s("div",Object.assign({ref:o&&j?A:null,onClick:()=>v(e,t),"data-piece":e,style:U},{children:typeof c[e]=="function"?c[e]({squareWidth:a/8,isDragging:B,square:t}):s("svg",Object.assign({viewBox:"1 1 43 43",width:a/8,height:a/8,style:{display:"block"}},{children:s("g",{children:c[e]})}))}))}function Ic({square:r,squareColor:e,setSquares:t,squareHasPremove:n,children:i}){const o=ne(null),{autoPromoteToQueen:a,boardWidth:l,boardOrientation:c,clearArrows:d,currentPosition:p,currentRightClickDown:u,customBoardStyle:f,customDarkSquareStyle:h,customDropSquareStyle:g,customLightSquareStyle:v,customPremoveDarkSquareStyle:S,customPremoveLightSquareStyle:w,customSquare:O,customSquareStyles:D,drawNewArrow:E,handleSetPosition:U,handleSparePieceDrop:T,isWaitingForAnimation:j,lastPieceColour:B,lastSquareDraggedOver:A,onArrowDrawEnd:z,onDragOverSquare:Q,onMouseOutSquare:q,onMouseOverSquare:ue,onPieceDrop:Oe,onPromotionCheck:_e,onRightClickDown:ve,onRightClickUp:he,onSquareClick:Fe,setLastSquareDraggedOver:vt,setPromoteFromSquare:Ze,setPromoteToSquare:et,setShowPromoteDialog:bt}=Pe(),[{isOver:He},Ue]=mc(()=>({accept:"piece",drop:tt,collect:$=>({isOver:!!$.isOver()})}),[r,p,Oe,j,B]);function tt($){if($.isSpare){T($.piece,r);return}_e($.square,r,$.piece)?a?U($.square,r,$.piece[0]==="w"?"wQ":"bQ"):(Ze($.square),et(r),bt(!0)):U($.square,r,$.piece,!0)}H(()=>{if(o.current){const{x:$,y:we}=o.current.getBoundingClientRect();t(xe=>Object.assign(Object.assign({},xe),{[r]:{x:$,y:we}}))}},[l,c]);const qe=Object.assign(Object.assign(Object.assign(Object.assign({},Lc(r,c,f)),e==="black"?h:v),n&&(e==="black"?S:w)),He&&g);return s("div",Object.assign({ref:Ue,style:qe,"data-square-color":e,"data-square":r,onTouchMove:$=>{var we;const xe=$.touches[0],We=document.elementsFromPoint(xe.clientX,xe.clientY),oe=(we=We?.find(de=>de.getAttribute("data-square")))===null||we===void 0?void 0:we.getAttribute("data-square");oe&&oe!==A&&(vt(oe),Q(oe))},onMouseOver:$=>{$.buttons===2&&u&&E(u,r),!($.relatedTarget&&$.currentTarget.contains($.relatedTarget))&&ue(r)},onMouseOut:$=>{$.relatedTarget&&$.currentTarget.contains($.relatedTarget)||q(r)},onMouseDown:$=>{$.button===2&&ve(r)},onMouseUp:$=>{$.button===2&&(u&&z(u,r),he(r))},onDragEnter:()=>Q(r),onClick:()=>{const $=p[r];Fe(r,$),d()},onContextMenu:$=>{$.preventDefault()}},{children:typeof O=="string"?s(O,Object.assign({ref:o,style:Object.assign(Object.assign(Object.assign({},Ti(l)),ki),!n&&D?.[r])},{children:i})):s(O,Object.assign({ref:o,square:r,squareColor:e,style:Object.assign(Object.assign(Object.assign({},Ti(l)),ki),!n&&D?.[r])},{children:i}))}))}const ki={display:"flex",justifyContent:"center"},Ti=r=>({width:r/8,height:r/8}),Lc=(r,e,t)=>t?.borderRadius?r==="a1"?e==="white"?{borderBottomLeftRadius:t.borderRadius}:{borderTopRightRadius:t.borderRadius}:r==="a8"?e==="white"?{borderTopLeftRadius:t.borderRadius}:{borderBottomRightRadius:t.borderRadius}:r==="h1"?e==="white"?{borderBottomRightRadius:t.borderRadius}:{borderTopLeftRadius:t.borderRadius}:r==="h8"?e==="white"?{borderTopRightRadius:t.borderRadius}:{borderBottomLeftRadius:t.borderRadius}:{}:{};function Mc(){const[r,e]=k({}),{arePremovesAllowed:t,boardOrientation:n,boardWidth:i,currentPosition:o,id:a,premoves:l,showBoardNotation:c}=Pe(),d=J(()=>{const p=[];return t?(l.forEach((u,f)=>{const{sourceSq:h,targetSq:g,piece:v}=u,S=p.find(w=>{var O;return w.piece===v&&((O=w.premovesRoute.at(-1))===null||O===void 0?void 0:O.targetSq)===h});S?S.premovesRoute.push({sourceSq:h,targetSq:g,index:f}):p.push({piece:v,premovesRoute:[{sourceSq:h,targetSq:g,index:f}]})}),p):[]},[l]);return s("div",Object.assign({"data-boardid":a},{children:[...Array(8)].map((p,u)=>s("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((f,h)=>{const g=n==="black"?$t[7-h]+(u+1):$t[h]+(8-u),v=h%2===u%2?"white":"black",S=l.find(O=>O.sourceSq===g||O.targetSq===g),w=d.filter(({premovesRoute:O})=>{var D;return((D=O.at(-1))===null||D===void 0?void 0:D.targetSq)===g}).sort((O,D)=>{var E,U;return((E=D.premovesRoute.at(-1))===null||E===void 0?void 0:E.index)-((U=O.premovesRoute.at(-1))===null||U===void 0?void 0:U.index)}).at(0);return s(Ic,Object.assign({square:g,squareColor:v,setSquares:e,squareHasPremove:!!S},{children:[!S&&o[g]&&s(Ei,{piece:o[g],square:g,squares:r}),w&&s(Ei,{isPremovedPiece:!0,piece:w.piece,square:g,squares:r}),c&&s(Ca,{row:u,col:h})]}),`${h}${u}`)})}),u.toString()))}))}const Rc=()=>{const{arrows:r,newArrow:e,boardOrientation:t,boardWidth:n,customArrowColor:i}=Pe(),o=[...r,e].filter(Boolean);return s("svg",Object.assign({width:n,height:n,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:o.map((a,l)=>{const[c,d,p]=a;if(c===d)return null;const u=an(t,n,c),f=an(t,n,d);let h=n/32;const g=l===r.length;r.some(D=>D[0]!==c&&D[1]===d)&&!g&&(h=n/16);const v=f.x-u.x,S=f.y-u.y,w=Math.hypot(S,v),O={x:u.x+v*(w-h)/w,y:u.y+S*(w-h)/w};return s(W,{children:[s("marker",Object.assign({id:`arrowhead-${l}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:s("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:p??i})})),s("line",{x1:u.x,y1:u.y,x2:O.x,y2:O.y,opacity:g?"0.5":"0.65",stroke:p??i,strokeWidth:g?.9*n/40:n/40,markerEnd:`url(#arrowhead-${l})`})]},`${c}-${d}${g?"-active":""}`)})}))};function Ac({option:r}){const[e,t]=k(!1),{boardWidth:n,chessPieces:i,customDarkSquareStyle:o,customLightSquareStyle:a,handleSetPosition:l,onPromotionPieceSelect:c,promoteFromSquare:d,promoteToSquare:p,promotionDialogVariant:u}=Pe(),f=()=>{switch(r[1]){case"Q":return o.backgroundColor;case"R":return a.backgroundColor;case"N":return u==="default"?a.backgroundColor:o.backgroundColor;case"B":return u==="default"?o.backgroundColor:a.backgroundColor}};return s("div",Object.assign({onClick:()=>{c(r,d??void 0,p??void 0)&&l(d,p,r,!0)},onMouseOver:()=>t(!0),onMouseOut:()=>t(!1),"data-piece":r,style:{cursor:"pointer",backgroundColor:e?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[r]=="function"?s("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[r]({squareWidth:n/8,isDragging:!1})})):s("svg",Object.assign({viewBox:"1 1 43 43",width:n/8,height:n/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:s("g",{children:i[r]})}))}))}function $c(){const{boardOrientation:r,boardWidth:e,promotionDialogVariant:t,promoteToSquare:n}=Pe(),i=n?.[1]==="1"?"b":"w",o=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],a={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},l=an(r,e,n||"a8");return s("div",Object.assign({style:Object.assign({position:"absolute",top:`${l?.y}px`,left:`${l?.x}px`,zIndex:1e3},a[t]),title:"Choose promotion piece"},{children:o.map(c=>s(Ac,{option:c},c))}))}const jc={whiteKing:s("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:s("g",{children:s("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function Fc({children:r}){try{return s(W,{children:r})}catch(e){return console.log(e),s($o,{showError:!0})}}function $o({showError:r=!1}){return s("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[s("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:jc.whiteKing})),r&&s("h1",{children:"Something went wrong"})]}))}function Hc(){const r=ne(null),{boardWidth:e,clearCurrentRightClickDown:t,onPromotionPieceSelect:n,setShowPromoteDialog:i,showPromoteDialog:o,customBoardStyle:a}=Pe();return H(()=>{function l(c){r.current&&!r.current.contains(c.target)&&t()}return document.addEventListener("mouseup",l),()=>{document.removeEventListener("mouseup",l)}},[]),e?s("div",Object.assign({style:{perspective:"1000px"}},{children:s("div",Object.assign({ref:r,style:Object.assign(Object.assign({position:"relative"},Uc(e)),a)},{children:[s(Mc,{}),s(Rc,{}),o&&s(W,{children:[s("div",{onClick:()=>{i(!1),n?.()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),s($c,{})]})]}))})):s($o,{})}const Uc=r=>({cursor:"default",height:r,width:r});var Ae;(function(r){r.mouse="mouse",r.touch="touch",r.keyboard="keyboard"})(Ae||(Ae={}));class qc{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,n,i;return(i=(n=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&n!==void 0?n:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,t,n,i;return(i=(n=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&n!==void 0?n:(t=this.args)===null||t===void 0?void 0:t.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}function Wc(r,e,t,n){return Math.sqrt(Math.pow(Math.abs(t-r),2)+Math.pow(Math.abs(n-e),2))}function Bc(r,e,t,n,i){if(!i)return!1;const o=Math.atan2(n-e,t-r)*180/Math.PI+180;for(let a=0;a<i.length;++a){const l=i[a];if(l&&(l.start==null||o>=l.start)&&(l.end==null||o<=l.end))return!0}return!1}const zc={Left:1},Kc={Left:0};function Wr(r){return r.button===void 0||r.button===Kc.Left}function Gc(r){return r.buttons===void 0||(r.buttons&zc.Left)===0}function jo(r){return!!r.targetTouches}const Qc=1;function Vc(r){const e=r.nodeType===Qc?r:r.parentElement;if(!e)return;const{top:t,left:n}=e.getBoundingClientRect();return{x:n,y:t}}function Yc(r,e){if(r.targetTouches.length===1)return ur(r.targetTouches[0]);if(e&&r.touches.length===1&&r.touches[0].target===e.target)return ur(r.touches[0])}function ur(r,e){return jo(r)?Yc(r,e):{x:r.clientX,y:r.clientY}}const xi=(()=>{let r=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return r=!0,!0}}))}catch{}return r})(),kt={[Ae.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Ae.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Ae.keyboard]:{keydown:"keydown"}};class Rt{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(R(!Rt.isSetUp,"Cannot have two Touch backends at the same time."),Rt.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(Rt.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,n,i=!1){const o=xi?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(a){const l=kt[a][t];l&&e.addEventListener(l,n,o)})}removeEventListener(e,t,n,i=!1){const o=xi?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(a){const l=kt[a][t];l&&e.removeEventListener(l,n,o)})}connectDragSource(e,t){const n=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",n),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",n)}}connectDragPreview(e,t,n){return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){const n=this.options.rootElement;if(!this.document||!n)return()=>{};const i=o=>{if(!this.document||!n||!this.monitor.isDragging())return;let a;switch(o.type){case kt.mouse.move:a={x:o.clientX,y:o.clientY};break;case kt.touch.move:var l,c;a={x:((l=o.touches[0])===null||l===void 0?void 0:l.clientX)||0,y:((c=o.touches[0])===null||c===void 0?void 0:c.clientY)||0};break}const d=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,p=d&&t.contains(d);if(d===t||p)return this.handleMove(o,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,n){this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&Vc(o)},this.handleTopMoveStartCapture=i=>{Wr(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!Wr(i))return;const o=ur(i);o&&(jo(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=o),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!Wr(i))return;const o=i.type===kt.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),o),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,o)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(o)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:o,dragOverTargetIds:a}=this,l=this.options.enableHoverOutsideTarget,c=ur(i,this.lastTargetTouchFallback);if(!c)return;if(this._isScrolling||!this.monitor.isDragging()&&Bc(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,c.x,c.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&o&&Wc(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,c.x,c.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(o,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const d=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(d),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const p=(a||[]).map(g=>this.targetNodes.get(g)).filter(g=>!!g),u=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(c.x,c.y,p):this.document.elementsFromPoint(c.x,c.y),f=[];for(const g in u){if(!u.hasOwnProperty(g))continue;let v=u[g];for(v!=null&&f.push(v);v;)v=v.parentElement,v&&f.indexOf(v)===-1&&f.push(v)}const h=f.filter(g=>p.indexOf(g)>-1).map(g=>this._getDropTargetId(g)).filter(g=>!!g).filter((g,v,S)=>S.indexOf(g)===v);if(l)for(const g in this.targetNodes){const v=this.targetNodes.get(g);if(d&&v&&v.contains(d)&&h.indexOf(g)===-1){h.unshift(g);break}}h.reverse(),this.actions.hover(h,{clientOffset:c})},this._getDropTargetId=i=>{const o=this.targetNodes.keys();let a=o.next();for(;a.done===!1;){const l=a.value;if(i===this.targetNodes.get(l))return l;a=o.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!Gc(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new qc(n,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Ae.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Ae.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Ae.keyboard)}}const Xc=function(e,t={},n={}){return new Rt(e,t,n)},Jc=mt({isCustomDndProviderSet:!1}),Zc=({children:r})=>s(W,{children:r}),eu=({customDndBackend:r,customDndBackendOptions:e,children:t})=>{const[n,i]=k(),[o,a]=k(!1),[l,c]=k(!1),{isCustomDndProviderSet:d}=Xe(Jc);H(()=>{c("ontouchstart"in window),a(!0),i(window)},[]);const p=d?Zc:Fl;return o?n?s(p,Object.assign({backend:r||(l?Xc:Nc),context:n,options:r?e:void 0},{children:t})):s(W,{children:t}):null};function tu({boardContainer:r}){const{boardWidth:e,chessPieces:t,id:n,snapToCursor:i,allowDragOutsideBoard:o}=Pe(),a=lc(f=>({item:f.getItem(),clientOffset:f.getClientOffset(),sourceClientOffset:f.getSourceClientOffset(),isDragging:f.isDragging()})),{isDragging:l,item:c,clientOffset:d,sourceClientOffset:p}=a,u=dr((f,h)=>{if(!f||!h)return{display:"none"};let{x:g,y:v}=i?f:h;const S=e/8/2;if(i&&(g-=S,v-=S),!o){const{left:O,top:D}=r,E=O-S,U=D-S,T=O+e-S,j=D+e-S;g=Math.max(E,Math.min(g,T)),v=Math.max(U,Math.min(v,j))}const w=`translate(${g}px, ${v}px)`;return{transform:w,WebkitTransform:w,touchAction:"none"}},[e,o,i,r]);return l&&c.id===n?s("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:s("div",Object.assign({style:u(d,p)},{children:typeof t[c.piece]=="function"?t[c.piece]({squareWidth:e/8,isDragging:!0}):s("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:s("g",{children:t[c.piece]})}))}))})):null}const ru=wn((r,e)=>{const{customDndBackend:t,customDndBackendOptions:n,onBoardWidthChange:i}=r,o=ua(r,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[a,l]=k(r.boardWidth),c=ne(null),d=ne(null),[p,u]=k({left:0,top:0}),f=J(()=>{var h;return(h=c.current)===null||h===void 0?void 0:h.getBoundingClientRect()},[c.current]);return H(()=>{a&&i?.(a)},[a]),H(()=>{u({left:f?.left?f?.left:0,top:f?.top?f?.top:0})},[f]),H(()=>{var h;if(r.boardWidth===void 0&&(!((h=c.current)===null||h===void 0)&&h.offsetWidth)){const g=new ResizeObserver(()=>{var v;l((v=c.current)===null||v===void 0?void 0:v.offsetWidth)});return g.observe(c.current),()=>{g.disconnect()}}},[c.current]),s(Fc,{children:s("div",Object.assign({ref:d,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[s("div",{ref:c,style:{width:"100%"}}),s(eu,Object.assign({customDndBackend:t,customDndBackendOptions:n},{children:a&&s(wa,Object.assign({boardWidth:a},o,{ref:e},{children:[s(tu,{boardContainer:p}),s(Hc,{})]}))}))]}))})});function nu(r){return r!==null?{comment:r,variations:[]}:{variations:[]}}function iu(r,e,t,n,i){const o={move:r,variations:i};return e&&(o.suffix=e),t&&(o.nag=t),n!==null&&(o.comment=n),o}function ou(...r){const[e,...t]=r;let n=e;for(const i of t)i!==null&&(n.variations=[i,...i.variations],i.variations=[],n=i);return e}function su(r,e){if(e.marker&&e.marker.comment){let t=e.root;for(;;){const n=t.variations[0];if(!n){t.comment=e.marker.comment;break}t=n}}return{headers:r,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function au(r,e){function t(){this.constructor=r}t.prototype=e.prototype,r.prototype=new t}function gt(r,e,t,n){var i=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(i,gt.prototype),i.expected=e,i.found=t,i.location=n,i.name="SyntaxError",i}au(gt,Error);function Br(r,e,t){return t=t||" ",r.length>e?r:(e-=r.length,t+=t.repeat(e),r+t.slice(0,e))}gt.prototype.format=function(r){var e="Error: "+this.message;if(this.location){var t=null,n;for(n=0;n<r.length;n++)if(r[n].source===this.location.source){t=r[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,a=this.location.source+":"+o.line+":"+o.column;if(t){var l=this.location.end,c=Br("",o.line.toString().length," "),d=t[i.line-1],p=i.line===l.line?l.column:d.length+1,u=p-i.column||1;e+=`
 --> `+a+`
`+c+` |
`+o.line+" | "+d+`
`+c+" | "+Br("",i.column-1," ")+Br("",u,"^")}else e+=`
 at `+a}return e};gt.buildMessage=function(r,e){var t={literal:function(d){return'"'+i(d.text)+'"'},class:function(d){var p=d.parts.map(function(u){return Array.isArray(u)?o(u[0])+"-"+o(u[1]):o(u)});return"["+(d.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(d){return d.description}};function n(d){return d.charCodeAt(0).toString(16).toUpperCase()}function i(d){return d.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+n(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+n(p)})}function o(d){return d.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+n(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+n(p)})}function a(d){return t[d.type](d)}function l(d){var p=d.map(a),u,f;if(p.sort(),p.length>0){for(u=1,f=1;u<p.length;u++)p[u-1]!==p[u]&&(p[f]=p[u],f++);p.length=f}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function c(d){return d?'"'+i(d)+'"':"end of input"}return"Expected "+l(r)+" but "+c(e)+" found."};function lu(r,e){e=e!==void 0?e:{};var t={},n=e.grammarSource,i={pgn:Nn},o=Nn,a="[",l='"',c="]",d=".",p="O-O-O",u="O-O",f="0-0-0",h="0-0",g="$",v="{",S="}",w=";",O="(",D=")",E="1-0",U="0-1",T="1/2-1/2",j="*",B=/^[a-zA-Z]/,A=/^[^"]/,z=/^[0-9]/,Q=/^[.]/,q=/^[a-zA-Z1-8\-=]/,ue=/^[+#]/,Oe=/^[!?]/,_e=/^[^}]/,ve=/^[^\r\n]/,he=/^[ \t\r\n]/,Fe=fe("tag pair"),vt=F("[",!1),Ze=F('"',!1),et=F("]",!1),bt=fe("tag name"),He=Z([["a","z"],["A","Z"]],!1,!1),Ue=fe("tag value"),tt=Z(['"'],!0,!1),qe=fe("move number"),$=Z([["0","9"]],!1,!1),we=F(".",!1),xe=Z(["."],!1,!1),We=fe("standard algebraic notation"),oe=F("O-O-O",!1),de=F("O-O",!1),rt=F("0-0-0",!1),vr=F("0-0",!1),nt=Z([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Ne=Z(["+","#"],!1,!1),br=fe("suffix annotation"),it=Z(["!","?"],!1,!1),yr=fe("NAG"),zt=F("$",!1),wr=fe("brace comment"),yt=F("{",!1),wt=Z(["}"],!0,!1),Ct=F("}",!1),De=fe("rest of line comment"),St=F(";",!1),Be=Z(["\r",`
`],!0,!1),Cr=fe("variation"),Sr=F("(",!1),Or=F(")",!1),ot=fe("game termination marker"),st=F("1-0",!1),at=F("0-1",!1),lt=F("1/2-1/2",!1),Dr=F("*",!1),Er=fe("whitespace"),Kt=Z([" ","	","\r",`
`],!1,!1),kr=function(m,b){return su(m,b)},Ot=function(m){return Object.fromEntries(m)},Tr=function(m,b){return[m,b]},xr=function(m,b){return{root:m,marker:b}},Pr=function(m,b){return ou(nu(m),...b.flat())},Nr=function(m,b,y,P,N){return iu(m,b,y,P,N)},Dt=function(m){return m},Ir=function(m){return m.replace(/[\r\n]+/g," ")},ct=function(m){return m.trim()},Et=function(m){return m},Lr=function(m,b){return{result:m,comment:b}},_=e.peg$currPos|0,Ie=[{line:1,column:1}],pe=_,K=e.peg$maxFailExpected||[],C=e.peg$silentFails|0,te;if(e.startRule){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');o=i[e.startRule]}function F(m,b){return{type:"literal",text:m,ignoreCase:b}}function Z(m,b,y){return{type:"class",parts:m,inverted:b,ignoreCase:y}}function ge(){return{type:"end"}}function fe(m){return{type:"other",description:m}}function xn(m){var b=Ie[m],y;if(b)return b;if(m>=Ie.length)y=Ie.length-1;else for(y=m;!Ie[--y];);for(b=Ie[y],b={line:b.line,column:b.column};y<m;)r.charCodeAt(y)===10?(b.line++,b.column=1):b.column++,y++;return Ie[m]=b,b}function Pn(m,b,y){var P=xn(m),N=xn(b),G={source:n,start:{offset:m,line:P.line,column:P.column},end:{offset:b,line:N.line,column:N.column}};return G}function x(m){_<pe||(_>pe&&(pe=_,K=[]),K.push(m))}function Ho(m,b,y){return new gt(gt.buildMessage(m,b),m,b,y)}function Nn(){var m,b,y;return m=_,b=Uo(),y=Bo(),m=kr(b,y),m}function Uo(){var m,b,y;for(m=_,b=[],y=In();y!==t;)b.push(y),y=In();return y=le(),m=Ot(b),m}function In(){var m,b,y,P,N,G,ze;return C++,m=_,le(),r.charCodeAt(_)===91?(b=a,_++):(b=t,C===0&&x(vt)),b!==t?(le(),y=qo(),y!==t?(le(),r.charCodeAt(_)===34?(P=l,_++):(P=t,C===0&&x(Ze)),P!==t?(N=Wo(),r.charCodeAt(_)===34?(G=l,_++):(G=t,C===0&&x(Ze)),G!==t?(le(),r.charCodeAt(_)===93?(ze=c,_++):(ze=t,C===0&&x(et)),ze!==t?m=Tr(y,N):(_=m,m=t)):(_=m,m=t)):(_=m,m=t)):(_=m,m=t)):(_=m,m=t),C--,m===t&&C===0&&x(Fe),m}function qo(){var m,b,y;if(C++,m=_,b=[],y=r.charAt(_),B.test(y)?_++:(y=t,C===0&&x(He)),y!==t)for(;y!==t;)b.push(y),y=r.charAt(_),B.test(y)?_++:(y=t,C===0&&x(He));else b=t;return b!==t?m=r.substring(m,_):m=b,C--,m===t&&(b=t,C===0&&x(bt)),m}function Wo(){var m,b,y;for(C++,m=_,b=[],y=r.charAt(_),A.test(y)?_++:(y=t,C===0&&x(tt));y!==t;)b.push(y),y=r.charAt(_),A.test(y)?_++:(y=t,C===0&&x(tt));return m=r.substring(m,_),C--,b=t,C===0&&x(Ue),m}function Bo(){var m,b,y;return m=_,b=Ln(),le(),y=Yo(),y===t&&(y=null),le(),m=xr(b,y),m}function Ln(){var m,b,y,P;for(m=_,b=Mr(),b===t&&(b=null),y=[],P=Mn();P!==t;)y.push(P),P=Mn();return m=Pr(b,y),m}function Mn(){var m,b,y,P,N,G,ze,Gt;if(m=_,le(),zo(),le(),b=Ko(),b!==t){for(y=Go(),y===t&&(y=null),P=[],N=Rn();N!==t;)P.push(N),N=Rn();for(N=le(),G=Mr(),G===t&&(G=null),ze=[],Gt=An();Gt!==t;)ze.push(Gt),Gt=An();m=Nr(b,y,P,G,ze)}else _=m,m=t;return m}function zo(){var m,b,y,P,N,G;for(C++,m=_,b=[],y=r.charAt(_),z.test(y)?_++:(y=t,C===0&&x($));y!==t;)b.push(y),y=r.charAt(_),z.test(y)?_++:(y=t,C===0&&x($));if(r.charCodeAt(_)===46?(y=d,_++):(y=t,C===0&&x(we)),y!==t){for(P=le(),N=[],G=r.charAt(_),Q.test(G)?_++:(G=t,C===0&&x(xe));G!==t;)N.push(G),G=r.charAt(_),Q.test(G)?_++:(G=t,C===0&&x(xe));b=[b,y,P,N],m=b}else _=m,m=t;return C--,m===t&&(b=t,C===0&&x(qe)),m}function Ko(){var m,b,y,P,N,G;if(C++,m=_,b=_,r.substr(_,5)===p?(y=p,_+=5):(y=t,C===0&&x(oe)),y===t&&(r.substr(_,3)===u?(y=u,_+=3):(y=t,C===0&&x(de)),y===t&&(r.substr(_,5)===f?(y=f,_+=5):(y=t,C===0&&x(rt)),y===t&&(r.substr(_,3)===h?(y=h,_+=3):(y=t,C===0&&x(vr)),y===t))))if(y=_,P=r.charAt(_),B.test(P)?_++:(P=t,C===0&&x(He)),P!==t){if(N=[],G=r.charAt(_),q.test(G)?_++:(G=t,C===0&&x(nt)),G!==t)for(;G!==t;)N.push(G),G=r.charAt(_),q.test(G)?_++:(G=t,C===0&&x(nt));else N=t;N!==t?(P=[P,N],y=P):(_=y,y=t)}else _=y,y=t;return y!==t?(P=r.charAt(_),ue.test(P)?_++:(P=t,C===0&&x(Ne)),P===t&&(P=null),y=[y,P],b=y):(_=b,b=t),b!==t?m=r.substring(m,_):m=b,C--,m===t&&(b=t,C===0&&x(We)),m}function Go(){var m,b,y;for(C++,m=_,b=[],y=r.charAt(_),Oe.test(y)?_++:(y=t,C===0&&x(it));y!==t;)b.push(y),b.length>=2?y=t:(y=r.charAt(_),Oe.test(y)?_++:(y=t,C===0&&x(it)));return b.length<1?(_=m,m=t):m=b,C--,m===t&&(b=t,C===0&&x(br)),m}function Rn(){var m,b,y,P,N;if(C++,m=_,le(),r.charCodeAt(_)===36?(b=g,_++):(b=t,C===0&&x(zt)),b!==t){if(y=_,P=[],N=r.charAt(_),z.test(N)?_++:(N=t,C===0&&x($)),N!==t)for(;N!==t;)P.push(N),N=r.charAt(_),z.test(N)?_++:(N=t,C===0&&x($));else P=t;P!==t?y=r.substring(y,_):y=P,y!==t?m=Dt(y):(_=m,m=t)}else _=m,m=t;return C--,m===t&&C===0&&x(yr),m}function Mr(){var m;return m=Qo(),m===t&&(m=Vo()),m}function Qo(){var m,b,y,P,N;if(C++,m=_,r.charCodeAt(_)===123?(b=v,_++):(b=t,C===0&&x(yt)),b!==t){for(y=_,P=[],N=r.charAt(_),_e.test(N)?_++:(N=t,C===0&&x(wt));N!==t;)P.push(N),N=r.charAt(_),_e.test(N)?_++:(N=t,C===0&&x(wt));y=r.substring(y,_),r.charCodeAt(_)===125?(P=S,_++):(P=t,C===0&&x(Ct)),P!==t?m=Ir(y):(_=m,m=t)}else _=m,m=t;return C--,m===t&&(b=t,C===0&&x(wr)),m}function Vo(){var m,b,y,P,N;if(C++,m=_,r.charCodeAt(_)===59?(b=w,_++):(b=t,C===0&&x(St)),b!==t){for(y=_,P=[],N=r.charAt(_),ve.test(N)?_++:(N=t,C===0&&x(Be));N!==t;)P.push(N),N=r.charAt(_),ve.test(N)?_++:(N=t,C===0&&x(Be));y=r.substring(y,_),m=ct(y)}else _=m,m=t;return C--,m===t&&(b=t,C===0&&x(De)),m}function An(){var m,b,y,P;return C++,m=_,le(),r.charCodeAt(_)===40?(b=O,_++):(b=t,C===0&&x(Sr)),b!==t?(y=Ln(),y!==t?(le(),r.charCodeAt(_)===41?(P=D,_++):(P=t,C===0&&x(Or)),P!==t?m=Et(y):(_=m,m=t)):(_=m,m=t)):(_=m,m=t),C--,m===t&&C===0&&x(Cr),m}function Yo(){var m,b,y;return C++,m=_,r.substr(_,3)===E?(b=E,_+=3):(b=t,C===0&&x(st)),b===t&&(r.substr(_,3)===U?(b=U,_+=3):(b=t,C===0&&x(at)),b===t&&(r.substr(_,7)===T?(b=T,_+=7):(b=t,C===0&&x(lt)),b===t&&(r.charCodeAt(_)===42?(b=j,_++):(b=t,C===0&&x(Dr))))),b!==t?(le(),y=Mr(),y===t&&(y=null),m=Lr(b,y)):(_=m,m=t),C--,m===t&&(b=t,C===0&&x(ot)),m}function le(){var m,b;for(C++,m=[],b=r.charAt(_),he.test(b)?_++:(b=t,C===0&&x(Kt));b!==t;)m.push(b),b=r.charAt(_),he.test(b)?_++:(b=t,C===0&&x(Kt));return C--,b=t,C===0&&x(Er),m}if(te=o(),e.peg$library)return{peg$result:te,peg$currPos:_,peg$FAILED:t,peg$maxFailExpected:K,peg$maxFailPos:pe};if(te!==t&&_===r.length)return te;throw te!==t&&_<r.length&&x(ge()),Ho(K,pe<r.length?r.charAt(pe):null,pe<r.length?Pn(pe,pe+1):Pn(pe,pe))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const or=0xffffffffffffffffn;function zr(r,e){return(r<<e|r>>64n-e)&0xffffffffffffffffn}function Pi(r,e){return r*e&or}function cu(r){return function(){let e=BigInt(r&or),t=BigInt(r>>64n&or);const n=Pi(zr(Pi(e,5n),7n),9n);return t^=e,e=(zr(e,24n)^t^t<<16n)&or,t=zr(t,37n),r=t<<64n|e,n}}const _r=cu(0xa187eb39cdcaed8f31c4b365b102e01en),uu=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>_r()))),du=Array.from({length:8},()=>_r()),fu=Array.from({length:16},()=>_r()),Kr=_r(),se="w",me="b",X="p",hn="n",sr="b",It="r",Re="q",ee="k",Gr="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Zt{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){const{color:n,piece:i,from:o,to:a,flags:l,captured:c,promotion:d}=t,p=re(o),u=re(a);this.color=n,this.piece=i,this.from=p,this.to=u,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=p+u,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="";for(const f in L)L[f]&l&&(this.flags+=Ke[f]);c&&(this.captured=c),d&&(this.promotion=d,this.lan+=d)}isCapture(){return this.flags.indexOf(Ke.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(Ke.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(Ke.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(Ke.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(Ke.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(Ke.BIG_PAWN)>-1}}const ie=-1,Ke={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},L={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},pn={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},hu={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},pu={...pn,...hu},I={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Qr={b:[16,32,17,15],w:[-16,-32,-17,-15]},Ni={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},gu=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],mu=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],_u={p:1,n:2,b:4,r:8,q:16,k:32},vu="pnbrqkPNBRQK",Ii=[hn,sr,It,Re],bu=7,yu=6,wu=1,Cu=0,er={[ee]:L.KSIDE_CASTLE,[Re]:L.QSIDE_CASTLE},Le={w:[{square:I.a1,flag:L.QSIDE_CASTLE},{square:I.h1,flag:L.KSIDE_CASTLE}],b:[{square:I.a8,flag:L.QSIDE_CASTLE},{square:I.h8,flag:L.KSIDE_CASTLE}]},Su={b:wu,w:yu},Vr="--";function Ve(r){return r>>4}function jt(r){return r&15}function Fo(r){return"0123456789".indexOf(r)!==-1}function re(r){const e=jt(r),t=Ve(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(t,t+1)}function Tt(r){return r===se?me:se}function Ou(r){const e=r.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const t=parseInt(e[5],10);if(isNaN(t)||t<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const n=parseInt(e[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<i.length;a++){let l=0,c=!1;for(let d=0;d<i[a].length;d++)if(Fo(i[a][d])){if(c)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};l+=parseInt(i[a][d],10),c=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[a][d]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};l+=1,c=!1}if(l!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const o=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:l}of o){if(!l.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((e[0].match(l)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(i[0]+i[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function Du(r,e){const t=r.from,n=r.to,i=r.piece;let o=0,a=0,l=0;for(let c=0,d=e.length;c<d;c++){const p=e[c].from,u=e[c].to,f=e[c].piece;i===f&&t!==p&&n===u&&(o++,Ve(t)===Ve(p)&&a++,jt(t)===jt(p)&&l++)}return o>0?a>0&&l>0?re(t):l>0?re(t).charAt(1):re(t).charAt(0):""}function Me(r,e,t,n,i,o=void 0,a=L.NORMAL){const l=Ve(n);if(i===X&&(l===bu||l===Cu))for(let c=0;c<Ii.length;c++){const d=Ii[c];r.push({color:e,from:t,to:n,piece:i,captured:o,promotion:d,flags:a|L.PROMOTION})}else r.push({color:e,from:t,to:n,piece:i,captured:o,flags:a})}function Li(r){let e=r.charAt(0);return e>="a"&&e<="h"?r.match(/[a-h]\d.*[a-h]\d/)?void 0:X:(e=e.toLowerCase(),e==="o"?ee:e)}function Yr(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Eu{_board=new Array(128);_turn=se;_header={};_kings={w:ie,b:ie};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=Gr,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:ie,b:ie},this._turn=se,this._castling={w:0,b:0},this._epSquare=ie,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...pu},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:n=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const l=["-","-","0","1"];e=i.concat(l.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!t){const{ok:l,error:c}=Ou(e);if(!l)throw new Error(c)}const o=i[0];let a=0;this.clear({preserveHeaders:n});for(let l=0;l<o.length;l++){const c=o.charAt(l);if(c==="/")a+=8;else if(Fo(c))a+=parseInt(c,10);else{const d=c<"a"?se:me;this._put({type:c.toLowerCase(),color:d},re(a)),a++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=L.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=L.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=L.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=L.QSIDE_CASTLE),this._epSquare=i[3]==="-"?ie:I[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let t=0,n="";for(let a=I.a8;a<=I.h1;a++){if(this._board[a]){t>0&&(n+=t,t=0);const{color:l,type:c}=this._board[a];n+=l===se?c.toUpperCase():c.toLowerCase()}else t++;a+1&136&&(t>0&&(n+=t),a!==I.h1&&(n+="/"),t=0,a+=8)}let i="";this._castling[se]&L.KSIDE_CASTLE&&(i+="K"),this._castling[se]&L.QSIDE_CASTLE&&(i+="Q"),this._castling[me]&L.KSIDE_CASTLE&&(i+="k"),this._castling[me]&L.QSIDE_CASTLE&&(i+="q"),i=i||"-";let o="-";if(this._epSquare!==ie)if(e)o=re(this._epSquare);else{const a=this._epSquare+(this._turn===se?16:-16),l=[a+1,a-1];for(const c of l){if(c&136)continue;const d=this._turn;if(this._board[c]?.color===d&&this._board[c]?.type===X){this._makeMove({color:d,from:c,to:this._epSquare,piece:X,captured:X,flags:L.EP_CAPTURE});const p=!this._isKingAttacked(d);if(this._undoMove(),p){o=re(this._epSquare);break}}}}return[n,this._turn,i,o,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:t,type:n}=this._board[e],i={w:0,b:1}[t],o={p:0,n:1,b:2,r:3,q:4,k:5}[n];return uu[i][o][e]}_epKey(){return this._epSquare===ie?0n:du[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return fu[e]}_computeHash(){let e=0n;for(let t=I.a8;t<=I.h1;t++){if(t&136){t+=7;continue}this._board[t]&&(e^=this._pieceKey(t))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Kr),e}_updateSetup(e){this._history.length>0||(e!==Gr?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Gr)}get(e){return this._board[I[e]]}findPiece(e){const t=[];for(let n=I.a8;n<=I.h1;n++){if(n&136){n+=7;continue}!this._board[n]||this._board[n]?.color!==e.color||this._board[n].color===e.color&&this._board[n].type===e.type&&t.push(re(n))}return t}put({type:e,color:t},n){return this._put({type:e,color:t},n)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,t){this._hash^=this._pieceKey(e),this._board[e]=t,this._hash^=this._pieceKey(e)}_put({type:e,color:t},n){if(vu.indexOf(e.toLowerCase())===-1||!(n in I))return!1;const i=I[n];if(e==ee&&!(this._kings[t]==ie||this._kings[t]==i))return!1;const o=this._board[i];return o&&o.type===ee&&(this._kings[o.color]=ie),this._set(i,{type:e,color:t}),e===ee&&(this._kings[t]=i),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const t=this.get(e);return this._clear(I[e]),t&&t.type===ee&&(this._kings[t.color]=ie),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[I.e1]?.type===ee&&this._board[I.e1]?.color===se,t=this._board[I.e8]?.type===ee&&this._board[I.e8]?.color===me;(!e||this._board[I.a1]?.type!==It||this._board[I.a1]?.color!==se)&&(this._castling.w&=-65),(!e||this._board[I.h1]?.type!==It||this._board[I.h1]?.color!==se)&&(this._castling.w&=-33),(!t||this._board[I.a8]?.type!==It||this._board[I.a8]?.color!==me)&&(this._castling.b&=-65),(!t||this._board[I.h8]?.type!==It||this._board[I.h8]?.color!==me)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===ie)return;const e=this._epSquare+(this._turn===se?-16:16),t=this._epSquare+(this._turn===se?16:-16),n=[t+1,t-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[t]?.color!==Tt(this._turn)||this._board[t]?.type!==X){this._hash^=this._epKey(),this._epSquare=ie;return}const i=o=>!(o&136)&&this._board[o]?.color===this._turn&&this._board[o]?.type===X;n.some(i)||(this._hash^=this._epKey(),this._epSquare=ie)}_attacked(e,t,n){const i=[];for(let o=I.a8;o<=I.h1;o++){if(o&136){o+=7;continue}if(this._board[o]===void 0||this._board[o].color!==e)continue;const a=this._board[o],l=o-t;if(l===0)continue;const c=l+119;if(gu[c]&_u[a.type]){if(a.type===X){if(l>0&&a.color===se||l<=0&&a.color===me)if(n)i.push(re(o));else return!0;continue}if(a.type==="n"||a.type==="k")if(n){i.push(re(o));continue}else return!0;const d=mu[c];let p=o+d,u=!1;for(;p!==t;){if(this._board[p]!=null){u=!0;break}p+=d}if(!u)if(n){i.push(re(o));continue}else return!0}}return n?i:!1}attackers(e,t){return t?this._attacked(t,I[e],!0):this._attacked(this._turn,I[e],!0)}_isKingAttacked(e){const t=this._kings[e];return t===-1?!1:this._attacked(Tt(e),t)}hash(){return this._hash.toString(16)}isAttacked(e,t){return this._attacked(t,I[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},t=[];let n=0,i=0;for(let o=I.a8;o<=I.h1;o++){if(i=(i+1)%2,o&136){o+=7;continue}const a=this._board[o];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===sr&&t.push(i),n++)}if(n===2)return!0;if(n===3&&(e[sr]===1||e[hn]===1))return!0;if(n===e[sr]+2){let o=0;const a=t.length;for(let l=0;l<a;l++)o+=t[l];if(o===0||o===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:t=void 0,piece:n=void 0}={}){const i=this._moves({square:t,piece:n});return e?i.map(o=>new Zt(this,o)):i.map(o=>this._moveToSan(o,i))}_moves({legal:e=!0,piece:t=void 0,square:n=void 0}={}){const i=n?n.toLowerCase():void 0,o=t?.toLowerCase(),a=[],l=this._turn,c=Tt(l);let d=I.a8,p=I.h1,u=!1;if(i)if(i in I)d=p=I[i],u=!0;else return[];for(let h=d;h<=p;h++){if(h&136){h+=7;continue}if(!this._board[h]||this._board[h].color===c)continue;const{type:g}=this._board[h];let v;if(g===X){if(o&&o!==g)continue;v=h+Qr[l][0],this._board[v]||(Me(a,l,h,v,X),v=h+Qr[l][1],Su[l]===Ve(h)&&!this._board[v]&&Me(a,l,h,v,X,void 0,L.BIG_PAWN));for(let S=2;S<4;S++)v=h+Qr[l][S],!(v&136)&&(this._board[v]?.color===c?Me(a,l,h,v,X,this._board[v].type,L.CAPTURE):v===this._epSquare&&Me(a,l,h,v,X,X,L.EP_CAPTURE))}else{if(o&&o!==g)continue;for(let S=0,w=Ni[g].length;S<w;S++){const O=Ni[g][S];for(v=h;v+=O,!(v&136);){if(!this._board[v])Me(a,l,h,v,g);else{if(this._board[v].color===l)break;Me(a,l,h,v,g,this._board[v].type,L.CAPTURE);break}if(g===hn||g===ee)break}}}}if((o===void 0||o===ee)&&(!u||p===this._kings[l])){if(this._castling[l]&L.KSIDE_CASTLE){const h=this._kings[l],g=h+2;!this._board[h+1]&&!this._board[g]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,h+1)&&!this._attacked(c,g)&&Me(a,l,this._kings[l],g,ee,void 0,L.KSIDE_CASTLE)}if(this._castling[l]&L.QSIDE_CASTLE){const h=this._kings[l],g=h-2;!this._board[h-1]&&!this._board[h-2]&&!this._board[h-3]&&!this._attacked(c,this._kings[l])&&!this._attacked(c,h-1)&&!this._attacked(c,g)&&Me(a,l,this._kings[l],g,ee,void 0,L.QSIDE_CASTLE)}}if(!e||this._kings[l]===-1)return a;const f=[];for(let h=0,g=a.length;h<g;h++)this._makeMove(a[h]),this._isKingAttacked(l)||f.push(a[h]),this._undoMove();return f}move(e,{strict:t=!1}={}){let n=null;if(typeof e=="string")n=this._moveFromSan(e,t);else if(e===null)n=this._moveFromSan(Vr,t);else if(typeof e=="object"){const o=this._moves();for(let a=0,l=o.length;a<l;a++)if(e.from===re(o[a].from)&&e.to===re(o[a].to)&&(!("promotion"in o[a])||e.promotion===o[a].promotion)){n=o[a];break}}if(!n)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&n.flags&L.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new Zt(this,n);return this._makeMove(n),this._incPositionCount(),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,t){this._hash^=this._pieceKey(e),this._board[t]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(t)}_makeMove(e){const t=this._turn,n=Tt(t);if(this._push(e),e.flags&L.NULL_MOVE){t===me&&this._moveNumber++,this._halfMoves++,this._turn=n,this._epSquare=ie;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&L.EP_CAPTURE&&(this._turn===me?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:t})),this._board[e.to].type===ee){if(this._kings[t]=e.to,e.flags&L.KSIDE_CASTLE){const i=e.to-1,o=e.to+1;this._movePiece(o,i)}else if(e.flags&L.QSIDE_CASTLE){const i=e.to+1,o=e.to-2;this._movePiece(o,i)}this._castling[t]=0}if(this._castling[t]){for(let i=0,o=Le[t].length;i<o;i++)if(e.from===Le[t][i].square&&this._castling[t]&Le[t][i].flag){this._castling[t]^=Le[t][i].flag;break}}if(this._castling[n]){for(let i=0,o=Le[n].length;i<o;i++)if(e.to===Le[n][i].square&&this._castling[n]&Le[n][i].flag){this._castling[n]^=Le[n][i].flag;break}}if(this._hash^=this._castlingKey(),e.flags&L.BIG_PAWN){let i;t===me?i=e.to-16:i=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===X&&this._board[e.to-1]?.color===n||!(e.to+1&136)&&this._board[e.to+1]?.type===X&&this._board[e.to+1]?.color===n?(this._epSquare=i,this._hash^=this._epKey()):this._epSquare=ie}else this._epSquare=ie;e.piece===X?this._halfMoves=0:e.flags&(L.CAPTURE|L.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,t===me&&this._moveNumber++,this._turn=n,this._hash^=Kr}undo(){const e=this._hash,t=this._undoMove();if(t){const n=new Zt(this,t);return this._decPositionCount(e),n}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Kr;const n=this._turn,i=Tt(n);if(t.flags&L.NULL_MOVE)return t;if(this._movePiece(t.to,t.from),t.piece&&(this._clear(t.from),this._set(t.from,{type:t.piece,color:n})),t.captured)if(t.flags&L.EP_CAPTURE){let o;n===me?o=t.to-16:o=t.to+16,this._set(o,{type:X,color:i})}else this._set(t.to,{type:t.captured,color:i});if(t.flags&(L.KSIDE_CASTLE|L.QSIDE_CASTLE)){let o,a;t.flags&L.KSIDE_CASTLE?(o=t.to+1,a=t.to-1):(o=t.to-2,a=t.to+1),this._movePiece(a,o)}return t}pgn({newline:e=`
`,maxWidth:t=0}={}){const n=[];let i=!1;for(const f in this._header)this._header[f]&&n.push(`[${f} "${this._header[f]}"]`+e),i=!0;i&&this._history.length&&n.push(e);const o=f=>{const h=this._comments[this.fen()];if(typeof h<"u"){const g=f.length>0?" ":"";f=`${f}${g}{${h}}`}return f},a=[];for(;this._history.length>0;)a.push(this._undoMove());const l=[];let c="";for(a.length===0&&l.push(o(""));a.length>0;){c=o(c);const f=a.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const h=`${this._moveNumber}. ...`;c=c?`${c} ${h}`:h}else f.color==="w"&&(c.length&&l.push(c),c=this._moveNumber+".");c=c+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(c.length&&l.push(o(c)),l.push(this._header.Result||"*"),t===0)return n.join("")+l.join(" ");const d=function(){return n.length>0&&n[n.length-1]===" "?(n.pop(),!0):!1},p=function(f,h){for(const g of h.split(" "))if(g){if(f+g.length>t){for(;d();)f--;n.push(e),f=0}n.push(g),f+=g.length,n.push(" "),f++}return d()&&f--,f};let u=0;for(let f=0;f<l.length;f++){if(u+l[f].length>t&&l[f].includes("{")){u=p(u,l[f]);continue}u+l[f].length>t&&f!==0?(n[n.length-1]===" "&&n.pop(),n.push(e),u=0):f!==0&&(n.push(" "),u++),n.push(l[f]),u+=l[f].length}return n.join("")}header(...e){for(let t=0;t<e.length;t+=2)typeof e[t]=="string"&&typeof e[t+1]=="string"&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??pn[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=pn[e]||null,!0):!1}getHeaders(){const e={};for(const[t,n]of Object.entries(this._header))n!==null&&(e[t]=n);return e}loadPgn(e,{strict:t=!1,newlineChar:n=`\r?
`}={}){n!==`\r?
`&&(e=e.replace(new RegExp(n,"g"),`
`));const i=lu(e);this.reset();const o=i.headers;let a="";for(const d in o)d.toLowerCase()==="fen"&&(a=o[d]),this.header(d,o[d]);if(!t)a&&this.load(a,{preserveHeaders:!0});else if(o.SetUp==="1"){if(!("FEN"in o))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}let l=i.root;for(;l;){if(l.move){const d=this._moveFromSan(l.move,t);if(d==null)throw new Error(`Invalid move in PGN: ${l.move}`);this._makeMove(d),this._incPositionCount()}l.comment!==void 0&&(this._comments[this.fen()]=l.comment),l=l.variations[0]}const c=i.result;c&&Object.keys(this._header).length&&this._header.Result!==c&&this.setHeader("Result",c)}_moveToSan(e,t){let n="";if(e.flags&L.KSIDE_CASTLE)n="O-O";else if(e.flags&L.QSIDE_CASTLE)n="O-O-O";else{if(e.flags&L.NULL_MOVE)return Vr;if(e.piece!==X){const i=Du(e,t);n+=e.piece.toUpperCase()+i}e.flags&(L.CAPTURE|L.EP_CAPTURE)&&(e.piece===X&&(n+=re(e.from)[0]),n+="x"),n+=re(e.to),e.promotion&&(n+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?n+="#":n+="+"),this._undoMove(),n}_moveFromSan(e,t=!1){let n=Yr(e);if(t||(n==="0-0"?n="O-O":n==="0-0-0"&&(n="O-O-O")),n==Vr)return{color:this._turn,from:0,to:0,piece:"k",flags:L.NULL_MOVE};let i=Li(n),o=this._moves({legal:!0,piece:i});for(let f=0,h=o.length;f<h;f++)if(n===Yr(this._moveToSan(o[f],o)))return o[f];if(t)return null;let a,l,c,d,p,u=!1;if(l=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),l?(a=l[1],c=l[2],d=l[3],p=l[4],c.length==1&&(u=!0)):(l=n.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),l&&(a=l[1],c=l[2],d=l[3],p=l[4],c.length==1&&(u=!0))),i=Li(n),o=this._moves({legal:!0,piece:a||i}),!d)return null;for(let f=0,h=o.length;f<h;f++)if(c){if((!a||a.toLowerCase()==o[f].piece)&&I[c]==o[f].from&&I[d]==o[f].to&&(!p||p.toLowerCase()==o[f].promotion))return o[f];if(u){const g=re(o[f].from);if((!a||a.toLowerCase()==o[f].piece)&&I[d]==o[f].to&&(c==g[0]||c==g[1])&&(!p||p.toLowerCase()==o[f].promotion))return o[f]}}else if(n===Yr(this._moveToSan(o[f],o)).replace("x",""))return o[f];return null}ascii(){let e=`   +------------------------+
`;for(let t=I.a8;t<=I.h1;t++){if(jt(t)===0&&(e+=" "+"87654321"[Ve(t)]+" |"),this._board[t]){const n=this._board[t].type,o=this._board[t].color===se?n.toUpperCase():n.toLowerCase();e+=" "+o+" "}else e+=" . ";t+1&136&&(e+=`|
`,t+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const t=this._moves({legal:!1});let n=0;const i=this._turn;for(let o=0,a=t.length;o<a;o++)this._makeMove(t[o]),this._isKingAttacked(i)||(e-1>0?n+=this.perft(e-1):n++),this._undoMove();return n}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let t=[];for(let n=I.a8;n<=I.h1;n++)this._board[n]==null?t.push(null):t.push({square:re(n),type:this._board[n].type,color:this._board[n].color}),n+1&136&&(e.push(t),t=[],n+=8);return e}squareColor(e){if(e in I){const t=I[e];return(Ve(t)+jt(t))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const t=[],n=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){const i=t.pop();if(!i)break;e?n.push(new Zt(this,i)):n.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return n}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const t=this._positionCount.get(e)??0;t===1?this._positionCount.delete(e):this._positionCount.set(e,t-1)}_pruneComments(){const e=[],t={},n=i=>{i in this._comments&&(t[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(n(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),n(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(const i of[ee,Re])t[i]!==void 0&&(t[i]?this._castling[e]|=er[i]:this._castling[e]&=~er[i]);this._updateCastlingRights();const n=this.getCastlingRights(e);return(t[ee]===void 0||t[ee]===n[ee])&&(t[Re]===void 0||t[Re]===n[Re])}getCastlingRights(e){return{[ee]:(this._castling[e]&er[ee])!==0,[Re]:(this._castling[e]&er[Re])!==0}}moveNumber(){return this._moveNumber}}function ku(){const[r]=k(new Eu),[e,t]=k(r.fen()),[n,i]=k(null),[o,a]=k(null),[l,c]=k("Connecting..."),[d,p]=k(!1),[u,f]=k(!1),h=ne(null);H(()=>{const w=encodeURIComponent(localStorage.getItem("token")||"");if(!w){console.log("401 error: redirecting to /login"),window.location.href="/login";return}const O="wss://my-website.space/backend/ws/";return h.current=new WebSocket(O+w),h.current.onopen=()=>{console.log("WebSocket connected")},h.current.onmessage=D=>{console.log(D.data);try{const E=JSON.parse(D.data);if(E.type==="init")r.load(E.fen),t(E.fen),i(E.your_color),a(E.opponent),E.opponent===null?(c("Waiting for opponent..."),p(!1)):(c(`Playing against ${E.opponent}`),p(!0));else if(E.type==="opponent_joined")a(E.opponent),c(`Playing against ${E.opponent}`),p(!0);else if(E.type==="update")r.load(E.fen),t(E.fen),f(!1);else if(E.type==="win"){p(!1);const T=o&&E.winner!==o?"You win!":`${E.winner} wins!`,j=E.reason?` (${E.reason})`:"";c(`Game over: ${T}${j}`)}else E.type==="draw"?(p(!1),c("Game over: Draw!")):E.type==="error"&&(u&&(r.undo(),t(r.fen()),f(!1)),c(`Error: ${E.message}`))}catch(E){console.error("Error processing WebSocket message:",E)}},h.current.onerror=D=>{console.error("WebSocket error:",D),c("Connection error")},h.current.onclose=()=>{console.log("WebSocket closed"),c("Connection closed")},()=>{h.current&&h.current.close()}},[]);const g=()=>n?r.turn()==="w"&&n==="white"||r.turn()==="b"&&n==="black":!1;H(()=>{p(o!==null&&g())},[e,n,o]);function v(w){h.current&&h.current.readyState===WebSocket.OPEN&&h.current.send(JSON.stringify({move:w}))}return s(W,{children:[s(ae,{}),s("h1",{class:"text-3xl mx-4 my-8",children:"Multiplayer Chess:"}),s("div",{class:"mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full",children:[s("div",{role:"alert",className:"justify-center my-4 alert bg-neutral text-neutral-content",children:s("span",{children:l})}),s(ru,{position:e,onPieceDrop:(w,O)=>{if(!(!g()||u))try{const D=r.move({from:w,to:O,promotion:"q"});return D&&(t(r.fen()),v(D.san),f(!0)),!0}catch{return console.log("Invalid move"),!1}},arePiecesDraggable:d,isDraggablePiece:({piece:w})=>{if(w[0]==n[0])return g()},boardOrientation:n||"white",showPromotionDialog:!1})]})]})}const xt=(r,e)=>Math.floor(Math.random()*(e-r+1))+r,Mi=["add","sub","mult","div"];function Tu(){const[r,e]=k({min1:0,max1:100,min2:0,max2:100}),[t,n]=k({min1:2,max1:20,min2:2,max2:20}),[i,o]=k(120),[a,l]=k("start"),[c,d]=k(0),[p,u]=k(0),[f,h]=k(null),[g,v]=k(""),S=ne(null),w=()=>{const T=Mi[xt(0,Mi.length-1)];let j,B,A,z;if(T==="add"||T==="sub"?(j=xt(r.min1,r.max1),B=xt(r.min2,r.max2)):(j=xt(t.min1,t.max1),B=xt(t.min2,t.max2)),T==="add")A=`${j} + ${B} = `,z=j+B;else if(T==="sub"){const Q=j+B,q=Math.random()>.5?j:B;A=`${Q} - ${q} = `,z=Q-q}else if(T==="mult")A=`${j} × ${B} = `,z=j*B;else{const Q=j*B,q=Math.random()>.5?j:B;A=`${Q} ÷ ${q} = `,z=Q/q}h({question:A,answer:z}),v("")},O=()=>{d(0),u(i),l("playing"),w()};H(()=>{if(a!=="playing")return;if(p<=0){l("ended");return}const T=setInterval(()=>{u(j=>j-1)},1e3);return()=>clearInterval(T)},[a,p]),H(()=>{a==="playing"&&S.current&&S.current.focus()},[a,f]),H(()=>{a==="ended"&&console.log(JSON.stringify({additionRange:r,multiplicationRange:t,duration:i,finalScore:c},null,2))},[a,r,t,i,c]);const D=()=>{if(!f)return;const T=parseFloat(g);if(isNaN(T)){v("");return}Math.abs(T-f.answer)<1e-4?(d(j=>j+1),w()):v("")},E=T=>{T.key==="Enter"&&D()},U=(T,j,B,A)=>{const z=parseInt(A,10);isNaN(z)||T({...j,[B]:z})};return a==="start"?s(W,{children:[s(ae,{}),s("div",{className:"max-w-md mx-auto p-4",children:[s("h1",{className:"text-2xl font-bold mb-4",children:"Arithmetic Game"}),s("p",{className:"mb-4",children:"The Arithmetic Game is a fast-paced speed drill where you are given two minutes to solve as many arithmetic problems as you can."}),s("p",{className:"mb-4",children:"If you have any questions, please contact me."}),s("h2",{className:"text-xl font-semibold mb-2",children:"Addition"}),s("p",{className:"mb-4",children:["Range: (",s("input",{type:"number",className:"border p-1 w-16 mx-1",value:r.min1,onChange:T=>U(e,r,"min1",T.currentTarget.value)}),"to",s("input",{type:"number",className:"border p-1 w-16 mx-1",value:r.max1,onChange:T=>U(e,r,"max1",T.currentTarget.value)}),") + (",s("input",{type:"number",className:"border p-1 w-16 mx-1",value:r.min2,onChange:T=>U(e,r,"min2",T.currentTarget.value)}),"to",s("input",{type:"number",className:"border p-1 w-16 mx-1",value:r.max2,onChange:T=>U(e,r,"max2",T.currentTarget.value)}),")"]}),s("h2",{className:"text-xl font-semibold mb-2",children:"Subtraction"}),s("p",{className:"mb-4",children:"Addition problems in reverse."}),s("h2",{className:"text-xl font-semibold mb-2",children:"Multiplication"}),s("p",{className:"mb-4",children:["Range: (",s("input",{type:"number",className:"border p-1 w-16 mx-1",value:t.min1,onChange:T=>U(n,t,"min1",T.currentTarget.value)}),"to",s("input",{type:"number",className:"border p-1 w-16 mx-1",value:t.max1,onChange:T=>U(n,t,"max1",T.currentTarget.value)}),") × (",s("input",{type:"number",className:"border p-1 w-16 mx-1",value:t.min2,onChange:T=>U(n,t,"min2",T.currentTarget.value)}),"to",s("input",{type:"number",className:"border p-1 w-16 mx-1",value:t.max2,onChange:T=>U(n,t,"max2",T.currentTarget.value)}),")"]}),s("h2",{className:"text-xl font-semibold mb-2",children:"Division"}),s("p",{className:"mb-4",children:"Multiplication problems in reverse."}),s("h2",{className:"text-xl font-semibold mb-2",children:"Duration:"}),s("input",{type:"number",className:"border p-1 w-20",value:i,onChange:T=>{const j=parseInt(T.currentTarget.value,10);isNaN(j)||o(j)}}),s("button",{className:"bg-blue-500 text-white p-2 rounded mt-4",onClick:O,children:"Start"})]})]}):a==="playing"?s(W,{children:[s(ae,{}),s("div",{className:"flex flex-col items-center justify-center h-screen",children:[s("div",{className:"flex justify-between w-full max-w-md mb-4",children:[s("p",{children:["Time: ",p," s"]}),s("p",{children:["Score: ",c]})]}),f&&s("h1",{className:"text-4xl mb-4",children:f.question}),s("input",{type:"number",className:"border p-2 text-2xl w-32 text-center",value:g,onChange:T=>v(T.currentTarget.value),onKeyDown:E,ref:S})]})]}):s(W,{children:[s(ae,{}),s("div",{className:"flex flex-col items-center justify-center h-screen",children:[s("h1",{className:"text-3xl font-bold mb-4",children:"Game Over"}),s("p",{className:"text-2xl mb-4",children:["Score: ",c]}),s("button",{className:"bg-blue-500 text-white p-2 rounded",onClick:()=>l("start"),children:"Play Again"})]})]})}function xu(){const[r,e]=k(""),[t,n]=k(""),[i,o]=k(""),[a,l]=k(!1),[c,d]=k("");return s(W,{children:[s(ae,{}),s("div",{className:"bg-base-100 mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full",children:s("div",{className:"card-body",children:[s("h1",{className:"text-center text-xl font-bold",children:"Create Your Account"}),s("fieldset",{className:"fieldset",children:[s("label",{className:"label",children:"Username"}),s("label",{className:"input validator w-full",children:[s(Pu,{}),s("input",{id:"username",type:"text",required:!0,placeholder:"Username",pattern:"[A-Za-z][A-Za-z0-9\\-]*",minlength:3,maxlength:30,title:"Only letters, numbers or dash",onInput:g=>{e(g.target.value)}})]}),s("p",{className:"validator-hint hidden",children:"Must be 3 to 30 characters containing only letters, numbers or dash"}),s("label",{className:"label",children:"Password"}),s("label",{className:"input w-full",children:[s(Ri,{}),s("input",{type:"password",required:!0,placeholder:"Password",onInput:g=>{n(g.target.value)}})]}),s("label",{className:"label",children:"Confirm Password"}),s("label",{className:"input w-full",children:[s(Ri,{}),s("input",{type:"password",required:!0,placeholder:"Confirm Password",onInput:g=>{o(g.target.value)}})]}),s("button",{disabled:a,className:"btn btn-neutral mt-4",onClick:async()=>{l(!0);try{if(t!=i){d("Passwords must match"),l(!1);return}if(!document.getElementById("username").checkValidity()){d("Username is not valid"),l(!1);return}const g=await(await Se.register.registerCreate({username:r,password:t})).text();console.log("User ID:",g),l(!1),window.location.href="/login"}catch(g){const v=g instanceof Error?g.message:"Signup failed";d(v),console.log("Error:",g),l(!1)}},children:"Sign Up"}),s("div",{children:s("p",{className:"text-center",children:["Already have an account?"," ",s("a",{className:"link-accent",href:"/login",children:"Sign in here"})]})})]}),c&&s("p",{className:"text-error",children:c})]})})]})}function Ri(){return s("svg",{className:"h-[1em] opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:s("g",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2.5",fill:"none",stroke:"currentColor",children:[s("path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"}),s("circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor"})]})})}function Pu(){return s("svg",{className:"h-[1em] opacity-50",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:s("g",{strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:"2.5",fill:"none",stroke:"currentColor",children:[s("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),s("circle",{cx:"12",cy:"7",r:"4"})]})})}function Nu(){const[r,e]=k("");return H(()=>{(async()=>{try{if(!(await(await Se.hello.helloList()).json()).is_admin){console.log("Not admin: redirecting to /login"),window.location.href="/login";return}}catch(t){if(t?.status==401){console.log("401 error: redirecting to /login"),window.location.href="/login";return}const n=t instanceof Error?t.message:"Fetching blogs failed";e(n),console.error("Error:",t)}})()},[]),s(W,{children:s(ae,{})})}function Iu(){return s(W,{children:[s(ae,{}),s("section",{children:[s("h1",{children:"404: Not Found"}),s("p",{children:"It's gone :("})]})]})}function Lu(){return s(qt,{children:s("div",{class:"flex min-h-screen flex-col",children:[s("script",{src:"https://kit.fontawesome.com/783385aa49.js",crossorigin:"anonymous"}),s("main",{children:s(Zi,{children:[s(Ce,{path:"/",component:ia}),s(Ce,{path:"/blog",component:ta}),s(Ce,{path:"/blog/:id",component:ra}),s(Ce,{path:"/about",component:oa}),s(Ce,{path:"/login",component:sa}),s(Ce,{path:"/projects",component:ca}),s(Ce,{path:"/projects/chess",component:ku}),s(Ce,{path:"/projects/arithmetic",component:Tu}),s(Ce,{path:"/signup",component:xu}),s(Ce,{path:"/admin",component:Nu}),s(Ce,{default:!0,component:Iu})]})}),s(us,{})]})})}ht(s(Lu,{}),document.getElementById("app"));
