(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var br,fe,ma,fn,Xi,ga,ba,va,_i,Fs,$s,ya,dr={},wa=[],cl=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,vr=Array.isArray;function Pt(r,e){for(var n in e)r[n]=e[n];return r}function xi(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function ct(r,e,n){var s,i,o,a={};for(o in e)o=="key"?s=e[o]:o=="ref"?i=e[o]:a[o]=e[o];if(arguments.length>2&&(a.children=arguments.length>3?br.call(arguments,2):n),typeof r=="function"&&r.defaultProps!=null)for(o in r.defaultProps)a[o]===void 0&&(a[o]=r.defaultProps[o]);return ir(r,a,s,i,null)}function ir(r,e,n,s,i){var o={type:r,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++ma,__i:-1,__u:0};return i==null&&fe.vnode!=null&&fe.vnode(o),o}function ll(){return{current:null}}function Q(r){return r.children}function Bt(r,e){this.props=r,this.context=e}function Sn(r,e){if(e==null)return r.__?Sn(r.__,r.__i+1):null;for(var n;e<r.__k.length;e++)if((n=r.__k[e])!=null&&n.__e!=null)return n.__e;return typeof r.type=="function"?Sn(r):null}function _a(r){var e,n;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,e=0;e<r.__k.length;e++)if((n=r.__k[e])!=null&&n.__e!=null){r.__e=r.__c.base=n.__e;break}return _a(r)}}function Us(r){(!r.__d&&(r.__d=!0)&&fn.push(r)&&!Zr.__r++||Xi!=fe.debounceRendering)&&((Xi=fe.debounceRendering)||ga)(Zr)}function Zr(){for(var r,e,n,s,i,o,a,c=1;fn.length;)fn.length>c&&fn.sort(ba),r=fn.shift(),c=fn.length,r.__d&&(n=void 0,i=(s=(e=r).__v).__e,o=[],a=[],e.__P&&((n=Pt({},s)).__v=s.__v+1,fe.vnode&&fe.vnode(n),Ci(e.__P,n,s,e.__n,e.__P.namespaceURI,32&s.__u?[i]:null,o,i??Sn(s),!!(32&s.__u),a),n.__v=s.__v,n.__.__k[n.__i]=n,Na(o,n,a),n.__e!=i&&_a(n)));Zr.__r=0}function xa(r,e,n,s,i,o,a,c,d,l,u){var h,p,f,m,b,y,x,w=s&&s.__k||wa,S=e.length;for(d=dl(n,e,w,d,S),h=0;h<S;h++)(f=n.__k[h])!=null&&(p=f.__i==-1?dr:w[f.__i]||dr,f.__i=h,y=Ci(r,f,p,i,o,a,c,d,l,u),m=f.__e,f.ref&&p.ref!=f.ref&&(p.ref&&Ni(p.ref,null,f),u.push(f.ref,f.__c||m,f)),b==null&&m!=null&&(b=m),(x=!!(4&f.__u))||p.__k===f.__k?d=Ca(f,d,r,x):typeof f.type=="function"&&y!==void 0?d=y:m&&(d=m.nextSibling),f.__u&=-7);return n.__e=b,d}function dl(r,e,n,s,i){var o,a,c,d,l,u=n.length,h=u,p=0;for(r.__k=new Array(i),o=0;o<i;o++)(a=e[o])!=null&&typeof a!="boolean"&&typeof a!="function"?(d=o+p,(a=r.__k[o]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?ir(null,a,null,null,null):vr(a)?ir(Q,{children:a},null,null,null):a.constructor==null&&a.__b>0?ir(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=r,a.__b=r.__b+1,c=null,(l=a.__i=ul(a,n,d,h))!=-1&&(h--,(c=n[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(i>u?p--:i<u&&p++),typeof a.type!="function"&&(a.__u|=4)):l!=d&&(l==d-1?p--:l==d+1?p++:(l>d?p--:p++,a.__u|=4))):r.__k[o]=null;if(h)for(o=0;o<u;o++)(c=n[o])!=null&&(2&c.__u)==0&&(c.__e==s&&(s=Sn(c)),ka(c,c));return s}function Ca(r,e,n,s){var i,o;if(typeof r.type=="function"){for(i=r.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=r,e=Ca(i[o],e,n,s));return e}r.__e!=e&&(s&&(e&&r.type&&!e.parentNode&&(e=Sn(r)),n.insertBefore(r.__e,e||null)),e=r.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function jt(r,e){return e=e||[],r==null||typeof r=="boolean"||(vr(r)?r.some(function(n){jt(n,e)}):e.push(r)),e}function ul(r,e,n,s){var i,o,a,c=r.key,d=r.type,l=e[n],u=l!=null&&(2&l.__u)==0;if(l===null&&r.key==null||u&&c==l.key&&d==l.type)return n;if(s>(u?1:0)){for(i=n-1,o=n+1;i>=0||o<e.length;)if((l=e[a=i>=0?i--:o++])!=null&&(2&l.__u)==0&&c==l.key&&d==l.type)return a}return-1}function Zi(r,e,n){e[0]=="-"?r.setProperty(e,n??""):r[e]=n==null?"":typeof n!="number"||cl.test(e)?n:n+"px"}function Tr(r,e,n,s,i){var o,a;e:if(e=="style")if(typeof n=="string")r.style.cssText=n;else{if(typeof s=="string"&&(r.style.cssText=s=""),s)for(e in s)n&&e in n||Zi(r.style,e,"");if(n)for(e in n)s&&n[e]==s[e]||Zi(r.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(va,"$1")),a=e.toLowerCase(),e=a in r||e=="onFocusOut"||e=="onFocusIn"?a.slice(2):e.slice(2),r.l||(r.l={}),r.l[e+o]=n,n?s?n.u=s.u:(n.u=_i,r.addEventListener(e,o?$s:Fs,o)):r.removeEventListener(e,o?$s:Fs,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in r)try{r[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?r.removeAttribute(e):r.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ji(r){return function(e){if(this.l){var n=this.l[e.type+r];if(e.t==null)e.t=_i++;else if(e.t<n.u)return;return n(fe.event?fe.event(e):e)}}}function Ci(r,e,n,s,i,o,a,c,d,l){var u,h,p,f,m,b,y,x,w,S,_,C,P,A,k,v,M,I=e.type;if(e.constructor!=null)return null;128&n.__u&&(d=!!(32&n.__u),o=[c=e.__e=n.__e]),(u=fe.__b)&&u(e);e:if(typeof I=="function")try{if(x=e.props,w="prototype"in I&&I.prototype.render,S=(u=I.contextType)&&s[u.__c],_=u?S?S.props.value:u.__:s,n.__c?y=(h=e.__c=n.__c).__=h.__E:(w?e.__c=h=new I(x,_):(e.__c=h=new Bt(x,_),h.constructor=I,h.render=fl),S&&S.sub(h),h.props=x,h.state||(h.state={}),h.context=_,h.__n=s,p=h.__d=!0,h.__h=[],h._sb=[]),w&&h.__s==null&&(h.__s=h.state),w&&I.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=Pt({},h.__s)),Pt(h.__s,I.getDerivedStateFromProps(x,h.__s))),f=h.props,m=h.state,h.__v=e,p)w&&I.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),w&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(w&&I.getDerivedStateFromProps==null&&x!==f&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(x,_),!h.__e&&h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(x,h.__s,_)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(h.props=x,h.state=h.__s,h.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(z){z&&(z.__=e)}),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[],h.__h.length&&a.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(x,h.__s,_),w&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(f,m,b)})}if(h.context=_,h.props=x,h.__P=r,h.__e=!1,P=fe.__r,A=0,w){for(h.state=h.__s,h.__d=!1,P&&P(e),u=h.render(h.props,h.state,h.context),k=0;k<h._sb.length;k++)h.__h.push(h._sb[k]);h._sb=[]}else do h.__d=!1,P&&P(e),u=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++A<25);h.state=h.__s,h.getChildContext!=null&&(s=Pt(Pt({},s),h.getChildContext())),w&&!p&&h.getSnapshotBeforeUpdate!=null&&(b=h.getSnapshotBeforeUpdate(f,m)),v=u,u!=null&&u.type===Q&&u.key==null&&(v=Sa(u.props.children)),c=xa(r,vr(v)?v:[v],e,n,s,i,o,a,c,d,l),h.base=e.__e,e.__u&=-161,h.__h.length&&a.push(h),y&&(h.__E=h.__=null)}catch(z){if(e.__v=null,d||o!=null)if(z.then){for(e.__u|=d?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,e.__e=c}else{for(M=o.length;M--;)xi(o[M]);zs(e)}else e.__e=n.__e,e.__k=n.__k,z.then||zs(e);fe.__e(z,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=hl(n.__e,e,n,s,i,o,a,d,l);return(u=fe.diffed)&&u(e),128&e.__u?void 0:c}function zs(r){r&&r.__c&&(r.__c.__e=!0),r&&r.__k&&r.__k.forEach(zs)}function Na(r,e,n){for(var s=0;s<n.length;s++)Ni(n[s],n[++s],n[++s]);fe.__c&&fe.__c(e,r),r.some(function(i){try{r=i.__h,i.__h=[],r.some(function(o){o.call(i)})}catch(o){fe.__e(o,i.__v)}})}function Sa(r){return typeof r!="object"||r==null||r.__b&&r.__b>0?r:vr(r)?r.map(Sa):Pt({},r)}function hl(r,e,n,s,i,o,a,c,d){var l,u,h,p,f,m,b,y=n.props,x=e.props,w=e.type;if(w=="svg"?i="http://www.w3.org/2000/svg":w=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((f=o[l])&&"setAttribute"in f==!!w&&(w?f.localName==w:f.nodeType==3)){r=f,o[l]=null;break}}if(r==null){if(w==null)return document.createTextNode(x);r=document.createElementNS(i,w,x.is&&x),c&&(fe.__m&&fe.__m(e,o),c=!1),o=null}if(w==null)y===x||c&&r.data==x||(r.data=x);else{if(o=o&&br.call(r.childNodes),y=n.props||dr,!c&&o!=null)for(y={},l=0;l<r.attributes.length;l++)y[(f=r.attributes[l]).name]=f.value;for(l in y)if(f=y[l],l!="children"){if(l=="dangerouslySetInnerHTML")h=f;else if(!(l in x)){if(l=="value"&&"defaultValue"in x||l=="checked"&&"defaultChecked"in x)continue;Tr(r,l,null,f,i)}}for(l in x)f=x[l],l=="children"?p=f:l=="dangerouslySetInnerHTML"?u=f:l=="value"?m=f:l=="checked"?b=f:c&&typeof f!="function"||y[l]===f||Tr(r,l,f,y[l],i);if(u)c||h&&(u.__html==h.__html||u.__html==r.innerHTML)||(r.innerHTML=u.__html),e.__k=[];else if(h&&(r.innerHTML=""),xa(e.type=="template"?r.content:r,vr(p)?p:[p],e,n,s,w=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,a,o?o[0]:n.__k&&Sn(n,0),c,d),o!=null)for(l=o.length;l--;)xi(o[l]);c||(l="value",w=="progress"&&m==null?r.removeAttribute("value"):m!=null&&(m!==r[l]||w=="progress"&&!m||w=="option"&&m!=y[l])&&Tr(r,l,m,y[l],i),l="checked",b!=null&&b!=r[l]&&Tr(r,l,b,y[l],i))}return r}function Ni(r,e,n){try{if(typeof r=="function"){var s=typeof r.__u=="function";s&&r.__u(),s&&e==null||(r.__u=r(e))}else r.current=e}catch(i){fe.__e(i,n)}}function ka(r,e,n){var s,i;if(fe.unmount&&fe.unmount(r),(s=r.ref)&&(s.current&&s.current!=r.__e||Ni(s,null,e)),(s=r.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(o){fe.__e(o,e)}s.base=s.__P=null}if(s=r.__k)for(i=0;i<s.length;i++)s[i]&&ka(s[i],e,n||typeof r.type!="function");n||xi(r.__e),r.__c=r.__=r.__e=void 0}function fl(r,e,n){return this.constructor(r,n)}function kn(r,e,n){var s,i,o,a;e==document&&(e=document.documentElement),fe.__&&fe.__(r,e),i=(s=typeof n=="function")?null:n&&n.__k||e.__k,o=[],a=[],Ci(e,r=(!s&&n||e).__k=ct(Q,null,[r]),i||dr,dr,e.namespaceURI,!s&&n?[n]:i?null:e.firstChild?br.call(e.childNodes):null,o,!s&&n?n:i?i.__e:e.firstChild,s,a),Na(o,r,a)}function Ea(r,e){kn(r,e,Ea)}function Hs(r,e,n){var s,i,o,a,c=Pt({},r.props);for(o in r.type&&r.type.defaultProps&&(a=r.type.defaultProps),e)o=="key"?s=e[o]:o=="ref"?i=e[o]:c[o]=e[o]===void 0&&a!=null?a[o]:e[o];return arguments.length>2&&(c.children=arguments.length>3?br.call(arguments,2):n),ir(r.type,c,s||r.key,i||r.ref,null)}function _n(r){function e(n){var s,i;return this.getChildContext||(s=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(o){this.props.value!=o.value&&s.forEach(function(a){a.__e=!0,Us(a)})},this.sub=function(o){s.add(o);var a=o.componentWillUnmount;o.componentWillUnmount=function(){s&&s.delete(o),a&&a.call(o)}}),n.children}return e.__c="__cC"+ya++,e.__=r,e.Provider=e.__l=(e.Consumer=function(n,s){return n.children(s)}).contextType=e,e}br=wa.slice,fe={__e:function(r,e,n,s){for(var i,o,a;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(r)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(r,s||{}),a=i.__d),a)return i.__E=i}catch(c){r=c}throw r}},ma=0,Bt.prototype.setState=function(r,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Pt({},this.state),typeof r=="function"&&(r=r(Pt({},n),this.props)),r&&Pt(n,r),r!=null&&this.__v&&(e&&this._sb.push(e),Us(this))},Bt.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),Us(this))},Bt.prototype.render=Q,fn=[],ga=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ba=function(r,e){return r.__v.__b-e.__v.__b},Zr.__r=0,va=/(PointerCapture)$|Capture$/i,_i=0,Fs=Ji(!1),$s=Ji(!0),ya=0;var pl=0;function t(r,e,n,s,i,o){e||(e={});var a,c,d=e;if("ref"in d)for(c in d={},e)c=="ref"?a=e[c]:d[c]=e[c];var l={type:r,props:d,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--pl,__i:-1,__u:0,__source:i,__self:o};if(typeof r=="function"&&(a=r.defaultProps))for(c in a)d[c]===void 0&&(d[c]=a[c]);return fe.vnode&&fe.vnode(l),l}var rn,De,hs,eo,En=0,Ta=[],Re=fe,to=Re.__b,no=Re.__r,ro=Re.diffed,so=Re.__c,io=Re.unmount,oo=Re.__;function Ln(r,e){Re.__h&&Re.__h(De,r,En||e),En=0;var n=De.__H||(De.__H={__:[],__h:[]});return r>=n.__.length&&n.__.push({}),n.__[r]}function g(r){return En=1,yr(Oa,r)}function yr(r,e,n){var s=Ln(rn++,2);if(s.t=r,!s.__c&&(s.__=[n?n(e):Oa(void 0,e),function(c){var d=s.__N?s.__N[0]:s.__[0],l=s.t(d,c);d!==l&&(s.__N=[l,s.__[1]],s.__c.setState({}))}],s.__c=De,!De.__f)){var i=function(c,d,l){if(!s.__c.__H)return!0;var u=s.__c.__H.__.filter(function(p){return!!p.__c});if(u.every(function(p){return!p.__N}))return!o||o.call(this,c,d,l);var h=s.__c.props!==c;return u.forEach(function(p){if(p.__N){var f=p.__[0];p.__=p.__N,p.__N=void 0,f!==p.__[0]&&(h=!0)}}),o&&o.call(this,c,d,l)||h};De.__f=!0;var o=De.shouldComponentUpdate,a=De.componentWillUpdate;De.componentWillUpdate=function(c,d,l){if(this.__e){var u=o;o=void 0,i(c,d,l),o=u}a&&a.call(this,c,d,l)},De.shouldComponentUpdate=i}return s.__N||s.__}function ee(r,e){var n=Ln(rn++,3);!Re.__s&&ki(n.__H,e)&&(n.__=r,n.u=e,De.__H.__h.push(n))}function sn(r,e){var n=Ln(rn++,4);!Re.__s&&ki(n.__H,e)&&(n.__=r,n.u=e,De.__h.push(n))}function $e(r){return En=5,Ae(function(){return{current:r}},[])}function Si(r,e,n){En=6,sn(function(){if(typeof r=="function"){var s=r(e());return function(){r(null),s&&typeof s=="function"&&s()}}if(r)return r.current=e(),function(){return r.current=null}},n==null?n:n.concat(r))}function Ae(r,e){var n=Ln(rn++,7);return ki(n.__H,e)&&(n.__=r(),n.__H=e,n.__h=r),n.__}function In(r,e){return En=8,Ae(function(){return r},e)}function on(r){var e=De.context[r.__c],n=Ln(rn++,9);return n.c=r,e?(n.__==null&&(n.__=!0,e.sub(De)),e.props.value):r.__}function Da(r,e){Re.useDebugValue&&Re.useDebugValue(e?e(r):r)}function Aa(){var r=Ln(rn++,11);if(!r.__){for(var e=De.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var n=e.__m||(e.__m=[0,0]);r.__="P"+n[0]+"-"+n[1]++}return r.__}function ml(){for(var r;r=Ta.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(zr),r.__H.__h.forEach(qs),r.__H.__h=[]}catch(e){r.__H.__h=[],Re.__e(e,r.__v)}}Re.__b=function(r){De=null,to&&to(r)},Re.__=function(r,e){r&&e.__k&&e.__k.__m&&(r.__m=e.__k.__m),oo&&oo(r,e)},Re.__r=function(r){no&&no(r),rn=0;var e=(De=r.__c).__H;e&&(hs===De?(e.__h=[],De.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(zr),e.__h.forEach(qs),e.__h=[],rn=0)),hs=De},Re.diffed=function(r){ro&&ro(r);var e=r.__c;e&&e.__H&&(e.__H.__h.length&&(Ta.push(e)!==1&&eo===Re.requestAnimationFrame||((eo=Re.requestAnimationFrame)||gl)(ml)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),hs=De=null},Re.__c=function(r,e){e.some(function(n){try{n.__h.forEach(zr),n.__h=n.__h.filter(function(s){return!s.__||qs(s)})}catch(s){e.some(function(i){i.__h&&(i.__h=[])}),e=[],Re.__e(s,n.__v)}}),so&&so(r,e)},Re.unmount=function(r){io&&io(r);var e,n=r.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{zr(s)}catch(i){e=i}}),n.__H=void 0,e&&Re.__e(e,n.__v))};var ao=typeof requestAnimationFrame=="function";function gl(r){var e,n=function(){clearTimeout(s),ao&&cancelAnimationFrame(e),setTimeout(r)},s=setTimeout(n,35);ao&&(e=requestAnimationFrame(n))}function zr(r){var e=De,n=r.__c;typeof n=="function"&&(r.__c=void 0,n()),De=e}function qs(r){var e=De;r.__c=r.__(),De=e}function ki(r,e){return!r||r.length!==e.length||e.some(function(n,s){return n!==r[s]})}function Oa(r,e){return typeof e=="function"?e(r):e}let Nn,tr;function bl(r){return!tr||(typeof tr=="string"?r.startsWith(tr):tr.test(r))}function vl(r,e){let n="";if(Nn=void 0,e&&e.type==="click"){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||e.button!==0)return r;const s=e.composedPath().find(o=>o.nodeName=="A"&&o.href),i=s&&s.getAttribute("href");if(!s||s.origin!=location.origin||/^#/.test(i)||!/^(_?self)?$/i.test(s.target)||!bl(i))return r;Nn=!0,e.preventDefault(),n=s.href.replace(location.origin,"")}else e&&e.url?(Nn=!e.replace,n=e.url):n=location.pathname+location.search;return Nn===!0?history.pushState(null,"",n):Nn===!1&&history.replaceState(null,"",n),n}const yl=(r,e,n={})=>{r=r.split("/").filter(Boolean),e=(e||"").split("/").filter(Boolean),n.params||(n.params={});for(let s=0,i,o;s<Math.max(r.length,e.length);s++){let[,a,c,d]=(e[s]||"").match(/^(:?)(.*?)([+*?]?)$/);if(i=r[s],!(!a&&c==i)){if(!a&&i&&d=="*"){n.rest="/"+r.slice(s).map(decodeURIComponent).join("/");break}if(!a||!i&&d!="?"&&d!="*")return;if(o=d=="+"||d=="*",o?i=r.slice(s).map(decodeURIComponent).join("/")||void 0:i&&(i=decodeURIComponent(i)),n.params[c]=i,c in n||(n[c]=i),o)break}}return n};function wr(r){const[e,n]=yr(vl,r.url||location.pathname+location.search);r.scope&&(tr=r.scope);const s=Nn===!0,i=Ae(()=>{const o=new URL(e,location.origin),a=o.pathname.replace(/\/+$/g,"")||"/";return{url:e,path:a,query:Object.fromEntries(o.searchParams),route:(c,d)=>n({url:c,replace:d}),wasPush:s}},[e]);return sn(()=>(addEventListener("click",n),addEventListener("popstate",n),()=>{removeEventListener("click",n),removeEventListener("popstate",n)}),[]),ct(wr.ctx.Provider,{value:i},r.children)}const wl=Promise.resolve();function La(r){const[e,n]=yr(v=>v+1,0),{url:s,query:i,wasPush:o,path:a}=ft();if(!s)throw new Error("preact-iso's <Router> must be used within a <LocationProvider>, see: https://github.com/preactjs/preact-iso#locationprovider");const{rest:c=a,params:d={}}=on(co),l=$e(!1),u=$e(a),h=$e(0),p=$e(),f=$e(),m=$e(),b=$e(!1),y=$e();y.current=!1;let x,w,S;jt(r.children).some(v=>{if(yl(c,v.props.path,S={...v.props,path:c,query:i,params:d,rest:""}))return x=Hs(v,S);v.props.default&&(w=Hs(v,S))});let _=x||w;const C=p.current&&p.current.__u&Dr&&p.current.__u&Ar,P=p.current&&p.current.__h,A=Ae(()=>{f.current=p.current,p.current=ct(co.Provider,{value:S},_);const v=f.current&&f.current.props.children;return!v||!_||_.type!==v.type||_.props.component!==v.props.component?(this.__v&&this.__v.__k&&this.__v.__k.reverse(),h.current++,!0):!1},[s,JSON.stringify(S)]);C?(p.current.__u|=Dr,p.current.__u|=Ar):P&&(p.current.__h=!0);const k=f.current;return f.current=null,this.__c=(v,M)=>{y.current=!0,f.current=k,r.onLoadStart&&r.onLoadStart(s),l.current=!0;let I=h.current;v.then(()=>{I===h.current&&(f.current=null,p.current&&(M.__h&&(p.current.__h=M.__h),M.__u&Ar&&(p.current.__u|=Ar),M.__u&Dr&&(p.current.__u|=Dr)),wl.then(n))})},sn(()=>{const v=this.__v&&this.__v.__e;if(y.current){!b.current&&!m.current&&(m.current=v);return}!b.current&&m.current&&(m.current!==v&&m.current.remove(),m.current=null),b.current=!0,u.current!==a&&(o&&scrollTo(0,0),r.onRouteChange&&r.onRouteChange(s),u.current=a),r.onLoadEnd&&l.current&&r.onLoadEnd(s),l.current=!1},[a,o,e]),A?[ct(fs,{r:p}),ct(fs,{r:f})]:ct(fs,{r:p})}const Dr=32,Ar=128,fs=({r})=>r.current;La.Provider=wr;wr.ctx=_n({});const co=_n({}),ye=r=>ct(r.component,r),ft=()=>on(wr.ctx),lo=fe.__b;fe.__b=r=>{r.type&&r.type._forwarded&&r.ref&&(r.props.ref=r.ref,r.ref=null),lo&&lo(r)};const uo=fe.__e;fe.__e=(r,e,n)=>{if(r&&r.then){let s=e;for(;s=s.__;)if(s.__c&&s.__c.__c)return e.__e==null&&(e.__c.__z=[n.__e],e.__e=n.__e,e.__k=n.__k),e.__k||(e.__k=[]),s.__c.__c(r,e)}uo&&uo(r,e,n)};const Ia="/assets/logo-gUhwRCmO.png";function _l(){return t("footer",{className:"footer sm:footer-horizontal bg-neutral text-neutral-content items-center p-4",children:[t("aside",{className:"grid-flow-col items-center",children:[t("img",{src:Ia,alt:"My Logo",class:"w-8 h-8"}),t("p",{children:["Copyright © ",new Date().getFullYear()," - All right reserved"]})]}),t("nav",{className:"grid-flow-col gap-4 md:place-self-center md:justify-self-end",children:[t("a",{children:t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:t("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})})}),t("a",{children:t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:t("path",{d:"M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"})})}),t("a",{children:t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",className:"fill-current",children:t("path",{d:"M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"})})})]})]})}function or(r,e){if(!e.trim())return r;const s=e.toLowerCase().split(/\s+/).filter(o=>o.length>0).map(o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));let i=r;for(let o=s.length-1;o>=0;o--){const a=s[o],c=new RegExp(`(${a})`,"gi");i=i.replace(c,'<span class="bg-info">$1</span>')}return i}class xl{constructor(e={}){this.baseUrl="",this.securityData=null,this.abortControllers=new Map,this.customFetch=(...n)=>fetch(...n),this.baseApiParams={credentials:"same-origin",headers:{},redirect:"follow",referrerPolicy:"no-referrer"},this.setSecurityData=n=>{this.securityData=n},this.contentFormatters={"application/json":n=>n!==null&&(typeof n=="object"||typeof n=="string")?JSON.stringify(n):n,"application/vnd.api+json":n=>n!==null&&(typeof n=="object"||typeof n=="string")?JSON.stringify(n):n,"text/plain":n=>n!==null&&typeof n!="string"?JSON.stringify(n):n,"multipart/form-data":n=>n instanceof FormData?n:Object.keys(n||{}).reduce((s,i)=>{const o=n[i];return s.append(i,o instanceof Blob?o:typeof o=="object"&&o!==null?JSON.stringify(o):`${o}`),s},new FormData),"application/x-www-form-urlencoded":n=>this.toQueryString(n)},this.createAbortSignal=n=>{if(this.abortControllers.has(n)){const i=this.abortControllers.get(n);return i?i.signal:void 0}const s=new AbortController;return this.abortControllers.set(n,s),s.signal},this.abortRequest=n=>{const s=this.abortControllers.get(n);s&&(s.abort(),this.abortControllers.delete(n))},this.request=async({body:n,secure:s,path:i,type:o,query:a,format:c,baseUrl:d,cancelToken:l,...u})=>{const h=(typeof s=="boolean"?s:this.baseApiParams.secure)&&this.securityWorker&&await this.securityWorker(this.securityData)||{},p=this.mergeRequestParams(u,h),f=a&&this.toQueryString(a),m=this.contentFormatters[o||"application/json"],b=c||p.format;return this.customFetch(`${d||this.baseUrl||""}${i}${f?`?${f}`:""}`,{...p,headers:{...p.headers||{},...o&&o!=="multipart/form-data"?{"Content-Type":o}:{}},signal:(l?this.createAbortSignal(l):p.signal)||null,body:typeof n>"u"||n===null?null:m(n)}).then(async y=>{const x=y.clone();x.data=null,x.error=null;const w=b?await y[b]().then(S=>(x.ok?x.data=S:x.error=S,x)).catch(S=>(x.error=S,x)):x;if(l&&this.abortControllers.delete(l),!y.ok)throw w;return w})},Object.assign(this,e)}encodeQueryParam(e,n){return`${encodeURIComponent(e)}=${encodeURIComponent(typeof n=="number"?n:`${n}`)}`}addQueryParam(e,n){return this.encodeQueryParam(n,e[n])}addArrayQueryParam(e,n){return e[n].map(i=>this.encodeQueryParam(n,i)).join("&")}toQueryString(e){const n=e||{};return Object.keys(n).filter(i=>typeof n[i]<"u").map(i=>Array.isArray(n[i])?this.addArrayQueryParam(n,i):this.addQueryParam(n,i)).join("&")}addQueryParams(e){const n=this.toQueryString(e);return n?`?${n}`:""}mergeRequestParams(e,n){return{...this.baseApiParams,...e,...n||{},headers:{...this.baseApiParams.headers||{},...e.headers||{},...n&&n.headers||{}}}}}class Cl extends xl{constructor(){super(...arguments),this.getIndex=(e={})=>this.request({path:"/",method:"GET",...e}),this.avatar={getAvatar:(e,n={})=>this.request({path:"/avatar/",method:"GET",query:e,...n})},this.blog={getBlog:(e={})=>this.request({path:"/blog/",method:"GET",format:"json",...e}),getBlogById:(e,n={})=>this.request({path:`/blog/${e}`,method:"GET",format:"json",...n}),postBlogByIdComment:(e,n,s={})=>this.request({path:`/blog/${e}/comment`,method:"POST",body:n,secure:!0,type:"application/json",format:"json",...s}),getBlogByIdReaction:(e,n={})=>this.request({path:`/blog/${e}/reaction`,method:"GET",secure:!0,format:"json",...n}),patchBlogByIdReaction:(e,n,s={})=>this.request({path:`/blog/${e}/reaction`,method:"PATCH",body:n,secure:!0,type:"application/json",format:"json",...s}),getBlogAdminCommentsPending:(e={})=>this.request({path:"/blog/admin/comments/pending",method:"GET",secure:!0,format:"json",...e}),patchBlogAdminCommentsByCommentIdModerate:(e,n,s={})=>this.request({path:`/blog/admin/comments/${e}/moderate`,method:"PATCH",body:n,secure:!0,type:"application/json",format:"json",...s})},this.images={postImagesUpload:(e,n={})=>this.request({path:"/images/upload",method:"POST",body:e,secure:!0,type:"multipart/form-data",format:"json",...n}),getImages:(e={})=>this.request({path:"/images/",method:"GET",secure:!0,format:"json",...e}),getImagesByImageId:(e,n={})=>this.request({path:`/images/${e}`,method:"GET",secure:!0,format:"json",...n}),deleteImagesByImageId:(e,n={})=>this.request({path:`/images/${e}`,method:"DELETE",secure:!0,format:"json",...n})},this.profile={getProfileByUserId:(e,n={})=>this.request({path:`/profile/${e}`,method:"GET",format:"json",...n}),postProfileLogArithmetic:(e,n={})=>this.request({path:"/profile/log-arithmetic",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),postProfileLogTetris:(e,n={})=>this.request({path:"/profile/log-tetris",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n})},this.admin={getAdminProfileUnverified:(e={})=>this.request({path:"/admin/profile/unverified",method:"GET",secure:!0,format:"json",...e}),postAdminProfileByUserIdVerify:(e,n={})=>this.request({path:`/admin/profile/${e}/verify`,method:"POST",secure:!0,format:"json",...n})},this.leaderboards={getLeaderboards:(e,n={})=>this.request({path:"/leaderboards/",method:"GET",query:e,format:"json",...n})},this.connections={getConnections:(e={})=>this.request({path:"/connections/",method:"GET",secure:!0,format:"json",...e}),postConnectionsSendEvent:(e,n={})=>this.request({path:"/connections/send-event",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),postConnectionsDisconnect:(e,n={})=>this.request({path:"/connections/disconnect",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n})},this.notifications={getNotificationsSubscriptions:(e={})=>this.request({path:"/notifications/subscriptions",method:"GET",secure:!0,format:"json",...e}),postNotificationsSubscribe:(e,n={})=>this.request({path:"/notifications/subscribe",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),postNotificationsUnsubscribe:(e,n={})=>this.request({path:"/notifications/unsubscribe",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),postNotificationsRegisterPush:(e,n={})=>this.request({path:"/notifications/register-push",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n})},this.quizspire={getQuizspireDecks:(e,n={})=>this.request({path:"/quizspire/decks",method:"GET",query:e,secure:!0,format:"json",...n}),postQuizspireDecks:(e,n={})=>this.request({path:"/quizspire/decks",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),getQuizspireDecksById:(e,n={})=>this.request({path:`/quizspire/decks/${e}`,method:"GET",secure:!0,format:"json",...n}),putQuizspireDecksById:(e,n,s={})=>this.request({path:`/quizspire/decks/${e}`,method:"PUT",body:n,secure:!0,type:"application/json",format:"json",...s}),deleteQuizspireDecksById:(e,n={})=>this.request({path:`/quizspire/decks/${e}`,method:"DELETE",secure:!0,format:"json",...n})},this.me={getMe:(e={})=>this.request({path:"/me",method:"GET",...e})},this.auth={socialSignIn:(e,n={})=>this.request({path:"/auth/api/sign-in/social",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiGetSessionList:(e={})=>this.request({path:"/auth/api/get-session",method:"GET",secure:!0,format:"json",...e}),apiSignOutCreate:(e,n={})=>this.request({path:"/auth/api/sign-out",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiSignUpEmailCreate:(e,n={})=>this.request({path:"/auth/api/sign-up/email",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiSignInEmailCreate:(e,n={})=>this.request({path:"/auth/api/sign-in/email",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiForgetPasswordCreate:(e,n={})=>this.request({path:"/auth/api/forget-password",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiResetPasswordCreate:(e,n={})=>this.request({path:"/auth/api/reset-password",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiVerifyEmailList:(e,n={})=>this.request({path:"/auth/api/verify-email",method:"GET",query:e,secure:!0,format:"json",...n}),apiSendVerificationEmailCreate:(e,n={})=>this.request({path:"/auth/api/send-verification-email",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiChangeEmailCreate:(e,n={})=>this.request({path:"/auth/api/change-email",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiChangePasswordCreate:(e,n={})=>this.request({path:"/auth/api/change-password",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiUpdateUserCreate:(e,n={})=>this.request({path:"/auth/api/update-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiDeleteUserCreate:(e,n={})=>this.request({path:"/auth/api/delete-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiResetPasswordDetail:(e,n,s={})=>this.request({path:`/auth/api/reset-password/${e}`,method:"GET",query:n,secure:!0,format:"json",...s}),apiRequestPasswordResetCreate:(e,n={})=>this.request({path:"/auth/api/request-password-reset",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiListSessionsList:(e={})=>this.request({path:"/auth/api/list-sessions",method:"GET",secure:!0,format:"json",...e}),apiRevokeSessionCreate:(e,n={})=>this.request({path:"/auth/api/revoke-session",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiRevokeSessionsCreate:(e,n={})=>this.request({path:"/auth/api/revoke-sessions",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiRevokeOtherSessionsCreate:(e,n={})=>this.request({path:"/auth/api/revoke-other-sessions",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiLinkSocialCreate:(e,n={})=>this.request({path:"/auth/api/link-social",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiListAccountsList:(e={})=>this.request({path:"/auth/api/list-accounts",method:"GET",secure:!0,format:"json",...e}),apiDeleteUserCallbackList:(e,n={})=>this.request({path:"/auth/api/delete-user/callback",method:"GET",query:e,secure:!0,format:"json",...n}),apiUnlinkAccountCreate:(e,n={})=>this.request({path:"/auth/api/unlink-account",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiRefreshTokenCreate:(e,n={})=>this.request({path:"/auth/api/refresh-token",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiGetAccessTokenCreate:(e,n={})=>this.request({path:"/auth/api/get-access-token",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiAccountInfoCreate:(e,n={})=>this.request({path:"/auth/api/account-info",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiOkList:(e={})=>this.request({path:"/auth/api/ok",method:"GET",secure:!0,format:"json",...e}),apiErrorList:(e={})=>this.request({path:"/auth/api/error",method:"GET",secure:!0,...e}),setRole:(e,n={})=>this.request({path:"/auth/api/admin/set-role",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),getUser:(e,n={})=>this.request({path:"/auth/api/admin/get-user",method:"GET",query:e,secure:!0,format:"json",...n}),createUser:(e,n={})=>this.request({path:"/auth/api/admin/create-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),updateUser:(e,n={})=>this.request({path:"/auth/api/admin/update-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),listUsers:(e,n={})=>this.request({path:"/auth/api/admin/list-users",method:"GET",query:e,secure:!0,format:"json",...n}),listUserSessions:(e,n={})=>this.request({path:"/auth/api/admin/list-user-sessions",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),unbanUser:(e,n={})=>this.request({path:"/auth/api/admin/unban-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),banUser:(e,n={})=>this.request({path:"/auth/api/admin/ban-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),impersonateUser:(e,n={})=>this.request({path:"/auth/api/admin/impersonate-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiAdminStopImpersonatingCreate:(e={})=>this.request({path:"/auth/api/admin/stop-impersonating",method:"POST",secure:!0,...e}),revokeUserSession:(e,n={})=>this.request({path:"/auth/api/admin/revoke-user-session",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),revokeUserSessions:(e,n={})=>this.request({path:"/auth/api/admin/revoke-user-sessions",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),removeUser:(e,n={})=>this.request({path:"/auth/api/admin/remove-user",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),setUserPassword:(e,n={})=>this.request({path:"/auth/api/admin/set-user-password",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n}),apiAdminHasPermissionCreate:(e,n={})=>this.request({path:"/auth/api/admin/has-permission",method:"POST",body:e,secure:!0,type:"application/json",format:"json",...n})}}}const q=new Cl({baseUrl:"https://my-website.space/backend",securityWorker:()=>({credentials:"include"})});function Ma(r,e){for(var n in e)r[n]=e[n];return r}function Ws(r,e){for(var n in r)if(n!=="__source"&&!(n in e))return!0;for(var s in e)if(s!=="__source"&&r[s]!==e[s])return!0;return!1}function Pa(r,e){var n=e(),s=g({t:{__:n,u:e}}),i=s[0].t,o=s[1];return sn(function(){i.__=n,i.u=e,ps(i)&&o({t:i})},[r,n,e]),ee(function(){return ps(i)&&o({t:i}),r(function(){ps(i)&&o({t:i})})},[r]),n}function ps(r){var e,n,s=r.u,i=r.__;try{var o=s();return!((e=i)===(n=o)&&(e!==0||1/e==1/n)||e!=e&&n!=n)}catch{return!0}}function Ra(r){r()}function Ba(r){return r}function ja(){return[!1,Ra]}var Fa=sn;function Vs(r,e){this.props=r,this.context=e}function $a(r,e){function n(i){var o=this.props.ref,a=o==i.ref;return!a&&o&&(o.call?o(null):o.current=null),e?!e(this.props,i)||!a:Ws(this.props,i)}function s(i){return this.shouldComponentUpdate=n,ct(r,i)}return s.displayName="Memo("+(r.displayName||r.name)+")",s.prototype.isReactComponent=!0,s.__f=!0,s.type=r,s}(Vs.prototype=new Bt).isPureReactComponent=!0,Vs.prototype.shouldComponentUpdate=function(r,e){return Ws(this.props,r)||Ws(this.state,e)};var ho=fe.__b;fe.__b=function(r){r.type&&r.type.__f&&r.ref&&(r.props.ref=r.ref,r.ref=null),ho&&ho(r)};var Nl=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ei(r){function e(n){var s=Ma({},n);return delete s.ref,r(s,n.ref||null)}return e.$$typeof=Nl,e.render=r,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(r.displayName||r.name)+")",e}var fo=function(r,e){return r==null?null:jt(jt(r).map(e))},Sl={map:fo,forEach:fo,count:function(r){return r?jt(r).length:0},only:function(r){var e=jt(r);if(e.length!==1)throw"Children.only";return e[0]},toArray:jt},kl=fe.__e;fe.__e=function(r,e,n,s){if(r.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),i.__c(r,e)}kl(r,e,n,s)};var po=fe.unmount;function Ua(r,e,n){return r&&(r.__c&&r.__c.__H&&(r.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),r.__c.__H=null),(r=Ma({},r)).__c!=null&&(r.__c.__P===n&&(r.__c.__P=e),r.__c.__e=!0,r.__c=null),r.__k=r.__k&&r.__k.map(function(s){return Ua(s,e,n)})),r}function za(r,e,n){return r&&n&&(r.__v=null,r.__k=r.__k&&r.__k.map(function(s){return za(s,e,n)}),r.__c&&r.__c.__P===e&&(r.__e&&n.appendChild(r.__e),r.__c.__e=!0,r.__c.__P=n)),r}function Hr(){this.__u=0,this.o=null,this.__b=null}function Ha(r){var e=r.__.__c;return e&&e.__a&&e.__a(r)}function El(r){var e,n,s;function i(o){if(e||(e=r()).then(function(a){n=a.default||a},function(a){s=a}),s)throw s;if(!n)throw e;return ct(n,o)}return i.displayName="Lazy",i.__f=!0,i}function nr(){this.i=null,this.l=null}fe.unmount=function(r){var e=r.__c;e&&e.__R&&e.__R(),e&&32&r.__u&&(r.type=null),po&&po(r)},(Hr.prototype=new Bt).__c=function(r,e){var n=e.__c,s=this;s.o==null&&(s.o=[]),s.o.push(n);var i=Ha(s.__v),o=!1,a=function(){o||(o=!0,n.__R=null,i?i(c):c())};n.__R=a;var c=function(){if(!--s.__u){if(s.state.__a){var d=s.state.__a;s.__v.__k[0]=za(d,d.__c.__P,d.__c.__O)}var l;for(s.setState({__a:s.__b=null});l=s.o.pop();)l.forceUpdate()}};s.__u++||32&e.__u||s.setState({__a:s.__b=s.__v.__k[0]}),r.then(a,a)},Hr.prototype.componentWillUnmount=function(){this.o=[]},Hr.prototype.render=function(r,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=Ua(this.__b,n,s.__O=s.__P)}this.__b=null}var i=e.__a&&ct(Q,null,r.fallback);return i&&(i.__u&=-33),[ct(Q,null,e.__a?null:r.children),i]};var mo=function(r,e,n){if(++n[1]===n[0]&&r.l.delete(e),r.props.revealOrder&&(r.props.revealOrder[0]!=="t"||!r.l.size))for(n=r.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;r.i=n=n[2]}};function Tl(r){return this.getChildContext=function(){return r.context},r.children}function Dl(r){var e=this,n=r.h;if(e.componentWillUnmount=function(){kn(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),!e.v){for(var s=e.__v;s!==null&&!s.__m&&s.__!==null;)s=s.__;e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:s.__m},contains:function(){return!0},insertBefore:function(i,o){this.childNodes.push(i),e.h.insertBefore(i,o)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.h.removeChild(i)}}}kn(ct(Tl,{context:e.context},r.__v),e.v)}function Al(r,e){var n=ct(Dl,{__v:r,h:e});return n.containerInfo=e,n}(nr.prototype=new Bt).__a=function(r){var e=this,n=Ha(e.__v),s=e.l.get(r);return s[0]++,function(i){var o=function(){e.props.revealOrder?(s.push(i),mo(e,r,s)):i()};n?n(o):o()}},nr.prototype.render=function(r){this.i=null,this.l=new Map;var e=jt(r.children);r.revealOrder&&r.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return r.children},nr.prototype.componentDidUpdate=nr.prototype.componentDidMount=function(){var r=this;this.l.forEach(function(e,n){mo(r,n,e)})};var qa=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Ol=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ll=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Il=/[A-Z0-9]/g,Ml=typeof document<"u",Pl=function(r){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(r)};function Rl(r,e,n){return e.__k==null&&(e.textContent=""),kn(r,e),typeof n=="function"&&n(),r?r.__c:null}function Bl(r,e,n){return Ea(r,e),typeof n=="function"&&n(),r?r.__c:null}Bt.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(r){Object.defineProperty(Bt.prototype,r,{configurable:!0,get:function(){return this["UNSAFE_"+r]},set:function(e){Object.defineProperty(this,r,{configurable:!0,writable:!0,value:e})}})});var go=fe.event;function jl(){}function Fl(){return this.cancelBubble}function $l(){return this.defaultPrevented}fe.event=function(r){return go&&(r=go(r)),r.persist=jl,r.isPropagationStopped=Fl,r.isDefaultPrevented=$l,r.nativeEvent=r};var Ti,Ul={enumerable:!1,configurable:!0,get:function(){return this.class}},bo=fe.vnode;fe.vnode=function(r){typeof r.type=="string"&&(function(e){var n=e.props,s=e.type,i={},o=s.indexOf("-")===-1;for(var a in n){var c=n[a];if(!(a==="value"&&"defaultValue"in n&&c==null||Ml&&a==="children"&&s==="noscript"||a==="class"||a==="className")){var d=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&c===!0?c="":d==="translate"&&c==="no"?c=!1:d[0]==="o"&&d[1]==="n"?d==="ondoubleclick"?a="ondblclick":d!=="onchange"||s!=="input"&&s!=="textarea"||Pl(n.type)?d==="onfocus"?a="onfocusin":d==="onblur"?a="onfocusout":Ll.test(a)&&(a=d):d=a="oninput":o&&Ol.test(a)?a=a.replace(Il,"-$&").toLowerCase():c===null&&(c=void 0),d==="oninput"&&i[a=d]&&(a="oninputCapture"),i[a]=c}}s=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=jt(n.children).forEach(function(l){l.props.selected=i.value.indexOf(l.props.value)!=-1})),s=="select"&&i.defaultValue!=null&&(i.value=jt(n.children).forEach(function(l){l.props.selected=i.multiple?i.defaultValue.indexOf(l.props.value)!=-1:i.defaultValue==l.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",Ul)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),e.props=i})(r),r.$$typeof=qa,bo&&bo(r)};var vo=fe.__r;fe.__r=function(r){vo&&vo(r),Ti=r.__c};var yo=fe.diffed;fe.diffed=function(r){yo&&yo(r);var e=r.props,n=r.__e;n!=null&&r.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value),Ti=null};var zl={ReactCurrentDispatcher:{current:{readContext:function(r){return Ti.__n[r.__c].props.value},useCallback:In,useContext:on,useDebugValue:Da,useDeferredValue:Ba,useEffect:ee,useId:Aa,useImperativeHandle:Si,useInsertionEffect:Fa,useLayoutEffect:sn,useMemo:Ae,useReducer:yr,useRef:$e,useState:g,useSyncExternalStore:Pa,useTransition:ja}}};function Hl(r){return ct.bind(null,r)}function _r(r){return!!r&&r.$$typeof===qa}function ql(r){return _r(r)&&r.type===Q}function Wl(r){return!!r&&!!r.displayName&&(typeof r.displayName=="string"||r.displayName instanceof String)&&r.displayName.startsWith("Memo(")}function Gs(r){return _r(r)?Hs.apply(null,arguments):r}function Vl(r){return!!r.__k&&(kn(null,r),!0)}function Gl(r){return r&&(r.base||r.nodeType===1&&r)||null}var Kl=function(r,e){return r(e)},Ql=function(r,e){return r(e)},Yl=Q,Xl=_r,gn={useState:g,useId:Aa,useReducer:yr,useEffect:ee,useLayoutEffect:sn,useInsertionEffect:Fa,useTransition:ja,useDeferredValue:Ba,useSyncExternalStore:Pa,startTransition:Ra,useRef:$e,useImperativeHandle:Si,useMemo:Ae,useCallback:In,useContext:on,useDebugValue:Da,version:"18.3.1",Children:Sl,render:Rl,hydrate:Bl,unmountComponentAtNode:Vl,createPortal:Al,createElement:ct,createContext:_n,createFactory:Hl,cloneElement:Gs,createRef:ll,Fragment:Q,isValidElement:_r,isElement:Xl,isFragment:ql,isMemo:Wl,findDOMNode:Gl,Component:Bt,PureComponent:Vs,memo:$a,forwardRef:Ei,flushSync:Ql,unstable_batchedUpdates:Kl,StrictMode:Yl,Suspense:Hr,SuspenseList:nr,lazy:El,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:zl},Wa={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wo=gn.createContext&&gn.createContext(Wa),Zl=["attr","size","title"];function Jl(r,e){if(r==null)return{};var n=ed(r,e),s,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)s=o[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function ed(r,e){if(r==null)return{};var n={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;n[s]=r[s]}return n}function Jr(){return Jr=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},Jr.apply(this,arguments)}function _o(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),n.push.apply(n,s)}return n}function es(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_o(Object(n),!0).forEach(function(s){td(r,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(n,s))})}return r}function td(r,e,n){return e=nd(e),e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function nd(r){var e=rd(r,"string");return typeof e=="symbol"?e:e+""}function rd(r,e){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var s=n.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Va(r){return r&&r.map((e,n)=>gn.createElement(e.tag,es({key:n},e.attr),Va(e.child)))}function U(r){return e=>gn.createElement(sd,Jr({attr:es({},r.attr)},e),Va(r.child))}function sd(r){var e=n=>{var{attr:s,size:i,title:o}=r,a=Jl(r,Zl),c=i||n.size||"1em",d;return n.className&&(d=n.className),r.className&&(d=(d?d+" ":"")+r.className),gn.createElement("svg",Jr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,a,{className:d,style:es(es({color:r.color||n.color},n.style),r.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&gn.createElement("title",null,o),r.children)};return wo!==void 0?gn.createElement(wo.Consumer,null,n=>e(n)):e(Wa)}function id(r){return U({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(r)}function od(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(r)}function ad(r){return U({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(r)}function xr(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(r)}function cd(r){return U({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M633.82 458.1l-90.62-70.05c.19-1.38.8-2.66.8-4.06.05-7.55-2.61-15.27-8.61-21.71-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84c-40.33 8.38-74.66 31.07-97.59 62.57L45.47 3.37C38.49-2.05 28.43-.8 23.01 6.18L3.37 31.45C-2.05 38.42-.8 48.47 6.18 53.9l588.35 454.73c6.98 5.43 17.03 4.17 22.46-2.81l19.64-25.27c5.42-6.97 4.17-17.02-2.81-22.45zM157.23 251.54c-8.61 67.96-36.41 93.33-52.62 110.75-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h241.92L157.23 251.54zM320 512c35.32 0 63.97-28.65 63.97-64H256.03c0 35.35 28.65 64 63.97 64z"},child:[]}]})(r)}function bn(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"},child:[]}]})(r)}function ld(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"},child:[]}]})(r)}function xo(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(r)}function dd(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(r)}function qt(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(r)}function ud(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 448H48a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h352a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zm16-288H256v-48h40a8 8 0 0 0 8-8V56a8 8 0 0 0-8-8h-40V8a8 8 0 0 0-8-8h-48a8 8 0 0 0-8 8v40h-40a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h40v48H32a32 32 0 0 0-30.52 41.54L74.56 416h298.88l73.08-214.46A32 32 0 0 0 416 160z"},child:[]}]})(r)}function hd(r){return U({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M19 272.47l40.63 18.06a32 32 0 0 0 24.88.47l12.78-5.12a32 32 0 0 0 18.76-20.5l9.22-30.65a24 24 0 0 1 12.55-15.65L159.94 208v50.33a48 48 0 0 1-26.53 42.94l-57.22 28.65A80 80 0 0 0 32 401.48V416h319.86V224c0-106-85.92-192-191.92-192H12A12 12 0 0 0 0 44a16.9 16.9 0 0 0 1.79 7.58L16 80l-9 9a24 24 0 0 0-7 17v137.21a32 32 0 0 0 19 29.26zM52 128a20 20 0 1 1-20 20 20 20 0 0 1 20-20zm316 320H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h352a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(r)}function fd(r){return U({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M105.1 224H80a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h16v5.49c0 44-4.14 86.6-24 122.51h176c-19.89-35.91-24-78.51-24-122.51V288h16a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-25.1c29.39-18.38 49.1-50.78 49.1-88a104 104 0 0 0-208 0c0 37.22 19.71 69.62 49.1 88zM304 448H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h288a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16z"},child:[]}]})(r)}function pd(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"},child:[]}]})(r)}function mn(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256,8C119,8,8,119,8,256S119,504,256,504,504,393,504,256,393,8,256,8Zm92.49,313h0l-20,25a16,16,0,0,1-22.49,2.5h0l-67-49.72a40,40,0,0,1-15-31.23V112a16,16,0,0,1,16-16h32a16,16,0,0,1,16,16V256l58,42.5A16,16,0,0,1,348.49,321Z"},child:[]}]})(r)}function md(r){return U({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(r)}function Di(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(r)}function gd(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"},child:[]}]})(r)}function bd(r){return U({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(r)}function Ga(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z"},child:[]}]})(r)}function Ks(r){return U({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"},child:[]}]})(r)}function Ka(r){return U({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(r)}function Mn(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"},child:[]}]})(r)}function Ft(r){return U({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(r)}function vd(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M349.565 98.783C295.978 98.783 251.721 64 184.348 64c-24.955 0-47.309 4.384-68.045 12.013a55.947 55.947 0 0 0 3.586-23.562C118.117 24.015 94.806 1.206 66.338.048 34.345-1.254 8 24.296 8 56c0 19.026 9.497 35.825 24 45.945V488c0 13.255 10.745 24 24 24h16c13.255 0 24-10.745 24-24v-94.4c28.311-12.064 63.582-22.122 114.435-22.122 53.588 0 97.844 34.783 165.217 34.783 48.169 0 86.667-16.294 122.505-40.858C506.84 359.452 512 349.571 512 339.045v-243.1c0-23.393-24.269-38.87-45.485-29.016-34.338 15.948-76.454 31.854-116.95 31.854z"},child:[]}]})(r)}function yd(r){return U({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M480.07 96H160a160 160 0 1 0 114.24 272h91.52A160 160 0 1 0 480.07 96zM248 268a12 12 0 0 1-12 12h-52v52a12 12 0 0 1-12 12h-24a12 12 0 0 1-12-12v-52H84a12 12 0 0 1-12-12v-24a12 12 0 0 1 12-12h52v-52a12 12 0 0 1 12-12h24a12 12 0 0 1 12 12v52h52a12 12 0 0 1 12 12zm216 76a40 40 0 1 1 40-40 40 40 0 0 1-40 40zm64-96a40 40 0 1 1 40-40 40 40 0 0 1-40 40z"},child:[]}]})(r)}function Co(r){return U({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M434.7 64h-85.9c-8 0-15.7 3-21.6 8.4l-98.3 90c-.1.1-.2.3-.3.4-16.6 15.6-16.3 40.5-2.1 56 12.7 13.9 39.4 17.6 56.1 2.7.1-.1.3-.1.4-.2l79.9-73.2c6.5-5.9 16.7-5.5 22.6 1 6 6.5 5.5 16.6-1 22.6l-26.1 23.9L504 313.8c2.9 2.4 5.5 5 7.9 7.7V128l-54.6-54.6c-5.9-6-14.1-9.4-22.6-9.4zM544 128.2v223.9c0 17.7 14.3 32 32 32h64V128.2h-96zm48 223.9c-8.8 0-16-7.2-16-16s7.2-16 16-16 16 7.2 16 16-7.2 16-16 16zM0 384h64c17.7 0 32-14.3 32-32V128.2H0V384zm48-63.9c8.8 0 16 7.2 16 16s-7.2 16-16 16-16-7.2-16-16c0-8.9 7.2-16 16-16zm435.9 18.6L334.6 217.5l-30 27.5c-29.7 27.1-75.2 24.5-101.7-4.4-26.9-29.4-24.8-74.9 4.4-101.7L289.1 64h-83.8c-8.5 0-16.6 3.4-22.6 9.4L128 128v223.9h18.3l90.5 81.9c27.4 22.3 67.7 18.1 90-9.3l.2-.2 17.9 15.5c15.9 13 39.4 10.5 52.3-5.4l31.4-38.6 5.4 4.4c13.7 11.1 33.9 9.1 45-4.7l9.5-11.7c11.2-13.8 9.1-33.9-4.6-45.1z"},child:[]}]})(r)}function wd(r){return U({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24 0 90.965 51.016 167.734 120.842 192C75.016 280.266 24 357.035 24 448c-13.255 0-24 10.745-24 24v16c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24v-16c0-13.255-10.745-24-24-24 0-90.965-51.016-167.734-120.842-192C308.984 231.734 360 154.965 360 64c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-75.078 384H99.08c17.059-46.797 52.096-80 92.92-80 40.821 0 75.862 33.196 92.922 80zm.019-256H99.078C91.988 108.548 88 86.748 88 64h208c0 22.805-3.987 44.587-11.059 64z"},child:[]}]})(r)}function _d(r){return U({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M528 32H48C21.5 32 0 53.5 0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4 0-8-3.6-8-8v-16zM176 192c35.3 0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4 0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4 0-18.8-10-15.6-19.8z"},child:[]}]})(r)}function Qa(r){return U({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M480 416v16c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V176c0-26.51 21.49-48 48-48h16v208c0 44.112 35.888 80 80 80h336zm96-80V80c0-26.51-21.49-48-48-48H144c-26.51 0-48 21.49-48 48v256c0 26.51 21.49 48 48 48h384c26.51 0 48-21.49 48-48zM256 128c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-96 144l55.515-55.515c4.686-4.686 12.284-4.686 16.971 0L272 256l135.515-135.515c4.686-4.686 12.284-4.686 16.971 0L512 208v112H160v-48z"},child:[]}]})(r)}function xd(r){return U({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M471.1 96C405 96 353.3 137.3 320 174.6 286.7 137.3 235 96 168.9 96 75.8 96 0 167.8 0 256s75.8 160 168.9 160c66.1 0 117.8-41.3 151.1-78.6 33.3 37.3 85 78.6 151.1 78.6 93.1 0 168.9-71.8 168.9-160S564.2 96 471.1 96zM168.9 320c-40.2 0-72.9-28.7-72.9-64s32.7-64 72.9-64c38.2 0 73.4 36.1 94 64-20.4 27.6-55.9 64-94 64zm302.2 0c-38.2 0-73.4-36.1-94-64 20.4-27.6 55.9-64 94-64 40.2 0 72.9 28.7 72.9 64s-32.7 64-72.9 64z"},child:[]}]})(r)}function Qs(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(r)}function ur(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M512 176.001C512 273.203 433.202 352 336 352c-11.22 0-22.19-1.062-32.827-3.069l-24.012 27.014A23.999 23.999 0 0 1 261.223 384H224v40c0 13.255-10.745 24-24 24h-40v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24v-78.059c0-6.365 2.529-12.47 7.029-16.971l161.802-161.802C163.108 213.814 160 195.271 160 176 160 78.798 238.797.001 335.999 0 433.488-.001 512 78.511 512 176.001zM336 128c0 26.51 21.49 48 48 48s48-21.49 48-48-21.49-48-48-48-48 21.49-48 48z"},child:[]}]})(r)}function Ai(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"},child:[]}]})(r)}function Oi(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(r)}function Ya(r){return U({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M272 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h224c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm112-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v312z"},child:[]}]})(r)}function ms(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(r)}function Ys(r){return U({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M320,32a32,32,0,0,0-64,0v96h64Zm48,128H16A16,16,0,0,0,0,176v32a16,16,0,0,0,16,16H32v32A160.07,160.07,0,0,0,160,412.8V512h64V412.8A160.07,160.07,0,0,0,352,256V224h16a16,16,0,0,0,16-16V176A16,16,0,0,0,368,160ZM128,32a32,32,0,0,0-64,0v96h64Z"},child:[]}]})(r)}function Cd(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(r)}function Nd(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(r)}function Sd(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(r)}function kd(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 448h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84c17.7 0 32-14.3 32-32V160c0-17.7-14.3-32-32-32h-84c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h84c53 0 96 43 96 96v192c0 53-43 96-96 96zm-47-201L201 79c-15-15-41-4.5-41 17v96H24c-13.3 0-24 10.7-24 24v96c0 13.3 10.7 24 24 24h136v96c0 21.5 26 32 41 17l168-168c9.3-9.4 9.3-24.6 0-34z"},child:[]}]})(r)}function Ed(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(r)}function Td(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM224 480c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm176-108c0 6.6-5.4 12-12 12H60c-6.6 0-12-5.4-12-12V60c0-6.6 5.4-12 12-12h328c6.6 0 12 5.4 12 12v312z"},child:[]}]})(r)}function Dd(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 56v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56zm40 200c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24zm272 256c-20.183 0-29.485-39.293-33.931-57.795-5.206-21.666-10.589-44.07-25.393-58.902-32.469-32.524-49.503-73.967-89.117-113.111a11.98 11.98 0 0 1-3.558-8.521V59.901c0-6.541 5.243-11.878 11.783-11.998 15.831-.29 36.694-9.079 52.651-16.178C256.189 17.598 295.709.017 343.995 0h2.844c42.777 0 93.363.413 113.774 29.737 8.392 12.057 10.446 27.034 6.148 44.632 16.312 17.053 25.063 48.863 16.382 74.757 17.544 23.432 19.143 56.132 9.308 79.469l.11.11c11.893 11.949 19.523 31.259 19.439 49.197-.156 30.352-26.157 58.098-59.553 58.098H350.723C358.03 364.34 384 388.132 384 430.548 384 504 336 512 312 512z"},child:[]}]})(r)}function Ad(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M104 224H24c-13.255 0-24 10.745-24 24v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V248c0-13.255-10.745-24-24-24zM64 472c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zM384 81.452c0 42.416-25.97 66.208-33.277 94.548h101.723c33.397 0 59.397 27.746 59.553 58.098.084 17.938-7.546 37.249-19.439 49.197l-.11.11c9.836 23.337 8.237 56.037-9.308 79.469 8.681 25.895-.069 57.704-16.382 74.757 4.298 17.598 2.244 32.575-6.148 44.632C440.202 511.587 389.616 512 346.839 512l-2.845-.001c-48.287-.017-87.806-17.598-119.56-31.725-15.957-7.099-36.821-15.887-52.651-16.178-6.54-.12-11.783-5.457-11.783-11.998v-213.77c0-3.2 1.282-6.271 3.558-8.521 39.614-39.144 56.648-80.587 89.117-113.111 14.804-14.832 20.188-37.236 25.393-58.902C282.515 39.293 291.817 0 312 0c24 0 72 8 72 81.452z"},child:[]}]})(r)}function hr(r){return U({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(r)}function Li(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(r)}function Xa(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 256H152V152.9c0-39.6 31.7-72.5 71.3-72.9 40-.4 72.7 32.1 72.7 72v16c0 13.3 10.7 24 24 24h32c13.3 0 24-10.7 24-24v-16C376 68 307.5-.3 223.5 0 139.5.3 72 69.5 72 153.5V256H48c-26.5 0-48 21.5-48 48v160c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V304c0-26.5-21.5-48-48-48zM264 408c0 22.1-17.9 40-40 40s-40-17.9-40-40v-48c0-22.1 17.9-40 40-40s40 17.9 40 40v48z"},child:[]}]})(r)}function Od(r){return U({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"},child:[]}]})(r)}function Ii(r){return U({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(r)}function Pn(r){return U({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}function Ld(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 225.31c4.674-22.647.864-44.538-8.99-62.99 2.958-23.868-4.021-48.565-17.34-66.99C438.986 39.423 404.117 0 327 0c-7 0-15 .01-22.22.01C201.195.01 168.997 40 128 40h-10.845c-5.64-4.975-13.042-8-21.155-8H32C14.327 32 0 46.327 0 64v240c0 17.673 14.327 32 32 32h64c11.842 0 22.175-6.438 27.708-16h7.052c19.146 16.953 46.013 60.653 68.76 83.4 13.667 13.667 10.153 108.6 71.76 108.6 57.58 0 95.27-31.936 95.27-104.73 0-18.41-3.93-33.73-8.85-46.54h36.48c48.602 0 85.82-41.565 85.82-85.58 0-19.15-4.96-34.99-13.73-49.84zM64 296c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm330.18 16.73H290.19c0 37.82 28.36 55.37 28.36 94.54 0 23.75 0 56.73-47.27 56.73-18.91-18.91-9.46-66.18-37.82-94.54C206.9 342.89 167.28 272 138.92 272H128V85.83c53.611 0 100.001-37.82 171.64-37.82h37.82c35.512 0 60.82 17.12 53.12 65.9 15.2 8.16 26.5 36.44 13.94 57.57 21.581 20.384 18.699 51.065 5.21 65.62 9.45 0 22.36 18.91 22.27 37.81-.09 18.91-16.71 37.82-37.82 37.82z"},child:[]}]})(r)}function Id(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"},child:[]}]})(r)}function Md(r){const[e,n]=g(r.likes.valueOf()),[s,i]=g(r.dislikes.valueOf()),[o,a]=g(r.dislikes.valueOf()),[c,d]=g(!1),[l,u]=g(!1),[h,p]=g("");ee(()=>{async function m(){try{const b=(await q.blog.getBlogByIdReaction(r.id)).data;d(b[0]),u(b[1])}catch(b){if(b?.status==401){console.log("Not logged in: won't fetch previous reactions");return}const y=b instanceof Error?b.message:"Fetching previous reactions failed";p(y),console.error("Error:",b)}}m()},[r.id]);async function f(m){try{const b=(await q.blog.patchBlogByIdReaction(r.id,{type:m?"like":"dislike"})).data;m?(n(c?e-1:e+1),l&&(i(s-1),u(!1))):(i(l?s-1:s+1),c&&(n(e-1),d(!1))),m?d(!c):u(!l)}catch(b){if(b?.status==401){console.log("401 error: redirecting to /login"),window.location.href="/login";return}const y=b instanceof Error?b.message:"Reacting failed";p(y),console.error("Error:",b)}}return h?t(Q,{children:t("div",{role:"alert",className:"alert alert-error",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("span",{children:h})]})}):t("div",{class:"pt-1 text-lg",children:[t("div",{class:"inline mr-4",children:[t("span",{children:e}),t("span",{className:"cursor-pointer px-2 text-green-500 hover:text-[#2196f3] inline-block",onClick:async()=>{await f(!0)},children:c?t(Ad,{}):t(Id,{})})]}),t("div",{class:"inline mr-4",children:[t("span",{children:s}),t("span",{className:"cursor-pointer px-2 text-red-500 hover:text-[#2196f3] inline-block",onClick:async()=>{await f(!1)},children:l?t(Dd,{}):t(Ld,{})})]}),t("div",{class:"inline mr-4",children:[t("span",{children:r.comments}),t("span",{className:"cursor-pointer px-2 inline-block",onClick:async()=>{await f(!1)},children:t(Di,{})})]})]})}/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Za,setPrototypeOf:No,isFrozen:Pd,getPrototypeOf:Rd,getOwnPropertyDescriptor:Bd}=Object;let{freeze:dt,seal:St,create:Xs}=Object,{apply:Zs,construct:Js}=typeof Reflect<"u"&&Reflect;dt||(dt=function(e){return e});St||(St=function(e){return e});Zs||(Zs=function(e,n){for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];return e.apply(n,i)});Js||(Js=function(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return new e(...s)});const Or=ut(Array.prototype.forEach),jd=ut(Array.prototype.lastIndexOf),So=ut(Array.prototype.pop),Wn=ut(Array.prototype.push),Fd=ut(Array.prototype.splice),qr=ut(String.prototype.toLowerCase),gs=ut(String.prototype.toString),bs=ut(String.prototype.match),Vn=ut(String.prototype.replace),$d=ut(String.prototype.indexOf),Ud=ut(String.prototype.trim),Et=ut(Object.prototype.hasOwnProperty),ot=ut(RegExp.prototype.test),Gn=zd(TypeError);function ut(r){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return Zs(r,e,s)}}function zd(r){return function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return Js(r,n)}}function be(r,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:qr;No&&No(r,null);let s=e.length;for(;s--;){let i=e[s];if(typeof i=="string"){const o=n(i);o!==i&&(Pd(e)||(e[s]=o),i=o)}r[i]=!0}return r}function Hd(r){for(let e=0;e<r.length;e++)Et(r,e)||(r[e]=null);return r}function Ht(r){const e=Xs(null);for(const[n,s]of Za(r))Et(r,n)&&(Array.isArray(s)?e[n]=Hd(s):s&&typeof s=="object"&&s.constructor===Object?e[n]=Ht(s):e[n]=s);return e}function Kn(r,e){for(;r!==null;){const s=Bd(r,e);if(s){if(s.get)return ut(s.get);if(typeof s.value=="function")return ut(s.value)}r=Rd(r)}function n(){return null}return n}const ko=dt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vs=dt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ys=dt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),qd=dt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ws=dt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Wd=dt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Eo=dt(["#text"]),To=dt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_s=dt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Do=dt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Lr=dt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Vd=St(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Gd=St(/<%[\w\W]*|[\w\W]*%>/gm),Kd=St(/\$\{[\w\W]*/gm),Qd=St(/^data-[\-\w.\u00B7-\uFFFF]+$/),Yd=St(/^aria-[\-\w]+$/),Ja=St(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Xd=St(/^(?:\w+script|data):/i),Zd=St(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ec=St(/^html$/i),Jd=St(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ao=Object.freeze({__proto__:null,ARIA_ATTR:Yd,ATTR_WHITESPACE:Zd,CUSTOM_ELEMENT:Jd,DATA_ATTR:Qd,DOCTYPE_NAME:ec,ERB_EXPR:Gd,IS_ALLOWED_URI:Ja,IS_SCRIPT_OR_DATA:Xd,MUSTACHE_EXPR:Vd,TMPLIT_EXPR:Kd});const Qn={element:1,text:3,progressingInstruction:7,comment:8,document:9},eu=function(){return typeof window>"u"?null:window},tu=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let s=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(s=n.getAttribute(i));const o="dompurify"+(s?"#"+s:"");try{return e.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},Oo=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function tc(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eu();const e=se=>tc(se);if(e.version="3.3.0",e.removed=[],!r||!r.document||r.document.nodeType!==Qn.document||!r.Element)return e.isSupported=!1,e;let{document:n}=r;const s=n,i=s.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:c,Element:d,NodeFilter:l,NamedNodeMap:u=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:f}=r,m=d.prototype,b=Kn(m,"cloneNode"),y=Kn(m,"remove"),x=Kn(m,"nextSibling"),w=Kn(m,"childNodes"),S=Kn(m,"parentNode");if(typeof a=="function"){const se=n.createElement("template");se.content&&se.content.ownerDocument&&(n=se.content.ownerDocument)}let _,C="";const{implementation:P,createNodeIterator:A,createDocumentFragment:k,getElementsByTagName:v}=n,{importNode:M}=s;let I=Oo();e.isSupported=typeof Za=="function"&&typeof S=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:z,ERB_EXPR:V,TMPLIT_EXPR:G,DATA_ATTR:oe,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:j,CUSTOM_ELEMENT:ie}=Ao;let{IS_ALLOWED_URI:F}=Ao,D=null;const H=be({},[...ko,...vs,...ys,...ws,...Eo]);let W=null;const Y=be({},[...To,..._s,...Do,...Lr]);let K=Object.seal(Xs(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,ne=null;const R=Object.seal(Xs(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ue=!0,Oe=!0,Ie=!1,He=!0,Be=!1,Dt=!0,Xe=!1,ht=!1,At=!1,rt=!1,Ot=!1,kt=!1,Kt=!0,Lt=!1;const we="user-content-";let Le=!0,Ee=!1,Me={},Pe=null;const ke=be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Z=null;const Ne=be({},["audio","video","img","source","image","track"]);let bt=null;const pt=be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ze="http://www.w3.org/1998/Math/MathML",st="http://www.w3.org/2000/svg",Qe="http://www.w3.org/1999/xhtml";let It=Qe,Qt=!1,cn=null;const ln=be({},[Ze,st,Qe],gs);let Yt=be({},["mi","mo","mn","ms","mtext"]),Xt=be({},["annotation-xml"]);const jn=be({},["title","style","font","a","script"]);let zt=null;const dn=["application/xhtml+xml","text/html"],Fn="text/html";let Te=null,vt=null;const $n=n.createElement("form"),T=function(N){return N instanceof RegExp||N instanceof Function},yt=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(vt&&vt===N)){if((!N||typeof N!="object")&&(N={}),N=Ht(N),zt=dn.indexOf(N.PARSER_MEDIA_TYPE)===-1?Fn:N.PARSER_MEDIA_TYPE,Te=zt==="application/xhtml+xml"?gs:qr,D=Et(N,"ALLOWED_TAGS")?be({},N.ALLOWED_TAGS,Te):H,W=Et(N,"ALLOWED_ATTR")?be({},N.ALLOWED_ATTR,Te):Y,cn=Et(N,"ALLOWED_NAMESPACES")?be({},N.ALLOWED_NAMESPACES,gs):ln,bt=Et(N,"ADD_URI_SAFE_ATTR")?be(Ht(pt),N.ADD_URI_SAFE_ATTR,Te):pt,Z=Et(N,"ADD_DATA_URI_TAGS")?be(Ht(Ne),N.ADD_DATA_URI_TAGS,Te):Ne,Pe=Et(N,"FORBID_CONTENTS")?be({},N.FORBID_CONTENTS,Te):ke,ge=Et(N,"FORBID_TAGS")?be({},N.FORBID_TAGS,Te):Ht({}),ne=Et(N,"FORBID_ATTR")?be({},N.FORBID_ATTR,Te):Ht({}),Me=Et(N,"USE_PROFILES")?N.USE_PROFILES:!1,ue=N.ALLOW_ARIA_ATTR!==!1,Oe=N.ALLOW_DATA_ATTR!==!1,Ie=N.ALLOW_UNKNOWN_PROTOCOLS||!1,He=N.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Be=N.SAFE_FOR_TEMPLATES||!1,Dt=N.SAFE_FOR_XML!==!1,Xe=N.WHOLE_DOCUMENT||!1,rt=N.RETURN_DOM||!1,Ot=N.RETURN_DOM_FRAGMENT||!1,kt=N.RETURN_TRUSTED_TYPE||!1,At=N.FORCE_BODY||!1,Kt=N.SANITIZE_DOM!==!1,Lt=N.SANITIZE_NAMED_PROPS||!1,Le=N.KEEP_CONTENT!==!1,Ee=N.IN_PLACE||!1,F=N.ALLOWED_URI_REGEXP||Ja,It=N.NAMESPACE||Qe,Yt=N.MATHML_TEXT_INTEGRATION_POINTS||Yt,Xt=N.HTML_INTEGRATION_POINTS||Xt,K=N.CUSTOM_ELEMENT_HANDLING||{},N.CUSTOM_ELEMENT_HANDLING&&T(N.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=N.CUSTOM_ELEMENT_HANDLING.tagNameCheck),N.CUSTOM_ELEMENT_HANDLING&&T(N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),N.CUSTOM_ELEMENT_HANDLING&&typeof N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Be&&(Oe=!1),Ot&&(rt=!0),Me&&(D=be({},Eo),W=[],Me.html===!0&&(be(D,ko),be(W,To)),Me.svg===!0&&(be(D,vs),be(W,_s),be(W,Lr)),Me.svgFilters===!0&&(be(D,ys),be(W,_s),be(W,Lr)),Me.mathMl===!0&&(be(D,ws),be(W,Do),be(W,Lr))),N.ADD_TAGS&&(typeof N.ADD_TAGS=="function"?R.tagCheck=N.ADD_TAGS:(D===H&&(D=Ht(D)),be(D,N.ADD_TAGS,Te))),N.ADD_ATTR&&(typeof N.ADD_ATTR=="function"?R.attributeCheck=N.ADD_ATTR:(W===Y&&(W=Ht(W)),be(W,N.ADD_ATTR,Te))),N.ADD_URI_SAFE_ATTR&&be(bt,N.ADD_URI_SAFE_ATTR,Te),N.FORBID_CONTENTS&&(Pe===ke&&(Pe=Ht(Pe)),be(Pe,N.FORBID_CONTENTS,Te)),Le&&(D["#text"]=!0),Xe&&be(D,["html","head","body"]),D.table&&(be(D,["tbody"]),delete ge.tbody),N.TRUSTED_TYPES_POLICY){if(typeof N.TRUSTED_TYPES_POLICY.createHTML!="function")throw Gn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof N.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Gn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=N.TRUSTED_TYPES_POLICY,C=_.createHTML("")}else _===void 0&&(_=tu(f,i)),_!==null&&typeof C=="string"&&(C=_.createHTML(""));dt&&dt(N),vt=N}},Je=be({},[...vs,...ys,...qd]),_e=be({},[...ws,...Wd]),B=function(N){let $=S(N);(!$||!$.tagName)&&($={namespaceURI:It,tagName:"template"});const J=qr(N.tagName),Se=qr($.tagName);return cn[N.namespaceURI]?N.namespaceURI===st?$.namespaceURI===Qe?J==="svg":$.namespaceURI===Ze?J==="svg"&&(Se==="annotation-xml"||Yt[Se]):!!Je[J]:N.namespaceURI===Ze?$.namespaceURI===Qe?J==="math":$.namespaceURI===st?J==="math"&&Xt[Se]:!!_e[J]:N.namespaceURI===Qe?$.namespaceURI===st&&!Xt[Se]||$.namespaceURI===Ze&&!Yt[Se]?!1:!_e[J]&&(jn[J]||!Je[J]):!!(zt==="application/xhtml+xml"&&cn[N.namespaceURI]):!1},xe=function(N){Wn(e.removed,{element:N});try{S(N).removeChild(N)}catch{y(N)}},pe=function(N,$){try{Wn(e.removed,{attribute:$.getAttributeNode(N),from:$})}catch{Wn(e.removed,{attribute:null,from:$})}if($.removeAttribute(N),N==="is")if(rt||Ot)try{xe($)}catch{}else try{$.setAttribute(N,"")}catch{}},je=function(N){let $=null,J=null;if(At)N="<remove></remove>"+N;else{const Fe=bs(N,/^[\r\n\t ]+/);J=Fe&&Fe[0]}zt==="application/xhtml+xml"&&It===Qe&&(N='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+N+"</body></html>");const Se=_?_.createHTML(N):N;if(It===Qe)try{$=new p().parseFromString(Se,zt)}catch{}if(!$||!$.documentElement){$=P.createDocument(It,"template",null);try{$.documentElement.innerHTML=Qt?C:Se}catch{}}const Ge=$.body||$.documentElement;return N&&J&&Ge.insertBefore(n.createTextNode(J),Ge.childNodes[0]||null),It===Qe?v.call($,Xe?"html":"body")[0]:Xe?$.documentElement:Ge},et=function(N){return A.call(N.ownerDocument||N,N,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},Ve=function(N){return N instanceof h&&(typeof N.nodeName!="string"||typeof N.textContent!="string"||typeof N.removeChild!="function"||!(N.attributes instanceof u)||typeof N.removeAttribute!="function"||typeof N.setAttribute!="function"||typeof N.namespaceURI!="string"||typeof N.insertBefore!="function"||typeof N.hasChildNodes!="function")},Un=function(N){return typeof c=="function"&&N instanceof c};function wt(se,N,$){Or(se,J=>{J.call(e,N,$,vt)})}const re=function(N){let $=null;if(wt(I.beforeSanitizeElements,N,null),Ve(N))return xe(N),!0;const J=Te(N.nodeName);if(wt(I.uponSanitizeElement,N,{tagName:J,allowedTags:D}),Dt&&N.hasChildNodes()&&!Un(N.firstElementChild)&&ot(/<[/\w!]/g,N.innerHTML)&&ot(/<[/\w!]/g,N.textContent)||N.nodeType===Qn.progressingInstruction||Dt&&N.nodeType===Qn.comment&&ot(/<[/\w]/g,N.data))return xe(N),!0;if(!(R.tagCheck instanceof Function&&R.tagCheck(J))&&(!D[J]||ge[J])){if(!ge[J]&&zn(J)&&(K.tagNameCheck instanceof RegExp&&ot(K.tagNameCheck,J)||K.tagNameCheck instanceof Function&&K.tagNameCheck(J)))return!1;if(Le&&!Pe[J]){const Se=S(N)||N.parentNode,Ge=w(N)||N.childNodes;if(Ge&&Se){const Fe=Ge.length;for(let tt=Fe-1;tt>=0;--tt){const _t=b(Ge[tt],!0);_t.__removalCount=(N.__removalCount||0)+1,Se.insertBefore(_t,x(N))}}}return xe(N),!0}return N instanceof d&&!B(N)||(J==="noscript"||J==="noembed"||J==="noframes")&&ot(/<\/no(script|embed|frames)/i,N.innerHTML)?(xe(N),!0):(Be&&N.nodeType===Qn.text&&($=N.textContent,Or([z,V,G],Se=>{$=Vn($,Se," ")}),N.textContent!==$&&(Wn(e.removed,{element:N.cloneNode()}),N.textContent=$)),wt(I.afterSanitizeElements,N,null),!1)},Cr=function(N,$,J){if(Kt&&($==="id"||$==="name")&&(J in n||J in $n))return!1;if(!(Oe&&!ne[$]&&ot(oe,$))){if(!(ue&&ot(X,$))){if(!(R.attributeCheck instanceof Function&&R.attributeCheck($,N))){if(!W[$]||ne[$]){if(!(zn(N)&&(K.tagNameCheck instanceof RegExp&&ot(K.tagNameCheck,N)||K.tagNameCheck instanceof Function&&K.tagNameCheck(N))&&(K.attributeNameCheck instanceof RegExp&&ot(K.attributeNameCheck,$)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck($,N))||$==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&ot(K.tagNameCheck,J)||K.tagNameCheck instanceof Function&&K.tagNameCheck(J))))return!1}else if(!bt[$]){if(!ot(F,Vn(J,j,""))){if(!(($==="src"||$==="xlink:href"||$==="href")&&N!=="script"&&$d(J,"data:")===0&&Z[N])){if(!(Ie&&!ot(te,Vn(J,j,"")))){if(J)return!1}}}}}}}return!0},zn=function(N){return N!=="annotation-xml"&&bs(N,ie)},Nr=function(N){wt(I.beforeSanitizeAttributes,N,null);const{attributes:$}=N;if(!$||Ve(N))return;const J={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W,forceKeepAttr:void 0};let Se=$.length;for(;Se--;){const Ge=$[Se],{name:Fe,namespaceURI:tt,value:_t}=Ge,Mt=Te(Fe),Hn=_t;let qe=Fe==="value"?Hn:Ud(Hn);if(J.attrName=Mt,J.attrValue=qe,J.keepAttr=!0,J.forceKeepAttr=void 0,wt(I.uponSanitizeAttribute,N,J),qe=J.attrValue,Lt&&(Mt==="id"||Mt==="name")&&(pe(Fe,N),qe=we+qe),Dt&&ot(/((--!?|])>)|<\/(style|title|textarea)/i,qe)){pe(Fe,N);continue}if(Mt==="attributename"&&bs(qe,"href")){pe(Fe,N);continue}if(J.forceKeepAttr)continue;if(!J.keepAttr){pe(Fe,N);continue}if(!He&&ot(/\/>/i,qe)){pe(Fe,N);continue}Be&&Or([z,V,G],kr=>{qe=Vn(qe,kr," ")});const qn=Te(N.nodeName);if(!Cr(qn,Mt,qe)){pe(Fe,N);continue}if(_&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!tt)switch(f.getAttributeType(qn,Mt)){case"TrustedHTML":{qe=_.createHTML(qe);break}case"TrustedScriptURL":{qe=_.createScriptURL(qe);break}}if(qe!==Hn)try{tt?N.setAttributeNS(tt,Fe,qe):N.setAttribute(Fe,qe),Ve(N)?xe(N):So(e.removed)}catch{pe(Fe,N)}}wt(I.afterSanitizeAttributes,N,null)},Sr=function se(N){let $=null;const J=et(N);for(wt(I.beforeSanitizeShadowDOM,N,null);$=J.nextNode();)wt(I.uponSanitizeShadowNode,$,null),re($),Nr($),$.content instanceof o&&se($.content);wt(I.afterSanitizeShadowDOM,N,null)};return e.sanitize=function(se){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=null,J=null,Se=null,Ge=null;if(Qt=!se,Qt&&(se="<!-->"),typeof se!="string"&&!Un(se))if(typeof se.toString=="function"){if(se=se.toString(),typeof se!="string")throw Gn("dirty is not a string, aborting")}else throw Gn("toString is not a function");if(!e.isSupported)return se;if(ht||yt(N),e.removed=[],typeof se=="string"&&(Ee=!1),Ee){if(se.nodeName){const _t=Te(se.nodeName);if(!D[_t]||ge[_t])throw Gn("root node is forbidden and cannot be sanitized in-place")}}else if(se instanceof c)$=je("<!---->"),J=$.ownerDocument.importNode(se,!0),J.nodeType===Qn.element&&J.nodeName==="BODY"||J.nodeName==="HTML"?$=J:$.appendChild(J);else{if(!rt&&!Be&&!Xe&&se.indexOf("<")===-1)return _&&kt?_.createHTML(se):se;if($=je(se),!$)return rt?null:kt?C:""}$&&At&&xe($.firstChild);const Fe=et(Ee?se:$);for(;Se=Fe.nextNode();)re(Se),Nr(Se),Se.content instanceof o&&Sr(Se.content);if(Ee)return se;if(rt){if(Ot)for(Ge=k.call($.ownerDocument);$.firstChild;)Ge.appendChild($.firstChild);else Ge=$;return(W.shadowroot||W.shadowrootmode)&&(Ge=M.call(s,Ge,!0)),Ge}let tt=Xe?$.outerHTML:$.innerHTML;return Xe&&D["!doctype"]&&$.ownerDocument&&$.ownerDocument.doctype&&$.ownerDocument.doctype.name&&ot(ec,$.ownerDocument.doctype.name)&&(tt="<!DOCTYPE "+$.ownerDocument.doctype.name+`>
`+tt),Be&&Or([z,V,G],_t=>{tt=Vn(tt,_t," ")}),_&&kt?_.createHTML(tt):tt},e.setConfig=function(){let se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt(se),ht=!0},e.clearConfig=function(){vt=null,ht=!1},e.isValidAttribute=function(se,N,$){vt||yt({});const J=Te(se),Se=Te(N);return Cr(J,Se,$)},e.addHook=function(se,N){typeof N=="function"&&Wn(I[se],N)},e.removeHook=function(se,N){if(N!==void 0){const $=jd(I[se],N);return $===-1?void 0:Fd(I[se],$,1)[0]}return So(I[se])},e.removeHooks=function(se){I[se]=[]},e.removeAllHooks=function(){I=Oo()},e}var nc=tc();function Wt(r){return Array.isArray?Array.isArray(r):ic(r)==="[object Array]"}function nu(r){if(typeof r=="string")return r;let e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function ru(r){return r==null?"":nu(r)}function Rt(r){return typeof r=="string"}function rc(r){return typeof r=="number"}function su(r){return r===!0||r===!1||iu(r)&&ic(r)=="[object Boolean]"}function sc(r){return typeof r=="object"}function iu(r){return sc(r)&&r!==null}function gt(r){return r!=null}function xs(r){return!r.trim().length}function ic(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}const ou="Incorrect 'index' type",au=r=>`Invalid value for key ${r}`,cu=r=>`Pattern length exceeds max of ${r}.`,lu=r=>`Missing ${r} property in key`,du=r=>`Property 'weight' in key '${r}' must be a positive integer`,Lo=Object.prototype.hasOwnProperty;class uu{constructor(e){this._keys=[],this._keyMap={};let n=0;e.forEach(s=>{let i=oc(s);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(s=>{s.weight/=n})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function oc(r){let e=null,n=null,s=null,i=1,o=null;if(Rt(r)||Wt(r))s=r,e=Io(r),n=ei(r);else{if(!Lo.call(r,"name"))throw new Error(lu("name"));const a=r.name;if(s=a,Lo.call(r,"weight")&&(i=r.weight,i<=0))throw new Error(du(a));e=Io(a),n=ei(a),o=r.getFn}return{path:e,id:n,weight:i,src:s,getFn:o}}function Io(r){return Wt(r)?r:r.split(".")}function ei(r){return Wt(r)?r.join("."):r}function hu(r,e){let n=[],s=!1;const i=(o,a,c)=>{if(gt(o))if(!a[c])n.push(o);else{let d=a[c];const l=o[d];if(!gt(l))return;if(c===a.length-1&&(Rt(l)||rc(l)||su(l)))n.push(ru(l));else if(Wt(l)){s=!0;for(let u=0,h=l.length;u<h;u+=1)i(l[u],a,c+1)}else a.length&&i(l,a,c+1)}};return i(r,Rt(e)?e.split("."):e,0),s?n:n[0]}const fu={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},pu={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(r,e)=>r.score===e.score?r.idx<e.idx?-1:1:r.score<e.score?-1:1},mu={location:0,threshold:.6,distance:100},gu={useExtendedSearch:!1,getFn:hu,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var de={...pu,...fu,...mu,...gu};const bu=/[^ ]+/g;function vu(r=1,e=3){const n=new Map,s=Math.pow(10,e);return{get(i){const o=i.match(bu).length;if(n.has(o))return n.get(o);const a=1/Math.pow(o,.5*r),c=parseFloat(Math.round(a*s)/s);return n.set(o,c),c},clear(){n.clear()}}}class Mi{constructor({getFn:e=de.getFn,fieldNormWeight:n=de.fieldNormWeight}={}){this.norm=vu(n,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((n,s)=>{this._keysMap[n.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Rt(this.docs[0])?this.docs.forEach((e,n)=>{this._addString(e,n)}):this.docs.forEach((e,n)=>{this._addObject(e,n)}),this.norm.clear())}add(e){const n=this.size();Rt(e)?this._addString(e,n):this._addObject(e,n)}removeAt(e){this.records.splice(e,1);for(let n=e,s=this.size();n<s;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(e,n){return e[this._keysMap[n]]}size(){return this.records.length}_addString(e,n){if(!gt(e)||xs(e))return;let s={v:e,i:n,n:this.norm.get(e)};this.records.push(s)}_addObject(e,n){let s={i:n,$:{}};this.keys.forEach((i,o)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(gt(a)){if(Wt(a)){let c=[];const d=[{nestedArrIndex:-1,value:a}];for(;d.length;){const{nestedArrIndex:l,value:u}=d.pop();if(gt(u))if(Rt(u)&&!xs(u)){let h={v:u,i:l,n:this.norm.get(u)};c.push(h)}else Wt(u)&&u.forEach((h,p)=>{d.push({nestedArrIndex:p,value:h})})}s.$[o]=c}else if(Rt(a)&&!xs(a)){let c={v:a,n:this.norm.get(a)};s.$[o]=c}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function ac(r,e,{getFn:n=de.getFn,fieldNormWeight:s=de.fieldNormWeight}={}){const i=new Mi({getFn:n,fieldNormWeight:s});return i.setKeys(r.map(oc)),i.setSources(e),i.create(),i}function yu(r,{getFn:e=de.getFn,fieldNormWeight:n=de.fieldNormWeight}={}){const{keys:s,records:i}=r,o=new Mi({getFn:e,fieldNormWeight:n});return o.setKeys(s),o.setIndexRecords(i),o}function Ir(r,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:i=de.distance,ignoreLocation:o=de.ignoreLocation}={}){const a=e/r.length;if(o)return a;const c=Math.abs(s-n);return i?a+c/i:c?1:a}function wu(r=[],e=de.minMatchCharLength){let n=[],s=-1,i=-1,o=0;for(let a=r.length;o<a;o+=1){let c=r[o];c&&s===-1?s=o:!c&&s!==-1&&(i=o-1,i-s+1>=e&&n.push([s,i]),s=-1)}return r[o-1]&&o-s>=e&&n.push([s,o-1]),n}const pn=32;function _u(r,e,n,{location:s=de.location,distance:i=de.distance,threshold:o=de.threshold,findAllMatches:a=de.findAllMatches,minMatchCharLength:c=de.minMatchCharLength,includeMatches:d=de.includeMatches,ignoreLocation:l=de.ignoreLocation}={}){if(e.length>pn)throw new Error(cu(pn));const u=e.length,h=r.length,p=Math.max(0,Math.min(s,h));let f=o,m=p;const b=c>1||d,y=b?Array(h):[];let x;for(;(x=r.indexOf(e,m))>-1;){let A=Ir(e,{currentLocation:x,expectedLocation:p,distance:i,ignoreLocation:l});if(f=Math.min(A,f),m=x+u,b){let k=0;for(;k<u;)y[x+k]=1,k+=1}}m=-1;let w=[],S=1,_=u+h;const C=1<<u-1;for(let A=0;A<u;A+=1){let k=0,v=_;for(;k<v;)Ir(e,{errors:A,currentLocation:p+v,expectedLocation:p,distance:i,ignoreLocation:l})<=f?k=v:_=v,v=Math.floor((_-k)/2+k);_=v;let M=Math.max(1,p-v+1),I=a?h:Math.min(p+v,h)+u,z=Array(I+2);z[I+1]=(1<<A)-1;for(let G=I;G>=M;G-=1){let oe=G-1,X=n[r.charAt(oe)];if(b&&(y[oe]=+!!X),z[G]=(z[G+1]<<1|1)&X,A&&(z[G]|=(w[G+1]|w[G])<<1|1|w[G+1]),z[G]&C&&(S=Ir(e,{errors:A,currentLocation:oe,expectedLocation:p,distance:i,ignoreLocation:l}),S<=f)){if(f=S,m=oe,m<=p)break;M=Math.max(1,2*p-m)}}if(Ir(e,{errors:A+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:l})>f)break;w=z}const P={isMatch:m>=0,score:Math.max(.001,S)};if(b){const A=wu(y,c);A.length?d&&(P.indices=A):P.isMatch=!1}return P}function xu(r){let e={};for(let n=0,s=r.length;n<s;n+=1){const i=r.charAt(n);e[i]=(e[i]||0)|1<<s-n-1}return e}const ts=String.prototype.normalize?(r=>r.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(r=>r);class cc{constructor(e,{location:n=de.location,threshold:s=de.threshold,distance:i=de.distance,includeMatches:o=de.includeMatches,findAllMatches:a=de.findAllMatches,minMatchCharLength:c=de.minMatchCharLength,isCaseSensitive:d=de.isCaseSensitive,ignoreDiacritics:l=de.ignoreDiacritics,ignoreLocation:u=de.ignoreLocation}={}){if(this.options={location:n,threshold:s,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:d,ignoreDiacritics:l,ignoreLocation:u},e=d?e:e.toLowerCase(),e=l?ts(e):e,this.pattern=e,this.chunks=[],!this.pattern.length)return;const h=(f,m)=>{this.chunks.push({pattern:f,alphabet:xu(f),startIndex:m})},p=this.pattern.length;if(p>pn){let f=0;const m=p%pn,b=p-m;for(;f<b;)h(this.pattern.substr(f,pn),f),f+=pn;if(m){const y=p-pn;h(this.pattern.substr(y),y)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:n,ignoreDiacritics:s,includeMatches:i}=this.options;if(e=n?e:e.toLowerCase(),e=s?ts(e):e,this.pattern===e){let b={isMatch:!0,score:0};return i&&(b.indices=[[0,e.length-1]]),b}const{location:o,distance:a,threshold:c,findAllMatches:d,minMatchCharLength:l,ignoreLocation:u}=this.options;let h=[],p=0,f=!1;this.chunks.forEach(({pattern:b,alphabet:y,startIndex:x})=>{const{isMatch:w,score:S,indices:_}=_u(e,b,y,{location:o+x,distance:a,threshold:c,findAllMatches:d,minMatchCharLength:l,includeMatches:i,ignoreLocation:u});w&&(f=!0),p+=S,w&&_&&(h=[...h,..._])});let m={isMatch:f,score:f?p/this.chunks.length:1};return f&&i&&(m.indices=h),m}}class an{constructor(e){this.pattern=e}static isMultiMatch(e){return Mo(e,this.multiRegex)}static isSingleMatch(e){return Mo(e,this.singleRegex)}search(){}}function Mo(r,e){const n=r.match(e);return n?n[1]:null}class Cu extends an{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const n=e===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class Nu extends an{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const s=e.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Su extends an{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const n=e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ku extends an{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const n=!e.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class Eu extends an{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const n=e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Tu extends an{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const n=!e.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class lc extends an{constructor(e,{location:n=de.location,threshold:s=de.threshold,distance:i=de.distance,includeMatches:o=de.includeMatches,findAllMatches:a=de.findAllMatches,minMatchCharLength:c=de.minMatchCharLength,isCaseSensitive:d=de.isCaseSensitive,ignoreDiacritics:l=de.ignoreDiacritics,ignoreLocation:u=de.ignoreLocation}={}){super(e),this._bitapSearch=new cc(e,{location:n,threshold:s,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:c,isCaseSensitive:d,ignoreDiacritics:l,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class dc extends an{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let n=0,s;const i=[],o=this.pattern.length;for(;(s=e.indexOf(this.pattern,n))>-1;)n=s+o,i.push([s,n-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const ti=[Cu,dc,Su,ku,Tu,Eu,Nu,lc],Po=ti.length,Du=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Au="|";function Ou(r,e={}){return r.split(Au).map(n=>{let s=n.trim().split(Du).filter(o=>o&&!!o.trim()),i=[];for(let o=0,a=s.length;o<a;o+=1){const c=s[o];let d=!1,l=-1;for(;!d&&++l<Po;){const u=ti[l];let h=u.isMultiMatch(c);h&&(i.push(new u(h,e)),d=!0)}if(!d)for(l=-1;++l<Po;){const u=ti[l];let h=u.isSingleMatch(c);if(h){i.push(new u(h,e));break}}}return i})}const Lu=new Set([lc.type,dc.type]);class Iu{constructor(e,{isCaseSensitive:n=de.isCaseSensitive,ignoreDiacritics:s=de.ignoreDiacritics,includeMatches:i=de.includeMatches,minMatchCharLength:o=de.minMatchCharLength,ignoreLocation:a=de.ignoreLocation,findAllMatches:c=de.findAllMatches,location:d=de.location,threshold:l=de.threshold,distance:u=de.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:s,includeMatches:i,minMatchCharLength:o,findAllMatches:c,ignoreLocation:a,location:d,threshold:l,distance:u},e=n?e:e.toLowerCase(),e=s?ts(e):e,this.pattern=e,this.query=Ou(this.pattern,this.options)}static condition(e,n){return n.useExtendedSearch}searchIn(e){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:i,ignoreDiacritics:o}=this.options;e=i?e:e.toLowerCase(),e=o?ts(e):e;let a=0,c=[],d=0;for(let l=0,u=n.length;l<u;l+=1){const h=n[l];c.length=0,a=0;for(let p=0,f=h.length;p<f;p+=1){const m=h[p],{isMatch:b,indices:y,score:x}=m.search(e);if(b){if(a+=1,d+=x,s){const w=m.constructor.type;Lu.has(w)?c=[...c,...y]:c.push(y)}}else{d=0,a=0,c.length=0;break}}if(a){let p={isMatch:!0,score:d/a};return s&&(p.indices=c),p}}return{isMatch:!1,score:1}}}const ni=[];function Mu(...r){ni.push(...r)}function ri(r,e){for(let n=0,s=ni.length;n<s;n+=1){let i=ni[n];if(i.condition(r,e))return new i(r,e)}return new cc(r,e)}const ns={AND:"$and",OR:"$or"},si={PATH:"$path",PATTERN:"$val"},ii=r=>!!(r[ns.AND]||r[ns.OR]),Pu=r=>!!r[si.PATH],Ru=r=>!Wt(r)&&sc(r)&&!ii(r),Ro=r=>({[ns.AND]:Object.keys(r).map(e=>({[e]:r[e]}))});function uc(r,e,{auto:n=!0}={}){const s=i=>{let o=Object.keys(i);const a=Pu(i);if(!a&&o.length>1&&!ii(i))return s(Ro(i));if(Ru(i)){const d=a?i[si.PATH]:o[0],l=a?i[si.PATTERN]:i[d];if(!Rt(l))throw new Error(au(d));const u={keyId:ei(d),pattern:l};return n&&(u.searcher=ri(l,e)),u}let c={children:[],operator:o[0]};return o.forEach(d=>{const l=i[d];Wt(l)&&l.forEach(u=>{c.children.push(s(u))})}),c};return ii(r)||(r=Ro(r)),s(r)}function Bu(r,{ignoreFieldNorm:e=de.ignoreFieldNorm}){r.forEach(n=>{let s=1;n.matches.forEach(({key:i,norm:o,score:a})=>{const c=i?i.weight:null;s*=Math.pow(a===0&&c?Number.EPSILON:a,(c||1)*(e?1:o))}),n.score=s})}function ju(r,e){const n=r.matches;e.matches=[],gt(n)&&n.forEach(s=>{if(!gt(s.indices)||!s.indices.length)return;const{indices:i,value:o}=s;let a={indices:i,value:o};s.key&&(a.key=s.key.src),s.idx>-1&&(a.refIndex=s.idx),e.matches.push(a)})}function Fu(r,e){e.score=r.score}function $u(r,e,{includeMatches:n=de.includeMatches,includeScore:s=de.includeScore}={}){const i=[];return n&&i.push(ju),s&&i.push(Fu),r.map(o=>{const{idx:a}=o,c={item:e[a],refIndex:a};return i.length&&i.forEach(d=>{d(o,c)}),c})}class Rn{constructor(e,n={},s){this.options={...de,...n},this.options.useExtendedSearch,this._keyStore=new uu(this.options.keys),this.setCollection(e,s)}setCollection(e,n){if(this._docs=e,n&&!(n instanceof Mi))throw new Error(ou);this._myIndex=n||ac(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){gt(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const n=[];for(let s=0,i=this._docs.length;s<i;s+=1){const o=this._docs[s];e(o,s)&&(this.removeAt(s),s-=1,i-=1,n.push(o))}return n}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:n=-1}={}){const{includeMatches:s,includeScore:i,shouldSort:o,sortFn:a,ignoreFieldNorm:c}=this.options;let d=Rt(e)?Rt(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Bu(d,{ignoreFieldNorm:c}),o&&d.sort(a),rc(n)&&n>-1&&(d=d.slice(0,n)),$u(d,this._docs,{includeMatches:s,includeScore:i})}_searchStringList(e){const n=ri(e,this.options),{records:s}=this._myIndex,i=[];return s.forEach(({v:o,i:a,n:c})=>{if(!gt(o))return;const{isMatch:d,score:l,indices:u}=n.searchIn(o);d&&i.push({item:o,idx:a,matches:[{score:l,value:o,norm:c,indices:u}]})}),i}_searchLogical(e){const n=uc(e,this.options),s=(c,d,l)=>{if(!c.children){const{keyId:h,searcher:p}=c,f=this._findMatches({key:this._keyStore.get(h),value:this._myIndex.getValueForItemAtKeyId(d,h),searcher:p});return f&&f.length?[{idx:l,item:d,matches:f}]:[]}const u=[];for(let h=0,p=c.children.length;h<p;h+=1){const f=c.children[h],m=s(f,d,l);if(m.length)u.push(...m);else if(c.operator===ns.AND)return[]}return u},i=this._myIndex.records,o={},a=[];return i.forEach(({$:c,i:d})=>{if(gt(c)){let l=s(n,c,d);l.length&&(o[d]||(o[d]={idx:d,item:c,matches:[]},a.push(o[d])),l.forEach(({matches:u})=>{o[d].matches.push(...u)}))}}),a}_searchObjectList(e){const n=ri(e,this.options),{keys:s,records:i}=this._myIndex,o=[];return i.forEach(({$:a,i:c})=>{if(!gt(a))return;let d=[];s.forEach((l,u)=>{d.push(...this._findMatches({key:l,value:a[u],searcher:n}))}),d.length&&o.push({idx:c,item:a,matches:d})}),o}_findMatches({key:e,value:n,searcher:s}){if(!gt(n))return[];let i=[];if(Wt(n))n.forEach(({v:o,i:a,n:c})=>{if(!gt(o))return;const{isMatch:d,score:l,indices:u}=s.searchIn(o);d&&i.push({score:l,key:e,value:o,idx:a,norm:c,indices:u})});else{const{v:o,n:a}=n,{isMatch:c,score:d,indices:l}=s.searchIn(o);c&&i.push({score:d,key:e,value:o,norm:a,indices:l})}return i}}Rn.version="7.1.0";Rn.createIndex=ac;Rn.parseIndex=yu;Rn.config=de;Rn.parseQuery=uc;Mu(Iu);function Uu(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M428 224H288a48 48 0 0 1-48-48V36a4 4 0 0 0-4-4h-92a64 64 0 0 0-64 64v320a64 64 0 0 0 64 64h224a64 64 0 0 0 64-64V228a4 4 0 0 0-4-4zm-92 160H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32zm0-80H176a16 16 0 0 1 0-32h160a16 16 0 0 1 0 32z"},child:[]},{tag:"path",attr:{d:"M419.22 188.59 275.41 44.78a2 2 0 0 0-3.41 1.41V176a16 16 0 0 0 16 16h129.81a2 2 0 0 0 1.41-3.41z"},child:[]}]})(r)}function zu(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M456.69 421.39 362.6 327.3a173.81 173.81 0 0 0 34.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 0 0 327.3 362.6l94.09 94.09a25 25 0 0 0 35.3-35.3zM97.92 222.72a124.8 124.8 0 1 1 124.8 124.8 124.95 124.95 0 0 1-124.8-124.8z"},child:[]}]})(r)}function Hu(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C141.12 48 48 141.12 48 256s93.12 208 208 208 208-93.12 208-208S370.88 48 256 48zm-82.33 114.34 105 71a32.5 32.5 0 0 1-37.25 53.26 33.21 33.21 0 0 1-8-8l-71-105a8.13 8.13 0 0 1 11.32-11.32zM256 432c-97 0-176-78.95-176-176a174.55 174.55 0 0 1 53.87-126.72 14.15 14.15 0 1 1 19.64 20.37A146.53 146.53 0 0 0 108.3 256c0 81.44 66.26 147.7 147.7 147.7S403.7 337.44 403.7 256c0-76.67-58.72-139.88-133.55-147v55a14.15 14.15 0 1 1-28.3 0V94.15A14.15 14.15 0 0 1 256 80c97.05 0 176 79 176 176s-78.95 176-176 176z"},child:[]}]})(r)}function qu(){const[r,e]=g([]),[n,s]=g(""),[i,o]=g(1),a=5,[c,d]=g(""),[l,u]=g(null);ee(()=>{(async()=>{try{const x=(await q.blog.getBlog()).data;e(x);const w=new Rn(x,{keys:["title","snippet","markdownContent"],includeMatches:!0,threshold:.4,isCaseSensitive:!1});u(w)}catch(x){const w=x instanceof Error?x.message:"Fetching blogs failed";s(w),console.error("Error:",x)}})()},[]);const h=c?l?.search(c).map(x=>({post:x.item,matches:x.matches}))||[]:r.map(x=>({post:x,matches:[]}));ee(()=>{if(h.length>0){const x=Math.ceil(h.length/a);i>x&&o(1)}},[h.length,a,i]);const p=Math.ceil(h.length/a),f=i*a,m=f-a,b=h.slice(m,f),y=x=>o(x);return n?t(Q,{children:t("div",{role:"alert",className:"alert alert-error",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("span",{children:n})]})}):t(Q,{children:t("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-2xl font-bold mb-4",children:"Blog Posts"}),t("div",{className:"mb-4",children:t("label",{className:"input items-center",children:[t(zu,{className:"opacity-50"}),t("input",{type:"text",className:"grow",placeholder:"Search blog posts...",value:c,onInput:x=>d(x.currentTarget.value)})]})}),t("div",{className:"space-y-6",children:b.map((x,w)=>t(hc,{postData:x,search:c},w))}),p>1&&t("div",{className:"join mt-6 flex justify-center",children:Array.from({length:p},(x,w)=>w+1).map(x=>t("button",{className:`join-item btn ${i===x?"btn-active":""}`,onClick:()=>y(x),children:x},x))})]})})}function hc(r){const{postData:e,search:n,post:s}=r;let i;if(e?e.post&&e.matches?(i=e.post,e.matches):i=e:i=s,!i)return null;!i.markdownContent&&i.content&&(i={...i,markdownContent:i.content});const o={ALLOWED_TAGS:["p","br","strong","em","u","a","ul","ol","li","blockquote","code","mark"],ALLOWED_ATTR:["href","target","rel","class"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^&\s]+)$/i},a=n?or(i.title,n):i.title,c=n?or(i.snippet,n):i.snippet,d=nc.sanitize(c,o),l=i.markdownContent&&n&&i.markdownContent.toLowerCase().includes(n.toLowerCase())?(()=>{const u=i.markdownContent.length>200?i.markdownContent.substring(0,200)+"...":i.markdownContent;return or(u,n)})():null;return t("div",{class:"card shadow transition-transform ease-in-out delay-0 hover:-translate-y-1 hover:scale-[1.02] duration-300",children:[t("a",{class:"card-body",href:`/blog/${i.id}`,children:[t("h1",{class:"text-4xl font-bold",dangerouslySetInnerHTML:{__html:a}}),t("time",{children:new Date(i.createdAt).toLocaleDateString("en-uk",{year:"numeric",month:"long",day:"numeric"})}),t("div",{class:"prose max-w-full mt-4",dangerouslySetInnerHTML:{__html:d}}),l&&t("div",{class:"mt-4 p-2 bg-neutral text-neutral-content rounded",children:[t("div",{class:"flex items-center gap-2 mb-1",children:[t(Uu,{class:"text-lg"}),t("span",{class:"text-sm font-semibold",children:"Content preview:"})]}),t("div",{class:"text-sm",dangerouslySetInnerHTML:{__html:l}})]})]}),t("div",{class:"card-body pt-0",children:t(Md,{id:i.id,likes:i.likes,dislikes:i.dislikes,comments:i.commentCount})})]})}const Vt=r=>r.startsWith("/")?new URL(r.slice(1),`${q.baseUrl}/`).href:r;function lt(r){if(!r.name)return;const[e,n]=g(""),s=Ae(()=>r.image?Promise.resolve(r.image):q.avatar.getAvatar({name:r.name}).then(i=>i.text()),[r?.image,r?.name]);return ee(()=>{let i=!1;return s.then(o=>{i||(console.log("GOT IMAGE URL:",o),n(o))}).catch(o=>{if(!i){const a=o instanceof Error?o.message:"Generating or setting the user's avatar failed";alert(a),console.error("Error:",o)}}),()=>{i=!0}},[s]),t("div",{tabIndex:0,className:"avatar cursor-pointer",children:t("div",{className:"rounded-full "+(r.widthClass||"w-10"),children:t("img",{alt:"USER ICON",src:Vt(e)})})})}function fc({content:r,createdAt:e,authorId:n,showAcceptButton:s=!1,onAccept:i,showDeleteButton:o=!1,onDelete:a,commentId:c}){const[d,l]=g(null),[u,h]=g(!0);ee(()=>{p()},[n]);const p=async()=>{try{h(!0);const y=(await q.profile.getProfileByUserId(n)).data;l(y)}catch(y){console.log("Could not fetch user data:",y)}finally{h(!1)}},f={ALLOWED_TAGS:["p","br","strong","em","u","a","ul","ol","li","blockquote","code"],ALLOWED_ATTR:["href","target","rel"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel):|[^&\s]+)$/i},m=nc.sanitize(r,f),b=y=>new Date(y).toLocaleDateString("en-uk",{hour:"numeric",minute:"numeric",year:"numeric",month:"numeric",day:"numeric"});return t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow mb-6",children:t("div",{className:"card-body",children:[t("div",{className:"flex justify-between items-start",children:[t("a",{className:"flex items-center gap-3 flex-1",href:`/profile/${n}`,children:[u?t("div",{className:"w-8 h-8 rounded-full bg-gray-300 animate-pulse"}):t(lt,{name:d?.name,image:d?.image}),t("div",{className:"flex-1",children:t("div",{className:"flex items-center gap-2",children:[t("span",{className:"font-bold",children:d?d.name:`Deleted User ${n}`}),t("time",{className:"text-sm opacity-70",children:b(e)})]})})]}),t("div",{className:"flex gap-2",children:(s||o)&&c&&t(Q,{children:[s&&i&&t("button",{className:"btn btn-sm btn-success",onClick:()=>i(c),title:"Accept comment",children:[t(qt,{className:"w-4 h-4 mr-1"}),"Accept"]}),o&&a&&t("button",{className:"btn btn-sm btn-error",onClick:()=>a(c),title:"Delete comment",children:[t(Li,{className:"w-4 h-4 mr-1"}),"Delete"]})]})})]}),t("div",{className:"prose max-w-full mt-4",dangerouslySetInnerHTML:{__html:m}})]})})}function Wu({id:r}){const[e,n]=g(""),[s,i]=g(null),[o,a]=g(""),c=l=>{n(l.target.value)};function d(){(async()=>{try{if(!e){alert("Comment cannot be empty");return}const l=(await q.blog.postBlogByIdComment(r,{content:e})).data;console.log("Comment post data:",l),alert(l.success?"Successfully posted a comment":"Failed to post a comment")}catch(l){if(l?.status==401){console.log("401 error: redirecting to /login"),window.location.href="/login";return}if(l?.status==429){console.log("421 error: sending alert"),alert("You are posting too many comments, try posting again later.");return}const u=l instanceof Error?l.message:"Posting blog comment failed";a(u),console.error("Error:",l)}})()}return ee(()=>{(async()=>{try{const l=(await q.blog.getBlogById(r)).data;i(l)}catch(l){const u=l instanceof Error?l.message:"Fetching blog failed";a(u),console.error("Error:",l)}})()},[r]),o?t(Q,{children:t("div",{role:"alert",className:"alert alert-error",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("span",{children:o})]})}):s?t(Q,{children:[t("div",{class:"card card-body max-w-full",children:t("div",{class:"text-center justify-center",children:t(hc,{postData:s.blog})})}),t("div",{class:"prose max-w-full mx-8",dangerouslySetInnerHTML:{__html:s.blog.content}}),t("div",{class:"mx-8 mb-8",children:[t("div",{className:"divider"}),t("h1",{class:"text-3xl font-bold",children:"Comments"}),t("p",{children:["Comments do not allow any HTML, but they allow Markdown for styling. Once submitted, they need to be reviewed by the site administrator to be displayed for"," ",t("i",{children:t("b",{children:"obvious reasons"})}),"."]}),t("textarea",{id:"comment",class:"min-w-11/12 resize min-h-[10rem] p-4 my-4 rounded-lg outline-1",placeholder:"Write a Markdown comment...",required:!0,onInput:c}),t("div",{children:t("button",{class:"btn rounded-xl bg-blue-600 text-white",onClick:d,children:"Post comment"})}),s.comments.map((l,u)=>t(fc,{content:l.content,createdAt:l.createdAt,authorId:l.authorId}))]})]}):t(Q,{children:t("p",{children:"Loading..."})})}function Vu(){return t(Q,{children:t("div",{className:"h-[100%] grid place-items-center",id:"homescreen",children:t("div",{className:"min-w-1/4 text-center p-8 bg-black/80 text-white",children:[t("h1",{className:"text-8xl font-semibold mb-2",children:["My",t("br",{}),"Website",t("span",{className:"blink",children:"_"})]}),t("p",{children:"Hi"})]})})})}const pc=_n(null);function Gu({children:r}){const[e,n]=g([]),s=In(i=>{const o=Date.now();n(a=>[...a,{...i,id:o}]),setTimeout(()=>{n(a=>a.filter(c=>c.id!==o))},i.time)},[]);return t(pc.Provider,{value:s,children:[r,t("div",{className:"toast toast-end",children:e.map(i=>t("div",{className:`alert alert-${i.type}`,children:t("span",{children:i.text})},i.id))})]})}function Pi(){const r=on(pc);if(!r)throw new Error("useSpawnToast must be used within a ToastProvider");return r}function Ku(){const r=Pi(),[e,n]=g(0);return t(Q,{children:[t("div",{className:"sm:float-left sm:w-1/2 p-4",children:[t("h1",{class:"text-4xl font-bold mb-3",children:"About"}),t("p",{children:"Hello!"}),t("p",{children:"This is my website, which is yet to be completed."}),t("p",{children:["Check out"," ",t("a",{href:"/projects/pong",class:"text-blue-500",children:"my Rust pong game"})]})]}),t("div",{className:"sm:float-right sm:w-1/2 mx-auto",children:t("img",{src:Ia,className:"p-4 w-[80%]"})}),t("button",{class:"btn btn-active",onClick:()=>{r({text:`Number: ${e}`,type:"success",time:3e3}),n(e+1)},children:"Click me"})]})}function Qu(r){return U({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5m0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5"},child:[]},{tag:"path",attr:{d:"M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1z"},child:[]}]})(r)}function Yu(){return t("div",{class:"container mx-auto p-6 max-w-4xl",children:[t("div",{class:"flex items-center gap-3 mb-8",children:[t(Qu,{class:"text-4xl text-primary"}),t("h1",{class:"text-4xl font-bold",children:"Changelog"})]}),t("div",{class:"space-y-8",children:t("div",{class:"card bg-base-100 shadow-xl",children:t("div",{class:"card-body",children:[t("div",{class:"flex items-start justify-between mb-4",children:t("div",{children:[t("h2",{class:"card-title text-2xl text-primary",children:"Version 0.6.9"}),t("p",{class:"text-sm text-base-content/70",children:["Complete platform release •"," ",new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})}),t("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[t("div",{children:[t("div",{class:"badge badge-success mb-2",children:"FEATURES"}),t("ul",{class:"list-disc list-inside space-y-1 text-sm",children:[t("li",{children:[t("strong",{children:"Blog Platform:"})," Full blogging with search, comments, reactions"]}),t("li",{children:[t("strong",{children:"Gaming Hub:"})," Chess and arithmetic games with leaderboards"]}),t("li",{children:[t("strong",{children:"User System:"})," Authentication, profiles, settings, admin panel"]}),t("li",{children:[t("strong",{children:"Real-time Features:"})," Live connections and notifications"]}),t("li",{children:[t("strong",{children:"Theming:"})," DaisyUI with 30+ themes and dark mode"]})]})]}),t("div",{children:[t("div",{class:"badge badge-info mb-2",children:"TECHNOLOGY"}),t("ul",{class:"list-disc list-inside space-y-1 text-sm",children:[t("li",{children:[t("strong",{children:"Frontend:"})," Preact + TypeScript + Tailwind"]}),t("li",{children:[t("strong",{children:"Backend:"})," RESTful API with security middleware"]}),t("li",{children:[t("strong",{children:"Database:"})," Optimized schemas with relationships"]}),t("li",{children:[t("strong",{children:"Search:"})," Advanced fuzzy search with Fuse.js"]}),t("li",{children:[t("strong",{children:"UI Components:"})," Custom components with accessibility"]})]})]})]}),t("div",{class:"mb-4",children:[t("div",{class:"badge badge-warning mb-2",children:"PRODUCTIVITY"}),t("ul",{class:"list-disc list-inside space-y-1 text-sm",children:[t("li",{children:[t("strong",{children:"PWA Ready:"})," Progressive web app capabilities"]}),t("li",{children:[t("strong",{children:"Responsive:"})," Mobile-first design across all pages"]}),t("li",{children:[t("strong",{children:"Performance:"})," Optimized loading and bundle splitting"]}),t("li",{children:[t("strong",{children:"Security:"})," CSRF, CORS, input validation, sanitization"]}),t("li",{children:[t("strong",{children:"Developer Experience:"})," Hot reload, type safety, error boundaries"]})]})]}),t("div",{class:"mb-4",children:[t("div",{class:"badge badge-accent mb-2",children:"CHANGES"}),t("ul",{class:"list-disc list-inside space-y-1 text-sm",children:[t("li",{children:"Added changelog page to documentation"}),t("li",{children:"Enhanced navigation with changelog link in Info menu"}),t("li",{children:"Improved project documentation and version tracking"})]})]}),t("div",{class:"alert alert-info",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("span",{children:"This consolidated release includes all features from versions 0.6.1 through 0.6.8"})]})]})})}),t("div",{class:"text-center mt-8 p-4 bg-base-200 rounded-lg",children:t("p",{class:"text-sm text-base-content/60",children:["Want to contribute or report an issue?",t("a",{href:"/contact",class:"link link-primary ml-1",children:"Get in touch"})]})})]})}function Ri(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"},child:[]}]})(r)}function Xu(r){return U({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M182.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-96 96c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L128 109.3l0 293.5L86.6 361.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l96 96c12.5 12.5 32.8 12.5 45.3 0l96-96c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 402.7l0-293.5 41.4 41.4c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-96-96z"},child:[]}]})(r)}function Bi(r){return U({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(r)}function Zu(){const[r,e]=g(""),[n,s]=g(""),[i,o]=g(!0),[a,c]=g(!1),[d,l]=g(""),{route:u}=ft(),h=x=>{e(x.target.value)},p=x=>{s(x.target.value)},f=x=>{o(x.target.checked)};async function m(){c(!0);try{await q.auth.apiSignInEmailCreate({email:r,password:n,rememberMe:i}),u("/")}catch(x){const w=x?.error?.message||"ERROR: LOGIN FAILED";l(w),console.log("ERROR:",x?.error?.message||x),c(!1)}}async function b(x){c(!0);try{const w=(await q.auth.socialSignIn({provider:x,callbackURL:new URL("/",window.location.origin).href})).data;window.location.href=w.url;return}catch(w){const S=w?.error?.message||"ERROR: LOGIN FAILED";l(S),console.log("ERROR:",w?.error?.message||w),c(!1)}}function y(x){x.preventDefault(),m()}return t(Q,{children:t("div",{className:"mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full",children:t("div",{className:"card-body",children:[t("h1",{className:"text-center text-xl font-bold",children:"Login"}),t("form",{className:"fieldset",onSubmit:y,children:[t("label",{className:"label",children:"Email"}),t("label",{className:"input w-full",children:[t(Mn,{}),t("input",{type:"text",required:!0,placeholder:"Email",onInput:h})]}),t("label",{className:"label",children:"Password"}),t("label",{className:"input w-full",children:[t(ur,{}),t("input",{type:"password",required:!0,placeholder:"Password",onInput:p})]}),t("label",{className:"label",children:[t("input",{type:"checkbox",onChange:f,checked:i}),"Remember me"]}),t("button",{disabled:a,className:"btn btn-neutral mt-4",type:"submit",children:"Login"}),t("div",{children:t("p",{className:"text-center",children:["Don't have an account?"," ",t("a",{className:"link-accent",href:"/signup",children:"Sign up here"})]})})]}),d&&t("p",{className:"text-error",children:d}),t("div",{className:"divider",children:"Sign In With"}),t("button",{className:"btn text-black bg-white font-bold",onClick:()=>b("google"),children:[t(Bi,{}),"Google"]}),t("button",{className:"btn text-white bg-black font-bold",onClick:()=>b("twitter"),children:[t(Ri,{}),"Twitter (X)"]})]})})})}function Mr({title:r,description:e,technicalSpecs:n,backgroundImage:s,href:i}){return t("a",{href:i,children:t("div",{className:"h-full card card-side bg-neutral text-neutral-content border border-base-200 overflow-hidden relative group transition-all duration-500 hover:scale-[1.02] hover:shadow-2xl hover:shadow-accent/20 flex",children:[t("div",{className:"card-body p-8 flex flex-col justify-between w-3/5",children:[t("div",{children:[t("h2",{className:"card-title text-3xl mb-3 text-balance",children:r}),t("p",{className:"mb-4 leading-relaxed",children:e}),n&&t("div",{className:"text-sm bg-base-100 text-base-content p-3 rounded border border-base-300 my-4",children:[t("span",{className:"font-semibold text-accent",children:"Technical:"})," ",n]})]}),t("div",{className:"card-actions",children:t("a",{href:i,className:"btn btn-success px-6 py-3 transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary group-hover:shadow-lg group-hover:shadow-primary/50",children:"Play Now"})})]}),t("figure",{className:"w-1/4 relative brightness-75 group-hover:brightness-110 transition-all duration-500",children:[t("div",{className:"absolute inset-0 bg-gradient-to-l from-transparent to-base-100/20"}),t("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:`url(${s})`}})]})]})})}function Ju(){return t(Q,{children:[t("h1",{class:"text-3xl mx-4 my-8",children:"Projects"}),t("div",{class:"m-8",children:t(Mr,{title:"Chess",description:"A multiplayer chess web app built with Rust and Poem-WebSocket, enabling multiplayer gameplay.",technicalSpecs:"Move validation • Real-time multiplayer",backgroundImage:"/chess-board.png",href:"/projects/chess"})}),t("div",{class:"m-8",children:t(Mr,{title:"Arithmetic Game",description:"Challenge your mental arithmetic skills in this arithmetic puzzle game.",technicalSpecs:"Dynamic problem generation • Multiplayer leaderboards • Timed solo mode",backgroundImage:"/stragedy-rush.png",href:"/projects/arithmetic"})}),t("div",{class:"m-8",children:t(Mr,{title:"Quizspire",description:"Master your flashcards with various study modes and revision games.",technicalSpecs:"Flashcard decks • Multiple study modes • Progress tracking",backgroundImage:"/quizspire.png",href:"/projects/quizspire"})}),t("div",{class:"m-8",children:t(Mr,{title:"Tetris",description:"Classic Tetris game built with PixiJS.",technicalSpecs:"Real-time gameplay • High score tracking",backgroundImage:"/colorful-tetris.png",href:"/projects/tetris"})}),t("a",{href:"https://altus.deno.dev/projects",class:"mx-8 my-4 btn btn-success",children:"More Projects"})]})}const Ut=Object.create(null);Ut.open="0";Ut.close="1";Ut.ping="2";Ut.pong="3";Ut.message="4";Ut.upgrade="5";Ut.noop="6";const Wr=Object.create(null);Object.keys(Ut).forEach(r=>{Wr[Ut[r]]=r});const oi={type:"error",data:"parser error"},mc=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",gc=typeof ArrayBuffer=="function",bc=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,ji=({type:r,data:e},n,s)=>mc&&e instanceof Blob?n?s(e):Bo(e,s):gc&&(e instanceof ArrayBuffer||bc(e))?n?s(e):Bo(new Blob([e]),s):s(Ut[r]+(e||"")),Bo=(r,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(r)};function jo(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let Cs;function eh(r,e){if(mc&&r.data instanceof Blob)return r.data.arrayBuffer().then(jo).then(e);if(gc&&(r.data instanceof ArrayBuffer||bc(r.data)))return e(jo(r.data));ji(r,!1,n=>{Cs||(Cs=new TextEncoder),e(Cs.encode(n))})}const Fo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Fo.length;r++)rr[Fo.charCodeAt(r)]=r;const th=r=>{let e=r.length*.75,n=r.length,s,i=0,o,a,c,d;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(s=0;s<n;s+=4)o=rr[r.charCodeAt(s)],a=rr[r.charCodeAt(s+1)],c=rr[r.charCodeAt(s+2)],d=rr[r.charCodeAt(s+3)],u[i++]=o<<2|a>>4,u[i++]=(a&15)<<4|c>>2,u[i++]=(c&3)<<6|d&63;return l},nh=typeof ArrayBuffer=="function",Fi=(r,e)=>{if(typeof r!="string")return{type:"message",data:vc(r,e)};const n=r.charAt(0);return n==="b"?{type:"message",data:rh(r.substring(1),e)}:Wr[n]?r.length>1?{type:Wr[n],data:r.substring(1)}:{type:Wr[n]}:oi},rh=(r,e)=>{if(nh){const n=th(r);return vc(n,e)}else return{base64:!0,data:r}},vc=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},yc="",sh=(r,e)=>{const n=r.length,s=new Array(n);let i=0;r.forEach((o,a)=>{ji(o,!1,c=>{s[a]=c,++i===n&&e(s.join(yc))})})},ih=(r,e)=>{const n=r.split(yc),s=[];for(let i=0;i<n.length;i++){const o=Fi(n[i],e);if(s.push(o),o.type==="error")break}return s};function oh(){return new TransformStream({transform(r,e){eh(r,n=>{const s=n.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}r.data&&typeof r.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let Ns;function Pr(r){return r.reduce((e,n)=>e+n.length,0)}function Rr(r,e){if(r[0].length===e)return r.shift();const n=new Uint8Array(e);let s=0;for(let i=0;i<e;i++)n[i]=r[0][s++],s===r[0].length&&(r.shift(),s=0);return r.length&&s<r[0].length&&(r[0]=r[0].slice(s)),n}function ah(r,e){Ns||(Ns=new TextDecoder);const n=[];let s=0,i=-1,o=!1;return new TransformStream({transform(a,c){for(n.push(a);;){if(s===0){if(Pr(n)<1)break;const d=Rr(n,1);o=(d[0]&128)===128,i=d[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(Pr(n)<2)break;const d=Rr(n,2);i=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),s=3}else if(s===2){if(Pr(n)<8)break;const d=Rr(n,8),l=new DataView(d.buffer,d.byteOffset,d.length),u=l.getUint32(0);if(u>Math.pow(2,21)-1){c.enqueue(oi);break}i=u*Math.pow(2,32)+l.getUint32(4),s=3}else{if(Pr(n)<i)break;const d=Rr(n,i);c.enqueue(Fi(o?d:Ns.decode(d),e)),s=0}if(i===0||i>r){c.enqueue(oi);break}}}})}const wc=4;function ze(r){if(r)return ch(r)}function ch(r){for(var e in ze.prototype)r[e]=ze.prototype[e];return r}ze.prototype.on=ze.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};ze.prototype.once=function(r,e){function n(){this.off(r,n),e.apply(this,arguments)}return n.fn=e,this.on(r,n),this};ze.prototype.off=ze.prototype.removeListener=ze.prototype.removeAllListeners=ze.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+r];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var s,i=0;i<n.length;i++)if(s=n[i],s===e||s.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+r],this};ze.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+r],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,i=n.length;s<i;++s)n[s].apply(this,e)}return this};ze.prototype.emitReserved=ze.prototype.emit;ze.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};ze.prototype.hasListeners=function(r){return!!this.listeners(r).length};const ss=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Ct=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),lh="arraybuffer";function _c(r,...e){return e.reduce((n,s)=>(r.hasOwnProperty(s)&&(n[s]=r[s]),n),{})}const dh=Ct.setTimeout,uh=Ct.clearTimeout;function is(r,e){e.useNativeTimers?(r.setTimeoutFn=dh.bind(Ct),r.clearTimeoutFn=uh.bind(Ct)):(r.setTimeoutFn=Ct.setTimeout.bind(Ct),r.clearTimeoutFn=Ct.clearTimeout.bind(Ct))}const hh=1.33;function fh(r){return typeof r=="string"?ph(r):Math.ceil((r.byteLength||r.size)*hh)}function ph(r){let e=0,n=0;for(let s=0,i=r.length;s<i;s++)e=r.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function xc(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function mh(r){let e="";for(let n in r)r.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return e}function gh(r){let e={},n=r.split("&");for(let s=0,i=n.length;s<i;s++){let o=n[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class bh extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class $i extends ze{constructor(e){super(),this.writable=!1,is(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,s){return super.emitReserved("error",new bh(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Fi(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=mh(e);return n.length?"?"+n:""}}class vh extends $i{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};ih(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,sh(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=xc()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let Cc=!1;try{Cc=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const yh=Cc;function wh(){}class _h extends vh{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}class $t extends ze{constructor(e,n,s){super(),this.createRequest=e,is(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const n=_c(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=$t.requestsCount++,$t.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=wh,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete $t.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}$t.requestsCount=0;$t.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",$o);else if(typeof addEventListener=="function"){const r="onpagehide"in Ct?"pagehide":"unload";addEventListener(r,$o,!1)}}function $o(){for(let r in $t.requests)$t.requests.hasOwnProperty(r)&&$t.requests[r].abort()}const xh=(function(){const r=Nc({xdomain:!1});return r&&r.responseType!==null})();class Ch extends _h{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=xh&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new $t(Nc,this.uri(),e)}}function Nc(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||yh))return new XMLHttpRequest}catch{}if(!e)try{return new Ct[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Sc=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Nh extends $i{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,s=Sc?{}:_c(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],i=n===e.length-1;ji(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}i&&ss(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=xc()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Ss=Ct.WebSocket||Ct.MozWebSocket;class Sh extends Nh{createSocket(e,n,s){return Sc?new Ss(e,n,s):n?new Ss(e,n):new Ss(e)}doWrite(e,n){this.ws.send(n)}}class kh extends $i{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=ah(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),i=oh();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{s.read().then(({done:c,value:d})=>{c||(this.onPacket(d),o())}).catch(c=>{})};o();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],i=n===e.length-1;this._writer.write(s).then(()=>{i&&ss(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Eh={websocket:Sh,webtransport:kh,polling:Ch},Th=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Dh=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ai(r){if(r.length>8e3)throw"URI too long";const e=r,n=r.indexOf("["),s=r.indexOf("]");n!=-1&&s!=-1&&(r=r.substring(0,n)+r.substring(n,s).replace(/:/g,";")+r.substring(s,r.length));let i=Th.exec(r||""),o={},a=14;for(;a--;)o[Dh[a]]=i[a]||"";return n!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=Ah(o,o.path),o.queryKey=Oh(o,o.query),o}function Ah(r,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function Oh(r,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,o){i&&(n[i]=o)}),n}const ci=typeof addEventListener=="function"&&typeof removeEventListener=="function",Vr=[];ci&&addEventListener("offline",()=>{Vr.forEach(r=>r())},!1);class tn extends ze{constructor(e,n){if(super(),this.binaryType=lh,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const s=ai(e);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=ai(n.host).host);is(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=gh(this.opts.query)),ci&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Vr.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=wc,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&tn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",tn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(n+=fh(i)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ss(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,s){return this._sendPacket("message",e,n,s),this}send(e,n,s){return this._sendPacket("message",e,n,s),this}_sendPacket(e,n,s,i){if(typeof n=="function"&&(i=n,n=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:e,data:n,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(tn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ci&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Vr.indexOf(this._offlineEventListener);s!==-1&&Vr.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}tn.protocol=wc;class Lh extends tn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),s=!1;tn.priorWebsocketSuccess=!1;const i=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",h=>{if(!s)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;tn.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function o(){s||(s=!0,u(),n.close(),n=null)}const a=h=>{const p=new Error("probe error: "+h);p.transport=n.name,o(),this.emitReserved("upgradeError",p)};function c(){a("transport closed")}function d(){a("socket closed")}function l(h){n&&h.name!==n.name&&o()}const u=()=>{n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",c),this.off("close",d),this.off("upgrading",l)};n.once("open",i),n.once("error",a),n.once("close",c),this.once("close",d),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}let Ih=class extends Lh{constructor(e,n={}){const s=typeof e=="object"?e:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>Eh[i]).filter(i=>!!i)),super(e,s)}};function Mh(r,e="",n){let s=r;n=n||typeof location<"u"&&location,r==null&&(r=n.protocol+"//"+n.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=n.protocol+r:r=n.host+r),/^(https?|wss?):\/\//.test(r)||(typeof n<"u"?r=n.protocol+"//"+r:r="https://"+r),s=ai(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(n&&n.port===s.port?"":":"+s.port),s}const Ph=typeof ArrayBuffer=="function",Rh=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,kc=Object.prototype.toString,Bh=typeof Blob=="function"||typeof Blob<"u"&&kc.call(Blob)==="[object BlobConstructor]",jh=typeof File=="function"||typeof File<"u"&&kc.call(File)==="[object FileConstructor]";function Ui(r){return Ph&&(r instanceof ArrayBuffer||Rh(r))||Bh&&r instanceof Blob||jh&&r instanceof File}function Gr(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let n=0,s=r.length;n<s;n++)if(Gr(r[n]))return!0;return!1}if(Ui(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return Gr(r.toJSON(),!0);for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&Gr(r[n]))return!0;return!1}function Fh(r){const e=[],n=r.data,s=r;return s.data=li(n,e),s.attachments=e.length,{packet:s,buffers:e}}function li(r,e){if(!r)return r;if(Ui(r)){const n={_placeholder:!0,num:e.length};return e.push(r),n}else if(Array.isArray(r)){const n=new Array(r.length);for(let s=0;s<r.length;s++)n[s]=li(r[s],e);return n}else if(typeof r=="object"&&!(r instanceof Date)){const n={};for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=li(r[s],e));return n}return r}function $h(r,e){return r.data=di(r.data,e),delete r.attachments,r}function di(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let n=0;n<r.length;n++)r[n]=di(r[n],e);else if(typeof r=="object")for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(r[n]=di(r[n],e));return r}const Uh=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],zh=5;var ve;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(ve||(ve={}));class Hh{constructor(e){this.replacer=e}encode(e){return(e.type===ve.EVENT||e.type===ve.ACK)&&Gr(e)?this.encodeAsBinary({type:e.type===ve.EVENT?ve.BINARY_EVENT:ve.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ve.BINARY_EVENT||e.type===ve.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Fh(e),s=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(s),i}}function Uo(r){return Object.prototype.toString.call(r)==="[object Object]"}class zi extends ze{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===ve.BINARY_EVENT;s||n.type===ve.BINARY_ACK?(n.type=s?ve.EVENT:ve.ACK,this.reconstructor=new qh(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Ui(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(ve[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===ve.BINARY_EVENT||s.type===ve.BINARY_ACK){const o=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(o,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(a)}if(e.charAt(n+1)==="/"){const o=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(o,n)}else s.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const o=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}s.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){const o=this.tryParse(e.substr(n));if(zi.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ve.CONNECT:return Uo(n);case ve.DISCONNECT:return n===void 0;case ve.CONNECT_ERROR:return typeof n=="string"||Uo(n);case ve.EVENT:case ve.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Uh.indexOf(n[0])===-1);case ve.ACK:case ve.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class qh{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=$h(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Wh=Object.freeze(Object.defineProperty({__proto__:null,Decoder:zi,Encoder:Hh,get PacketType(){return ve},protocol:zh},Symbol.toStringTag,{value:"Module"}));function Tt(r,e,n){return r.on(e,n),function(){r.off(e,n)}}const Vh=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ec extends ze{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Tt(e,"open",this.onopen.bind(this)),Tt(e,"packet",this.onpacket.bind(this)),Tt(e,"error",this.onerror.bind(this)),Tt(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var s,i,o;if(Vh.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:ve.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const u=this.ids++,h=n.pop();this._registerAckCallback(u,h),a.id=u}const c=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,d=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!c||(d?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===e&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},i),a=(...c)=>{this.io.clearTimeoutFn(o),n.apply(this,c)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((s,i)=>{const o=(a,c)=>a?i(a):s(c);o.withError=!0,n.push(o),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ve.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ve.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ve.EVENT:case ve.BINARY_EVENT:this.onevent(e);break;case ve.ACK:case ve.BINARY_ACK:this.onack(e);break;case ve.DISCONNECT:this.ondisconnect();break;case ve.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...i){s||(s=!0,n.packet({type:ve.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ve.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function Bn(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Bn.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-n:r+n}return Math.min(r,this.max)|0};Bn.prototype.reset=function(){this.attempts=0};Bn.prototype.setMin=function(r){this.ms=r};Bn.prototype.setMax=function(r){this.max=r};Bn.prototype.setJitter=function(r){this.jitter=r};class ui extends ze{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,is(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Bn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Wh;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ih(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=Tt(n,"open",function(){s.onopen(),e&&e()}),o=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),e?e(c):this.maybeReconnectOnOpen()},a=Tt(n,"error",o);if(this._timeout!==!1){const c=this._timeout,d=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),n.close()},c);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Tt(e,"ping",this.onping.bind(this)),Tt(e,"data",this.ondata.bind(this)),Tt(e,"error",this.onerror.bind(this)),Tt(e,"close",this.onclose.bind(this)),Tt(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){ss(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Ec(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Yn={};function ar(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const n=Mh(r,e.path||"/socket.io"),s=n.source,i=n.id,o=n.path,a=Yn[i]&&o in Yn[i].nsps,c=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let d;return c?d=new ui(s,e):(Yn[i]||(Yn[i]=new ui(s,e)),d=Yn[i]),n.query&&!e.query&&(e.query=n.queryKey),d.socket(n.path,e)}Object.assign(ar,{Manager:ui,Socket:Ec,io:ar,connect:ar});function Gh(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(n[s[i]]=r[s[i]]);return n}const fr="abcdefgh".split(""),Kr={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},Kh={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},Qh={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},Yh=[7,6,5,4,3,2,1,0],Xh=[0,1,2,3,4,5,6,7],zo={wP:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[t("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),t("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),t("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),t("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),t("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),t("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),t("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[t("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),t("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),t("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),t("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[t("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[t("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),t("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),t("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),t("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[t("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),t("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),t("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),t("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),t("circle",{cx:"6",cy:"12",r:"2"}),t("circle",{cx:"14",cy:"9",r:"2"}),t("circle",{cx:"22.5",cy:"8",r:"2"}),t("circle",{cx:"31",cy:"9",r:"2"}),t("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[t("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),t("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),t("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),t("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),t("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),t("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),t("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[t("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),t("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),t("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),t("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),t("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),t("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),t("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),t("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),t("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),t("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),t("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[t("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),t("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),t("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),t("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),t("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[t("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[t("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),t("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),t("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),t("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[t("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),t("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),t("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),t("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),t("circle",{cx:"6",cy:"12",r:"2"}),t("circle",{cx:"14",cy:"9",r:"2"}),t("circle",{cx:"22.5",cy:"8",r:"2"}),t("circle",{cx:"31",cy:"9",r:"2"}),t("circle",{cx:"39",cy:"12",r:"2"}),t("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),t("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[t("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),t("path",{d:"M 12.5,31.5 L 32.5,31.5"}),t("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),t("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:t("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[t("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),t("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),t("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),t("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),t("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),t("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function hi(r,e,n){const s=e/8,i=r==="white"?Kh:Qh,o=r==="white"?Yh:Xh,a=i[n[0]]*s+s/2,c=o[parseInt(n[1],10)-1]*s+s/2;return{x:a,y:c}}function Ho(r){let e=!1;return Object.keys(Kr).forEach(n=>{r[n]!==Kr[n]&&(e=!0)}),Object.keys(r).forEach(n=>{Kr[n]!==r[n]&&(e=!0)}),e}function Zh(r,e){const n={removed:{},added:{}};return Object.keys(r).forEach(s=>{e[s]!==r[s]&&(n.removed[s]=r[s])}),Object.keys(e).forEach(s=>{r[s]!==e[s]&&(n.added[s]=e[s])}),n}function qo(r){return r==="start"?Kr:typeof r=="string"?Jh(r):r}function Jh(r){if(!ef(r))return{};r=r.replace(/ .+$/,"");const e=r.split("/"),n={};let s=8;for(let i=0;i<8;i++){const o=e[i].split("");let a=0;for(let c=0;c<o.length;c++)if(o[c].search(/[1-8]/)!==-1){const d=parseInt(o[c],10);a=a+d}else{const d=fr[a]+s;n[d]=nf(o[c]),a=a+1}s=s-1}return n}function ef(r){r=r.replace(/ .+$/,""),r=tf(r);const e=r.split("/");if(e.length!==8)return!1;for(let n=0;n<8;n++)if(e[n].length!==8||e[n].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function tf(r){return r.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function nf(r){return r.toLowerCase()===r?"b"+r.toUpperCase():"w"+r.toUpperCase()}const rf=(r,e=!0,n,s)=>{const[i,o]=g([]),[a,c]=g([]),[d,l]=g();ee(()=>{Array.isArray(r)&&(u(),o(r?.filter(m=>m[0]!==m[1])))},[r]),ee(()=>{n?.(a)},[a]);function u(){c([]),l(void 0)}const h=(m,b)=>{e&&l([m,b,s])},p=[...a,...i];return{arrows:p,newArrow:d,clearArrows:u,drawNewArrow:h,setArrows:c,onArrowDrawEnd:(m,b)=>{if(m===b||!e)return;let y;const x=[m,b,s];p.every(([S,_])=>!(S===m&&_===b))?y=[...a,x]:y=a.filter(([S,_])=>!(S===m&&_===b)),l(void 0),c(y)}}},Tc=_n({}),Gt=()=>on(Tc),sf=Ei(({allowDragOutsideBoard:r=!0,animationDuration:e=300,areArrowsAllowed:n=!0,arePiecesDraggable:s=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:o=!1,boardOrientation:a="white",boardWidth:c,children:d,clearPremovesOnRightClick:l=!0,customArrows:u,customArrowColor:h="rgb(255,170,0)",customBoardStyle:p,customNotationStyle:f,customDarkSquareStyle:m={backgroundColor:"#B58863"},customDropSquareStyle:b={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:y={backgroundColor:"#F0D9B5"},customPieces:x,customPremoveDarkSquareStyle:w={backgroundColor:"#A42323"},customPremoveLightSquareStyle:S={backgroundColor:"#BD2828"},customSquare:_="div",customSquareStyles:C,dropOffBoardAction:P="snapback",id:A=0,isDraggablePiece:k=()=>!0,getPositionObject:v=()=>{},onArrowsChange:M=()=>{},onDragOverSquare:I=()=>{},onMouseOutSquare:z=()=>{},onMouseOverSquare:V=()=>{},onPieceClick:G=()=>{},onPieceDragBegin:oe=()=>{},onPieceDragEnd:X=()=>{},onPieceDrop:te=()=>!0,onPieceDropOffBoard:j=()=>{},onPromotionCheck:ie=(Ie,He,Be)=>(Be==="wP"&&Ie[1]==="7"&&He[1]==="8"||Be==="bP"&&Ie[1]==="2"&&He[1]==="1")&&Math.abs(Ie.charCodeAt(0)-He.charCodeAt(0))<=1,onPromotionPieceSelect:F=()=>!0,onSparePieceDrop:D=()=>!0,onSquareClick:H=()=>{},onSquareRightClick:W=()=>{},position:Y="start",promotionDialogVariant:K="default",promotionToSquare:ge=null,showBoardNotation:ne=!0,showPromotionDialog:R=!1,snapToCursor:ue=!0},Oe)=>{const[Ie,He]=g(qo(Y)),[Be,Dt]=g({removed:{},added:{}}),[Xe,ht]=g(void 0),[At,rt]=g(R&&!o),[Ot,kt]=g(null),[Kt,Lt]=g(ge),[we,Le]=g([]),Ee=$e(we),[Me,Pe]=g(),[ke,Z]=g(Object.assign(Object.assign({},zo),x)),[Ne,bt]=g(!1),pt=$e(),[Ze,st]=g(!1),[Qe,It]=g(null);Si(Oe,()=>({clearPremoves(_e=!0){Te(_e)}})),ee(()=>{Z(Object.assign(Object.assign({},zo),x))},[x]),ee(()=>{rt(R),Lt(ge)},[ge,R]),ee(()=>{var _e,B,xe;vt();const pe=qo(Y),je=Zh(Ie,pe),et=((_e=Object.keys(je.added))===null||_e===void 0?void 0:_e.length)<=2?(xe=(B=Object.entries(je.added))===null||B===void 0?void 0:B[0])===null||xe===void 0?void 0:xe[1][0]:void 0;if(Ze)He(pe),st(!1),i&&dn(et),pt.current&&clearTimeout(pt.current);else if(Ne)He(pe),st(!1),i&&dn(et);else{Ho(pe)&&Xe!==void 0?ht(et):Ho(pe)?ht(void 0):ht("b"),Dt(je),st(!0);const Ve=setTimeout(()=>{He(pe),st(!1),i&&dn(et)},e);pt.current=Ve}return bt(!1),v(pe),ln(),()=>{clearTimeout(pt.current)}},[Y]);const{arrows:Qt,newArrow:cn,clearArrows:ln,drawNewArrow:Yt,onArrowDrawEnd:Xt}=rf(u,n,M,h);function jn(_e,B,xe,pe){if(_e===B)return;if(ln(),i&&Ze||i&&(Xe===xe[0]||Ee.current.filter(et=>et.piece[0]===xe[0]).length>0)){const et=[...Ee.current];et.push({sourceSq:_e,targetSq:B,piece:xe}),Ee.current=et,Le([...et]),vt();return}if(!i&&Ze)return;const je=Object.assign({},Ie);bt(!!pe),ht(xe[0]),te.length?te(_e,B,xe)||(Te(),bt(!1)):(delete je[_e],je[B]=xe,He(je)),vt(),v(je)}function zt(_e){const B=Object.assign({},Ie);delete B[_e],He(B),v(B)}function dn(_e){if(Ee.current.length===0)return;const B=Ee.current[0];if(B.piece[0]!==void 0&&B.piece[0]!==_e&&te.length)if(ht(B.piece[0]),bt(!0),te(B.sourceSq,B.targetSq,B.piece)){const pe=[...Ee.current];pe.shift(),Ee.current=pe,Le([...pe])}else Te()}function Fn(_e,B){if(!D(_e,B))return;const pe=Object.assign({},Ie);pe[B]=_e,He(pe),v(pe)}function Te(_e=!0){_e&&ht(void 0),Ee.current=[],Le([])}function vt(){kt(null),Lt(null),rt(!1)}function $n(_e){Pe(_e)}function T(_e){if(Me){if(Me===_e){Pe(void 0),l&&Te(!1),W(_e);return}}else Pe(void 0)}function yt(){Pe(void 0)}const Je={allowDragOutsideBoard:r,animationDuration:e,arePiecesDraggable:s,arePremovesAllowed:i,arrows:Qt,autoPromoteToQueen:o,boardOrientation:a,boardWidth:c,chessPieces:ke,clearArrows:ln,clearCurrentRightClickDown:yt,currentPosition:Ie,currentRightClickDown:Me,customArrowColor:h,customBoardStyle:p,customDarkSquareStyle:m,customDropSquareStyle:b,customLightSquareStyle:y,customNotationStyle:f,customPremoveDarkSquareStyle:w,customPremoveLightSquareStyle:S,customSquare:_,customSquareStyles:C,deletePieceFromSquare:zt,drawNewArrow:Yt,dropOffBoardAction:P,handleSetPosition:jn,handleSparePieceDrop:Fn,id:A,isDraggablePiece:k,isWaitingForAnimation:Ze,lastPieceColour:Xe,lastSquareDraggedOver:Qe,newArrow:cn,onArrowDrawEnd:Xt,onDragOverSquare:I,onMouseOutSquare:z,onMouseOverSquare:V,onPieceClick:G,onPieceDragBegin:oe,onPieceDragEnd:X,onPieceDrop:te,onPieceDropOffBoard:j,onPromotionCheck:ie,onPromotionPieceSelect:F,onRightClickDown:$n,onRightClickUp:T,onSparePieceDrop:D,onSquareClick:H,positionDifferences:Be,premoves:we,promoteFromSquare:Ot,promoteToSquare:Kt,promotionDialogVariant:K,setLastSquareDraggedOver:It,setPromoteFromSquare:kt,setPromoteToSquare:Lt,setShowPromoteDialog:rt,showBoardNotation:ne,showPromoteDialog:At,snapToCursor:ue};return t(Tc.Provider,Object.assign({value:Je},{children:d}))});function of({row:r,col:e}){const{boardOrientation:n,boardWidth:s,customDarkSquareStyle:i,customLightSquareStyle:o,customNotationStyle:a}=Gt(),c=o.backgroundColor,d=i.backgroundColor,l=e===0,u=r===7,h=l&&u;function p(){return n==="white"?8-r:r+1}function f(){return n==="black"?fr[7-e]:fr[e]}function m(){return t(Q,{children:[t("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:c}),Vo(s,a))},{children:p()})),t("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:c}),Wo(s,a))},{children:f()}))]})}function b(){return t("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?d:c}),Wo(s,a))},{children:f()}))}function y(){return t("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},n==="black"?{color:r%2===0?d:c}:{color:r%2===0?d:c}),Vo(s,a))},{children:p()}))}return h?m():u?b():l?y():null}const Wo=(r,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:r/8-r/48,fontSize:r/48},e),Vo=(r,e)=>Object.assign({alignSelf:"flex-start",paddingRight:r/8-r/48,fontSize:r/48},e),Dc=_n({dragDropManager:void 0});function xt(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var Go=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),Ko=function(){return Math.random().toString(36).substring(7).split("").join(".")},Qo={INIT:"@@redux/INIT"+Ko(),REPLACE:"@@redux/REPLACE"+Ko()};function af(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function Ac(r,e,n){var s;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(xt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(xt(1));return n(Ac)(r,e)}if(typeof r!="function")throw new Error(xt(2));var i=r,o=e,a=[],c=a,d=!1;function l(){c===a&&(c=a.slice())}function u(){if(d)throw new Error(xt(3));return o}function h(b){if(typeof b!="function")throw new Error(xt(4));if(d)throw new Error(xt(5));var y=!0;return l(),c.push(b),function(){if(y){if(d)throw new Error(xt(6));y=!1,l();var w=c.indexOf(b);c.splice(w,1),a=null}}}function p(b){if(!af(b))throw new Error(xt(7));if(typeof b.type>"u")throw new Error(xt(8));if(d)throw new Error(xt(9));try{d=!0,o=i(o,b)}finally{d=!1}for(var y=a=c,x=0;x<y.length;x++){var w=y[x];w()}return b}function f(b){if(typeof b!="function")throw new Error(xt(10));i=b,p({type:Qo.REPLACE})}function m(){var b,y=h;return b={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(xt(11));function S(){w.next&&w.next(u())}S();var _=y(S);return{unsubscribe:_}}},b[Go]=function(){return this},b}return p({type:Qo.INIT}),s={dispatch:p,subscribe:h,getState:u,replaceReducer:f},s[Go]=m,s}function me(r,e,...n){if(cf()&&e===void 0)throw new Error("invariant requires an error message argument");if(!r){let s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;s=new Error(e.replace(/%s/g,function(){return n[i++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}function cf(){return typeof process<"u"&&!0}function lf(r,e,n){return e.split(".").reduce((s,i)=>s&&s[i]?s[i]:n||null,r)}function df(r,e){return r.filter(n=>n!==e)}function Oc(r){return typeof r=="object"}function uf(r,e){const n=new Map,s=o=>{n.set(o,n.has(o)?n.get(o)+1:1)};r.forEach(s),e.forEach(s);const i=[];return n.forEach((o,a)=>{o===1&&i.push(a)}),i}function hf(r,e){return r.filter(n=>e.indexOf(n)>-1)}const Hi="dnd-core/INIT_COORDS",os="dnd-core/BEGIN_DRAG",qi="dnd-core/PUBLISH_DRAG_SOURCE",as="dnd-core/HOVER",cs="dnd-core/DROP",ls="dnd-core/END_DRAG";function Yo(r,e){return{type:Hi,payload:{sourceClientOffset:e||null,clientOffset:r||null}}}const ff={type:Hi,payload:{clientOffset:null,sourceClientOffset:null}};function pf(r){return function(n=[],s={publishSource:!0}){const{publishSource:i=!0,clientOffset:o,getSourceClientOffset:a}=s,c=r.getMonitor(),d=r.getRegistry();r.dispatch(Yo(o)),mf(n,c,d);const l=vf(n,c);if(l==null){r.dispatch(ff);return}let u=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");gf(a),u=a(l)}r.dispatch(Yo(o,u));const p=d.getSource(l).beginDrag(c,l);if(p==null)return;bf(p),d.pinSource(l);const f=d.getSourceType(l);return{type:os,payload:{itemType:f,item:p,sourceId:l,clientOffset:o||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}function mf(r,e,n){me(!e.isDragging(),"Cannot call beginDrag while dragging."),r.forEach(function(s){me(n.getSource(s),"Expected sourceIds to be registered.")})}function gf(r){me(typeof r=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function bf(r){me(Oc(r),"Item must be an object.")}function vf(r,e){let n=null;for(let s=r.length-1;s>=0;s--)if(e.canDragSource(r[s])){n=r[s];break}return n}function yf(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function wf(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),s.forEach(function(i){yf(r,i,n[i])})}return r}function _f(r){return function(n={}){const s=r.getMonitor(),i=r.getRegistry();xf(s),Sf(s).forEach((a,c)=>{const d=Cf(a,c,i,s),l={type:cs,payload:{dropResult:wf({},n,d)}};r.dispatch(l)})}}function xf(r){me(r.isDragging(),"Cannot call drop while not dragging."),me(!r.didDrop(),"Cannot call drop twice during one drag operation.")}function Cf(r,e,n,s){const i=n.getTarget(r);let o=i?i.drop(s,r):void 0;return Nf(o),typeof o>"u"&&(o=e===0?{}:s.getDropResult()),o}function Nf(r){me(typeof r>"u"||Oc(r),"Drop result must either be an object or undefined.")}function Sf(r){const e=r.getTargetIds().filter(r.canDropOnTarget,r);return e.reverse(),e}function kf(r){return function(){const n=r.getMonitor(),s=r.getRegistry();Ef(n);const i=n.getSourceId();return i!=null&&(s.getSource(i,!0).endDrag(n,i),s.unpinSource()),{type:ls}}}function Ef(r){me(r.isDragging(),"Cannot call endDrag while not dragging.")}function fi(r,e){return e===null?r===null:Array.isArray(r)?r.some(n=>n===e):r===e}function Tf(r){return function(n,{clientOffset:s}={}){Df(n);const i=n.slice(0),o=r.getMonitor(),a=r.getRegistry(),c=o.getItemType();return Of(i,a,c),Af(i,o,a),Lf(i,o,a),{type:as,payload:{targetIds:i,clientOffset:s||null}}}}function Df(r){me(Array.isArray(r),"Expected targetIds to be an array.")}function Af(r,e,n){me(e.isDragging(),"Cannot call hover while not dragging."),me(!e.didDrop(),"Cannot call hover after drop.");for(let s=0;s<r.length;s++){const i=r[s];me(r.lastIndexOf(i)===s,"Expected targetIds to be unique in the passed array.");const o=n.getTarget(i);me(o,"Expected targetIds to be registered.")}}function Of(r,e,n){for(let s=r.length-1;s>=0;s--){const i=r[s],o=e.getTargetType(i);fi(o,n)||r.splice(s,1)}}function Lf(r,e,n){r.forEach(function(s){n.getTarget(s).hover(e,s)})}function If(r){return function(){if(r.getMonitor().isDragging())return{type:qi}}}function Mf(r){return{beginDrag:pf(r),publishDragSource:If(r),hover:Tf(r),drop:_f(r),endDrag:kf(r)}}class Pf{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function s(o){return(...a)=>{const c=o.apply(e,a);typeof c<"u"&&n(c)}}const i=Mf(this);return Object.keys(i).reduce((o,a)=>{const c=i[a];return o[a]=s(c),o},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const s=this.store.getState().refCount>0;this.backend&&(s&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!s&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function Rf(r,e){return{x:r.x+e.x,y:r.y+e.y}}function Lc(r,e){return{x:r.x-e.x,y:r.y-e.y}}function Bf(r){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:s}=r;return!e||!n||!s?null:Lc(Rf(e,s),n)}function jf(r){const{clientOffset:e,initialClientOffset:n}=r;return!e||!n?null:Lc(e,n)}const cr=[],Wi=[];cr.__IS_NONE__=!0;Wi.__IS_ALL__=!0;function Ff(r,e){return r===cr?!1:r===Wi||typeof e>"u"?!0:hf(e,r).length>0}class $f{subscribeToStateChange(e,n={}){const{handlerIds:s}=n;me(typeof e=="function","listener must be a function."),me(typeof s>"u"||Array.isArray(s),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const o=()=>{const a=this.store.getState(),c=a.stateId;try{c===i||c===i+1&&!Ff(a.dirtyHandlerIds,s)||e()}finally{i=c}};return this.store.subscribe(o)}subscribeToOffsetChange(e){me(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const s=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(s)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return me(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(me(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const s=this.registry.getTargetType(e),i=this.getItemType();return fi(s,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(me(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const s=this.registry.getSourceType(e),i=this.getItemType();return s!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:s}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),o=this.getItemType();if(o&&!fi(i,o))return!1;const a=this.getTargetIds();if(!a.length)return!1;const c=a.indexOf(e);return s?c===a.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Bf(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return jf(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const Xo=typeof global<"u"?global:self,Ic=Xo.MutationObserver||Xo.WebKitMutationObserver;function Mc(r){return function(){const n=setTimeout(i,0),s=setInterval(i,50);function i(){clearTimeout(n),clearInterval(s),r()}}}function Uf(r){let e=1;const n=new Ic(r),s=document.createTextNode("");return n.observe(s,{characterData:!0}),function(){e=-e,s.data=e}}const zf=typeof Ic=="function"?Uf:Mc;class Hf{enqueueTask(e){const{queue:n,requestFlush:s}=this;n.length||(s(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let s=0,i=e.length-this.index;s<i;s++)e[s]=e[s+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=zf(this.flush),this.requestErrorThrow=Mc(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class qf{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class Wf{create(e){const n=this.freeTasks,s=n.length?n.pop():new qf(this.onError,i=>n[n.length]=i);return s.task=e,s}constructor(e){this.onError=e,this.freeTasks=[]}}const Pc=new Hf,Vf=new Wf(Pc.registerPendingError);function Gf(r){Pc.enqueueTask(Vf.create(r))}const Vi="dnd-core/ADD_SOURCE",Gi="dnd-core/ADD_TARGET",Ki="dnd-core/REMOVE_SOURCE",ds="dnd-core/REMOVE_TARGET";function Kf(r){return{type:Vi,payload:{sourceId:r}}}function Qf(r){return{type:Gi,payload:{targetId:r}}}function Yf(r){return{type:Ki,payload:{sourceId:r}}}function Xf(r){return{type:ds,payload:{targetId:r}}}function Zf(r){me(typeof r.canDrag=="function","Expected canDrag to be a function."),me(typeof r.beginDrag=="function","Expected beginDrag to be a function."),me(typeof r.endDrag=="function","Expected endDrag to be a function.")}function Jf(r){me(typeof r.canDrop=="function","Expected canDrop to be a function."),me(typeof r.hover=="function","Expected hover to be a function."),me(typeof r.drop=="function","Expected beginDrag to be a function.")}function pi(r,e){if(e&&Array.isArray(r)){r.forEach(n=>pi(n,!1));return}me(typeof r=="string"||typeof r=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Nt;(function(r){r.SOURCE="SOURCE",r.TARGET="TARGET"})(Nt||(Nt={}));let ep=0;function tp(){return ep++}function np(r){const e=tp().toString();switch(r){case Nt.SOURCE:return`S${e}`;case Nt.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${r}`)}}function Zo(r){switch(r[0]){case"S":return Nt.SOURCE;case"T":return Nt.TARGET;default:throw new Error(`Cannot parse handler ID: ${r}`)}}function Jo(r,e){const n=r.entries();let s=!1;do{const{done:i,value:[,o]}=n.next();if(o===e)return!0;s=!!i}while(!s);return!1}class rp{addSource(e,n){pi(e),Zf(n);const s=this.addHandler(Nt.SOURCE,e,n);return this.store.dispatch(Kf(s)),s}addTarget(e,n){pi(e,!0),Jf(n);const s=this.addHandler(Nt.TARGET,e,n);return this.store.dispatch(Qf(s)),s}containsHandler(e){return Jo(this.dragSources,e)||Jo(this.dropTargets,e)}getSource(e,n=!1){return me(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return me(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return me(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return me(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Zo(e)===Nt.SOURCE}isTargetId(e){return Zo(e)===Nt.TARGET}removeSource(e){me(this.getSource(e),"Expected an existing source."),this.store.dispatch(Yf(e)),Gf(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){me(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Xf(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);me(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){me(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,s){const i=np(e);return this.types.set(i,n),e===Nt.SOURCE?this.dragSources.set(i,s):e===Nt.TARGET&&this.dropTargets.set(i,s),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const sp=(r,e)=>r===e;function ip(r,e){return!r&&!e?!0:!r||!e?!1:r.x===e.x&&r.y===e.y}function op(r,e,n=sp){if(r.length!==e.length)return!1;for(let s=0;s<r.length;++s)if(!n(r[s],e[s]))return!1;return!0}function ap(r=cr,e){switch(e.type){case as:break;case Vi:case Gi:case ds:case Ki:return cr;case os:case qi:case ls:case cs:default:return Wi}const{targetIds:n=[],prevTargetIds:s=[]}=e.payload,i=uf(n,s);if(!(i.length>0||!op(n,s)))return cr;const a=s[s.length-1],c=n[n.length-1];return a!==c&&(a&&i.push(a),c&&i.push(c)),i}function cp(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function lp(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),s.forEach(function(i){cp(r,i,n[i])})}return r}const ea={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function dp(r=ea,e){const{payload:n}=e;switch(e.type){case Hi:case os:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case as:return ip(r.clientOffset,n.clientOffset)?r:lp({},r,{clientOffset:n.clientOffset});case ls:case cs:return ea;default:return r}}function up(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Cn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),s.forEach(function(i){up(r,i,n[i])})}return r}const hp={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function fp(r=hp,e){const{payload:n}=e;switch(e.type){case os:return Cn({},r,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case qi:return Cn({},r,{isSourcePublic:!0});case as:return Cn({},r,{targetIds:n.targetIds});case ds:return r.targetIds.indexOf(n.targetId)===-1?r:Cn({},r,{targetIds:df(r.targetIds,n.targetId)});case cs:return Cn({},r,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case ls:return Cn({},r,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return r}}function pp(r=0,e){switch(e.type){case Vi:case Gi:return r+1;case Ki:case ds:return r-1;default:return r}}function mp(r=0){return r+1}function gp(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function bp(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),s.forEach(function(i){gp(r,i,n[i])})}return r}function vp(r={},e){return{dirtyHandlerIds:ap(r.dirtyHandlerIds,{type:e.type,payload:bp({},e.payload,{prevTargetIds:lf(r,"dragOperation.targetIds",[])})}),dragOffset:dp(r.dragOffset,e),refCount:pp(r.refCount,e),dragOperation:fp(r.dragOperation,e),stateId:mp(r.stateId)}}function yp(r,e=void 0,n={},s=!1){const i=wp(s),o=new $f(i,new rp(i)),a=new Pf(i,o),c=r(a,e,n);return a.receiveBackend(c),a}function wp(r){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ac(vp,r&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function _p(r,e){if(r==null)return{};var n=xp(r,e),s,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)s=o[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(n[s]=r[s])}return n}function xp(r,e){if(r==null)return{};var n={},s=Object.keys(r),i,o;for(o=0;o<s.length;o++)i=s[o],!(e.indexOf(i)>=0)&&(n[i]=r[i]);return n}let ta=0;const Qr=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Cp=$a(function(e){var{children:n}=e,s=_p(e,["children"]);const[i,o]=Np(s);return ee(()=>{if(o){const a=Rc();return++ta,()=>{--ta===0&&(a[Qr]=null)}}},[]),t(Dc.Provider,{value:i,children:n})});function Np(r){if("manager"in r)return[{dragDropManager:r.manager},!1];const e=Sp(r.backend,r.context,r.options,r.debugMode),n=!r.context;return[e,n]}function Sp(r,e=Rc(),n,s){const i=e;return i[Qr]||(i[Qr]={dragDropManager:yp(r,e,n,s)}),i[Qr]}function Rc(){return typeof global<"u"?global:window}var kp=function r(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,i,o;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(i=s;i--!==0;)if(!r(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(n).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=s;i--!==0;){var a=o[i];if(!r(e[a],n[a]))return!1}return!0}return e!==e&&n!==n};const yn=typeof window<"u"?sn:ee;function Bc(r,e,n){const[s,i]=g(()=>e(r)),o=In(()=>{const a=e(r);kp(s,a)||(i(a),n&&n())},[s,r,n]);return yn(o),[s,o]}function Ep(r,e,n){const[s,i]=Bc(r,e,n);return yn(function(){const a=r.getHandlerId();if(a!=null)return r.subscribeToStateChange(i,{handlerIds:[a]})},[r,i]),s}function jc(r,e,n){return Ep(e,r||(()=>({})),()=>n.reconnect())}function Fc(r,e){const n=[...e||[]];return e==null&&typeof r!="function"&&n.push(r),Ae(()=>typeof r=="function"?r():r,n)}function Tp(r){return Ae(()=>r.hooks.dragSource(),[r])}function Dp(r){return Ae(()=>r.hooks.dragPreview(),[r])}let ks=!1,Es=!1;class Ap{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){me(!ks,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ks=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{ks=!1}}isDragging(){if(!this.sourceId)return!1;me(!Es,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Es=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Es=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Ts=!1;class Op{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;me(!Ts,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ts=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ts=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Lp(r,e,n){const s=n.getRegistry(),i=s.addTarget(r,e);return[i,()=>s.removeTarget(i)]}function Ip(r,e,n){const s=n.getRegistry(),i=s.addSource(r,e);return[i,()=>s.removeSource(i)]}function mi(r,e,n,s){let i;if(i!==void 0)return!!i;if(r===e)return!0;if(typeof r!="object"||!r||typeof e!="object"||!e)return!1;const o=Object.keys(r),a=Object.keys(e);if(o.length!==a.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<o.length;d++){const l=o[d];if(!c(l))return!1;const u=r[l],h=e[l];if(i=void 0,i===!1||i===void 0&&u!==h)return!1}return!0}function gi(r){return r!==null&&typeof r=="object"&&Object.prototype.hasOwnProperty.call(r,"current")}function Mp(r){if(typeof r.type=="string")return;const e=r.type.displayName||r.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Pp(r){return(e=null,n=null)=>{if(!_r(e)){const o=e;return r(o,n),o}const s=e;return Mp(s),Rp(s,n?o=>r(o,n):r)}}function $c(r){const e={};return Object.keys(r).forEach(n=>{const s=r[n];if(n.endsWith("Ref"))e[n]=r[n];else{const i=Pp(s);e[n]=()=>i}}),e}function na(r,e){typeof r=="function"?r(e):r.current=e}function Rp(r,e){const n=r.ref;return me(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?Gs(r,{ref:s=>{na(n,s),na(e,s)}}):Gs(r,{ref:e})}class Bp{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,s=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(s&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!mi(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!mi(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=$c({dragSource:(n,s)=>{this.clearDragSource(),this.dragSourceOptions=s||null,gi(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,s)=>{this.clearDragPreview(),this.dragPreviewOptions=s||null,gi(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class jp{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!mi(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=$c({dropTarget:(n,s)=>{this.clearDropTarget(),this.dropTargetOptions=s,gi(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function xn(){const{dragDropManager:r}=on(Dc);return me(r!=null,"Expected drag drop context"),r}function Fp(r,e){const n=xn(),s=Ae(()=>new Bp(n.getBackend()),[n]);return yn(()=>(s.dragSourceOptions=r||null,s.reconnect(),()=>s.disconnectDragSource()),[s,r]),yn(()=>(s.dragPreviewOptions=e||null,s.reconnect(),()=>s.disconnectDragPreview()),[s,e]),s}function $p(){const r=xn();return Ae(()=>new Ap(r),[r])}class Up{beginDrag(){const e=this.spec,n=this.monitor;let s=null;return typeof e.item=="object"?s=e.item:typeof e.item=="function"?s=e.item(n):s={},s??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const s=this.spec,i=this.monitor,{isDragging:o}=s;return o?o(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,s=this.connector,{end:i}=e;i&&i(n.getItem(),n),s.reconnect()}constructor(e,n,s){this.spec=e,this.monitor=n,this.connector=s}}function zp(r,e,n){const s=Ae(()=>new Up(r,e,n),[e,n]);return ee(()=>{s.spec=r},[r]),s}function Hp(r){return Ae(()=>{const e=r.type;return me(e!=null,"spec.type must be defined"),e},[r])}function qp(r,e,n){const s=xn(),i=zp(r,e,n),o=Hp(r);yn(function(){if(o!=null){const[c,d]=Ip(o,i,s);return e.receiveHandlerId(c),n.receiveHandlerId(c),d}},[s,e,n,i,o])}function Wp(r,e){const n=Fc(r,e);me(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const s=$p(),i=Fp(n.options,n.previewOptions);return qp(n,s,i),[jc(n.collect,s,i),Tp(i),Dp(i)]}function Vp(r){const n=xn().getMonitor(),[s,i]=Bc(n,r);return ee(()=>n.subscribeToOffsetChange(i)),ee(()=>n.subscribeToStateChange(i)),s}function Gp(r){return Ae(()=>r.hooks.dropTarget(),[r])}function Kp(r){const e=xn(),n=Ae(()=>new jp(e.getBackend()),[e]);return yn(()=>(n.dropTargetOptions=r||null,n.reconnect(),()=>n.disconnectDropTarget()),[r]),n}function Qp(){const r=xn();return Ae(()=>new Op(r),[r])}function Yp(r){const{accept:e}=r;return Ae(()=>(me(r.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class Xp{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function Zp(r,e){const n=Ae(()=>new Xp(r,e),[e]);return ee(()=>{n.spec=r},[r]),n}function Jp(r,e,n){const s=xn(),i=Zp(r,e),o=Yp(r);yn(function(){const[c,d]=Lp(o,i,s);return e.receiveHandlerId(c),n.receiveHandlerId(c),d},[s,e,i,n,o.map(a=>a.toString()).join("|")])}function em(r,e){const n=Fc(r,e),s=Qp(),i=Kp(n.options);return Jp(n,s,i),[jc(n.collect,s,i),Gp(i)]}function Uc(r){let e=null;return()=>(e==null&&(e=r()),e)}function tm(r,e){return r.filter(n=>n!==e)}function nm(r,e){const n=new Set,s=o=>n.add(o);r.forEach(s),e.forEach(s);const i=[];return n.forEach(o=>i.push(o)),i}class rm{enter(e){const n=this.entered.length,s=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=nm(this.entered.filter(s),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=tm(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class sm{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(s=>{const i=this.config.exposeProperties[s];i!=null&&(n[s]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const zc="__NATIVE_FILE__",Hc="__NATIVE_URL__",qc="__NATIVE_TEXT__",Wc="__NATIVE_HTML__";var ra=Object.freeze({__proto__:null,FILE:zc,HTML:Wc,TEXT:qc,URL:Hc});function Ds(r,e,n){const s=e.reduce((i,o)=>i||r.getData(o),"");return s??n}const bi={[zc]:{exposeProperties:{files:r=>Array.prototype.slice.call(r.files),items:r=>r.items,dataTransfer:r=>r},matchesTypes:["Files"]},[Wc]:{exposeProperties:{html:(r,e)=>Ds(r,e,""),dataTransfer:r=>r},matchesTypes:["Html","text/html"]},[Hc]:{exposeProperties:{urls:(r,e)=>Ds(r,e,"").split(`
`),dataTransfer:r=>r},matchesTypes:["Url","text/uri-list"]},[qc]:{exposeProperties:{text:(r,e)=>Ds(r,e,""),dataTransfer:r=>r},matchesTypes:["Text","text/plain"]}};function im(r,e){const n=bi[r];if(!n)throw new Error(`native type ${r} has no configuration`);const s=new sm(n);return s.loadDataTransfer(e),s}function As(r){if(!r)return null;const e=Array.prototype.slice.call(r.types||[]);return Object.keys(bi).filter(n=>{const s=bi[n];return s?.matchesTypes?s.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const om=Uc(()=>/firefox/i.test(navigator.userAgent)),Vc=Uc(()=>!!window.safari);class sa{interpolate(e){const{xs:n,ys:s,c1s:i,c2s:o,c3s:a}=this;let c=n.length-1;if(e===n[c])return s[c];let d=0,l=a.length-1,u;for(;d<=l;){u=Math.floor(.5*(d+l));const f=n[u];if(f<e)d=u+1;else if(f>e)l=u-1;else return s[u]}c=Math.max(0,l);const h=e-n[c],p=h*h;return s[c]+i[c]*h+o[c]*p+a[c]*h*p}constructor(e,n){const{length:s}=e,i=[];for(let f=0;f<s;f++)i.push(f);i.sort((f,m)=>e[f]<e[m]?-1:1);const o=[],a=[];let c,d;for(let f=0;f<s-1;f++)c=e[f+1]-e[f],d=n[f+1]-n[f],o.push(c),a.push(d/c);const l=[a[0]];for(let f=0;f<o.length-1;f++){const m=a[f],b=a[f+1];if(m*b<=0)l.push(0);else{c=o[f];const y=o[f+1],x=c+y;l.push(3*x/((x+y)/m+(x+c)/b))}}l.push(a[a.length-1]);const u=[],h=[];let p;for(let f=0;f<l.length-1;f++){p=a[f];const m=l[f],b=1/o[f],y=m+l[f+1]-p-p;u.push((p-m-y)*b),h.push(y*b*b)}this.xs=e,this.ys=n,this.c1s=l,this.c2s=u,this.c3s=h}}const am=1;function Gc(r){const e=r.nodeType===am?r:r.parentElement;if(!e)return null;const{top:n,left:s}=e.getBoundingClientRect();return{x:s,y:n}}function Br(r){return{x:r.clientX,y:r.clientY}}function cm(r){var e;return r.nodeName==="IMG"&&(om()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(r)))}function lm(r,e,n,s){let i=r?e.width:n,o=r?e.height:s;return Vc()&&r&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}function dm(r,e,n,s,i){const o=cm(e),c=Gc(o?r:e),d={x:n.x-c.x,y:n.y-c.y},{offsetWidth:l,offsetHeight:u}=r,{anchorX:h,anchorY:p}=s,{dragPreviewWidth:f,dragPreviewHeight:m}=lm(o,e,l,u),b=()=>{let P=new sa([0,.5,1],[d.y,d.y/u*m,d.y+m-u]).interpolate(p);return Vc()&&o&&(P+=(window.devicePixelRatio-1)*m),P},y=()=>new sa([0,.5,1],[d.x,d.x/l*f,d.x+f-l]).interpolate(h),{offsetX:x,offsetY:w}=i,S=x===0||x,_=w===0||w;return{x:S?x:y(),y:_?w:b()}}let um=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}};function hm(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ia(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),s.forEach(function(i){hm(r,i,n[i])})}return r}class fm{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,s){return this.sourcePreviewNodeOptions.set(e,s),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,s){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,s);const i=a=>this.handleDragStart(a,e),o=a=>this.handleSelectStart(a);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",o),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",o),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const s=a=>this.handleDragEnter(a,e),i=a=>this.handleDragOver(a,e),o=a=>this.handleDrop(a,e);return n.addEventListener("dragenter",s),n.addEventListener("dragover",i),n.addEventListener("drop",o),()=>{n.removeEventListener("dragenter",s),n.removeEventListener("dragover",i),n.removeEventListener("drop",o)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return ia({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return ia({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(ra).some(n=>ra[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=im(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var s;return(s=this.rootElement)===null||s===void 0?void 0:s.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,s){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&Gc(o)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:o}=this;this.dragStartSourceIds=null;const a=Br(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(o||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:a});const{dataTransfer:c}=i,d=As(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){const u=this.monitor.getSourceId(),h=this.sourceNodes.get(u),p=this.sourcePreviewNodes.get(u)||h;if(p){const{anchorX:f,anchorY:m,offsetX:b,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),S=dm(h,p,a,{anchorX:f,anchorY:m},{offsetX:b,offsetY:y});c.setDragImage(p,S.x,S.y)}}try{c?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:l}=this.getCurrentSourcePreviewNodeOptions();l?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(d)this.beginDragNativeItem(d);else{if(c&&!c.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:c}=i,d=As(c);d&&this.beginDragNativeItem(d,c)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:o}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,o.length>0&&this.actions.hover(o,{clientOffset:Br(i)}),o.some(c=>this.monitor.canDropOnTarget(c))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var o;(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:o}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=Br(i),this.scheduleHover(o),(o||[]).some(c=>this.monitor.canDropOnTarget(c))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var o;i.preventDefault(),(o=this.currentNativeSource)===null||o===void 0||o.loadDataTransfer(i.dataTransfer)}else As(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:o}=this;this.dropTargetIds=[],this.actions.hover(o,{clientOffset:Br(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const o=i.target;typeof o.dragDrop=="function"&&(o.tagName==="INPUT"||o.tagName==="SELECT"||o.tagName==="TEXTAREA"||o.isContentEditable||(i.preventDefault(),o.dragDrop()))},this.options=new um(n,s),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new rm(this.isNodeInDocument)}}let jr;function pm(){return jr||(jr=new Image,jr.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),jr}const mm=function(e,n,s){return new fm(e,n,s)};function oa({isPremovedPiece:r=!1,piece:e,square:n,squares:s}){const{animationDuration:i,arePiecesDraggable:o,boardWidth:a,boardOrientation:c,chessPieces:d,currentPosition:l,deletePieceFromSquare:u,dropOffBoardAction:h,id:p,isDraggablePiece:f,isWaitingForAnimation:m,onPieceClick:b,onPieceDragBegin:y,onPieceDragEnd:x,onPieceDropOffBoard:w,onPromotionCheck:S,positionDifferences:_}=Gt(),[C,P]=g({opacity:1,zIndex:5,touchAction:"none",cursor:o&&f({piece:e,sourceSquare:n})?"-webkit-grab":"default"}),[{canDrag:A,isDragging:k},v,M]=Wp(()=>({type:"piece",item:()=>(y(e,n),{piece:e,square:n,id:p}),end:(z,V)=>{x(e,n),!V.didDrop()&&(h==="trash"&&u(n),w?.(n,e))},collect:z=>({canDrag:f({piece:e,sourceSquare:n}),isDragging:!!z.isDragging()})}),[e,n,l,p]);M(pm(),{captureDraggingState:!0}),ee(()=>{P(z=>Object.assign(Object.assign({},z),{opacity:k?0:1}))},[k]),ee(()=>{var z;const V=(z=_.removed)===null||z===void 0?void 0:z[n];if(!_.added||!V)return;const G=Object.entries(_.added).find(([oe,X])=>X===V||S(n,oe,V));if(m&&V&&G&&!r){const oe=n,X=G[0];if(oe&&X){const te=a/8;P(j=>Object.assign(Object.assign({},j),{transform:`translate(${(c==="black"?-1:1)*(X.charCodeAt(0)-oe.charCodeAt(0))*te}px, ${(c==="black"?-1:1)*(Number(oe[1])-Number(X[1]))*te}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[_]),ee(()=>{const{sourceSq:z}=I();z&&P(V=>Object.assign(Object.assign({},V),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[l]),ee(()=>{P(z=>Object.assign(Object.assign({},z),{cursor:o&&f({piece:e,sourceSquare:n})?"-webkit-grab":"default"}))},[n,l,o]);function I(){return{sourceSq:s[n]}}return t("div",Object.assign({ref:o&&A?v:null,onClick:()=>b(e,n),"data-piece":e,style:C},{children:typeof d[e]=="function"?d[e]({squareWidth:a/8,isDragging:k,square:n}):t("svg",Object.assign({viewBox:"1 1 43 43",width:a/8,height:a/8,style:{display:"block"}},{children:t("g",{children:d[e]})}))}))}function gm({square:r,squareColor:e,setSquares:n,squareHasPremove:s,children:i}){const o=$e(null),{autoPromoteToQueen:a,boardWidth:c,boardOrientation:d,clearArrows:l,currentPosition:u,currentRightClickDown:h,customBoardStyle:p,customDarkSquareStyle:f,customDropSquareStyle:m,customLightSquareStyle:b,customPremoveDarkSquareStyle:y,customPremoveLightSquareStyle:x,customSquare:w,customSquareStyles:S,drawNewArrow:_,handleSetPosition:C,handleSparePieceDrop:P,isWaitingForAnimation:A,lastPieceColour:k,lastSquareDraggedOver:v,onArrowDrawEnd:M,onDragOverSquare:I,onMouseOutSquare:z,onMouseOverSquare:V,onPieceDrop:G,onPromotionCheck:oe,onRightClickDown:X,onRightClickUp:te,onSquareClick:j,setLastSquareDraggedOver:ie,setPromoteFromSquare:F,setPromoteToSquare:D,setShowPromoteDialog:H}=Gt(),[{isOver:W},Y]=em(()=>({accept:"piece",drop:K,collect:ne=>({isOver:!!ne.isOver()})}),[r,u,G,A,k]);function K(ne){if(ne.isSpare){P(ne.piece,r);return}oe(ne.square,r,ne.piece)?a?C(ne.square,r,ne.piece[0]==="w"?"wQ":"bQ"):(F(ne.square),D(r),H(!0)):C(ne.square,r,ne.piece,!0)}ee(()=>{if(o.current){const{x:ne,y:R}=o.current.getBoundingClientRect();n(ue=>Object.assign(Object.assign({},ue),{[r]:{x:ne,y:R}}))}},[c,d]);const ge=Object.assign(Object.assign(Object.assign(Object.assign({},bm(r,d,p)),e==="black"?f:b),s&&(e==="black"?y:x)),W&&m);return t("div",Object.assign({ref:Y,style:ge,"data-square-color":e,"data-square":r,onTouchMove:ne=>{var R;const ue=ne.touches[0],Oe=document.elementsFromPoint(ue.clientX,ue.clientY),Ie=(R=Oe?.find(He=>He.getAttribute("data-square")))===null||R===void 0?void 0:R.getAttribute("data-square");Ie&&Ie!==v&&(ie(Ie),I(Ie))},onMouseOver:ne=>{ne.buttons===2&&h&&_(h,r),!(ne.relatedTarget&&ne.currentTarget.contains(ne.relatedTarget))&&V(r)},onMouseOut:ne=>{ne.relatedTarget&&ne.currentTarget.contains(ne.relatedTarget)||z(r)},onMouseDown:ne=>{ne.button===2&&X(r)},onMouseUp:ne=>{ne.button===2&&(h&&M(h,r),te(r))},onDragEnter:()=>I(r),onClick:()=>{const ne=u[r];j(r,ne),l()},onContextMenu:ne=>{ne.preventDefault()}},{children:typeof w=="string"?t(w,Object.assign({ref:o,style:Object.assign(Object.assign(Object.assign({},ca(c)),aa),!s&&S?.[r])},{children:i})):t(w,Object.assign({ref:o,square:r,squareColor:e,style:Object.assign(Object.assign(Object.assign({},ca(c)),aa),!s&&S?.[r])},{children:i}))}))}const aa={display:"flex",justifyContent:"center"},ca=r=>({width:r/8,height:r/8}),bm=(r,e,n)=>n?.borderRadius?r==="a1"?e==="white"?{borderBottomLeftRadius:n.borderRadius}:{borderTopRightRadius:n.borderRadius}:r==="a8"?e==="white"?{borderTopLeftRadius:n.borderRadius}:{borderBottomRightRadius:n.borderRadius}:r==="h1"?e==="white"?{borderBottomRightRadius:n.borderRadius}:{borderTopLeftRadius:n.borderRadius}:r==="h8"?e==="white"?{borderTopRightRadius:n.borderRadius}:{borderBottomLeftRadius:n.borderRadius}:{}:{};function vm(){const[r,e]=g({}),{arePremovesAllowed:n,boardOrientation:s,boardWidth:i,currentPosition:o,id:a,premoves:c,showBoardNotation:d}=Gt(),l=Ae(()=>{const u=[];return n?(c.forEach((h,p)=>{const{sourceSq:f,targetSq:m,piece:b}=h,y=u.find(x=>{var w;return x.piece===b&&((w=x.premovesRoute.at(-1))===null||w===void 0?void 0:w.targetSq)===f});y?y.premovesRoute.push({sourceSq:f,targetSq:m,index:p}):u.push({piece:b,premovesRoute:[{sourceSq:f,targetSq:m,index:p}]})}),u):[]},[c]);return t("div",Object.assign({"data-boardid":a},{children:[...Array(8)].map((u,h)=>t("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((p,f)=>{const m=s==="black"?fr[7-f]+(h+1):fr[f]+(8-h),b=f%2===h%2?"white":"black",y=c.find(w=>w.sourceSq===m||w.targetSq===m),x=l.filter(({premovesRoute:w})=>{var S;return((S=w.at(-1))===null||S===void 0?void 0:S.targetSq)===m}).sort((w,S)=>{var _,C;return((_=S.premovesRoute.at(-1))===null||_===void 0?void 0:_.index)-((C=w.premovesRoute.at(-1))===null||C===void 0?void 0:C.index)}).at(0);return t(gm,Object.assign({square:m,squareColor:b,setSquares:e,squareHasPremove:!!y},{children:[!y&&o[m]&&t(oa,{piece:o[m],square:m,squares:r}),x&&t(oa,{isPremovedPiece:!0,piece:x.piece,square:m,squares:r}),d&&t(of,{row:h,col:f})]}),`${f}${h}`)})}),h.toString()))}))}const ym=()=>{const{arrows:r,newArrow:e,boardOrientation:n,boardWidth:s,customArrowColor:i}=Gt(),o=[...r,e].filter(Boolean);return t("svg",Object.assign({width:s,height:s,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:o.map((a,c)=>{const[d,l,u]=a;if(d===l)return null;const h=hi(n,s,d),p=hi(n,s,l);let f=s/32;const m=c===r.length;r.some(S=>S[0]!==d&&S[1]===l)&&!m&&(f=s/16);const b=p.x-h.x,y=p.y-h.y,x=Math.hypot(y,b),w={x:h.x+b*(x-f)/x,y:h.y+y*(x-f)/x};return t(Q,{children:[t("marker",Object.assign({id:`arrowhead-${c}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:t("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:u??i})})),t("line",{x1:h.x,y1:h.y,x2:w.x,y2:w.y,opacity:m?"0.5":"0.65",stroke:u??i,strokeWidth:m?.9*s/40:s/40,markerEnd:`url(#arrowhead-${c})`})]},`${d}-${l}${m?"-active":""}`)})}))};function wm({option:r}){const[e,n]=g(!1),{boardWidth:s,chessPieces:i,customDarkSquareStyle:o,customLightSquareStyle:a,handleSetPosition:c,onPromotionPieceSelect:d,promoteFromSquare:l,promoteToSquare:u,promotionDialogVariant:h}=Gt(),p=()=>{switch(r[1]){case"Q":return o.backgroundColor;case"R":return a.backgroundColor;case"N":return h==="default"?a.backgroundColor:o.backgroundColor;case"B":return h==="default"?o.backgroundColor:a.backgroundColor}};return t("div",Object.assign({onClick:()=>{d(r,l??void 0,u??void 0)&&c(l,u,r,!0)},onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),"data-piece":r,style:{cursor:"pointer",backgroundColor:e?p():`${p()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[r]=="function"?t("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[r]({squareWidth:s/8,isDragging:!1})})):t("svg",Object.assign({viewBox:"1 1 43 43",width:s/8,height:s/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:t("g",{children:i[r]})}))}))}function _m(){const{boardOrientation:r,boardWidth:e,promotionDialogVariant:n,promoteToSquare:s}=Gt(),i=s?.[1]==="1"?"b":"w",o=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],a={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},c=hi(r,e,s||"a8");return t("div",Object.assign({style:Object.assign({position:"absolute",top:`${c?.y}px`,left:`${c?.x}px`,zIndex:1e3},a[n]),title:"Choose promotion piece"},{children:o.map(d=>t(wm,{option:d},d))}))}const xm={whiteKing:t("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:t("g",{children:t("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function Cm({children:r}){try{return t(Q,{children:r})}catch(e){return console.log(e),t(Kc,{showError:!0})}}function Kc({showError:r=!1}){return t("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[t("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:xm.whiteKing})),r&&t("h1",{children:"Something went wrong"})]}))}function Nm(){const r=$e(null),{boardWidth:e,clearCurrentRightClickDown:n,onPromotionPieceSelect:s,setShowPromoteDialog:i,showPromoteDialog:o,customBoardStyle:a}=Gt();return ee(()=>{function c(d){r.current&&!r.current.contains(d.target)&&n()}return document.addEventListener("mouseup",c),()=>{document.removeEventListener("mouseup",c)}},[]),e?t("div",Object.assign({style:{perspective:"1000px"}},{children:t("div",Object.assign({ref:r,style:Object.assign(Object.assign({position:"relative"},Sm(e)),a)},{children:[t(vm,{}),t(ym,{}),o&&t(Q,{children:[t("div",{onClick:()=>{i(!1),s?.()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),t(_m,{})]})]}))})):t(Kc,{})}const Sm=r=>({cursor:"default",height:r,width:r});var nn;(function(r){r.mouse="mouse",r.touch="touch",r.keyboard="keyboard"})(nn||(nn={}));class km{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,s,i;return(i=(s=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&s!==void 0?s:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,n,s,i;return(i=(s=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&s!==void 0?s:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function Em(r,e,n,s){return Math.sqrt(Math.pow(Math.abs(n-r),2)+Math.pow(Math.abs(s-e),2))}function Tm(r,e,n,s,i){if(!i)return!1;const o=Math.atan2(s-e,n-r)*180/Math.PI+180;for(let a=0;a<i.length;++a){const c=i[a];if(c&&(c.start==null||o>=c.start)&&(c.end==null||o<=c.end))return!0}return!1}const Dm={Left:1},Am={Left:0};function Os(r){return r.button===void 0||r.button===Am.Left}function Om(r){return r.buttons===void 0||(r.buttons&Dm.Left)===0}function Qc(r){return!!r.targetTouches}const Lm=1;function Im(r){const e=r.nodeType===Lm?r:r.parentElement;if(!e)return;const{top:n,left:s}=e.getBoundingClientRect();return{x:s,y:n}}function Mm(r,e){if(r.targetTouches.length===1)return rs(r.targetTouches[0]);if(e&&r.touches.length===1&&r.touches[0].target===e.target)return rs(r.touches[0])}function rs(r,e){return Qc(r)?Mm(r,e):{x:r.clientX,y:r.clientY}}const la=(()=>{let r=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return r=!0,!0}}))}catch{}return r})(),Xn={[nn.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[nn.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[nn.keyboard]:{keydown:"keydown"}};class lr{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(me(!lr.isSetUp,"Cannot have two Touch backends at the same time."),lr.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(lr.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,s,i=!1){const o=la?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(a){const c=Xn[a][n];c&&e.addEventListener(c,s,o)})}removeEventListener(e,n,s,i=!1){const o=la?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(a){const c=Xn[a][n];c&&e.removeEventListener(c,s,o)})}connectDragSource(e,n){const s=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",s),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",s)}}connectDragPreview(e,n,s){return this.sourcePreviewNodeOptions.set(e,s),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const s=this.options.rootElement;if(!this.document||!s)return()=>{};const i=o=>{if(!this.document||!s||!this.monitor.isDragging())return;let a;switch(o.type){case Xn.mouse.move:a={x:o.clientX,y:o.clientY};break;case Xn.touch.move:var c,d;a={x:((c=o.touches[0])===null||c===void 0?void 0:c.clientX)||0,y:((d=o.touches[0])===null||d===void 0?void 0:d.clientY)||0};break}const l=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,u=l&&n.contains(l);if(l===n||u)return this.handleMove(o,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,s){this.getSourceClientOffset=i=>{const o=this.sourceNodes.get(i);return o&&Im(o)},this.handleTopMoveStartCapture=i=>{Os(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!Os(i))return;const o=rs(i);o&&(Qc(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=o),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!Os(i))return;const o=i.type===Xn.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),o),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,o)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(o)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:o,dragOverTargetIds:a}=this,c=this.options.enableHoverOutsideTarget,d=rs(i,this.lastTargetTouchFallback);if(!d)return;if(this._isScrolling||!this.monitor.isDragging()&&Tm(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,d.x,d.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&o&&Em(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,d.x,d.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(o,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const l=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(l),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const u=(a||[]).map(m=>this.targetNodes.get(m)).filter(m=>!!m),h=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(d.x,d.y,u):this.document.elementsFromPoint(d.x,d.y),p=[];for(const m in h){if(!h.hasOwnProperty(m))continue;let b=h[m];for(b!=null&&p.push(b);b;)b=b.parentElement,b&&p.indexOf(b)===-1&&p.push(b)}const f=p.filter(m=>u.indexOf(m)>-1).map(m=>this._getDropTargetId(m)).filter(m=>!!m).filter((m,b,y)=>y.indexOf(m)===b);if(c)for(const m in this.targetNodes){const b=this.targetNodes.get(m);if(l&&b&&b.contains(l)&&f.indexOf(m)===-1){f.unshift(m);break}}f.reverse(),this.actions.hover(f,{clientOffset:d})},this._getDropTargetId=i=>{const o=this.targetNodes.keys();let a=o.next();for(;a.done===!1;){const c=a.value;if(i===this.targetNodes.get(c))return c;a=o.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!Om(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new km(s,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(nn.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(nn.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(nn.keyboard)}}const Pm=function(e,n={},s={}){return new lr(e,n,s)},Rm=_n({isCustomDndProviderSet:!1}),Bm=({children:r})=>t(Q,{children:r}),jm=({customDndBackend:r,customDndBackendOptions:e,children:n})=>{const[s,i]=g(),[o,a]=g(!1),[c,d]=g(!1),{isCustomDndProviderSet:l}=on(Rm);ee(()=>{d("ontouchstart"in window),a(!0),i(window)},[]);const u=l?Bm:Cp;return o?s?t(u,Object.assign({backend:r||(c?Pm:mm),context:s,options:r?e:void 0},{children:n})):t(Q,{children:n}):null};function Fm({boardContainer:r}){const{boardWidth:e,chessPieces:n,id:s,snapToCursor:i,allowDragOutsideBoard:o}=Gt(),a=Vp(p=>({item:p.getItem(),clientOffset:p.getClientOffset(),sourceClientOffset:p.getSourceClientOffset(),isDragging:p.isDragging()})),{isDragging:c,item:d,clientOffset:l,sourceClientOffset:u}=a,h=In((p,f)=>{if(!p||!f)return{display:"none"};let{x:m,y:b}=i?p:f;const y=e/8/2;if(i&&(m-=y,b-=y),!o){const{left:w,top:S}=r,_=w-y,C=S-y,P=w+e-y,A=S+e-y;m=Math.max(_,Math.min(m,P)),b=Math.max(C,Math.min(b,A))}const x=`translate(${m}px, ${b}px)`;return{transform:x,WebkitTransform:x,touchAction:"none"}},[e,o,i,r]);return c&&d.id===s?t("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:t("div",Object.assign({style:h(l,u)},{children:typeof n[d.piece]=="function"?n[d.piece]({squareWidth:e/8,isDragging:!0}):t("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:t("g",{children:n[d.piece]})}))}))})):null}const $m=Ei((r,e)=>{const{customDndBackend:n,customDndBackendOptions:s,onBoardWidthChange:i}=r,o=Gh(r,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[a,c]=g(r.boardWidth),d=$e(null),l=$e(null),[u,h]=g({left:0,top:0}),p=Ae(()=>{var f;return(f=d.current)===null||f===void 0?void 0:f.getBoundingClientRect()},[d.current]);return ee(()=>{a&&i?.(a)},[a]),ee(()=>{h({left:p?.left?p?.left:0,top:p?.top?p?.top:0})},[p]),ee(()=>{var f;if(r.boardWidth===void 0&&(!((f=d.current)===null||f===void 0)&&f.offsetWidth)){const m=new ResizeObserver(()=>{var b;c((b=d.current)===null||b===void 0?void 0:b.offsetWidth)});return m.observe(d.current),()=>{m.disconnect()}}},[d.current]),t(Cm,{children:t("div",Object.assign({ref:l,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[t("div",{ref:d,style:{width:"100%"}}),t(jm,Object.assign({customDndBackend:n,customDndBackendOptions:s},{children:a&&t(sf,Object.assign({boardWidth:a},o,{ref:e},{children:[t(Fm,{boardContainer:u}),t(Nm,{})]}))}))]}))})});function Um(r){return r!==null?{comment:r,variations:[]}:{variations:[]}}function zm(r,e,n,s,i){const o={move:r,variations:i};return e&&(o.suffix=e),n&&(o.nag=n),s!==null&&(o.comment=s),o}function Hm(...r){const[e,...n]=r;let s=e;for(const i of n)i!==null&&(s.variations=[i,...i.variations],i.variations=[],s=i);return e}function qm(r,e){if(e.marker&&e.marker.comment){let n=e.root;for(;;){const s=n.variations[0];if(!s){n.comment=e.marker.comment;break}n=s}}return{headers:r,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function Wm(r,e){function n(){this.constructor=r}n.prototype=e.prototype,r.prototype=new n}function Tn(r,e,n,s){var i=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(i,Tn.prototype),i.expected=e,i.found=n,i.location=s,i.name="SyntaxError",i}Wm(Tn,Error);function Ls(r,e,n){return n=n||" ",r.length>e?r:(e-=r.length,n+=n.repeat(e),r+n.slice(0,e))}Tn.prototype.format=function(r){var e="Error: "+this.message;if(this.location){var n=null,s;for(s=0;s<r.length;s++)if(r[s].source===this.location.source){n=r[s].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,o=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,a=this.location.source+":"+o.line+":"+o.column;if(n){var c=this.location.end,d=Ls("",o.line.toString().length," "),l=n[i.line-1],u=i.line===c.line?c.column:l.length+1,h=u-i.column||1;e+=`
 --> `+a+`
`+d+` |
`+o.line+" | "+l+`
`+d+" | "+Ls("",i.column-1," ")+Ls("",h,"^")}else e+=`
 at `+a}return e};Tn.buildMessage=function(r,e){var n={literal:function(l){return'"'+i(l.text)+'"'},class:function(l){var u=l.parts.map(function(h){return Array.isArray(h)?o(h[0])+"-"+o(h[1]):o(h)});return"["+(l.inverted?"^":"")+u.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(l){return l.description}};function s(l){return l.charCodeAt(0).toString(16).toUpperCase()}function i(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+s(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+s(u)})}function o(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+s(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+s(u)})}function a(l){return n[l.type](l)}function c(l){var u=l.map(a),h,p;if(u.sort(),u.length>0){for(h=1,p=1;h<u.length;h++)u[h-1]!==u[h]&&(u[p]=u[h],p++);u.length=p}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}function d(l){return l?'"'+i(l)+'"':"end of input"}return"Expected "+c(r)+" but "+d(e)+" found."};function Vm(r,e){e=e!==void 0?e:{};var n={},s=e.grammarSource,i={pgn:zn},o=zn,a="[",c='"',d="]",l=".",u="O-O-O",h="O-O",p="0-0-0",f="0-0",m="$",b="{",y="}",x=";",w="(",S=")",_="1-0",C="0-1",P="1/2-1/2",A="*",k=/^[a-zA-Z]/,v=/^[^"]/,M=/^[0-9]/,I=/^[.]/,z=/^[a-zA-Z1-8\-=]/,V=/^[+#]/,G=/^[!?]/,oe=/^[^}]/,X=/^[^\r\n]/,te=/^[ \t\r\n]/,j=Ve("tag pair"),ie=pe("[",!1),F=pe('"',!1),D=pe("]",!1),H=Ve("tag name"),W=je([["a","z"],["A","Z"]],!1,!1),Y=Ve("tag value"),K=je(['"'],!0,!1),ge=Ve("move number"),ne=je([["0","9"]],!1,!1),R=pe(".",!1),ue=je(["."],!1,!1),Oe=Ve("standard algebraic notation"),Ie=pe("O-O-O",!1),He=pe("O-O",!1),Be=pe("0-0-0",!1),Dt=pe("0-0",!1),Xe=je([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),ht=je(["+","#"],!1,!1),At=Ve("suffix annotation"),rt=je(["!","?"],!1,!1),Ot=Ve("NAG"),kt=pe("$",!1),Kt=Ve("brace comment"),Lt=pe("{",!1),we=je(["}"],!0,!1),Le=pe("}",!1),Ee=Ve("rest of line comment"),Me=pe(";",!1),Pe=je(["\r",`
`],!0,!1),ke=Ve("variation"),Z=pe("(",!1),Ne=pe(")",!1),bt=Ve("game termination marker"),pt=pe("1-0",!1),Ze=pe("0-1",!1),st=pe("1/2-1/2",!1),Qe=pe("*",!1),It=Ve("whitespace"),Qt=je([" ","	","\r",`
`],!1,!1),cn=function(E,O){return qm(E,O)},ln=function(E){return Object.fromEntries(E)},Yt=function(E,O){return[E,O]},Xt=function(E,O){return{root:E,marker:O}},jn=function(E,O){return Hm(Um(E),...O.flat())},zt=function(E,O,L,ae,ce){return zm(E,O,L,ae,ce)},dn=function(E){return E},Fn=function(E){return E.replace(/[\r\n]+/g," ")},Te=function(E){return E.trim()},vt=function(E){return E},$n=function(E,O){return{result:E,comment:O}},T=e.peg$currPos|0,yt=[{line:1,column:1}],Je=T,_e=e.peg$maxFailExpected||[],B=e.peg$silentFails|0,xe;if(e.startRule){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');o=i[e.startRule]}function pe(E,O){return{type:"literal",text:E,ignoreCase:O}}function je(E,O,L){return{type:"class",parts:E,inverted:O,ignoreCase:L}}function et(){return{type:"end"}}function Ve(E){return{type:"other",description:E}}function Un(E){var O=yt[E],L;if(O)return O;if(E>=yt.length)L=yt.length-1;else for(L=E;!yt[--L];);for(O=yt[L],O={line:O.line,column:O.column};L<E;)r.charCodeAt(L)===10?(O.line++,O.column=1):O.column++,L++;return yt[E]=O,O}function wt(E,O,L){var ae=Un(E),ce=Un(O),Ce={source:s,start:{offset:E,line:ae.line,column:ae.column},end:{offset:O,line:ce.line,column:ce.column}};return Ce}function re(E){T<Je||(T>Je&&(Je=T,_e=[]),_e.push(E))}function Cr(E,O,L){return new Tn(Tn.buildMessage(E,O),E,O,L)}function zn(){var E,O,L;return E=T,O=Nr(),L=$(),E=cn(O,L),E}function Nr(){var E,O,L;for(E=T,O=[],L=Sr();L!==n;)O.push(L),L=Sr();return L=it(),E=ln(O),E}function Sr(){var E,O,L,ae,ce,Ce,un;return B++,E=T,it(),r.charCodeAt(T)===91?(O=a,T++):(O=n,B===0&&re(ie)),O!==n?(it(),L=se(),L!==n?(it(),r.charCodeAt(T)===34?(ae=c,T++):(ae=n,B===0&&re(F)),ae!==n?(ce=N(),r.charCodeAt(T)===34?(Ce=c,T++):(Ce=n,B===0&&re(F)),Ce!==n?(it(),r.charCodeAt(T)===93?(un=d,T++):(un=n,B===0&&re(D)),un!==n?E=Yt(L,ce):(T=E,E=n)):(T=E,E=n)):(T=E,E=n)):(T=E,E=n)):(T=E,E=n),B--,E===n&&B===0&&re(j),E}function se(){var E,O,L;if(B++,E=T,O=[],L=r.charAt(T),k.test(L)?T++:(L=n,B===0&&re(W)),L!==n)for(;L!==n;)O.push(L),L=r.charAt(T),k.test(L)?T++:(L=n,B===0&&re(W));else O=n;return O!==n?E=r.substring(E,T):E=O,B--,E===n&&(O=n,B===0&&re(H)),E}function N(){var E,O,L;for(B++,E=T,O=[],L=r.charAt(T),v.test(L)?T++:(L=n,B===0&&re(K));L!==n;)O.push(L),L=r.charAt(T),v.test(L)?T++:(L=n,B===0&&re(K));return E=r.substring(E,T),B--,O=n,B===0&&re(Y),E}function $(){var E,O,L;return E=T,O=J(),it(),L=kr(),L===n&&(L=null),it(),E=Xt(O,L),E}function J(){var E,O,L,ae;for(E=T,O=Mt(),O===n&&(O=null),L=[],ae=Se();ae!==n;)L.push(ae),ae=Se();return E=jn(O,L),E}function Se(){var E,O,L,ae,ce,Ce,un,Er;if(E=T,it(),Ge(),it(),O=Fe(),O!==n){for(L=tt(),L===n&&(L=null),ae=[],ce=_t();ce!==n;)ae.push(ce),ce=_t();for(ce=it(),Ce=Mt(),Ce===n&&(Ce=null),un=[],Er=qn();Er!==n;)un.push(Er),Er=qn();E=zt(O,L,ae,Ce,un)}else T=E,E=n;return E}function Ge(){var E,O,L,ae,ce,Ce;for(B++,E=T,O=[],L=r.charAt(T),M.test(L)?T++:(L=n,B===0&&re(ne));L!==n;)O.push(L),L=r.charAt(T),M.test(L)?T++:(L=n,B===0&&re(ne));if(r.charCodeAt(T)===46?(L=l,T++):(L=n,B===0&&re(R)),L!==n){for(ae=it(),ce=[],Ce=r.charAt(T),I.test(Ce)?T++:(Ce=n,B===0&&re(ue));Ce!==n;)ce.push(Ce),Ce=r.charAt(T),I.test(Ce)?T++:(Ce=n,B===0&&re(ue));O=[O,L,ae,ce],E=O}else T=E,E=n;return B--,E===n&&(O=n,B===0&&re(ge)),E}function Fe(){var E,O,L,ae,ce,Ce;if(B++,E=T,O=T,r.substr(T,5)===u?(L=u,T+=5):(L=n,B===0&&re(Ie)),L===n&&(r.substr(T,3)===h?(L=h,T+=3):(L=n,B===0&&re(He)),L===n&&(r.substr(T,5)===p?(L=p,T+=5):(L=n,B===0&&re(Be)),L===n&&(r.substr(T,3)===f?(L=f,T+=3):(L=n,B===0&&re(Dt)),L===n))))if(L=T,ae=r.charAt(T),k.test(ae)?T++:(ae=n,B===0&&re(W)),ae!==n){if(ce=[],Ce=r.charAt(T),z.test(Ce)?T++:(Ce=n,B===0&&re(Xe)),Ce!==n)for(;Ce!==n;)ce.push(Ce),Ce=r.charAt(T),z.test(Ce)?T++:(Ce=n,B===0&&re(Xe));else ce=n;ce!==n?(ae=[ae,ce],L=ae):(T=L,L=n)}else T=L,L=n;return L!==n?(ae=r.charAt(T),V.test(ae)?T++:(ae=n,B===0&&re(ht)),ae===n&&(ae=null),L=[L,ae],O=L):(T=O,O=n),O!==n?E=r.substring(E,T):E=O,B--,E===n&&(O=n,B===0&&re(Oe)),E}function tt(){var E,O,L;for(B++,E=T,O=[],L=r.charAt(T),G.test(L)?T++:(L=n,B===0&&re(rt));L!==n;)O.push(L),O.length>=2?L=n:(L=r.charAt(T),G.test(L)?T++:(L=n,B===0&&re(rt)));return O.length<1?(T=E,E=n):E=O,B--,E===n&&(O=n,B===0&&re(At)),E}function _t(){var E,O,L,ae,ce;if(B++,E=T,it(),r.charCodeAt(T)===36?(O=m,T++):(O=n,B===0&&re(kt)),O!==n){if(L=T,ae=[],ce=r.charAt(T),M.test(ce)?T++:(ce=n,B===0&&re(ne)),ce!==n)for(;ce!==n;)ae.push(ce),ce=r.charAt(T),M.test(ce)?T++:(ce=n,B===0&&re(ne));else ae=n;ae!==n?L=r.substring(L,T):L=ae,L!==n?E=dn(L):(T=E,E=n)}else T=E,E=n;return B--,E===n&&B===0&&re(Ot),E}function Mt(){var E;return E=Hn(),E===n&&(E=qe()),E}function Hn(){var E,O,L,ae,ce;if(B++,E=T,r.charCodeAt(T)===123?(O=b,T++):(O=n,B===0&&re(Lt)),O!==n){for(L=T,ae=[],ce=r.charAt(T),oe.test(ce)?T++:(ce=n,B===0&&re(we));ce!==n;)ae.push(ce),ce=r.charAt(T),oe.test(ce)?T++:(ce=n,B===0&&re(we));L=r.substring(L,T),r.charCodeAt(T)===125?(ae=y,T++):(ae=n,B===0&&re(Le)),ae!==n?E=Fn(L):(T=E,E=n)}else T=E,E=n;return B--,E===n&&(O=n,B===0&&re(Kt)),E}function qe(){var E,O,L,ae,ce;if(B++,E=T,r.charCodeAt(T)===59?(O=x,T++):(O=n,B===0&&re(Me)),O!==n){for(L=T,ae=[],ce=r.charAt(T),X.test(ce)?T++:(ce=n,B===0&&re(Pe));ce!==n;)ae.push(ce),ce=r.charAt(T),X.test(ce)?T++:(ce=n,B===0&&re(Pe));L=r.substring(L,T),E=Te(L)}else T=E,E=n;return B--,E===n&&(O=n,B===0&&re(Ee)),E}function qn(){var E,O,L,ae;return B++,E=T,it(),r.charCodeAt(T)===40?(O=w,T++):(O=n,B===0&&re(Z)),O!==n?(L=J(),L!==n?(it(),r.charCodeAt(T)===41?(ae=S,T++):(ae=n,B===0&&re(Ne)),ae!==n?E=vt(L):(T=E,E=n)):(T=E,E=n)):(T=E,E=n),B--,E===n&&B===0&&re(ke),E}function kr(){var E,O,L;return B++,E=T,r.substr(T,3)===_?(O=_,T+=3):(O=n,B===0&&re(pt)),O===n&&(r.substr(T,3)===C?(O=C,T+=3):(O=n,B===0&&re(Ze)),O===n&&(r.substr(T,7)===P?(O=P,T+=7):(O=n,B===0&&re(st)),O===n&&(r.charCodeAt(T)===42?(O=A,T++):(O=n,B===0&&re(Qe))))),O!==n?(it(),L=Mt(),L===n&&(L=null),E=$n(O,L)):(T=E,E=n),B--,E===n&&(O=n,B===0&&re(bt)),E}function it(){var E,O;for(B++,E=[],O=r.charAt(T),te.test(O)?T++:(O=n,B===0&&re(Qt));O!==n;)E.push(O),O=r.charAt(T),te.test(O)?T++:(O=n,B===0&&re(Qt));return B--,O=n,B===0&&re(It),E}if(xe=o(),e.peg$library)return{peg$result:xe,peg$currPos:T,peg$FAILED:n,peg$maxFailExpected:_e,peg$maxFailPos:Je};if(xe!==n&&T===r.length)return xe;throw xe!==n&&T<r.length&&re(et()),Cr(_e,Je<r.length?r.charAt(Je):null,Je<r.length?wt(Je,Je+1):wt(Je,Je))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Yr=0xffffffffffffffffn;function Is(r,e){return(r<<e|r>>64n-e)&0xffffffffffffffffn}function da(r,e){return r*e&Yr}function Gm(r){return function(){let e=BigInt(r&Yr),n=BigInt(r>>64n&Yr);const s=da(Is(da(e,5n),7n),9n);return n^=e,e=(Is(e,24n)^n^n<<16n)&Yr,n=Is(n,37n),r=n<<64n|e,s}}const us=Gm(0xa187eb39cdcaed8f31c4b365b102e01en),Km=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>us()))),Qm=Array.from({length:8},()=>us()),Ym=Array.from({length:16},()=>us()),Ms=us(),nt="w",mt="b",Ue="p",vi="n",Xr="b",sr="r",en="q",We="k",Ps="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class Fr{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,n){const{color:s,piece:i,from:o,to:a,flags:c,captured:d,promotion:l}=n,u=Ke(o),h=Ke(a);this.color=s,this.piece=i,this.from=u,this.to=h,this.san=e._moveToSan(n,e._moves({legal:!0})),this.lan=u+h,this.before=e.fen(),e._makeMove(n),this.after=e.fen(),e._undoMove(),this.flags="";for(const p in he)he[p]&c&&(this.flags+=hn[p]);d&&(this.captured=d),l&&(this.promotion=l,this.lan+=l)}isCapture(){return this.flags.indexOf(hn.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(hn.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(hn.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(hn.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(hn.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(hn.BIG_PAWN)>-1}}const Ye=-1,hn={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},he={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},yi={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},Xm={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},Zm={...yi,...Xm},le={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Rs={b:[16,32,17,15],w:[-16,-32,-17,-15]},ua={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Jm=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],e1=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],t1={p:1,n:2,b:4,r:8,q:16,k:32},n1="pnbrqkPNBRQK",ha=[vi,Xr,sr,en],r1=7,s1=6,i1=1,o1=0,$r={[We]:he.KSIDE_CASTLE,[en]:he.QSIDE_CASTLE},Zt={w:[{square:le.a1,flag:he.QSIDE_CASTLE},{square:le.h1,flag:he.KSIDE_CASTLE}],b:[{square:le.a8,flag:he.QSIDE_CASTLE},{square:le.h8,flag:he.KSIDE_CASTLE}]},a1={b:i1,w:s1},Bs="--";function vn(r){return r>>4}function pr(r){return r&15}function Yc(r){return"0123456789".indexOf(r)!==-1}function Ke(r){const e=pr(r),n=vn(r);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Zn(r){return r===nt?mt:nt}function c1(r){const e=r.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const s=parseInt(e[4],10);if(isNaN(s)||s<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let a=0;a<i.length;a++){let c=0,d=!1;for(let l=0;l<i[a].length;l++)if(Yc(i[a][l])){if(d)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};c+=parseInt(i[a][l],10),d=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[a][l]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};c+=1,d=!1}if(c!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const o=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:a,regex:c}of o){if(!c.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${a} king`};if((e[0].match(c)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${a} kings`}}return Array.from(i[0]+i[7]).some(a=>a.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function l1(r,e){const n=r.from,s=r.to,i=r.piece;let o=0,a=0,c=0;for(let d=0,l=e.length;d<l;d++){const u=e[d].from,h=e[d].to,p=e[d].piece;i===p&&n!==u&&s===h&&(o++,vn(n)===vn(u)&&a++,pr(n)===pr(u)&&c++)}return o>0?a>0&&c>0?Ke(n):c>0?Ke(n).charAt(1):Ke(n).charAt(0):""}function Jt(r,e,n,s,i,o=void 0,a=he.NORMAL){const c=vn(s);if(i===Ue&&(c===r1||c===o1))for(let d=0;d<ha.length;d++){const l=ha[d];r.push({color:e,from:n,to:s,piece:i,captured:o,promotion:l,flags:a|he.PROMOTION})}else r.push({color:e,from:n,to:s,piece:i,captured:o,flags:a})}function fa(r){let e=r.charAt(0);return e>="a"&&e<="h"?r.match(/[a-h]\d.*[a-h]\d/)?void 0:Ue:(e=e.toLowerCase(),e==="o"?We:e)}function js(r){return r.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class d1{_board=new Array(128);_turn=nt;_header={};_kings={w:Ye,b:Ye};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_hash=0n;_positionCount=new Map;constructor(e=Ps,{skipValidation:n=!1}={}){this.load(e,{skipValidation:n})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Ye,b:Ye},this._turn=nt,this._castling={w:0,b:0},this._epSquare=Ye,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...Zm},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:n=!1,preserveHeaders:s=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const c=["-","-","0","1"];e=i.concat(c.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!n){const{ok:c,error:d}=c1(e);if(!c)throw new Error(d)}const o=i[0];let a=0;this.clear({preserveHeaders:s});for(let c=0;c<o.length;c++){const d=o.charAt(c);if(d==="/")a+=8;else if(Yc(d))a+=parseInt(d,10);else{const l=d<"a"?nt:mt;this._put({type:d.toLowerCase(),color:l},Ke(a)),a++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=he.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=he.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=he.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=he.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Ye:le[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){let n=0,s="";for(let a=le.a8;a<=le.h1;a++){if(this._board[a]){n>0&&(s+=n,n=0);const{color:c,type:d}=this._board[a];s+=c===nt?d.toUpperCase():d.toLowerCase()}else n++;a+1&136&&(n>0&&(s+=n),a!==le.h1&&(s+="/"),n=0,a+=8)}let i="";this._castling[nt]&he.KSIDE_CASTLE&&(i+="K"),this._castling[nt]&he.QSIDE_CASTLE&&(i+="Q"),this._castling[mt]&he.KSIDE_CASTLE&&(i+="k"),this._castling[mt]&he.QSIDE_CASTLE&&(i+="q"),i=i||"-";let o="-";if(this._epSquare!==Ye)if(e)o=Ke(this._epSquare);else{const a=this._epSquare+(this._turn===nt?16:-16),c=[a+1,a-1];for(const d of c){if(d&136)continue;const l=this._turn;if(this._board[d]?.color===l&&this._board[d]?.type===Ue){this._makeMove({color:l,from:d,to:this._epSquare,piece:Ue,captured:Ue,flags:he.EP_CAPTURE});const u=!this._isKingAttacked(l);if(this._undoMove(),u){o=Ke(this._epSquare);break}}}}return[s,this._turn,i,o,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:n,type:s}=this._board[e],i={w:0,b:1}[n],o={p:0,n:1,b:2,r:3,q:4,k:5}[s];return Km[i][o][e]}_epKey(){return this._epSquare===Ye?0n:Qm[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return Ym[e]}_computeHash(){let e=0n;for(let n=le.a8;n<=le.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(e^=this._pieceKey(n))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Ms),e}_updateSetup(e){this._history.length>0||(e!==Ps?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Ps)}get(e){return this._board[le[e]]}findPiece(e){const n=[];for(let s=le.a8;s<=le.h1;s++){if(s&136){s+=7;continue}!this._board[s]||this._board[s]?.color!==e.color||this._board[s].color===e.color&&this._board[s].type===e.type&&n.push(Ke(s))}return n}put({type:e,color:n},s){return this._put({type:e,color:n},s)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,n){this._hash^=this._pieceKey(e),this._board[e]=n,this._hash^=this._pieceKey(e)}_put({type:e,color:n},s){if(n1.indexOf(e.toLowerCase())===-1||!(s in le))return!1;const i=le[s];if(e==We&&!(this._kings[n]==Ye||this._kings[n]==i))return!1;const o=this._board[i];return o&&o.type===We&&(this._kings[o.color]=Ye),this._set(i,{type:e,color:n}),e===We&&(this._kings[n]=i),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const n=this.get(e);return this._clear(le[e]),n&&n.type===We&&(this._kings[n.color]=Ye),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){this._hash^=this._castlingKey();const e=this._board[le.e1]?.type===We&&this._board[le.e1]?.color===nt,n=this._board[le.e8]?.type===We&&this._board[le.e8]?.color===mt;(!e||this._board[le.a1]?.type!==sr||this._board[le.a1]?.color!==nt)&&(this._castling.w&=-65),(!e||this._board[le.h1]?.type!==sr||this._board[le.h1]?.color!==nt)&&(this._castling.w&=-33),(!n||this._board[le.a8]?.type!==sr||this._board[le.a8]?.color!==mt)&&(this._castling.b&=-65),(!n||this._board[le.h8]?.type!==sr||this._board[le.h8]?.color!==mt)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){if(this._epSquare===Ye)return;const e=this._epSquare+(this._turn===nt?-16:16),n=this._epSquare+(this._turn===nt?16:-16),s=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||this._board[n]?.color!==Zn(this._turn)||this._board[n]?.type!==Ue){this._hash^=this._epKey(),this._epSquare=Ye;return}const i=o=>!(o&136)&&this._board[o]?.color===this._turn&&this._board[o]?.type===Ue;s.some(i)||(this._hash^=this._epKey(),this._epSquare=Ye)}_attacked(e,n,s){const i=[];for(let o=le.a8;o<=le.h1;o++){if(o&136){o+=7;continue}if(this._board[o]===void 0||this._board[o].color!==e)continue;const a=this._board[o],c=o-n;if(c===0)continue;const d=c+119;if(Jm[d]&t1[a.type]){if(a.type===Ue){if(c>0&&a.color===nt||c<=0&&a.color===mt)if(s)i.push(Ke(o));else return!0;continue}if(a.type==="n"||a.type==="k")if(s){i.push(Ke(o));continue}else return!0;const l=e1[d];let u=o+l,h=!1;for(;u!==n;){if(this._board[u]!=null){h=!0;break}u+=l}if(!h)if(s){i.push(Ke(o));continue}else return!0}}return s?i:!1}attackers(e,n){return n?this._attacked(n,le[e],!0):this._attacked(this._turn,le[e],!0)}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Zn(e),n)}hash(){return this._hash.toString(16)}isAttacked(e,n){return this._attacked(n,le[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let s=0,i=0;for(let o=le.a8;o<=le.h1;o++){if(i=(i+1)%2,o&136){o+=7;continue}const a=this._board[o];a&&(e[a.type]=a.type in e?e[a.type]+1:1,a.type===Xr&&n.push(i),s++)}if(s===2)return!0;if(s===3&&(e[Xr]===1||e[vi]===1))return!0;if(s===e[Xr]+2){let o=0;const a=n.length;for(let c=0;c<a;c++)o+=n[c];if(o===0||o===a)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:s=void 0}={}){const i=this._moves({square:n,piece:s});return e?i.map(o=>new Fr(this,o)):i.map(o=>this._moveToSan(o,i))}_moves({legal:e=!0,piece:n=void 0,square:s=void 0}={}){const i=s?s.toLowerCase():void 0,o=n?.toLowerCase(),a=[],c=this._turn,d=Zn(c);let l=le.a8,u=le.h1,h=!1;if(i)if(i in le)l=u=le[i],h=!0;else return[];for(let f=l;f<=u;f++){if(f&136){f+=7;continue}if(!this._board[f]||this._board[f].color===d)continue;const{type:m}=this._board[f];let b;if(m===Ue){if(o&&o!==m)continue;b=f+Rs[c][0],this._board[b]||(Jt(a,c,f,b,Ue),b=f+Rs[c][1],a1[c]===vn(f)&&!this._board[b]&&Jt(a,c,f,b,Ue,void 0,he.BIG_PAWN));for(let y=2;y<4;y++)b=f+Rs[c][y],!(b&136)&&(this._board[b]?.color===d?Jt(a,c,f,b,Ue,this._board[b].type,he.CAPTURE):b===this._epSquare&&Jt(a,c,f,b,Ue,Ue,he.EP_CAPTURE))}else{if(o&&o!==m)continue;for(let y=0,x=ua[m].length;y<x;y++){const w=ua[m][y];for(b=f;b+=w,!(b&136);){if(!this._board[b])Jt(a,c,f,b,m);else{if(this._board[b].color===c)break;Jt(a,c,f,b,m,this._board[b].type,he.CAPTURE);break}if(m===vi||m===We)break}}}}if((o===void 0||o===We)&&(!h||u===this._kings[c])){if(this._castling[c]&he.KSIDE_CASTLE){const f=this._kings[c],m=f+2;!this._board[f+1]&&!this._board[m]&&!this._attacked(d,this._kings[c])&&!this._attacked(d,f+1)&&!this._attacked(d,m)&&Jt(a,c,this._kings[c],m,We,void 0,he.KSIDE_CASTLE)}if(this._castling[c]&he.QSIDE_CASTLE){const f=this._kings[c],m=f-2;!this._board[f-1]&&!this._board[f-2]&&!this._board[f-3]&&!this._attacked(d,this._kings[c])&&!this._attacked(d,f-1)&&!this._attacked(d,m)&&Jt(a,c,this._kings[c],m,We,void 0,he.QSIDE_CASTLE)}}if(!e||this._kings[c]===-1)return a;const p=[];for(let f=0,m=a.length;f<m;f++)this._makeMove(a[f]),this._isKingAttacked(c)||p.push(a[f]),this._undoMove();return p}move(e,{strict:n=!1}={}){let s=null;if(typeof e=="string")s=this._moveFromSan(e,n);else if(e===null)s=this._moveFromSan(Bs,n);else if(typeof e=="object"){const o=this._moves();for(let a=0,c=o.length;a<c;a++)if(e.from===Ke(o[a].from)&&e.to===Ke(o[a].to)&&(!("promotion"in o[a])||e.promotion===o[a].promotion)){s=o[a];break}}if(!s)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&s.flags&he.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new Fr(this,s);return this._makeMove(s),this._incPositionCount(),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,n){this._hash^=this._pieceKey(e),this._board[n]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(n)}_makeMove(e){const n=this._turn,s=Zn(n);if(this._push(e),e.flags&he.NULL_MOVE){n===mt&&this._moveNumber++,this._halfMoves++,this._turn=s,this._epSquare=Ye;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&he.EP_CAPTURE&&(this._turn===mt?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:n})),this._board[e.to].type===We){if(this._kings[n]=e.to,e.flags&he.KSIDE_CASTLE){const i=e.to-1,o=e.to+1;this._movePiece(o,i)}else if(e.flags&he.QSIDE_CASTLE){const i=e.to+1,o=e.to-2;this._movePiece(o,i)}this._castling[n]=0}if(this._castling[n]){for(let i=0,o=Zt[n].length;i<o;i++)if(e.from===Zt[n][i].square&&this._castling[n]&Zt[n][i].flag){this._castling[n]^=Zt[n][i].flag;break}}if(this._castling[s]){for(let i=0,o=Zt[s].length;i<o;i++)if(e.to===Zt[s][i].square&&this._castling[s]&Zt[s][i].flag){this._castling[s]^=Zt[s][i].flag;break}}if(this._hash^=this._castlingKey(),e.flags&he.BIG_PAWN){let i;n===mt?i=e.to-16:i=e.to+16,!(e.to-1&136)&&this._board[e.to-1]?.type===Ue&&this._board[e.to-1]?.color===s||!(e.to+1&136)&&this._board[e.to+1]?.type===Ue&&this._board[e.to+1]?.color===s?(this._epSquare=i,this._hash^=this._epKey()):this._epSquare=Ye}else this._epSquare=Ye;e.piece===Ue?this._halfMoves=0:e.flags&(he.CAPTURE|he.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===mt&&this._moveNumber++,this._turn=s,this._hash^=Ms}undo(){const e=this._hash,n=this._undoMove();if(n){const s=new Fr(this,n);return this._decPositionCount(e),s}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Ms;const s=this._turn,i=Zn(s);if(n.flags&he.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:s})),n.captured)if(n.flags&he.EP_CAPTURE){let o;s===mt?o=n.to-16:o=n.to+16,this._set(o,{type:Ue,color:i})}else this._set(n.to,{type:n.captured,color:i});if(n.flags&(he.KSIDE_CASTLE|he.QSIDE_CASTLE)){let o,a;n.flags&he.KSIDE_CASTLE?(o=n.to+1,a=n.to-1):(o=n.to-2,a=n.to+1),this._movePiece(a,o)}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const s=[];let i=!1;for(const p in this._header)this._header[p]&&s.push(`[${p} "${this._header[p]}"]`+e),i=!0;i&&this._history.length&&s.push(e);const o=p=>{const f=this._comments[this.fen()];if(typeof f<"u"){const m=p.length>0?" ":"";p=`${p}${m}{${f}}`}return p},a=[];for(;this._history.length>0;)a.push(this._undoMove());const c=[];let d="";for(a.length===0&&c.push(o(""));a.length>0;){d=o(d);const p=a.pop();if(!p)break;if(!this._history.length&&p.color==="b"){const f=`${this._moveNumber}. ...`;d=d?`${d} ${f}`:f}else p.color==="w"&&(d.length&&c.push(d),d=this._moveNumber+".");d=d+" "+this._moveToSan(p,this._moves({legal:!0})),this._makeMove(p)}if(d.length&&c.push(o(d)),c.push(this._header.Result||"*"),n===0)return s.join("")+c.join(" ");const l=function(){return s.length>0&&s[s.length-1]===" "?(s.pop(),!0):!1},u=function(p,f){for(const m of f.split(" "))if(m){if(p+m.length>n){for(;l();)p--;s.push(e),p=0}s.push(m),p+=m.length,s.push(" "),p++}return l()&&p--,p};let h=0;for(let p=0;p<c.length;p++){if(h+c[p].length>n&&c[p].includes("{")){h=u(h,c[p]);continue}h+c[p].length>n&&p!==0?(s[s.length-1]===" "&&s.pop(),s.push(e),h=0):p!==0&&(s.push(" "),h++),s.push(c[p]),h+=c[p].length}return s.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}setHeader(e,n){return this._header[e]=n??yi[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=yi[e]||null,!0):!1}getHeaders(){const e={};for(const[n,s]of Object.entries(this._header))s!==null&&(e[n]=s);return e}loadPgn(e,{strict:n=!1,newlineChar:s=`\r?
`}={}){s!==`\r?
`&&(e=e.replace(new RegExp(s,"g"),`
`));const i=Vm(e);this.reset();const o=i.headers;let a="";for(const l in o)l.toLowerCase()==="fen"&&(a=o[l]),this.header(l,o[l]);if(!n)a&&this.load(a,{preserveHeaders:!0});else if(o.SetUp==="1"){if(!("FEN"in o))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}let c=i.root;for(;c;){if(c.move){const l=this._moveFromSan(c.move,n);if(l==null)throw new Error(`Invalid move in PGN: ${c.move}`);this._makeMove(l),this._incPositionCount()}c.comment!==void 0&&(this._comments[this.fen()]=c.comment),c=c.variations[0]}const d=i.result;d&&Object.keys(this._header).length&&this._header.Result!==d&&this.setHeader("Result",d)}_moveToSan(e,n){let s="";if(e.flags&he.KSIDE_CASTLE)s="O-O";else if(e.flags&he.QSIDE_CASTLE)s="O-O-O";else{if(e.flags&he.NULL_MOVE)return Bs;if(e.piece!==Ue){const i=l1(e,n);s+=e.piece.toUpperCase()+i}e.flags&(he.CAPTURE|he.EP_CAPTURE)&&(e.piece===Ue&&(s+=Ke(e.from)[0]),s+="x"),s+=Ke(e.to),e.promotion&&(s+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?s+="#":s+="+"),this._undoMove(),s}_moveFromSan(e,n=!1){let s=js(e);if(n||(s==="0-0"?s="O-O":s==="0-0-0"&&(s="O-O-O")),s==Bs)return{color:this._turn,from:0,to:0,piece:"k",flags:he.NULL_MOVE};let i=fa(s),o=this._moves({legal:!0,piece:i});for(let p=0,f=o.length;p<f;p++)if(s===js(this._moveToSan(o[p],o)))return o[p];if(n)return null;let a,c,d,l,u,h=!1;if(c=s.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),c?(a=c[1],d=c[2],l=c[3],u=c[4],d.length==1&&(h=!0)):(c=s.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),c&&(a=c[1],d=c[2],l=c[3],u=c[4],d.length==1&&(h=!0))),i=fa(s),o=this._moves({legal:!0,piece:a||i}),!l)return null;for(let p=0,f=o.length;p<f;p++)if(d){if((!a||a.toLowerCase()==o[p].piece)&&le[d]==o[p].from&&le[l]==o[p].to&&(!u||u.toLowerCase()==o[p].promotion))return o[p];if(h){const m=Ke(o[p].from);if((!a||a.toLowerCase()==o[p].piece)&&le[l]==o[p].to&&(d==m[0]||d==m[1])&&(!u||u.toLowerCase()==o[p].promotion))return o[p]}}else if(s===js(this._moveToSan(o[p],o)).replace("x",""))return o[p];return null}ascii(){let e=`   +------------------------+
`;for(let n=le.a8;n<=le.h1;n++){if(pr(n)===0&&(e+=" "+"87654321"[vn(n)]+" |"),this._board[n]){const s=this._board[n].type,o=this._board[n].color===nt?s.toUpperCase():s.toLowerCase();e+=" "+o+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let s=0;const i=this._turn;for(let o=0,a=n.length;o<a;o++)this._makeMove(n[o]),this._isKingAttacked(i)||(e-1>0?s+=this.perft(e-1):s++),this._undoMove();return s}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let n=[];for(let s=le.a8;s<=le.h1;s++)this._board[s]==null?n.push(null):n.push({square:Ke(s),type:this._board[s].type,color:this._board[s].color}),s+1&136&&(e.push(n),n=[],s+=8);return e}squareColor(e){if(e in le){const n=le[e];return(vn(n)+pr(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],s=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const i=n.pop();if(!i)break;e?s.push(new Fr(this,i)):s.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return s}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const n=this._positionCount.get(e)??0;n===1?this._positionCount.delete(e):this._positionCount.set(e,n-1)}_pruneComments(){const e=[],n={},s=i=>{i in this._comments&&(n[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(s(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),s(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const i of[We,en])n[i]!==void 0&&(n[i]?this._castling[e]|=$r[i]:this._castling[e]&=~$r[i]);this._updateCastlingRights();const s=this.getCastlingRights(e);return(n[We]===void 0||n[We]===s[We])&&(n[en]===void 0||n[en]===s[en])}getCastlingRights(e){return{[We]:(this._castling[e]&$r[We])!==0,[en]:(this._castling[e]&$r[en])!==0}}moveNumber(){return this._moveNumber}}function u1(){const r=Ae(()=>new d1,[]),[e,n]=g(r.fen()),[s,i]=g(null),[o,a]=g(null),[c,d]=g("Connecting..."),[l,u]=g(!1),[h,p]=g(null),[f,m]=g("connecting"),[b,y]=g(60),[x,w]=g(0),[S,_]=g(0),[C,P]=g(!1),[A,k]=g(null),[v,M]=g(null),[I,z]=g(null),[V,G]=g(null),[oe,X]=g(null),[te,j]=g(null),[ie,F]=g(null),[D,H]=g(null),[W,Y]=g(!1),[K,ge]=g(!1),[ne,R]=g(null),[ue,Oe]=g(!1),[Ie,He]=g(!1);ee(()=>{He(f==="playing"&&o!==null&&s!==null&&!l&&Be())},[f,o,s,l,e]);const Be=()=>{if(!s)return!1;const we=r.turn();return we==="w"&&s==="white"||we==="b"&&s==="black"};ee(()=>{async function we(){try{const Le=await(await q.auth.apiGetSessionList()).json();if(!Le||!Le.user){console.warn("No active session, redirecting to login"),window.location.href="/login";return}M(Le.user.id),z(Le.user.name),G(Le.user.image);const Ee=q.baseUrl,Me=new URL("/sockets/chess",Ee).href,Pe=new URL("sockets/",`${Ee}/`).pathname;console.log("Using Chess socket base URL:",Ee),console.log("Using Chess socket full path:",Me),console.log("Using Chess socket transport path:",Pe);const ke=ar(Me,{path:Pe,transports:["websocket","polling"],withCredentials:!0});p(ke),ke.on("connect",()=>{m("connecting"),d("Connected, joining game...")}),ke.on("waiting",()=>{m("waiting"),d("Waiting for opponent...")}),ke.on("paired",async Z=>{console.log("Received paired message:",Z);try{const Ne=await q.profile.getProfileByUserId(Z.opponent);X(Ne.data),a(Z.opponent),m("bidding"),P(!1),k(10),d(`Paired with ${Ne.data.name}. Bid your preferred game time (min 60s):`)}catch(Ne){console.error("Failed to fetch opponent profile:",Ne),a(Z.opponent),m("bidding"),P(!1),k(10),d("Paired with opponent. Bid your preferred game time (min 60s):")}}),ke.on("start",async Z=>{console.log("Received start message:",Z),r.load(Z.fen),n(r.fen()),i(Z.your_color),a(Z.opponent),w(Z.whiteTime),_(Z.blackTime),m("playing"),k(null);try{const Ne=await q.profile.getProfileByUserId(Z.opponent);X(Ne.data),d(`Playing as ${Z.your_color} against ${Ne.data.name}`)}catch(Ne){console.error("Failed to fetch opponent profile:",Ne),d(`Playing as ${Z.your_color} against opponent`)}console.log(`Game started. Your color: ${Z.your_color}, Turn: ${r.turn()}`)}),ke.on("time_update",Z=>{w(Z.whiteTime),_(Z.blackTime)}),ke.on("opponent_disconnected",Z=>{console.log("Received opponent_disconnected message:",Z),d(Z.message||"Opponent disconnected"),m("waiting"),r.reset(),n(r.fen()),i(null),a(null),w(0),_(0),k(null),console.warn("Opponent disconnected")}),ke.on("update",Z=>{console.log("Received update message:",Z),r.load(Z.fen),n(r.fen()),u(!1),ge(!1),R(null),console.log(`Board updated. Turn: ${r.turn()}, Your turn: ${Be()}`)}),ke.on("win",async Z=>{console.log("Received win message:",Z),m("ended");const Ne=Z.winner===v;try{const Ze=await q.profile.getProfileByUserId(Z.winner);j(Ze.data);const st=Ne?"You win!":`${Ze.data.name} wins!`,Qe=Z.reason?` (${Z.reason})`:"";d(`Game over: ${st}${Qe}`)}catch(Ze){console.error("Failed to fetch winner profile:",Ze);const st=Ne?"You win!":"Opponent wins!",Qe=Z.reason?` (${Z.reason})`:"";d(`Game over: ${st}${Qe}`)}const bt=Z.reason?` (${Z.reason})`:"";let pt;Ne?pt="You win!":pt=te?`${te.name} wins!`:"Opponent wins!",console.log(`Game ended: ${pt}${bt}`)}),ke.on("draw",Z=>{console.log("Received draw message:",Z),m("ended");const Ne=Z.reason?` (${Z.reason})`:"";d(`Game over: Draw!${Ne}`),console.log(`Game ended: Draw${Ne}`)}),ke.on("error",Z=>{console.log("Received error message:",Z),l&&(r.undo(),n(r.fen()),u(!1)),H(Z.message||"An error occurred"),console.error("Server error:",Z)}),ke.on("draw_offered",async Z=>{console.log("Received draw_offered message:",Z);try{const Ne=await q.profile.getProfileByUserId(Z.from);F(Ne.data)}catch(Ne){console.error("Failed to fetch draw offer user profile:",Ne)}R(Z.from),Oe(!0)}),ke.on("draw_offer_sent",()=>{console.log("Draw offer sent successfully"),ge(!0),H(null)}),ke.on("draw_declined",()=>{console.log("Draw offer declined"),ge(!1),H("Draw offer declined")}),ke.on("draw_offer_cancelled",()=>{console.log("Draw offer cancelled"),R(null),Oe(!1)}),ke.on("connect_error",Z=>{H(`Connection error: ${Z.message}`),console.error("Connect error:",Z)}),ke.on("disconnect",Z=>{d(`Disconnected: ${Z}`),k(null),console.warn("Socket disconnected:",Z)}),ke.on("bidding_time_update",Z=>{console.log("Received bidding_time_update:",Z),k(Z.timeLeft)})}catch(Le){console.error("Initialization error:",Le),H("Failed to initialize the game")}}return we(),()=>{h&&h.disconnect()}},[]);const Dt=we=>{h&&!C&&we>=60?(h.emit("bid",{time:we}),P(!0),d(`Bid sent (${we}s), waiting for opponent...`),k(null)):we<60?H("Bid time must be at least 60s"):H("Unable to send bid")},Xe=we=>{h&&(h.emit("move",{move:we}),console.log("Move sent:",we))},ht=(we,Le,Ee)=>{if(l||f!=="playing"||!Be())return!1;try{const Me=r.get(we);if(!Me||Me.color!==r.turn())return!1;let Pe;if(Me.type==="p"&&(Me.color==="w"&&Le[1]==="8"||Me.color==="b"&&Le[1]==="1")){const Z=Ee?Ee[1].toLowerCase():"q";Pe=r.move({from:we,to:Le,promotion:Z})}else Pe=r.move({from:we,to:Le});return Pe?(n(r.fen()),Xe(Pe.san),u(!0),console.log("Local move:",Pe.san),!0):!1}catch(Me){return console.error("Invalid move:",Me),!1}},At=we=>{const Le=Math.floor(we/60),Ee=we%60;return`${Le}:${Ee.toString().padStart(2,"0")}`},rt=async()=>{try{await navigator.clipboard.writeText(r.fen()),Y(!0),setTimeout(()=>Y(!1),2e3)}catch(we){console.error("Failed to copy FEN:",we),H("Failed to copy FEN")}},Ot=()=>{h&&f==="playing"&&h.emit("resign")},kt=()=>{h&&f==="playing"&&!K&&h.emit("offer_draw")},Kt=()=>{h&&ne&&(h.emit("accept_draw"),Oe(!1),R(null))},Lt=()=>{h&&ne&&(h.emit("decline_draw"),Oe(!1),R(null))};return console.log("Your color",s),t("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-3xl font-bold mb-8 text-center",children:"Multiplayer Chess"}),t("div",{className:"flex flex-col lg:flex-row gap-8 justify-center",children:[t("div",{className:"card bg-base-100 shadow-xl w-full lg:w-1/2",children:t("div",{className:"card-body p-0",children:t($m,{position:e,onPieceDrop:ht,arePiecesDraggable:Ie,isDraggablePiece:({piece:we})=>(s&&we[0].toLowerCase()===(s&&s[0].toLowerCase())&&Be(),!0),boardOrientation:s||"white",showPromotionDialog:!0})})}),t("div",{className:"card bg-base-100 shadow-2xl w-full lg:w-1/3",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title mb-4",children:"Game Info"}),t("div",{className:"alert alert-info mb-4",children:[t(Ft,{className:"h-5 w-5"}),t("span",{children:c})]}),D&&t("div",{className:"alert alert-error mb-4",children:[t(Ft,{className:"h-5 w-5"}),t("span",{children:D})]}),t("div",{className:"flex flex-col gap-2 mb-4",children:[t("a",{href:`/profile/${v}`,className:"flex items-center gap-1 hover:text-info",children:[t(lt,{name:I,image:V,widthClass:"w-6"}),t("div",{className:"font-bold flex items-center gap-1",children:[t("strong",{children:"You:"})," ",I||"Loading..."]})]}),oe?t("a",{href:`/profile/${oe.id}`,className:"flex items-center gap-1 hover:text-info",children:[t(lt,{name:oe.name,image:oe.image,widthClass:"w-6"}),t("div",{className:"font-bold flex items-center gap-1",children:[t("strong",{children:"Opponent:"})," ",oe.name]})]}):t("div",{className:"flex items-center gap-2",children:[t(Pn,{className:"h-5 w-5"}),t("span",{children:[t("strong",{children:"Opponent:"})," ",o?"Loading...":"Waiting..."]})]}),t("div",{className:"flex items-center gap-2",children:[t(fd,{className:"h-5 w-5"}),t("span",{children:[t("strong",{children:"Your Color:"})," ",s?s.charAt(0).toUpperCase()+s.slice(1):"Not assigned"]})]})]}),f==="playing"&&t("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[t("div",{className:"card shadow-lg "+(Be()?"bg-success text-success-content":"bg-base-300 text-base-content"),children:t("div",{className:"card-body p-3",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[t(mn,{className:"h-5 w-5"}),t("span",{className:"font-semibold",children:"Your Time"})]}),t("span",{className:"text-lg font-mono",children:At(s==="white"?x:S)})]})})}),t("div",{className:"card shadow-lg "+(Be()?"bg-base-300 text-base-content":"bg-success text-success-content"),children:t("div",{className:"card-body p-3",children:t("div",{className:"flex items-center justify-between",children:[t("div",{className:"flex items-center gap-2",children:[t(mn,{className:"h-5 w-5"}),t("span",{className:"font-semibold",children:"Opponent's Time"})]}),t("span",{className:"text-lg font-mono",children:At(s==="white"?S:x)})]})})})]}),f==="playing"&&t("div",{className:`alert ${Be()?"alert-success":"alert-warning"} mb-4`,children:[t(ud,{className:"h-5 w-5"}),t("span",{children:Be()?"Your Turn":"Opponent's Turn"})]}),K&&t("div",{className:"alert alert-info mb-4",children:[t(Co,{className:"h-5 w-5"}),t("span",{children:"Draw offer sent, waiting for opponent..."})]}),f==="playing"&&t("div",{className:"flex flex-col gap-2 mb-4",children:[t("button",{onClick:kt,disabled:K,className:"btn btn-outline btn-info",children:[t(Co,{className:"h-5 w-5 mr-2"}),K?"Draw Offered":"Offer Draw"]}),t("button",{onClick:Ot,className:"btn btn-outline btn-error",children:[t(vd,{className:"h-5 w-5 mr-2"}),"Resign"]})]}),f==="bidding"&&!C&&t("div",{className:"form-control mb-4",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Bid Time (seconds, min 60)"})}),t("div",{className:"join",children:[t("input",{type:"number",value:b,onInput:we=>y(parseInt(we.target.value,10)||60),min:"60",step:"1",className:"input input-bordered join-item w-full"}),t("button",{onClick:()=>Dt(b),className:"btn btn-primary join-item",children:"Submit Bid"})]}),A!==null&&t("div",{className:"alert alert-warning mt-2",children:[t(wd,{className:"h-5 w-5"}),t("span",{children:["Time left to bid: ",A,"s"]})]})]}),t("div",{className:"flex flex-col gap-2",children:[t("button",{onClick:rt,className:"btn btn-outline",children:[t(Ga,{className:"h-5 w-5 mr-2"}),"Copy FEN"]}),W&&t("div",{className:"alert alert-success text-sm",children:"FEN copied to clipboard!"})]})]})})]}),ue&&t("div",{className:"modal modal-open",children:t("div",{className:"modal-box",children:[t("h3",{className:"font-bold text-lg",children:"Draw Offer"}),t("p",{className:"py-4",children:[ie?t("a",{href:`/profile/${ie.id}`,className:"flex items-center gap-1 inline-flex",children:[t(lt,{name:ie.name,image:ie.image,widthClass:"w-6"}),t("span",{className:"font-bold",children:ie.name})]}):"Your opponent"," ","has offered a draw. Do you accept?"]}),t("div",{className:"modal-action",children:[t("button",{onClick:Lt,className:"btn btn-outline",children:"Decline"}),t("button",{onClick:Kt,className:"btn btn-primary",children:"Accept Draw"})]})]})})]})}function h1(r){return U({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M392 105c.9-27 .2-56 .1-57H119.3c0 1-.8 30 .1 57H48c0 68 9.9 102.3 21 126.7S95.4 277 127.7 302c30.1 23.3 95.5 53.6 104.3 57.6v28.3c-4.6 10-23.5 28.2-83.3 28.2H128v48h256v-48h-25.7c-60.7 0-75-19.1-78.3-28.2v-28.3c9.3-4.6 80.9-40.3 104.4-57.5 25.2-18.4 50.9-51.5 58.7-70.3S464 167 464 105h-72zM109.6 211.9c-8.8-18.2-14-37.9-15.7-61.9h28.7c.7 6 1.4 11.3 2.3 16.3 6.6 39.2 14.8 70.2 25.7 96.5-17.3-13.5-31.3-30.8-41-50.9zm292.8 0c-9.9 20.3-24 37.7-41.6 51.3 11-26.2 19-56.8 25.8-96.9.8-5 1.6-10.3 2.3-16.3h29.3c-1.8 24-6.9 43.7-15.8 61.9z"},child:[]}]})(r)}function f1(r){return U({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 7a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 12 7Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"},child:[]},{tag:"path",attr:{d:"M7.328 1.47a.749.749 0 0 1 .53-.22h8.284c.199 0 .389.079.53.22l5.858 5.858c.141.14.22.33.22.53v8.284a.749.749 0 0 1-.22.53l-5.858 5.858a.749.749 0 0 1-.53.22H7.858a.749.749 0 0 1-.53-.22L1.47 16.672a.749.749 0 0 1-.22-.53V7.858c0-.199.079-.389.22-.53Zm.84 1.28L2.75 8.169v7.662l5.419 5.419h7.662l5.419-5.418V8.168L15.832 2.75Z"},child:[]}]})(r)}const Jn=(r,e)=>Math.floor(Math.random()*(e-r+1))+r,p1=["add","sub","mult","div"];function m1(){const e=new URLSearchParams(window.location.search).get("config");let n={min1:2,max1:100,min2:2,max2:100},s={min1:2,max1:12,min2:2,max2:100},i=120,o={add:!0,sub:!0,mult:!0,div:!0},a=!1;if(e)try{const j=JSON.parse(atob(e));n=j.addRange,s=j.multRange,i=j.duration,o=j.selectedOps,a=!0}catch{}const[c,d]=g(n),[l,u]=g(s),[h,p]=g(i),[f,m]=g(o),[b,y]=g("start"),[x,w]=g(0),[S,_]=g(0),[C,P]=g(null),[A,k]=g(""),[v,M]=g(!1),I=$e(null),z=()=>{const j=p1.filter(Y=>f[Y]);if(j.length===0)return;const ie=j[Jn(0,j.length-1)];let F,D,H,W;if(ie==="add"||ie==="sub"?(F=Jn(c.min1,c.max1),D=Jn(c.min2,c.max2)):(F=Jn(l.min1,l.max1),D=Jn(l.min2,l.max2)),ie==="add")H=`${F} + ${D} = `,W=F+D;else if(ie==="sub"){const Y=F+D,K=Math.random()>.5?F:D;H=`${Y} - ${K} = `,W=Y-K}else if(ie==="mult")H=`${F} × ${D} = `,W=F*D;else{const Y=F*D,K=Math.random()>.5?F:D;H=`${Y} ÷ ${K} = `,W=Y/K}P({question:H,answer:W}),k("")},V=()=>{if(!Object.values(f).some(ie=>ie)){alert("Please select at least one operation.");return}w(0),_(h),y("playing"),z()};ee(()=>{a&&V()},[]),ee(()=>{if(b!=="playing")return;if(S<=0){y("ended");return}const j=setInterval(()=>{_(ie=>ie-1)},1e3);return()=>clearInterval(j)},[b,S]),ee(()=>{b==="playing"&&I.current&&I.current.focus()},[b,C]),ee(()=>{(async()=>{if(b==="ended"){const j={additionRange:c,multiplicationRange:l,duration:h,finalScore:x};console.log(JSON.stringify(j,null,2));const ie=(await q.profile.postProfileLogArithmetic(j)).data;M(ie.counted)}})()},[b,c,l,h,x]);const G=()=>{if(!C)return;const j=parseFloat(A);if(isNaN(j)){k("");return}Math.abs(j-C.answer)<1e-4?(w(ie=>ie+1),z()):k("")},oe=j=>{j.key==="Enter"&&G()},X=(j,ie,F,D)=>{const H=parseInt(D,10);isNaN(H)||j({...ie,[F]:H})},te=()=>{const ie=btoa(JSON.stringify({addRange:c,multRange:l,duration:h,selectedOps:f})),F=`${window.location.origin}${window.location.pathname}?config=${ie}`;navigator.clipboard.writeText(F).then(()=>{alert("Shareable link copied to clipboard!")})};return b==="start"?t(Q,{children:t("div",{className:"bg-base-100 mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full p-4",children:[t("h1",{className:"text-2xl font-bold mb-4",children:"Arithmetic Game"}),t("p",{className:"mb-4",children:"The Arithmetic Game is a fast-paced speed drill where you are given two minutes to solve as many arithmetic problems as you can."}),t("p",{className:"mb-4",children:"If you have any questions, please contact me."}),t("h2",{className:"text-xl font-semibold mb-2",children:"Addition"}),t("p",{className:"mb-4",children:[t("input",{type:"checkbox",checked:f.add,onChange:()=>m(j=>({...j,add:!j.add}))})," ","Range: (",t("input",{type:"number",className:"border p-1 w-16 mx-1",value:c.min1,onChange:j=>X(d,c,"min1",j.currentTarget.value)}),"to",t("input",{type:"number",className:"border p-1 w-16 mx-1",value:c.max1,onChange:j=>X(d,c,"max1",j.currentTarget.value)}),") + (",t("input",{type:"number",className:"border p-1 w-16 mx-1",value:c.min2,onChange:j=>X(d,c,"min2",j.currentTarget.value)}),"to",t("input",{type:"number",className:"border p-1 w-16 mx-1",value:c.max2,onChange:j=>X(d,c,"max2",j.currentTarget.value)}),")"]}),t("h2",{className:"text-xl font-semibold mb-2",children:"Subtraction"}),t("p",{className:"mb-4",children:[t("input",{type:"checkbox",checked:f.sub,onChange:()=>m(j=>({...j,sub:!j.sub}))})," ","Addition problems in reverse."]}),t("h2",{className:"text-xl font-semibold mb-2",children:"Multiplication"}),t("p",{className:"mb-4",children:[t("input",{type:"checkbox",checked:f.mult,onChange:()=>m(j=>({...j,mult:!j.mult}))})," ","Range: (",t("input",{type:"number",className:"border p-1 w-16 mx-1",value:l.min1,onChange:j=>X(u,l,"min1",j.currentTarget.value)}),"to",t("input",{type:"number",className:"border p-1 w-16 mx-1",value:l.max1,onChange:j=>X(u,l,"max1",j.currentTarget.value)}),") × (",t("input",{type:"number",className:"border p-1 w-16 mx-1",value:l.min2,onChange:j=>X(u,l,"min2",j.currentTarget.value)}),"to",t("input",{type:"number",className:"border p-1 w-16 mx-1",value:l.max2,onChange:j=>X(u,l,"max2",j.currentTarget.value)}),")"]}),t("h2",{className:"text-xl font-semibold mb-2",children:"Division"}),t("p",{className:"mb-4",children:[t("input",{type:"checkbox",checked:f.div,onChange:()=>m(j=>({...j,div:!j.div}))})," ","Multiplication problems in reverse."]}),t("h2",{className:"text-xl font-semibold mb-2",children:"Duration:"}),t("input",{type:"number",className:"border p-1 w-20",value:h,onChange:j=>{const ie=parseInt(j.currentTarget.value,10);isNaN(ie)||p(ie)}}),t("button",{className:"bg-blue-500 text-white p-2 rounded mt-4 mr-4",onClick:V,children:"Start"}),t("button",{className:"bg-green-500 text-white p-2 rounded",onClick:te,children:"Share Config"})]})}):b==="playing"?t(Q,{children:t("div",{className:"relative flex flex-col items-center justify-center h-[100%]",children:[t("div",{className:"absolute top-4 left-4 text-2xl font-bold",children:[t("div",{className:"flex items-center gap-2",children:[t(Hu,{}),"Seconds left: ",S]}),t("div",{className:"flex items-center gap-2 mt-2",children:[t(h1,{}),"Score: ",x]}),t("button",{className:"flex items-center gap-2 mt-2 btn btn-error text-lg",onClick:()=>y("ended"),children:[t(f1,{}),"End Game Early"]})]}),t("div",{className:"flex flex-col items-center",children:C&&t("div",{className:"bg-base-300 w-[100vw] p-4 flex items-center justify-center text-4xl",children:[t("span",{children:C.question}),t("input",{type:"number",className:"border p-2 text-2xl w-32 ml-2",value:A,onChange:j=>k(j.currentTarget.value),onKeyDown:oe,ref:I})]})})]})}):t(Q,{children:t("div",{className:"flex flex-col items-center justify-center h-[100%]",children:[t("h1",{className:"text-3xl font-bold mb-4",children:"Game Over"}),t("p",{className:"text-2xl",children:["Score: ",x]}),t("p",{className:"mb-4",children:v?"Your result was successfully recorded":"Your result did not meet the criteria to be recorded"}),t("button",{className:"bg-blue-500 text-white p-2 rounded",onClick:()=>y("start"),children:"Play Again"})]})})}function at(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(r)}function Dn(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"},child:[]},{tag:"path",attr:{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"},child:[]}]})(r)}function wn(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(r)}function g1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(r)}function Xc(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"},child:[]}]})(r)}function Qi(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"},child:[]}]})(r)}function b1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(r)}function v1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"13 17 18 12 13 7"},child:[]},{tag:"polyline",attr:{points:"6 17 11 12 6 7"},child:[]}]})(r)}function y1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(r)}function w1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(r)}function Zc(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(r)}function Jc(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(r)}function pa(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},child:[]},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"},child:[]}]})(r)}function _1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"},child:[]}]})(r)}function x1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"},child:[]}]})(r)}function C1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"},child:[]}]})(r)}function mr(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"},child:[]}]})(r)}function wi(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(r)}function gr(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"1 4 1 10 7 10"},child:[]},{tag:"path",attr:{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"},child:[]}]})(r)}function N1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(r)}function S1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"},child:[]}]})(r)}function el(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"},child:[]},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"},child:[]},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"},child:[]},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"},child:[]},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"},child:[]}]})(r)}function tl(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 3 21 3 21 8"},child:[]},{tag:"line",attr:{x1:"4",y1:"20",x2:"21",y2:"3"},child:[]},{tag:"polyline",attr:{points:"21 16 21 21 16 21"},child:[]},{tag:"line",attr:{x1:"15",y1:"15",x2:"21",y2:"21"},child:[]},{tag:"line",attr:{x1:"4",y1:"4",x2:"9",y2:"9"},child:[]}]})(r)}function An(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(r)}function nl(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(r)}function k1(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"17 8 12 3 7 8"},child:[]},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"},child:[]}]})(r)}function On(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(r)}function rl(r){return U({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},child:[]}]})(r)}function E1(){const{route:r,url:e}=ft(),[n,s]=g([]),[i,o]=g(!0),[a,c]=g(null),[d,l]=g(!1),[u,h]=g(""),[p,f]=g(null),[m,b]=g(new Map),y=async()=>{try{const C=await q.quizspire.getQuizspireDecks();s(C.data);const P=C.data.filter(A=>!A.thumbnail);for(const A of P)if(!m.has(A._id)){const k=`https://picsum.photos/400/300?random=${Math.random()}`;try{const M=await(await fetch(k)).blob(),I=new File([M],`picsum-${A._id}.jpg`,{type:"image/jpeg"}),V=(await q.images.postImagesUpload({image:I})).data.url;b(G=>new Map(G).set(A._id,Vt(V))),await q.quizspire.putQuizspireDecksById(A._id,{thumbnail:V})}catch(v){console.error("Failed to upload picsum image:",v)}}}catch(C){if(C.status===401){r("/login");return}c("Failed to load decks"),console.error(C)}finally{o(!1)}};ee(()=>{y()},[]);const x=n.filter(C=>C.title.toLowerCase().includes(u.toLowerCase())||C.description.toLowerCase().includes(u.toLowerCase())),w=async C=>{try{await q.quizspire.postQuizspireDecks({title:C.title,description:C.description,thumbnail:C.thumbnail,cards:C.cards}),l(!1),y()}catch(P){console.error("Failed to create deck:",P),c("Failed to create deck")}},S=async(C,P)=>{try{await q.quizspire.putQuizspireDecksById(C,P),f(null),y()}catch(A){console.error("Failed to update deck:",A),c("Failed to update deck")}},_=async C=>{if(confirm("Are you sure you want to delete this deck?"))try{await q.quizspire.deleteQuizspireDecksById(C),y()}catch(P){console.error("Failed to delete deck:",P),c("Failed to delete deck")}};return i?t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"flex justify-center",children:t("span",{class:"loading loading-spinner loading-lg"})})}):a?t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"alert alert-error",children:t("span",{children:a})})}):t("div",{class:"container mx-auto px-4 py-8",children:[t("div",{class:"mb-8",children:[t("h1",{class:"text-4xl font-bold mb-4",children:"Quizspire"}),t("p",{class:"text-lg text-base-content/70",children:"Master your flashcards with various study modes."})]}),t("div",{class:"flex flex-col sm:flex-row gap-4 mb-6",children:[t("div",{class:"flex-1",children:t("label",{class:"input input-bordered flex items-center gap-2",children:[t(N1,{class:"w-4 h-4"}),t("input",{type:"text",class:"grow",placeholder:"Search decks...",value:u,onInput:C=>h(C.currentTarget.value)})]})}),t("div",{class:"flex gap-2",children:[t("button",{class:"btn btn-outline",onClick:()=>{try{const C=JSON.stringify(n,null,2),P="data:application/json;charset=utf-8,"+encodeURIComponent(C),A="quizspire-decks.json",k=document.createElement("a");k.setAttribute("href",P),k.setAttribute("download",A),k.click()}catch(C){console.error("Failed to export decks:",C),alert("Failed to export decks. Please try again.")}},children:[t(w1,{class:"w-4 h-4 mr-2"}),"Export All"]}),t("input",{type:"file",accept:".json",class:"hidden",id:"import-decks",onChange:async C=>{const P=C.currentTarget.files?.[0];if(P){const A=new FileReader;A.onload=async k=>{try{const v=JSON.parse(k.target?.result);if(Array.isArray(v)){for(const M of v)try{await q.quizspire.postQuizspireDecks({title:M.title,description:M.description,thumbnail:M.thumbnail,cards:M.cards})}catch(I){console.error("Failed to import deck:",M.title,I)}y(),alert("Decks imported successfully!")}else alert("Invalid JSON format. Expected an array of decks.")}catch(v){console.error("Failed to parse JSON file:",v),alert("Failed to parse JSON file. Please check the file format.")}},A.readAsText(P)}C.currentTarget.value=""}}),t("label",{for:"import-decks",class:"btn btn-outline",children:[t(k1,{class:"w-4 h-4 mr-2"}),"Import"]}),t("button",{class:"btn btn-primary",onClick:()=>l(!0),children:[t(wi,{class:"w-4 h-4 mr-2"}),"Create Deck"]})]})]}),x.length===0&&n.length>0?t("div",{class:"text-center py-12",children:t("p",{class:"text-xl text-base-content/50",children:"No decks match your search."})}):x.length===0?t("div",{class:"text-center py-12",children:[t("p",{class:"text-xl text-base-content/50 mb-4",children:"No decks found. Create your first deck to get started!"}),t("button",{class:"btn btn-primary btn-lg",onClick:()=>l(!0),children:[t(wi,{class:"w-5 h-5 mr-2"}),"Create Your First Deck"]})]}):t("div",{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(C=>{const P=u?or(C.title,u):C.title,A=u?or(C.description,u):C.description;return t("div",{class:"card bg-base-100 shadow-2xl",children:[t("div",{class:"card-actions justify-center mb-4",children:t("div",{class:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] gap-2 w-full",children:[t("button",{class:"btn btn-info btn-sm",onClick:()=>r(`/projects/quizspire/${C._id}?fullscreen=true`),children:[t(Dn,{class:"w-4 h-4 mr-1"}),"Flashcards"]}),t("button",{class:"btn btn-info btn-sm",onClick:()=>{const k=new URLSearchParams;k.set("referrer",encodeURIComponent(e));const v=`/projects/quizspire/${C._id}/learn?${k}`;r(v)},children:[t(mr,{class:"w-4 h-4 mr-1"}),"Learn"]}),t("button",{class:"btn btn-info btn-sm",onClick:()=>{const k=new URLSearchParams;k.set("referrer",encodeURIComponent(e));const v=`/projects/quizspire/${C._id}/test?${k}`;r(v)},children:[t(An,{class:"w-4 h-4 mr-1"}),"Test"]}),t("button",{class:"btn btn-info btn-sm",onClick:()=>{const k=new URLSearchParams;k.set("referrer",encodeURIComponent(e));const v=`/projects/quizspire/${C._id}/tetris?${k}`;r(v)},children:[t(Jc,{class:"w-4 h-4 mr-1"}),"Tetris"]}),t("button",{class:"btn btn-info btn-sm",children:[t(rl,{class:"w-4 h-4 mr-1"}),"Blast"]}),t("button",{class:"btn btn-info btn-sm",onClick:()=>{const k=new URLSearchParams;k.set("referrer",encodeURIComponent(e));const v=`/projects/quizspire/${C._id}/match?${k}`;r(v)},children:[t(tl,{class:"w-4 h-4 mr-1"}),"Match"]})]})}),t("figure",{children:t("img",{src:C.thumbnail?Vt(C.thumbnail):m.get(C._id)||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMTUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSIjOUI5QkE0IiBmb250LXNpemU9IjE2IiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiI+TG9hZGluZy4uLjwvdGV4dD4KPHN2Zz4=",alt:C.title,class:"w-full h-48 object-cover cursor-pointer",onClick:()=>window.location.href=`/projects/quizspire/${C._id}`})}),t("div",{class:"card-body",children:[t("h2",{class:"card-title gap-0 cursor-pointer",dangerouslySetInnerHTML:{__html:P},onClick:()=>window.location.href=`/projects/quizspire/${C._id}`}),t("p",{class:"text-sm text-base-content/70",dangerouslySetInnerHTML:{__html:A}}),t("p",{class:"text-xs text-base-content/50",children:[C.cards.length," cards • Created:"," ",new Date(C.createdAt).toLocaleDateString()," • Last modified: ",new Date(C.lastModified).toLocaleDateString()]}),t("div",{class:"card-actions justify-end mt-4",children:t("div",{class:"flex gap-2 w-full",children:[t("button",{class:"btn btn-outline btn-wide flex-1",onClick:async k=>{try{await navigator.clipboard.writeText(`${window.location.origin}/projects/quizspire/${C._id}`);const v=k.target;console.log(v),v&&(v.classList.add("btn-success"),v.textContent="Copied!",setTimeout(()=>{v.classList.remove("btn-success"),v.innerHTML='<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg>Share'},2e3))}catch(v){console.error("Failed to copy link:",v)}},children:[t(el,{class:"w-4 h-4 mr-2"}),"Share"]}),t("button",{class:"btn btn-outline btn-wide flex-1",onClick:()=>f(C),children:[t(Zc,{class:"w-4 h-4 mr-2"}),"Edit"]}),t("button",{class:"btn btn-outline btn-error btn-wide flex-1",onClick:()=>_(C._id),children:[t(nl,{class:"w-4 h-4 mr-2"}),"Delete"]})]})})]})]},C._id)})}),(d||p)&&t(sl,{deck:p,onSave:C=>{p?S(p._id,C):w(C)},onClose:()=>{l(!1),f(null)}})]})}function sl({deck:r,onSave:e,onClose:n}){const[s,i]=g(r?.title||""),[o,a]=g(r?.description||""),[c,d]=g(r?.thumbnail||""),[l,u]=g(r?.cards||[]),[h,p]=g(!1),f=async w=>{p(!0);try{return(await q.images.postImagesUpload({image:w})).data.url}catch(S){return console.error("Failed to upload image:",S),null}finally{p(!1)}},m=w=>{w.preventDefault(),s.trim()&&e({title:s.trim(),description:o.trim(),thumbnail:c.trim(),cards:l})},b=()=>{u([...l,{word:[{text:"",type:"text"}],definition:[{text:"",type:"text"}]}])},y=(w,S,_)=>{const C=[...l];C[w][S]=_,u(C)},x=w=>{u(l.filter((S,_)=>_!==w))};return t("div",{class:"modal modal-open",children:t("div",{class:"modal-box max-w-4xl max-h-[90vh] overflow-y-auto",children:[t("h3",{class:"font-bold text-lg mb-4",children:r?"Edit Deck":"Create New Deck"}),t("form",{onSubmit:m,children:[t("div",{class:"space-y-4 mb-6",children:[t("div",{class:"form-control",children:[t("label",{class:"label",children:t("span",{class:"label-text",children:"Title *"})}),t("input",{type:"text",class:"input input-bordered w-full",value:s,onInput:w=>i(w.currentTarget.value),maxLength:100,required:!0})]}),t("div",{class:"form-control",children:[t("label",{class:"label",children:t("span",{class:"label-text",children:"Description"})}),t("textarea",{class:"textarea textarea-bordered w-full",value:o,onInput:w=>a(w.currentTarget.value),maxLength:500,rows:3})]})]}),t("div",{class:"form-control mb-6",children:[t("label",{class:"label",children:t("span",{class:"label-text",children:"Thumbnail Image"})}),t("input",{type:"file",class:"file-input file-input-bordered",accept:"image/*",disabled:h,onChange:async w=>{const S=w.currentTarget.files?.[0];if(S){const _=await f(S);_&&d(_)}}}),h&&t("span",{class:"loading loading-spinner loading-sm mt-2"})]}),t("div",{class:"mb-4",children:[t("div",{class:"flex justify-between items-center mb-2",children:[t("h4",{class:"font-semibold",children:["Cards (",l.length,"/1000)"]}),t("button",{type:"button",class:"btn btn-sm btn-outline",onClick:b,disabled:l.length>=1e3,children:[t(wi,{class:"w-4 h-4 mr-1"}),"Add Card"]})]}),t("div",{class:"space-y-4 max-h-96 overflow-y-auto",children:l.map((w,S)=>t("div",{class:"border border-base-300 rounded-lg p-4",children:[t("div",{class:"flex justify-between items-center mb-2",children:[t("span",{class:"font-medium",children:["Card ",S+1]}),t("button",{type:"button",class:"btn btn-ghost btn-sm text-error",onClick:()=>x(S),children:t(nl,{class:"w-4 h-4"})})]}),t("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[t("label",{class:"label",children:t("span",{class:"label-text",children:"Word/Question"})}),t("textarea",{class:"textarea textarea-bordered textarea-sm",value:w.word.find(_=>_.type==="text")?.text||"",onInput:_=>{const C=_.currentTarget.value,P=w.word.filter(A=>A.type==="media");y(S,"word",[{text:C,type:"text"},...P])},placeholder:"Enter the word or question",rows:2}),t("div",{class:"mt-2",children:[t("label",{class:"label",children:t("span",{class:"label-text-alt",children:"Add Images"})}),t("input",{type:"file",class:"file-input file-input-bordered file-input-xs",accept:"image/*",multiple:!0,disabled:h,onChange:async _=>{const C=Array.from(_.currentTarget.files||[]),P=w.word.find(v=>v.type==="text"),A=w.word.filter(v=>v.type==="media"),k=[];for(const v of C){const M=await f(v);M&&k.push({mediaUrl:M,type:"media"})}y(S,"word",[P||{text:"",type:"text"},...A,...k])}}),t("div",{class:"flex flex-wrap gap-2 mt-2",children:w.word.filter(_=>_.type==="media").map((_,C)=>t("div",{class:"relative",children:[t("img",{src:Vt(_.mediaUrl),alt:`Word image ${C+1}`,class:"w-16 h-16 object-cover rounded"}),t("button",{type:"button",class:"btn btn-circle btn-xs absolute -top-2 -right-2",onClick:()=>{const P=w.word.filter((A,k)=>!(k>0&&w.word[k]===_));y(S,"word",P)},children:"×"})]},C))})]})]}),t("div",{children:[t("label",{class:"label",children:t("span",{class:"label-text",children:"Definition/Answer"})}),t("textarea",{class:"textarea textarea-bordered textarea-sm",value:w.definition.find(_=>_.type==="text")?.text||"",onInput:_=>{const C=_.currentTarget.value,P=w.definition.filter(A=>A.type==="media");y(S,"definition",[{text:C,type:"text"},...P])},placeholder:"Enter the definition or answer",rows:2}),t("div",{class:"mt-2",children:[t("label",{class:"label",children:t("span",{class:"label-text-alt",children:"Add Images"})}),t("input",{type:"file",class:"file-input file-input-bordered file-input-xs",accept:"image/*",multiple:!0,disabled:h,onChange:async _=>{const C=Array.from(_.currentTarget.files||[]),P=w.definition.find(v=>v.type==="text"),A=w.definition.filter(v=>v.type==="media"),k=[];for(const v of C){const M=await f(v);M&&k.push({mediaUrl:M,type:"media"})}y(S,"definition",[P||{text:"",type:"text"},...A,...k])}}),t("div",{class:"flex flex-wrap gap-2 mt-2",children:w.definition.filter(_=>_.type==="media").map((_,C)=>t("div",{class:"relative",children:[t("img",{src:Vt(_.mediaUrl),alt:`Definition image ${C+1}`,class:"w-16 h-16 object-cover rounded"}),t("button",{type:"button",class:"btn btn-circle btn-xs absolute -top-2 -right-2",onClick:()=>{const P=w.definition.filter((A,k)=>!(k>0&&w.definition[k]===_));y(S,"definition",P)},children:"×"})]},C))})]})]})]})]},S))})]}),t("div",{class:"modal-action",children:[t("button",{type:"button",class:"btn",onClick:n,children:"Cancel"}),t("button",{type:"submit",class:"btn btn-primary",disabled:!s.trim(),children:r?"Update Deck":"Create Deck"})]})]})]})})}async function Yi(r){return(await q.quizspire.getQuizspireDecksById(r)).data}async function T1(r){const n=(await q.profile.getProfileByUserId(r)).data;return{id:n.id,name:n.name,image:n.image,email:"",emailVerified:!1,createdAt:n.createdAt,updatedAt:n.updatedAt,chessWins:n.chessWins,chessLosses:n.chessLosses,draughtsWins:n.draughtsWins,draughtsLosses:n.draughtsLosses,arithmeticScore:n.arithmeticScore,tetrisScore:n.tetrisScore,role:null,banned:n.banned,banReason:n.banReason,banExpires:n.banExpires,age:null}}async function D1(){return(await q.auth.apiGetSessionList()).data?.user||null}function A1(r){return{...r,cards:r.cards.map(e=>({...e,word:e.definition,definition:e.word}))}}function O1({id:r}){const{route:e,url:n}=ft(),[s,i]=g(null),[o,a]=g(null),[c,d]=g(null),[l,u]=g(!0),[h,p]=g(null),[f,m]=g(0),[b,y]=g(!1),[x,w]=g(!1),[S,_]=g(!1),[C,P]=g(!1),[A,k]=g(!1),[v,M]=g(!1),[I,z]=g(!1),V=$e(null),G=async()=>{if(!r){p("Invalid deck ID"),u(!1);return}try{const R=await Yi(r);if(i(R),R.userId)try{const ue=await T1(R.userId);a(ue);const Oe=await D1();d(Oe)}catch(ue){console.error("Failed to fetch user profile:",ue)}}catch(R){if(R.status===401){e("/login");return}p("Failed to load deck"),console.error(R)}finally{u(!1)}};ee(()=>{G();const R=new URLSearchParams(window.location.search);P(R.get("fullscreen")==="true")},[r]),ee(()=>{const R=ue=>{if(s)switch(ue.key){case"ArrowLeft":ue.preventDefault(),oe();break;case"ArrowRight":ue.preventDefault(),X();break;case" ":ue.preventDefault(),te();break}};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[s,f,b]);const oe=()=>{s&&(m(R=>R>0?R-1:s.cards.length-1),y(!1))},X=()=>{s&&(m(R=>R<s.cards.length-1?R+1:0),y(!1))},te=()=>{y(R=>!R)},j=()=>{P(R=>!R)};ee(()=>{const R=()=>{k(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",R),()=>document.removeEventListener("fullscreenchange",R)},[]);const ie=async(R,ue)=>{try{await q.quizspire.putQuizspireDecksById(R,ue),w(!1),G()}catch(Oe){console.error("Failed to update deck:",Oe),p("Failed to update deck")}},F=async()=>{if(!(!s||!c||c.id!==o?.id))try{const R=A1(s);await ie(s._id,{cards:R.cards})}catch(R){console.error("Failed to reverse Q&A:",R),p("Failed to reverse Q&A")}},D=async()=>{if(!(!s||!c))try{const R={...s,title:`${s.title} (Copy)`,userId:c.id,_id:void 0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},ue=await q.quizspire.postQuizspireDecks(R);_(!1),e(`/projects/quizspire/${ue.data._id}`)}catch(R){console.error("Failed to copy deck:",R),p("Failed to copy deck to collection")}},H=async()=>{try{await navigator.clipboard.writeText(window.location.href);const R=document.querySelector('.btn-outline[aria-label="Share deck"]');R&&(R.classList.add("btn-success"),R.textContent="Copied!",setTimeout(()=>{R.classList.remove("btn-success"),R.innerHTML='<svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"></path></svg>Share'},2e3))}catch(R){console.error("Failed to copy link:",R)}};if(l)return t("div",{class:"h-full bg-base-100 flex items-center justify-center",children:t("div",{class:"text-center",children:[t("span",{class:"loading loading-spinner loading-lg"}),t("p",{class:"mt-4 text-base-content/70",children:"Loading deck..."})]})});if(h||!s)return t("div",{class:"h-full bg-base-100 flex items-center justify-center",children:t("div",{class:"text-center",children:[t("div",{class:"alert alert-error max-w-md",children:t("span",{children:h||"Deck not found"})}),t("button",{class:"btn btn-primary mt-4",onClick:()=>e("/projects/quizspire"),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back to Quizspire"]})]})});if(s.cards.length===0)return t("div",{class:"h-full bg-base-100 flex items-center justify-center",children:t("div",{class:"text-center",children:[t("div",{class:"alert alert-warning max-w-md",children:t("span",{children:"This deck has no cards"})}),t("button",{class:"btn btn-primary mt-4",onClick:()=>e("/projects/quizspire"),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back to Quizspire"]})]})});const W=s.cards[f],Y=W.word,K=W.definition,ge=(R,ue)=>R.length<=ue?R:R.substring(0,ue)+"...",ne=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return t("div",{class:"h-full bg-base-100",children:[t("div",{class:"bg-base-200 border-b border-base-300 px-4 py-3 w-full",children:t("div",{class:"navbar w-full min-h-0",children:[t("div",{class:"navbar-start",children:t("div",{class:"flex items-center gap-3",children:[t("button",{class:"btn btn-ghost btn-sm hover:scale-105 transition-transform duration-200",onClick:()=>e("/projects/quizspire"),"aria-label":"Back to Quizspire",children:t(at,{class:"w-4 h-4"})}),t("div",{class:"cursor-pointer",onClick:()=>z(!0),children:[t("h1",{class:"text-lg font-bold text-base-content",children:s.title}),t("div",{class:"flex items-center gap-2 mt-1",children:[t("span",{class:"text-xs text-base-content/60",children:[s.cards.length," cards"]}),t("button",{class:"btn btn-ghost btn-xs hover:scale-105 transition-transform duration-200",onClick:()=>z(!0),"aria-label":"Deck information",children:t(_1,{class:"w-3 h-3"})})]})]})]})}),t("div",{class:"navbar-center",children:o&&t("a",{href:`/profile/${o.id}`,class:"flex items-center gap-2 link link-hover hover:scale-105 transition-transform duration-200",children:[t(lt,{name:o.name,image:o.image||"",widthClass:"w-6"}),t("span",{class:"text-sm font-medium",children:o.name})]})}),t("div",{class:"flex gap-2 navbar-end",children:[t("button",{class:"btn btn-outline btn-sm hover:scale-105 transition-transform duration-200",onClick:H,"aria-label":"Share deck",children:[t(el,{class:"w-4 h-4 mr-1"}),"Share"]}),c?.id===o?.id&&t("button",{class:"btn btn-accent btn-sm hover:scale-105 transition-transform duration-200",onClick:F,"aria-label":"Reverse Q&A",children:[t(Xu,{class:"w-4 h-4 mr-1"}),"Reverse Q&A"]}),c&&c.id!==o.id?t("button",{class:"btn btn-primary btn-sm hover:scale-105 transition-transform duration-200",onClick:()=>_(!0),"aria-label":"Add to collection",children:[t(y1,{class:"w-4 h-4 mr-1"}),"Add to Collection"]}):c?.id===o.id?t("button",{class:"btn btn-primary btn-sm hover:scale-105 transition-transform duration-200",onClick:()=>w(!0),"aria-label":"Edit deck",children:[t(Zc,{class:"w-4 h-4 mr-1"}),"Edit"]}):null]})]})}),t("div",{class:`flex flex-col items-center ${A?"pt-8":"pt-4"} h-[95%]`,children:[t("div",{class:"mb-4 text-base-content/70",children:[f+1," / ",s.cards.length]}),!C&&t("div",{class:"mb-4 text-center",children:t("h3",{class:"text-lg font-semibold text-base-content/80",children:b?"Definition/Answer":"Word/Question"})}),!C&&t("div",{class:"mb-8 w-full max-w-4xl",children:t("div",{class:"grid grid-cols-[repeat(auto-fit,minmax(120px,1fr))] gap-2 w-full",children:[t("button",{class:`btn btn-sm ${C?"btn-primary":"btn-info"}`,onClick:j,children:[t(Dn,{class:"w-4 h-4 mr-1"}),"Flashcards"]}),t("button",{class:"btn btn-info btn-sm",onClick:()=>{const R=new URLSearchParams;R.set("referrer",encodeURIComponent(n));const ue=`/projects/quizspire/${s._id}/learn?${R}`;e(ue)},children:[t(mr,{class:"w-4 h-4 mr-1"}),"Learn"]}),t("button",{class:"btn btn-info btn-sm",onClick:()=>{const R=new URLSearchParams;R.set("referrer",encodeURIComponent(n));const ue=`/projects/quizspire/${s._id}/test?${R}`;e(ue)},children:[t(An,{class:"w-4 h-4 mr-1"}),"Test"]}),t("button",{class:"btn btn-info btn-sm",onClick:()=>{const R=new URLSearchParams;R.set("referrer",encodeURIComponent(n));const ue=`/projects/quizspire/${s._id}/tetris?${R}`;e(ue)},children:[t(Jc,{class:"w-4 h-4 mr-1"}),"Tetris"]}),t("button",{class:"btn btn-info btn-sm",children:[t(rl,{class:"w-4 h-4 mr-1"}),"Blast"]}),t("button",{class:"btn btn-info btn-sm",onClick:()=>{const R=new URLSearchParams;R.set("referrer",encodeURIComponent(n));const ue=`/projects/quizspire/${s._id}/match?${R}`;e(ue)},children:[t(tl,{class:"w-4 h-4 mr-1"}),"Match"]})]})}),t("div",{ref:V,class:`w-full ${C?"max-w-[90%] h-[75%] min-h-128":"max-w-4xl h-128"} cursor-pointer transition-transform duration-300 hover:scale-105 focus:outline focus:outline-primary`,onClick:te,role:"button",tabIndex:0,"aria-label":`Flashcard ${f+1}. Click or press space to flip.`,onKeyDown:R=>{(R.key==="Enter"||R.key===" ")&&(R.preventDefault(),te())},children:t("div",{class:`card bg-base-100 shadow h-full transition-transform duration-500 ${b?"rotate-y-180":""}`,style:{transformStyle:"preserve-3d"},children:[t("div",{class:`card-body absolute inset-0 backface-hidden ${b?"opacity-0":"opacity-100"} transition-opacity duration-250`,children:t("div",{class:"h-full flex items-center justify-center",children:t("div",{class:`grid gap-2 w-full h-full max-h-full ${Y.length===1?"grid-cols-1 grid-rows-1":Y.length===2?"grid-cols-1 grid-rows-2 sm:grid-cols-2 sm:grid-rows-1":Y.length===3||Y.length===4?"grid-cols-2 grid-rows-2":"grid-cols-3 grid-rows-2"}`,children:Y.map((R,ue)=>t("div",{class:`flex items-center justify-center p-2 ${Y.length===1||Y.length===2?"col-span-1 row-span-1":Y.length===3&&ue===0?"col-span-2 row-span-1":"col-span-1 row-span-1"}`,children:R.type==="text"?t("p",{class:"text-lg text-center break-words",children:R.text}):t("img",{src:Vt(R.mediaUrl),alt:"Word media",class:"w-full h-full max-w-full max-h-full object-contain rounded"})},ue))})})}),t("div",{class:`card-body absolute inset-0 backface-hidden rotate-y-180 ${b?"opacity-100":"opacity-0"} transition-opacity duration-250`,children:t("div",{class:"h-full flex items-center justify-center",children:t("div",{class:`grid gap-2 w-full h-full max-h-full ${K.length===1?"grid-cols-1 grid-rows-1":K.length===2?"grid-cols-1 grid-rows-2 sm:grid-cols-2 sm:grid-rows-1":K.length===3||K.length===4?"grid-cols-2 grid-rows-2":"grid-cols-3 grid-rows-2"}`,children:K.map((R,ue)=>t("div",{class:`flex items-center justify-center p-2 ${K.length===1||K.length===2?"col-span-1 row-span-1":K.length===3&&ue===0?"col-span-2 row-span-1":"col-span-1 row-span-1"}`,children:R.type==="text"?t("p",{class:"text-lg text-center break-words",children:R.text}):t("img",{src:Vt(R.mediaUrl),alt:"Definition media",class:"w-full h-full max-w-full max-h-full object-contain rounded"})},ue))})})})]})}),t("div",{className:`relative h-16 flex items-center w-full ${C?"max-w-[90%]":"max-w-4xl"} mt-8`,children:[t("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 transform flex space-x-4",children:[t("button",{className:"btn btn-outline btn-lg",onClick:oe,disabled:s.cards.length<=1,"aria-label":"Previous card",children:t(Xc,{className:"w-6 h-6"})}),t("button",{className:"btn btn-primary btn-lg",onClick:te,"aria-label":"Flip card",children:[t(gr,{className:"w-6 h-6 mr-2"}),"Flip"]}),t("button",{className:"btn btn-outline btn-lg",onClick:X,disabled:s.cards.length<=1,"aria-label":"Next card",children:t(Qi,{className:"w-6 h-6"})})]}),t("div",{className:"absolute right-0 top-1/2 -translate-y-1/2 transform",children:t("button",{className:"btn btn-outline btn-lg",onClick:j,"aria-label":C?"Exit card fullscreen":"Enter card fullscreen",children:C?t(C1,{className:"w-6 h-6"}):t(x1,{className:"w-6 h-6"})})})]}),t("div",{class:"mt-4 text-sm text-base-content/50 text-center",children:"Use arrow keys to navigate, spacebar to flip, escape to go back"})]}),I&&t("dialog",{className:"modal modal-open",children:t("div",{className:"modal-box max-w-md",children:[t("h3",{className:"font-bold text-lg mb-4",children:s.title}),t("div",{className:"space-y-4",children:[t("div",{children:[t("h4",{className:"font-semibold text-sm text-base-content/70 mb-2",children:"Description"}),t("div",{className:"text-sm",children:s.description.length>200?t("div",{children:[t("p",{className:"mb-2",children:v?s.description:ge(s.description,200)}),t("button",{className:"text-xs text-primary hover:text-primary-focus transition-colors duration-200",onClick:()=>M(!v),children:v?"Show less":"Show more"})]}):t("p",{children:s.description})})]}),t("div",{className:"grid grid-cols-2 gap-4",children:[t("div",{children:[t("h4",{className:"font-semibold text-sm text-base-content/70",children:"Cards"}),t("p",{className:"text-lg font-bold",children:s.cards.length})]}),t("div",{children:[t("h4",{className:"font-semibold text-sm text-base-content/70",children:"Created"}),t("p",{className:"text-sm",children:ne(s.createdAt)})]})]}),o&&t("div",{children:[t("h4",{className:"font-semibold text-sm text-base-content/70 mb-2",children:"Author"}),t("a",{href:`/profile/${o.id}`,className:"flex items-center gap-2 link link-hover",children:[t(lt,{name:o.name,image:o.image||"",widthClass:"w-6"}),t("span",{className:"text-sm",children:o.name})]})]})]}),t("div",{className:"modal-action",children:t("button",{className:"btn",onClick:()=>z(!1),children:"Close"})})]})}),x&&t(sl,{deck:s,onSave:R=>{s._id&&ie(s._id,R)},onClose:()=>w(!1)}),S&&t("dialog",{className:"modal modal-open",children:t("div",{className:"modal-box",children:[t("h3",{className:"font-bold text-lg",children:"Add to Collection"}),t("p",{className:"py-4",children:"Are you sure you want to add this deck to your collection? This will create a copy of the deck in your account."}),t("div",{className:"alert alert-warning",children:t("span",{children:["⚠️ Note: Images in the deck will still be managed by ",o.name,": they cannot edit the images, but they can delete them."]})}),t("div",{className:"modal-action",children:[t("button",{className:"btn",onClick:()=>_(!1),children:"Cancel"}),t("button",{className:"btn btn-primary",onClick:D,children:"Add to Collection"})]})]})})]})}function L1({id:r}){const{route:e,query:n}=ft(),s=r,[i,o]=g(null),[a,c]=g(!0),[d,l]=g(null),[u,h]=g(null),[p,f]=g(null),[m,b]=g(!1),y=async()=>{if(!s){l("Invalid deck ID"),c(!1);return}try{const k=await Yi(s);o(k);const v=x(k);h({currentQuestionIndex:0,questions:v,answers:new Array(v.length).fill(null),answered:!1,completed:!1})}catch(k){if(k.status===401){e("/login");return}l("Failed to load deck"),console.error(k)}finally{c(!1)}},x=k=>{const v=[...k.cards].sort(()=>Math.random()-.5),M=[];for(const I of v){const z=I.word.find(j=>j.type==="text")?.text||"Question",V=I.definition.find(j=>j.type==="text")?.text||"Answer",G=k.cards.filter(j=>j!==I).map(j=>j.definition.find(ie=>ie.type==="text")?.text).filter(j=>j&&j!==V).slice(0,3),oe=[V,...G];if(oe.length<2)for(;oe.length<4;)oe.push(`Option ${oe.length+1}`);const X=oe.sort(()=>Math.random()-.5),te=X.indexOf(V);M.push({card:I,question:z,options:X,correctIndex:te})}return M},w=k=>{if(m||!u)return;f(k),b(!0);const v=[...u.answers];v[u.currentQuestionIndex]=k,h({...u,answers:v,answered:!0})},S=()=>{u&&(u.currentQuestionIndex<u.questions.length-1?(h({...u,currentQuestionIndex:u.currentQuestionIndex+1,answered:!1}),f(null),b(!1)):h({...u,completed:!0}))},_=()=>{if(!i)return;const k=x(i);h({currentQuestionIndex:0,questions:k,answers:new Array(k.length).fill(null),answered:!1,completed:!1}),f(null),b(!1)};if(ee(()=>{y()},[s]),a)return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"flex justify-center",children:t("span",{class:"loading loading-spinner loading-lg"})})});if(d||!i)return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"text-center",children:[t("div",{class:"alert alert-error max-w-md",children:t("span",{children:d||"Deck not found"})}),t("button",{class:"btn btn-primary mt-4",onClick:()=>e(decodeURIComponent(n.referrer)||"/projects/quizspire"),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back"]})]})});if(i.cards.length===0)return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"text-center",children:[t("div",{class:"alert alert-warning max-w-md",children:t("span",{children:"This deck has no cards"})}),t("button",{class:"btn btn-primary mt-4",onClick:()=>e(decodeURIComponent(n.referrer)||"/projects/quizspire"),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back"]})]})});if(i.cards.length<2)return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"text-center",children:[t("div",{class:"alert alert-warning max-w-md",children:t("span",{children:"This deck needs at least 2 cards for the learn mode"})}),t("button",{class:"btn btn-primary mt-4",onClick:()=>e(decodeURIComponent(n.referrer)||"/projects/quizspire"),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back"]})]})});if(!u)return null;const C=(u.currentQuestionIndex+(u.answered?1:0))/u.questions.length*100,P=u.answers.filter((k,v)=>k!==null&&k===u.questions[v].correctIndex).length;if(u.completed)return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"max-w-2xl mx-auto",children:[t("div",{class:"text-center mb-8",children:[t("h1",{class:"text-3xl font-bold mb-2",children:"Quiz Complete!"}),t("p",{class:"text-lg text-base-content/70",children:[i.title," - Learn Mode"]})]}),t("div",{class:"card bg-base-100 shadow-xl",children:t("div",{class:"card-body text-center",children:[t("div",{class:"stats stats-vertical lg:stats-horizontal shadow mb-6",children:[t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Questions"}),t("div",{class:"stat-value",children:u.questions.length})]}),t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Correct"}),t("div",{class:"stat-value text-success",children:P})]}),t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Accuracy"}),t("div",{class:"stat-value text-primary",children:[Math.round(P/u.questions.length*100),"%"]})]})]}),t("div",{class:"flex gap-4 justify-center",children:[t("button",{class:"btn btn-primary btn-lg",onClick:_,children:[t(gr,{class:"w-5 h-5 mr-2"}),"Try Again"]}),t("button",{class:"btn btn-outline btn-lg",onClick:()=>{e(decodeURIComponent(n.referrer)||"/projects/quizspire")},children:[t(at,{class:"w-5 h-5 mr-2"}),"Back"]})]})]})})]})});const A=u.questions[u.currentQuestionIndex];return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"max-w-2xl mx-auto",children:[t("div",{class:"flex items-center justify-between mb-6",children:[t("button",{class:"btn btn-ghost",onClick:()=>e(decodeURIComponent(n.referrer)||"/projects/quizspire"),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back"]}),t("div",{class:"text-center",children:[t("h1",{class:"text-xl font-bold",children:i.title}),t("p",{class:"text-sm text-base-content/70",children:"Learn Mode"})]}),t("div",{class:"text-right",children:[t("div",{class:"text-sm font-medium",children:[u.currentQuestionIndex+1," / ",u.questions.length]}),t("div",{class:"text-xs text-base-content/50",children:[P," correct"]})]})]}),t("div",{class:"mb-8",children:t("progress",{class:"progress progress-primary w-full",value:C,max:"100"})}),t("div",{class:"card bg-base-100 shadow-xl mb-6",children:t("div",{class:"card-body",children:[t("h2",{class:"card-title text-xl mb-4",children:"Match the definition:"}),t("div",{class:"text-center",children:t("div",{class:"bg-base-200 rounded-lg p-6 mb-6",children:t("p",{class:"text-2xl font-semibold",children:A.question})})}),t("div",{class:"grid grid-cols-1 gap-3",children:A.options.map((k,v)=>{let M="btn btn-outline btn-block justify-start h-auto py-4";return m?v===A.correctIndex?M+=" btn-success":v===p&&(M+=" btn-error"):v===p&&(M+=" btn-primary"),t("button",{class:M,onClick:()=>w(v),disabled:m,children:t("div",{class:"flex items-center w-full",children:[t("span",{class:"flex-shrink-0 w-8 h-8 rounded-full bg-base-300 flex items-center justify-center mr-3 font-medium",children:String.fromCharCode(65+v)}),t("span",{class:"text-left flex-1",children:k}),m&&v===A.correctIndex&&t(wn,{class:"w-5 h-5 ml-2 text-success"}),m&&v===p&&v!==A.correctIndex&&t(On,{class:"w-5 h-5 ml-2 text-error"})]})},v)})})]})}),m&&t("div",{class:"text-center",children:t("button",{class:"btn btn-primary btn-lg",onClick:S,children:u.currentQuestionIndex<u.questions.length-1?t(Q,{children:["Next Question",t(Qi,{class:"w-5 h-5 ml-2"})]}):"View Results"})})]})})}const I1=r=>{try{const e=atob(r),[n,s]=e.split("-");return{questionCount:parseInt(n),testType:s}}catch{return null}},M1=r=>btoa(`${r.questionCount}-${r.testType}`);function P1({deck:r,onStart:e,onClose:n}){const[s,i]=g(Math.min(10,r.cards.length)),[o,a]=g("match"),[c,d]=g(!1),[l,u]=g(""),h=r.cards.length,p=m=>{const b=M1(m),y=`${window.location.origin}${window.location.pathname}?test=${b}`;u(y),d(!0),e(m)},f=async()=>{try{await navigator.clipboard.writeText(l)}catch(m){console.error("Failed to copy:",m)}};return c?t("div",{class:"modal modal-open",children:t("div",{class:"modal-box animate-in fade-in-0 zoom-in-95 duration-300",children:[t("h3",{class:"font-bold text-xl mb-4 flex items-center gap-2",children:[t(An,{class:"text-primary"}),"Test Link Generated!"]}),t("div",{class:"alert alert-success mb-4",children:[t(wn,{class:"w-5 h-5"}),t("span",{children:"Your test has been configured. Share this link to let others take the same test!"})]}),t("div",{class:"form-control",children:[t("label",{class:"label",children:t("span",{class:"label-text",children:"Shareable Test Link"})}),t("div",{class:"join",children:[t("input",{type:"text",class:"input input-bordered join-item flex-1",value:l,readonly:!0}),t("button",{class:"btn btn-primary join-item",onClick:f,children:[t(Dn,{class:"w-4 h-4"}),"Copy"]})]})]}),t("div",{class:"modal-action",children:[t("button",{class:"btn btn-outline",onClick:()=>d(!1),children:"Back"}),t("button",{class:"btn btn-primary",onClick:n,children:"Start Test"})]})]})}):t("div",{class:"modal modal-open",children:t("div",{class:"modal-box max-w-lg animate-in fade-in-0 zoom-in-95 duration-300",children:[t("h3",{class:"font-bold text-2xl mb-6 flex items-center gap-3",children:[t("div",{class:"p-2 bg-primary/10 rounded-full",children:t(An,{class:"w-6 h-6 text-primary"})}),"Configure Your Test"]}),t("div",{class:"space-y-6",children:[t("div",{class:"card bg-base-100 shadow-sm border",children:t("div",{class:"card-body p-4",children:[t("div",{class:"flex items-center gap-3 mb-3",children:[t(Dn,{class:"w-5 h-5 text-primary"}),t("span",{class:"font-semibold",children:"Number of Questions"})]}),t("input",{type:"range",min:"1",max:h,value:s,class:"range range-primary range-lg w-full",onInput:m=>i(parseInt(m.currentTarget.value))}),t("div",{class:"flex justify-between text-sm text-base-content/70 mt-2",children:[t("span",{class:"badge badge-outline",children:"1"}),t("span",{class:"badge badge-primary badge-lg font-bold",children:s}),t("span",{class:"badge badge-outline",children:h})]})]})}),t("div",{class:"card bg-base-100 shadow-sm border",children:t("div",{class:"card-body p-4",children:[t("div",{class:"flex items-center gap-3 mb-3",children:[t(mr,{class:"w-5 h-5 text-primary"}),t("span",{class:"font-semibold",children:"Test Type"})]}),t("div",{class:"grid grid-cols-2 gap-3",children:[t("div",{class:`card cursor-pointer transition-all duration-200 ${o==="match"?"bg-primary text-primary-content shadow-lg scale-105":"bg-base-100 hover:bg-base-200"}`,onClick:()=>a("match"),children:t("div",{class:"card-body p-4 text-center",children:[t("div",{class:"text-2xl mb-2",children:"🎯"}),t("div",{class:"font-bold",children:"Match"}),t("div",{class:"text-xs opacity-80",children:"Multiple Choice"})]})}),t("div",{class:`card cursor-pointer transition-all duration-200 ${o==="typing"?"bg-primary text-primary-content shadow-lg scale-105":"bg-base-100 hover:bg-base-200"}`,onClick:()=>a("typing"),children:t("div",{class:"card-body p-4 text-center",children:[t("div",{class:"text-2xl mb-2",children:"⌨️"}),t("div",{class:"font-bold",children:"Typing"}),t("div",{class:"text-xs opacity-80",children:"Type Answer"})]})})]}),t("div",{class:"text-sm text-base-content/70 mt-3 p-3 bg-base-200 rounded-lg",children:o==="match"?"Select the correct answer from multiple choices. Perfect for quick testing!":"Type the exact answer as shown. Great for memorization practice!"})]})})]}),t("div",{class:"modal-action mt-8",children:[t("button",{class:"btn btn-ghost",onClick:n,children:[t(at,{class:"w-4 h-4 mr-2"}),"Cancel"]}),t("button",{class:"btn btn-primary btn-lg",onClick:()=>p({questionCount:s,testType:o}),children:[t(mr,{class:"w-5 h-5 mr-2"}),"Generate Test Link"]})]})]})})}function R1({questions:r,onAnswer:e,onComplete:n}){const[s,i]=g(0),[o,a]=g({}),[c]=g(Date.now()),[d,l]=g(null),[u,h]=g(!1),p=r[s],f=(s+1)/r.length*100,m=(b,y)=>{if(u)return;l(y),h(!0);const x={...o,[p.id]:b};a(x),e(p.id,b),setTimeout(()=>{s<r.length-1?(i(s+1),l(null),h(!1)):n()},1500)};return t("div",{class:"min-h-full bg-gradient-to-br from-primary/5 via-base-100 to-secondary/5",children:t("div",{class:"container mx-auto px-4 py-8 max-w-4xl",children:[t("div",{class:"text-center mb-8",children:[t("div",{class:"inline-flex items-center gap-3 mb-4",children:[t("div",{class:"p-3 bg-primary/10 rounded-full",children:t(An,{class:"w-8 h-8 text-primary"})}),t("div",{children:[t("h1",{class:"text-3xl font-bold",children:"Match Test"}),t("p",{class:"text-base-content/70",children:"Multiple Choice Questions"})]})]}),t("div",{class:"max-w-md mx-auto mb-6",children:[t("div",{class:"flex justify-between text-sm mb-2",children:[t("span",{children:["Question ",s+1," of ",r.length]}),t("span",{children:[Math.round(f),"% Complete"]})]}),t("progress",{class:"progress progress-primary w-full h-3",value:f,max:"100"})]})]}),t("div",{class:"card bg-base-100 shadow-2xl border animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:t("div",{class:"card-body p-8",children:[t("div",{class:"text-center mb-8",children:[t("div",{class:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4",children:t("span",{class:"text-2xl font-bold text-primary",children:s+1})}),t("h2",{class:"card-title text-2xl justify-center mb-2",children:p.question}),t("p",{class:"text-base-content/60",children:"Select the correct answer"})]}),t("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.options.map((b,y)=>{let x="btn btn-outline justify-start h-auto py-4 px-6 transition-all duration-200 hover:scale-105",w=!1,S=d===y;return u?(w=b===p.answer,w?x+=" btn-success text-success-content":S?x+=" btn-error text-error-content":x+=" btn-ghost opacity-50"):S&&(x+=" btn-primary"),t("button",{class:`group ${x}`,onClick:()=>m(b,y),disabled:u,children:t("div",{class:"flex items-center w-full",children:[t("div",{class:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center mr-4 font-bold text-lg transition-all ${u?w?"bg-success text-success-content":S?"bg-error text-error-content":"bg-base-300":S?"bg-primary text-primary-content":"bg-base-200 group-hover:bg-base-300"}`,children:String.fromCharCode(65+y)}),t("span",{class:"text-left flex-1",children:b}),u&&w&&t(wn,{class:"w-6 h-6 ml-2 text-success animate-in zoom-in-50 duration-300"}),u&&S&&!w&&t(On,{class:"w-6 h-6 ml-2 text-error animate-in zoom-in-50 duration-300"})]})},y)})}),u&&t("div",{class:"text-center mt-6 animate-in fade-in-0 slide-in-from-bottom-2 duration-500",children:t("div",{class:`alert ${d!==null&&p.options[d]===p.answer?"alert-success":"alert-error"}`,children:t("div",{class:"flex items-center justify-center gap-2",children:d!==null&&p.options[d]===p.answer?t(Q,{children:[t(wn,{class:"w-5 h-5"}),t("span",{class:"font-semibold",children:"Correct!"})]}):t(Q,{children:[t(On,{class:"w-5 h-5"}),t("span",{class:"font-semibold",children:"Incorrect"})]})})})})]})})]})})}function B1({questions:r,onAnswer:e,onComplete:n}){const[s,i]=g(0),[o,a]=g({}),[c,d]=g(""),[l]=g(Date.now()),[u,h]=g(!1),[p,f]=g(!1),m=r[s],b=(s+1)/r.length*100,y=()=>{if(!c.trim())return;const w=c.toLowerCase().trim()===m.answer.toLowerCase().trim();f(w),h(!0);const S={...o,[m.id]:c};a(S),e(m.id,c),setTimeout(()=>{s<r.length-1?(i(s+1),d(""),h(!1)):n()},2e3)},x=w=>{w.key==="Enter"&&y()};return t("div",{class:"min-h-full bg-gradient-to-br from-secondary/5 via-base-100 to-accent/5",children:t("div",{class:"container mx-auto px-4 py-8 max-w-4xl",children:[t("div",{class:"text-center mb-8",children:[t("div",{class:"inline-flex items-center gap-3 mb-4",children:[t("div",{class:"p-3 bg-secondary/10 rounded-full",children:t(Dn,{class:"w-8 h-8 text-secondary"})}),t("div",{children:[t("h1",{class:"text-3xl font-bold",children:"Typing Test"}),t("p",{class:"text-base-content/70",children:"Type the exact answer"})]})]}),t("div",{class:"max-w-md mx-auto mb-6",children:[t("div",{class:"flex justify-between text-sm mb-2",children:[t("span",{children:["Question ",s+1," of ",r.length]}),t("span",{children:[Math.round(b),"% Complete"]})]}),t("progress",{class:"progress progress-secondary w-full h-3",value:b,max:"100"})]})]}),t("div",{class:"card bg-base-100 shadow-2xl border animate-in fade-in-0 slide-in-from-bottom-4 duration-500",children:t("div",{class:"card-body p-8",children:[t("div",{class:"text-center mb-8",children:[t("div",{class:"inline-flex items-center justify-center w-16 h-16 bg-secondary/10 rounded-full mb-4",children:t("span",{class:"text-2xl font-bold text-secondary",children:s+1})}),t("h2",{class:"card-title text-2xl justify-center mb-2",children:m.question}),t("p",{class:"text-base-content/60",children:"Type the answer exactly as shown"})]}),t("div",{class:"max-w-md mx-auto",children:[t("div",{class:"form-control",children:t("input",{type:"text",class:`input input-bordered input-lg text-center text-xl py-6 transition-all duration-200 ${u?p?"input-success":"input-error":""}`,placeholder:"Type your answer...",value:c,onInput:w=>d(w.currentTarget.value),onKeyPress:x,autoFocus:!0,disabled:u})}),u&&t("div",{class:"text-center mt-6 animate-in fade-in-0 slide-in-from-bottom-2 duration-500",children:[t("div",{class:`alert ${p?"alert-success":"alert-error"}`,children:t("div",{class:"flex items-center justify-center gap-2",children:p?t(Q,{children:[t(wn,{class:"w-5 h-5"}),t("span",{class:"font-semibold",children:"Correct!"})]}):t(Q,{children:[t(On,{class:"w-5 h-5"}),t("span",{class:"font-semibold",children:"Incorrect"})]})})}),!p&&t("div",{class:"mt-2 text-sm",children:[t("span",{class:"font-medium",children:"Correct answer: "}),t("span",{class:"font-mono",children:m.answer})]})]}),!u&&t("div",{class:"text-center mt-6",children:t("button",{class:"btn btn-secondary btn-lg px-8",onClick:y,disabled:!c.trim(),children:s<r.length-1?"Submit & Next":"Finish Test"})})]})]})})]})})}function j1({result:r,questions:e,testType:n,onRestart:s,onBack:i}){const o=Math.round(r.score/r.totalQuestions*100),a=Math.round(r.timeTaken/6e4*10)/10,d=o>=90?{message:"Outstanding!",color:"text-success",icon:"🏆"}:o>=80?{message:"Great job!",color:"text-success",icon:"🎉"}:o>=70?{message:"Good work!",color:"text-warning",icon:"👍"}:o>=60?{message:"Keep practicing!",color:"text-warning",icon:"📚"}:{message:"Room for improvement",color:"text-error",icon:"💪"};return t("div",{class:"min-h-full bg-gradient-to-br from-base-100 via-base-200/20 to-base-100",children:t("div",{class:"container mx-auto px-4 py-8 max-w-6xl",children:[t("div",{class:"text-center mb-12",children:[t("div",{class:"inline-flex items-center gap-4 mb-6",children:[t("div",{class:"text-6xl",children:d.icon}),t("div",{children:[t("h1",{class:"text-4xl font-bold mb-2",children:"Test Complete!"}),t("p",{class:`text-xl font-semibold ${d.color}`,children:d.message})]})]}),t("div",{class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t("div",{class:"card bg-base-100 shadow-xl border",children:t("div",{class:"card-body text-center",children:[t("div",{class:"radial-progress text-primary mb-4 mx-auto",style:`--value:${o}; --size:4rem; --thickness:0.5rem;`,children:t("span",{class:"text-lg font-bold",children:[o,"%"]})}),t("h3",{class:"font-semibold",children:"Accuracy"}),t("p",{class:"text-sm text-base-content/70",children:[r.score," out of ",r.totalQuestions," correct"]})]})}),t("div",{class:"card bg-base-100 shadow-xl border",children:t("div",{class:"card-body text-center",children:[t("div",{class:"text-4xl mb-4",children:"⏱️"}),t("h3",{class:"font-semibold",children:"Time Taken"}),t("p",{class:"text-2xl font-bold text-primary",children:[a,"m"]}),t("p",{class:"text-sm text-base-content/70",children:"minutes"})]})}),t("div",{class:"card bg-base-100 shadow-xl border",children:t("div",{class:"card-body text-center",children:[t("div",{class:`text-4xl mb-4 ${o>=70?"text-success":o>=50?"text-warning":"text-error"}`,children:(o>=70||o>=50,"🎯")}),t("h3",{class:"font-semibold",children:"Score"}),t("p",{class:"text-2xl font-bold",children:[r.score,"/",r.totalQuestions]}),t("p",{class:"text-sm text-base-content/70",children:"questions"})]})})]}),t("div",{class:"flex flex-col sm:flex-row gap-4 justify-center",children:[t("button",{class:"btn btn-primary btn-lg",onClick:s,children:[t(gr,{class:"w-5 h-5 mr-2"}),"Take Test Again"]}),t("button",{class:"btn btn-outline btn-lg",onClick:i,children:[t(at,{class:"w-5 h-5 mr-2"}),"Back to Deck"]})]})]}),t("div",{class:"card bg-base-100 shadow-xl border",children:t("div",{class:"card-body",children:[t("h2",{class:"text-2xl font-bold mb-6 flex items-center gap-2",children:[t(Dn,{class:"w-6 h-6"}),"Review Your Answers"]}),t("div",{class:"space-y-6",children:r.answers.map((l,u)=>{const h=e.find(f=>f.id===l.questionId);if(!h)return null;const p=l.isCorrect;return t("div",{class:`border-l-4 rounded-lg p-6 transition-all duration-300 hover:shadow-md ${p?"border-l-success bg-success/5":"border-l-error bg-error/5"}`,children:t("div",{class:"flex items-start gap-4",children:[t("div",{class:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${p?"bg-success text-success-content":"bg-error text-error-content"}`,children:p?t(wn,{class:"w-6 h-6"}):t(On,{class:"w-6 h-6"})}),t("div",{class:"flex-1",children:[t("div",{class:"flex items-center gap-2 mb-3",children:[t("span",{class:"badge badge-outline",children:["Question ",u+1]}),t("span",{class:`badge ${p?"badge-success":"badge-error"}`,children:p?"Correct":"Incorrect"})]}),t("h3",{class:"font-semibold text-lg mb-4",children:h.question}),t("div",{class:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[t("div",{class:"space-y-2",children:[t("p",{class:"text-sm font-medium text-base-content/70 uppercase tracking-wide",children:"Your Answer"}),t("div",{class:`p-3 rounded-lg border-2 ${p?"border-success bg-success/10 text-success":"border-error bg-error/10 text-error"}`,children:t("p",{class:"font-medium",children:l.userAnswer||"(no answer)"})})]}),t("div",{class:"space-y-2",children:[t("p",{class:"text-sm font-medium text-base-content/70 uppercase tracking-wide",children:"Correct Answer"}),t("div",{class:"p-3 rounded-lg border-2 border-success bg-success/10 text-success",children:t("p",{class:"font-medium",children:l.correctAnswer})})]})]})]})]})},l.questionId)})})]})})]})})}function F1({deckId:r}){const{route:e,query:n}=ft(),s=n.test,[i,o]=g(null),[a,c]=g(!0),[d,l]=g(null),[u,h]=g(!1),[p,f]=g(!1),[m,b]=g(!1),[y,x]=g([]),[w,S]=g({}),[_,C]=g(null),[P,A]=g(null),[k,v]=g(null);ee(()=>{(async()=>{try{const te=await Yi(r);if(o(te),s){const j=I1(s);if(j){const ie=M(te,j);x(ie),C(j),f(!0),v(Date.now())}}}catch(te){if(te.status===401){e("/login");return}l("Failed to load deck"),console.error(te)}finally{c(!1)}})()},[r,s]);const M=(X,te,j)=>{let ie=[...X.cards];ie=ie.sort(()=>Math.random()-.5);const F=ie.slice(0,te.questionCount);return te.testType==="match"?F.map((D,H)=>{const W=D.word.find(ne=>ne.type==="text")?.text||"",Y=D.definition.find(ne=>ne.type==="text")?.text||"",K=F.filter((ne,R)=>R!==H).map(ne=>ne.definition.find(R=>R.type==="text")?.text||"").filter(ne=>ne&&ne!==Y).slice(0,3),ge=[Y,...K].sort(()=>Math.random()-.5);return{id:`q-${H}`,question:W,answer:Y,options:ge}}):F.map((D,H)=>({id:`q-${H}`,question:D.word.find(W=>W.type==="text")?.text||"",answer:D.definition.find(W=>W.type==="text")?.text||""}))},I=X=>{if(!i||i.cards.length<X.questionCount){l("Not enough cards in deck");return}const te=M(i,X);x(te),C(X),h(!1),f(!0),v(Date.now())},z=(X,te)=>{S(j=>({...j,[X]:te})),x(j=>j.map(ie=>ie.id===X?{...ie,userAnswer:te}:ie))},V=()=>{if(!k||!y.length)return;const te=Date.now()-k,j=y.map(F=>({questionId:F.id,userAnswer:F.userAnswer||"",correctAnswer:F.answer,isCorrect:(F.userAnswer||"").toLowerCase().trim()===F.answer.toLowerCase().trim()})),ie=j.filter(F=>F.isCorrect).length;A({score:ie,totalQuestions:y.length,timeTaken:te,answers:j}),b(!0)},G=()=>{f(!1),b(!1),x([]),A(null),v(null),h(!0)},oe=()=>{e(decodeURIComponent(n.referrer)||`/projects/quizspire/${r}`)};return a?t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"flex justify-center",children:t("span",{class:"loading loading-spinner loading-lg"})})}):d||!i?t("div",{class:"container mx-auto px-4 py-8",children:[t("div",{class:"alert alert-error max-w-md mx-auto",children:t("span",{children:d||"Deck not found"})}),t("div",{class:"text-center mt-4",children:t("button",{class:"btn btn-primary",onClick:()=>e(decodeURIComponent(n.referrer)||"/projects/quizspire"),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back"]})})]}):i.cards.length<2?t("div",{class:"container mx-auto px-4 py-8",children:[t("div",{class:"alert alert-warning max-w-md mx-auto",children:t("span",{children:"This deck needs at least 2 cards to take a test"})}),t("div",{class:"text-center mt-4",children:t("button",{class:"btn btn-primary",onClick:()=>e(`/projects/quizspire/${r}`),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back to Deck"]})})]}):t("div",{class:"min-h-full bg-base-100",children:[t("div",{class:"bg-base-200 border-b border-base-300 px-4 py-3",children:t("div",{class:"navbar w-full min-h-0",children:t("div",{class:"navbar-start",children:[t("button",{class:"btn btn-ghost btn-sm",onClick:oe,children:t(at,{class:"w-4 h-4"})}),t("div",{class:"ml-4",children:[t("h1",{class:"text-xl font-bold",children:i.title}),t("p",{class:"text-sm text-base-content/70",children:"Test Mode"})]})]})})}),!p&&!m&&t("div",{class:"container mx-auto px-4 py-8 text-center",children:t("div",{class:"max-w-md mx-auto",children:[t(An,{class:"w-16 h-16 mx-auto mb-4 text-primary"}),t("h1",{class:"text-2xl font-bold mb-4",children:"Ready to Test?"}),t("p",{class:"text-base-content/70 mb-6",children:"Put your knowledge to the test with flashcards from this deck."}),t("button",{class:"btn btn-primary btn-lg",onClick:()=>h(!0),children:[t(mr,{class:"w-5 h-5 mr-2"}),"Start Test"]})]})}),p&&!m&&_&&(_.testType==="match"?t(R1,{questions:y,onAnswer:z,onComplete:V}):t(B1,{questions:y,onAnswer:z,onComplete:V})),m&&P&&t(j1,{result:P,questions:y,testType:_?.testType||"match",onRestart:G,onBack:oe}),u&&t(P1,{deck:i,onStart:I,onClose:()=>h(!1)})]})}function il({intermediateCallback:r}){const{query:e}=ft();if(!e.reloaded){const s=new URL(window.location.href);return s.searchParams.set("reloaded","true"),window.location.href=s.toString(),t("p",{onClick:()=>{const i=new URL(window.location.href);i.searchParams.set("reloaded","true"),window.location.href=i.toString()},children:"Click To Manually Load Tetris"})}ee(()=>{window.tetrisConfig={logHighScore:n,intermediateCallback:r};const s=document.createElement("script");return s.src="/dist/bundle.js",s.async=!0,document.body.appendChild(s),()=>{console.log("Unmounting Tetris"),window.tetrisUnload&&(console.log("Found & running Tetris unload function"),window.tetrisUnload()),document.body.contains(s)&&document.body.removeChild(s)}},[]);async function n(s){const i=(await q.profile.postProfileLogTetris({finalScore:s})).data;console.log("Update Tetris high score message:",i.message)}return t("div",{class:"h-full",children:t("canvas",{id:"game-canvas",class:"mx-auto mt-4"})})}function $1({id:r}){const{route:e,query:n}=ft(),[s,i]=g(null),[o,a]=g(!0),[c,d]=g(null),[l,u]=g(!1),[h,p]=g(null),[f,m]=g({correct:!1,show:!1}),[b,y]=g(null),[x,w]=g(0),S=async()=>{try{const k=await q.quizspire.getQuizspireDecksById(r);i(k.data)}catch(k){if(k.status===401){e("/login");return}d("Failed to load deck"),console.error(k)}finally{a(!1)}};ee(()=>{S()},[r]);const _=()=>{if(!s||s.cards.length===0)return null;const k=s.cards[Math.floor(Math.random()*s.cards.length)],v=k.definition.find(V=>V.type==="text")?.text||"",M=k.word.find(V=>V.type==="text")?.text||"",I=s.cards.filter(V=>V!==k).map(V=>V.definition.find(G=>G.type==="text")?.text||"").filter(V=>V&&V!==v).slice(0,3);for(;I.length<3;)I.push(`Option ${I.length+1}`);const z=[v,...I].sort(()=>Math.random()-.5);return{question:M,answers:z,correctAnswer:v}},C=k=>{m({correct:k,show:!0}),setTimeout(()=>{if(m({correct:!1,show:!1}),k)u(!1),b&&(b(),y(null));else{const v=_();v?p(v):(u(!1),b&&(b(),y(null)))}},1500)},P=k=>{const v=k===h.correctAnswer;C(v)},A=async()=>new Promise(k=>{w(v=>{const M=v+1;if(M%5===0){const I=_();if(I)return p(I),u(!0),y(()=>k),M}return k(),M})});return o?t("div",{class:"h-full bg-base-100 flex items-center justify-center",children:t("div",{class:"text-center",children:[t("span",{class:"loading loading-spinner loading-lg"}),t("p",{class:"mt-4 text-base-content/70",children:"Loading Tetris Quiz..."})]})}):c||!s?t("div",{class:"h-full bg-base-100 flex items-center justify-center",children:t("div",{class:"text-center",children:[t("div",{class:"alert alert-error max-w-md",children:t("span",{children:c||"Deck not found"})}),t("button",{class:"btn btn-primary mt-4",onClick:()=>e(decodeURIComponent(n.referrer)||"/projects/quizspire"),children:[t(at,{class:"w-4 h-4 mr-2"}),"Back"]})]})}):t("div",{class:"h-full bg-base-100 relative",children:[t("div",{class:"bg-base-200 border-b border-base-300 px-4 py-3",children:t("div",{class:"navbar w-full min-h-0",children:t("div",{class:"navbar-start",children:[t("button",{class:"btn btn-ghost btn-sm",onClick:()=>e(decodeURIComponent(n.referrer)||"/projects/quizspire"),"aria-label":"Back",children:t(at,{class:"w-4 h-4"})}),t("div",{class:"ml-4",children:[t("h1",{class:"text-xl font-bold",children:[s.title," - Tetris Quiz"]}),t("p",{class:"text-sm text-base-content/70",children:"Answer questions correctly to keep playing!"})]})]})})}),t("div",{class:"h-[calc(100%-4rem)]",children:t(il,{intermediateCallback:A})}),l&&h&&t("div",{class:"modal modal-open",children:t("div",{class:"modal-box max-w-md",children:[t("h3",{class:"font-bold text-lg mb-4",children:"Quiz Question!"}),t("p",{class:"text-lg mb-6",children:h.question}),t("div",{class:"space-y-3",children:h.answers.map((k,v)=>t("button",{class:"btn btn-outline w-full text-left justify-start",onClick:()=>P(k),disabled:f.show,children:k},v))}),f.show&&t("div",{class:`mt-6 text-center transition-all duration-500 ${f.correct?"text-success":"text-error"}`,children:t("div",{class:`inline-flex items-center gap-2 text-2xl font-bold ${f.correct?"animate-bounce":"animate-pulse"}`,children:f.correct?t(Q,{children:[t(wn,{class:"w-8 h-8"}),"Correct!"]}):t(Q,{children:[t(On,{class:"w-8 h-8"}),"Try Again!"]})})})]})})]})}function U1({deckId:r}){const{route:e,query:n}=ft(),[s,i]=g(null),[o,a]=g([]),[c,d]=g([]),[l,u]=g(new Set),[h,p]=g({attempts:0,correctMatches:0,startTime:Date.now()}),[f,m]=g(!1),[b,y]=g(!0),[x,w]=g(null);ee(()=>{if(!r){w("No deck ID provided"),y(!1);return}(async()=>{try{const z=await q.quizspire.getQuizspireDecksById(r);i(z.data),S(z.data)}catch(z){if(z.status===401){e("/login");return}w("Failed to load deck"),console.error(z)}finally{y(!1)}})()},[r]);const S=I=>{const z=[],V=Math.min(I.cards.length,18);for(let oe=0;oe<V;oe++){const X=I.cards[oe];z.push({id:`q-${oe}`,type:"question",content:X.word.find(te=>te.type==="text")?.text||"Question",cardId:`card-${oe}`,isFlipped:!1,isMatched:!1,isAnimating:!1}),z.push({id:`a-${oe}`,type:"answer",content:X.definition.find(te=>te.type==="text")?.text||"Answer",cardId:`card-${oe}`,isFlipped:!1,isMatched:!1,isAnimating:!1})}const G=z.sort(()=>Math.random()-.5);a(G),p({attempts:0,correctMatches:0,startTime:Date.now()})},_=I=>{if(I.isFlipped||I.isMatched||c.length>=2)return;const z=[...c,I];if(a(V=>V.map(G=>G.id===I.id?{...G,isFlipped:!0,isAnimating:!0}:G)),d(z),z.length===2){const[V,G]=z,oe=V.cardId===G.cardId;p(X=>({...X,attempts:X.attempts+1,correctMatches:oe?X.correctMatches+1:X.correctMatches})),setTimeout(()=>{oe?(a(X=>X.map(te=>te.id===V.id||te.id===G.id?{...te,isMatched:!0,isAnimating:!1}:te)),u(X=>new Set([...X,V.cardId]))):a(X=>X.map(te=>te.id===V.id||te.id===G.id?{...te,isFlipped:!1,isAnimating:!1}:te)),d([])},1e3)}else setTimeout(()=>{a(V=>V.map(G=>G.id===I.id?{...G,isAnimating:!1}:G))},300)};ee(()=>{const I=o.length/2;if(l.size===I&&I>0&&!f){const z=Date.now(),V=z-h.startTime,G={...h,endTime:z,completionTime:V};p(G),m(!0),C(G)}},[l,o.length,h,f]);const C=I=>{if(!r)return;const z=`quizspire-match-${r}`,V=JSON.parse(localStorage.getItem(z)||"[]"),G={date:new Date().toISOString(),attempts:I.attempts,completionTime:I.completionTime,accuracy:I.correctMatches/(I.attempts||1)*100};V.push(G),localStorage.setItem(z,JSON.stringify(V))},P=()=>{s&&(m(!1),u(new Set),d([]),S(s))},A=I=>{const z=Math.floor(I/1e3),V=Math.floor(z/60),G=z%60;return`${V}:${G.toString().padStart(2,"0")}`};if(b)return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"flex justify-center",children:t("span",{class:"loading loading-spinner loading-lg"})})});if(x||!s)return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"alert alert-error",children:t("span",{children:x||"Deck not found"})})});const k=o.length,v=Math.min(6,Math.ceil(Math.sqrt(k))),M=Math.ceil(k/v);if(f){const I=Math.round(h.correctMatches/h.attempts*100);return t("div",{class:"container mx-auto px-4 py-8",children:t("div",{class:"max-w-2xl mx-auto",children:t("div",{class:"card bg-base-100 shadow-2xl",children:t("div",{class:"card-body text-center",children:[t("div",{class:"text-6xl mb-4",children:"🎉"}),t("h2",{class:"card-title justify-center text-3xl mb-6",children:"Congratulations!"}),t("p",{class:"text-lg mb-6",children:"You've completed the matching game!"}),t("div",{class:"stats stats-vertical lg:stats-horizontal shadow mb-6",children:[t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Completion Time"}),t("div",{class:"stat-value text-primary",children:A(h.completionTime||0)})]}),t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Attempts"}),t("div",{class:"stat-value text-secondary",children:h.attempts})]}),t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Accuracy"}),t("div",{class:"stat-value text-accent",children:[I,"%"]})]})]}),t("div",{class:"card-actions justify-center gap-4",children:[t("button",{class:"btn btn-primary btn-lg",onClick:P,children:[t(gr,{class:"w-5 h-5 mr-2"}),"Play Again"]}),t("button",{class:"btn btn-outline btn-lg",onClick:()=>e(decodeURIComponent(n.referrer)||`/projects/quizspire/${r}`),children:[t(pa,{class:"w-5 h-5 mr-2"}),"Back"]})]})]})})})})}return t("div",{class:"container mx-auto px-4 py-8",children:[t("div",{class:"mb-6",children:[t("h1",{class:"text-3xl font-bold mb-2",children:[s.title," - Match Game"]}),t("p",{class:"text-base-content/70",children:"Match the questions with their answers!"})]}),t("div",{class:"flex justify-center mb-6",children:t("div",{class:"stats stats-horizontal shadow",children:[t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Attempts"}),t("div",{class:"stat-value",children:h.attempts})]}),t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Matches"}),t("div",{class:"stat-value text-success",children:[l.size,"/",o.length/2]})]}),t("div",{class:"stat",children:[t("div",{class:"stat-title",children:"Time"}),t("div",{class:"stat-value countdown",children:t("span",{style:`--value:${Math.floor((Date.now()-h.startTime)/1e3)};`,children:Math.floor((Date.now()-h.startTime)/1e3)})})]})]})}),t("div",{class:"grid gap-4 mx-auto max-w-4xl",style:`grid-template-columns: repeat(${v}, minmax(0, 1fr)); grid-template-rows: repeat(${M}, minmax(0, 1fr))`,children:o.map(I=>t("div",{class:`card bg-base-100 shadow-lg cursor-pointer transition-all duration-300 hover:shadow-xl ${I.isMatched?"bg-success/20 border-success":I.isFlipped?"bg-primary/20 border-primary":"hover:bg-base-200"} ${I.isAnimating?"animate-pulse":""}`,onClick:()=>_(I),children:t("div",{class:"card-body p-4 min-h-[120px] flex items-center justify-center",children:[t("div",{class:`text-center transition-all duration-500 ${I.isFlipped||I.isMatched?"opacity-100":"opacity-0"}`,children:[t("div",{class:`badge badge-outline mb-2 ${I.type==="question"?"badge-primary":"badge-secondary"}`,children:I.type==="question"?"Question":"Answer"}),t("div",{class:"text-sm font-medium break-words",children:I.content})]}),t("div",{class:`absolute inset-0 flex items-center justify-center transition-all duration-500 ${I.isFlipped||I.isMatched?"opacity-0 rotate-y-180":"opacity-100"}`,children:t("div",{class:"text-4xl opacity-50",children:I.type==="question"?"❓":"💡"})})]})},I.id))}),t("div",{class:"flex justify-center gap-4 mt-8",children:[t("button",{class:"btn btn-outline",onClick:P,children:[t(gr,{class:"w-4 h-4 mr-2"}),"Restart"]}),t("button",{class:"btn btn-ghost",onClick:()=>e(decodeURIComponent(n.referrer)||`/projects/quizspire/${r}`),children:[t(pa,{class:"w-4 h-4 mr-2"}),"Back"]})]})]})}function z1(){const[r,e]=g(""),[n,s]=g(""),[i,o]=g(""),[a,c]=g(""),[d,l]=g(!1),[u,h]=g(""),{route:p}=ft(),f=_=>{e(_.target.value)},m=_=>{s(_.target.value)},b=_=>{o(_.target.value)},y=_=>{c(_.target.value)};async function x(){if(l(!0),i!=a){h("Passwords must match"),l(!1);return}try{const _=await q.auth.apiSignUpEmailCreate({name:r,email:n,password:i,rememberMe:!0});if(_.data?.user&&!_.data.user.emailVerified){p(`/email-verification?email=${encodeURIComponent(n)}`);return}p("/")}catch(_){console.log(_);const C=_?.error?.message||"ERROR: REGISTER FAILED";h(C),console.log("ERROR:",_?.error?.message||_),l(!1)}}async function w(_){l(!0);try{const C=(await q.auth.socialSignIn({provider:_,callbackURL:new URL("/",window.location.origin).href})).data;window.location.href=C.url;return}catch(C){const P=C?.error?.message||"ERROR: REGISTER FAILED";h(P),console.log("ERROR:",C?.error?.message||C),l(!1)}}function S(_){_.preventDefault(),x()}return t(Q,{children:t("div",{className:"mx-auto w-1/4 max-lg:w-1/3 max-md:w-1/2 max-sm:w-full",children:t("div",{className:"card-body",children:[t("h1",{className:"text-center text-xl font-bold",children:"Create Your Account"}),t("form",{className:"fieldset",onSubmit:S,children:[t("label",{className:"label",children:"Name"}),t("label",{className:"input w-full",children:[t(Pn,{}),t("input",{type:"text",required:!0,placeholder:"Name",onInput:f})]}),t("label",{className:"label",children:"Email"}),t("label",{className:"input w-full",children:[t(Mn,{}),t("input",{type:"text",required:!0,placeholder:"Email",onInput:m})]}),t("label",{className:"label",children:"Password"}),t("label",{className:"input w-full",children:[t(ur,{}),t("input",{type:"password",required:!0,placeholder:"Password",onInput:b})]}),t("label",{className:"label",children:"Confirm Password"}),t("label",{className:"input w-full",children:[t(ur,{}),t("input",{type:"password",required:!0,placeholder:"Confirm Password",onInput:y})]}),t("button",{disabled:d,className:"btn btn-neutral mt-4",type:"submit",children:"Sign Up"}),t("div",{children:t("p",{className:"text-center",children:["Already have an account?"," ",t("a",{className:"link-accent",href:"/login",children:"Sign in here"})]})})]}),u&&t("p",{className:"text-error",children:u}),t("div",{className:"divider",children:"Sign Up With"}),t("button",{className:"btn text-black bg-white font-bold",onClick:()=>w("google"),children:[t(Bi,{}),"Google"]}),t("button",{className:"btn text-white bg-black font-bold",onClick:()=>w("twitter"),children:[t(Ri,{}),"Twitter (X)"]}),t("div",{className:"alert alert-info mt-3",children:t("div",{children:[t("h3",{className:"font-bold",children:"Note"}),t("div",{className:"text-sm",children:"Account name & icon changes require manual verification before being publicly displayed."})]})})]})})})}function H1(){const[r,e]=g(null),[n,s]=g(null),[i,o]=g("loading"),[a,c]=g(!1),[d,l]=g(!1),[u,h]=g(60),f=new URLSearchParams(window.location.search).get("email");ee(()=>{m()},[]);const m=async()=>{try{const w=await q.auth.apiGetSessionList();w.data?(s(w.data),e(w.data.user),w.data.user.emailVerified?o("success"):f?await b(f):o("error")):o("error")}catch(w){console.error("Session check error:",w),o("error")}},b=async w=>{c(!0);try{await q.auth.apiSendVerificationEmailCreate({email:w,callbackURL:window.location.origin+"/email-verification"}),o("idle"),y()}catch(S){console.error("Send email error:",S),o("error")}finally{c(!1)}},y=()=>{l(!1);let w=60;h(w);const S=setInterval(()=>{w-=1,h(w),w<=0&&(clearInterval(S),l(!0))},1e3)},x=async()=>{!r||!d||await b(r.email)};return t("div",{className:"min-h-full flex items-center justify-center bg-base-200 px-4",children:t("div",{className:"max-w-md w-full",children:t("div",{className:"card bg-base-100 shadow-xl",children:t("div",{className:"card-body text-center",children:[t("div",{className:"mb-4",children:[i==="loading"&&t("div",{className:"flex justify-center mb-4",children:t("span",{className:"loading loading-spinner loading-lg"})}),i==="success"&&t(dd,{className:"mx-auto text-6xl text-success mb-4"}),i==="error"&&t(Ft,{className:"mx-auto text-6xl text-error mb-4"}),i==="idle"&&t(Mn,{className:"mx-auto text-6xl text-primary mb-4"})]}),t("h1",{className:"card-title text-2xl justify-center mb-4",children:[i==="loading"&&"Checking Status...",i==="success"&&"Email Verified!",i==="error"&&"Verification Failed",i==="idle"&&"Check Your Email"]}),t("p",{className:"text-base-content/70 mb-6",children:[i==="loading"&&"Checking your email verification status...",i==="success"&&"Your email has been successfully verified! You can now access all features of the application.",i==="error"&&"There was an issue with email verification. Please try again or contact support.",i==="idle"&&`Please check your email (${r?.email}) for a verification link.`]}),i==="success"&&t("div",{className:"space-y-4",children:t("a",{href:"/profile",className:"btn btn-primary w-full",children:"Go to Profile"})}),(i==="error"||i==="idle")&&f&&t("div",{className:"space-y-4",children:[t("button",{onClick:x,disabled:!d||a,className:"btn btn-outline btn-primary w-full",children:a?t("span",{className:"loading loading-spinner loading-sm"}):t(Q,{children:[t(Nd,{className:"mr-2"}),"Resend Verification Email"]})}),!d&&u>0&&t("p",{className:"text-sm text-base-content/60",children:["Resend available in ",u," seconds"]}),t("div",{className:"divider",children:"Already verified?"}),t("a",{href:"/profile",className:"btn btn-neutral w-full",children:"Go to Profile"})]}),t("div",{className:"mt-8 text-xs text-base-content/50",children:t("p",{children:"Didn't receive the email? Check your spam folder or contact support if you're still having issues."})})]})})})})}function q1(){return t(Q,{children:t("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-3xl font-bold mb-8 flex items-center gap-3",children:[t(Sd,{}),"Admin Panel"]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t("a",{href:"/admin/users",className:"card shadow-lg hover:shadow-xl transition-shadow duration-300",children:t("div",{className:"card-body items-center text-center",children:[t(Ii,{className:"w-12 h-12 text-primary mb-4"}),t("h2",{className:"card-title",children:"User Management"}),t("p",{children:"Manage users, ban/unban, change passwords, and add custom fields"})]})}),t("a",{href:"/admin/comments",className:"card shadow-lg hover:shadow-xl transition-shadow duration-300",children:t("div",{className:"card-body items-center text-center",children:[t(Di,{className:"w-12 h-12 text-secondary mb-4"}),t("h2",{className:"card-title",children:"Pending Comments"}),t("p",{children:"Review and accept pending blog comments"})]})}),t("a",{href:"/admin/connections",className:"card shadow-lg hover:shadow-xl transition-shadow duration-300",children:t("div",{className:"card-body items-center text-center",children:[t(Ys,{className:"w-12 h-12 text-success mb-4"}),t("h2",{className:"card-title",children:"Connection Management"}),t("p",{children:"Monitor active WebSocket connections, send events and notifications"})]})}),t("a",{href:"/admin/profiles",className:"card shadow-lg hover:shadow-xl transition-shadow duration-300",children:t("div",{className:"card-body items-center text-center",children:[t(Od,{className:"w-12 h-12 text-info mb-4"}),t("h2",{className:"card-title",children:"Profile Verification"}),t("p",{children:"Verify or reject changes to user profiles including names and icons"})]})})]})]})})}function W1(){const[r,e]=g([]),[n,s]=g(!0),[i,o]=g(""),[a,c]=g(null),[d,l]=g(!1),[u,h]=g(!1),[p,f]=g(!1),[m,b]=g(""),[y,x]=g(""),[w,S]=g(null),[_,C]=g(""),[P,A]=g("permanent"),[k,v]=g(1);ee(()=>{M()},[]);const M=async()=>{try{s(!0);const F=await q.auth.listUsers();e(F.data.users),o("")}catch(F){o(F instanceof Error?F.message:"Failed to fetch users"),console.error("Error fetching users:",F)}finally{s(!1)}},I=async F=>{try{await q.auth.unbanUser({userId:F}),await M()}catch(D){o(D instanceof Error?D.message:"Failed to unban user")}},z=async()=>{if(!(!a||!m.trim()))try{await q.auth.setUserPassword({userId:a.id,newPassword:m}),l(!1),b(""),c(null),o("")}catch(F){o(F instanceof Error?F.message:"Failed to change password")}},V=async F=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await q.auth.removeUser({userId:F}),await M()}catch(D){o(D instanceof Error?D.message:"Failed to delete user")}},G=async()=>{if(!(!a||!y.trim()))try{const F={customField:y};await q.auth.updateUser({userId:a.id,data:F}),h(!1),x(""),c(null),await M()}catch(F){o(F instanceof Error?F.message:"Failed to add custom field")}},oe=F=>new Date(F).toLocaleDateString("en-uk",{year:"numeric",month:"long",day:"numeric"}),X=(F,D)=>{if(F==="permanent")return null;const H=new Date;switch(F){case"hours":return H.getTime()+D*60*60*1e3;case"days":return H.getTime()+D*24*60*60*1e3;case"weeks":return H.getTime()+D*7*24*60*60*1e3;case"months":return H.getTime()+D*30*24*60*60*1e3;default:return null}},te=F=>{S(F),C(""),A("permanent"),v(1),f(!0)},j=async()=>{if(!w)return;const F=P==="permanent"?void 0:X(P,k);try{const D={userId:w.id};_.trim()&&(D.banReason=_.trim()),F!=null&&(D.banExpiresIn=Math.floor(F/1e3)),await q.auth.banUser(D),f(!1),S(null),C(""),await M(),o("")}catch(D){o(D instanceof Error?D.message:"Failed to ban user")}},ie=()=>["Spam","Harassment","Inappropriate content","Violation of terms","Multiple complaints","Impersonation","Malicious behavior","Admin discretion"];return t(Q,{children:t("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[t("a",{href:"/admin",class:"btn btn-ghost btn-sm",children:"← Back to Admin"}),t(Ii,{}),"User Management"]}),i&&t("div",{role:"alert",className:"alert alert-error mb-4",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("span",{children:i})]}),n?t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})}):t("div",{className:"overflow-x-auto",children:t("table",{className:"table table-zebra w-full",children:[t("thead",{children:t("tr",{children:[t("th",{children:"Name"}),t("th",{children:"Email"}),t("th",{children:"ID"}),t("th",{children:"Role"}),t("th",{children:"Status"}),t("th",{children:"Created"}),t("th",{children:"Actions"})]})}),t("tbody",{children:r.map(F=>t("tr",{children:[t("td",{children:t("a",{href:`/profile/${F.id}`,className:"flex items-center gap-3",children:[t(lt,{name:F.name,image:F.image}),t("div",{children:[t("div",{className:"font-bold",children:F.name}),F.emailVerified&&t("span",{className:"badge badge-success badge-sm mr-1",children:"Verified Email"})]})]})}),t("td",{children:F.email}),t("td",{children:F.id}),t("td",{children:t("span",{className:`badge ${F.role==="admin"?"badge-primary":"badge-secondary"}`,children:F.role||"user"})}),t("td",{children:F.banned?t("span",{className:"badge badge-error",children:"Banned"}):t("span",{className:"badge badge-success",children:"Normal"})}),t("td",{children:oe(F.createdAt)}),t("td",{children:t("div",{className:"flex gap-1",children:[F.banned?t("button",{className:"btn btn-sm btn-success",onClick:()=>I(F.id),title:"Unban user",children:t(Xa,{})}):t("button",{className:"btn btn-sm btn-error",onClick:()=>te(F),title:"Ban user",children:t(xr,{})}),t("button",{className:"btn btn-sm btn-secondary",onClick:()=>{c(F),l(!0)},title:"Change password",children:t(ur,{})}),t("button",{className:"btn btn-sm btn-info",onClick:()=>{c(F),h(!0)},title:"Set user data",children:t(Cd,{})}),t("button",{className:"btn btn-sm btn-error",onClick:()=>V(F.id),title:"Delete user",children:t(Li,{})})]})})]},F.id))})]})}),d&&a&&t("div",{className:"modal modal-open",children:t("div",{className:"modal-box",children:[t("h3",{className:"font-bold text-lg flex items-center gap-2",children:[t(ur,{}),"Change Password for ",a.name]}),t("div",{className:"py-4",children:t("input",{type:"password",placeholder:"Enter new password",className:"input input-bordered w-full",value:m,onChange:F=>b(F.currentTarget.value)})}),t("div",{className:"modal-action",children:[t("button",{className:"btn btn-ghost",onClick:()=>{l(!1),b(""),c(null)},children:"Cancel"}),t("button",{className:"btn btn-primary",onClick:z,disabled:!m.trim(),children:"Change Password"})]})]})}),u&&a&&t("div",{className:"modal modal-open",children:t("div",{className:"modal-box",children:[t("h3",{className:"font-bold text-lg flex items-center gap-2",children:[t(Ka,{}),"Set User Data for ",a.name]}),t("p",{className:"text-sm text-base-content/70 mb-4",children:["Store arbitrary JSON data with this user (e.g., custom fields, metadata). This will be stored as ",'{ "customField": "value" }',"."]}),t("div",{className:"py-4",children:t("input",{type:"text",placeholder:"Enter value (e.g., admin notes, internal flags)",className:"input input-bordered w-full",value:y,onChange:F=>x(F.currentTarget.value)})}),t("div",{className:"modal-action",children:[t("button",{className:"btn btn-ghost",onClick:()=>{h(!1),x(""),c(null)},children:"Cancel"}),t("button",{className:"btn btn-primary",onClick:G,disabled:!y.trim(),children:"Save Data"})]})]})}),t(ol,{isOpen:p,user:w,onClose:()=>{f(!1),S(null),C("")},onSubmit:()=>j(),banReason:_,setBanReason:C,banDuration:P,setBanDuration:A,banDurationValue:k,setBanDurationValue:v,getPresetBanReasons:ie})]})})}const V1=(r,e)=>{if(r==="permanent")return null;const n=new Date;switch(r){case"hours":return n.getTime()+e*60*60*1e3;case"days":return n.getTime()+e*24*60*60*1e3;case"weeks":return n.getTime()+e*7*24*60*60*1e3;case"months":return n.getTime()+e*30*24*60*60*1e3;default:return null}};function G1(r){const[e,n]=g(null),[s,i]=g(""),[o,a]=g("permanent"),[c,d]=g(1);return{banUserSelected:e,setBanUserSelected:n,banReason:s,setBanReason:i,banDuration:o,setBanDuration:a,banDurationValue:c,setBanDurationValue:d,openBanDialog:p=>{n(p),i(""),a("permanent"),d(1)},handleAdvancedBanUser:async()=>{if(!e)return;const p=o==="permanent"?void 0:V1(o,c);try{const f={userId:e.id};s.trim()&&(f.banReason=s.trim()),p!=null&&(f.banExpiresIn=Math.floor(p/1e3)),await q.auth.banUser(f),n(null),i(""),r()}catch(f){console.error("Failed to ban user:",f)}},getPresetBanReasons:()=>["Spam","Harassment","Inappropriate content","Violation of terms","Multiple complaints","Impersonation","Malicious behavior","Admin discretion"]}}function ol({isOpen:r,user:e,onClose:n,onSubmit:s,banReason:i,setBanReason:o,banDuration:a,setBanDuration:c,banDurationValue:d,setBanDurationValue:l,getPresetBanReasons:u}){if(!r||!e)return null;const h=(p,f)=>{if(p==="permanent")return null;const m=new Date;switch(p){case"hours":return m.getTime()+f*60*60*1e3;case"days":return m.getTime()+f*24*60*60*1e3;case"weeks":return m.getTime()+f*7*24*60*60*1e3;case"months":return m.getTime()+f*30*24*60*60*1e3;default:return null}};return t("div",{className:"modal modal-open",children:t("div",{className:"modal-box max-w-md",children:[t("h3",{className:"font-bold text-lg flex items-center gap-2 mb-4",children:[t(Ft,{className:"text-error"}),"Ban User: ",e.name]}),t("div",{className:"space-y-4",children:[t("div",{children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Ban Reason (Optional)"})}),t("textarea",{className:"textarea textarea-bordered w-full h-24 resize-none",placeholder:"Enter reason for ban...",value:i,onChange:p=>o(p.currentTarget.value),maxLength:500}),t("div",{className:"label",children:t("span",{className:"label-text-alt text-base-content/60",children:[i.length,"/500 characters"]})}),t("div",{className:"mt-2",children:[t("label",{className:"label",children:t("span",{className:"label-text text-sm",children:"Quick Select:"})}),t("div",{className:"flex flex-wrap gap-1",children:u().map(p=>t("button",{className:"btn btn-xs btn-outline",onClick:()=>o(p),type:"button",children:p},p))})]})]}),t("div",{children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Ban Duration"})}),t("div",{className:"flex gap-2",children:[t("select",{className:"select select-bordered flex-1",value:a,onChange:p=>c(p.currentTarget.value),children:[t("option",{value:"permanent",children:[t(xd,{className:"inline mr-2"}),"Permanent"]}),t("option",{value:"hours",children:[t(mn,{className:"inline mr-2"}),"Hours"]}),t("option",{value:"days",children:[t(mn,{className:"inline mr-2"}),"Days"]}),t("option",{value:"weeks",children:[t(mn,{className:"inline mr-2"}),"Weeks"]}),t("option",{value:"months",children:[t(mn,{className:"inline mr-2"}),"Months"]})]}),a!=="permanent"&&t("input",{type:"number",className:"input input-bordered w-20",min:"1",max:"999",value:d,onChange:p=>l(parseInt(p.currentTarget.value)||1)})]}),a!=="permanent"&&t("div",{className:"label",children:t("span",{className:"label-text-alt text-base-content/60",children:["Expires:"," ",h(a,d)?new Date(h(a,d)).toLocaleString():"Invalid date"]})})]})]}),t("div",{className:"alert alert-warning mt-4",children:[t(Ft,{}),t("div",{children:[t("div",{className:"font-semibold",children:"Warning"}),t("div",{className:"text-sm",children:"This will restrict the user's access. Ensure the ban is justified and follows community guidelines."})]})]}),t("div",{className:"modal-action",children:[t("button",{className:"btn btn-ghost",onClick:()=>{n(),o("")},children:"Cancel"}),t("button",{className:"btn btn-error",onClick:s,children:[t(xr,{className:"mr-2"}),"Ban User"]})]})]})})}function K1(){const[r,e]=g([]),[n,s]=g(!0),[i,o]=g("");ee(()=>{a()},[]);const a=async()=>{try{s(!0);const l=await q.blog.getBlogAdminCommentsPending();e(l.data),o("")}catch(l){o(l instanceof Error?l.message:"Failed to fetch pending comments"),console.error("Error fetching comments:",l)}finally{s(!1)}},c=async l=>{try{await q.blog.patchBlogAdminCommentsByCommentIdModerate(l,{action:"accept"}),e(u=>u.filter(h=>h._id!==l))}catch(u){o(u instanceof Error?u.message:"Failed to accept comment")}},d=async l=>{try{await q.blog.patchBlogAdminCommentsByCommentIdModerate(l,{action:"delete"}),e(u=>u.filter(h=>h._id!==l))}catch(u){o(u instanceof Error?u.message:"Failed to delete comment")}};return t(Q,{children:t("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[t("a",{href:"/admin",class:"btn btn-ghost btn-sm",children:"← Back to Admin"}),t(Di,{}),"Pending Comments"]}),i&&t("div",{role:"alert",className:"alert alert-error mb-4",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("span",{children:i})]}),n?t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})}):r.length===0?t("div",{className:"text-center py-8",children:t("h2",{className:"text-lg font-medium text-base-content/70",children:"No pending comments"})}):t("div",{className:"space-y-6",children:r.map((l,u)=>t(fc,{content:l.content,createdAt:l.createdAt,authorId:l.authorId,showAcceptButton:!0,onAccept:c,showDeleteButton:!0,onDelete:d,commentId:l._id},l._id||u))})]})})}function Q1(){const[r,e]=g([]),[n,s]=g(!0),[i,o]=g(""),[a,c]=g(null),[d,l]=g(!1),[u,h]=g(!1),[p,f]=g(!1),[m,b]=g(!1),[y,x]=g({eventName:"",eventPayload:""}),[w,S]=g({type:"info",text:"",time:"3000"});ee(()=>{_()},[]);const _=async()=>{try{s(!0);const v=await q.connections.getConnections();e(v.data.connections),o("")}catch(v){o(v instanceof Error?v.message:"Failed to fetch connections")}finally{s(!1)}},C=async v=>{try{let M;try{M=JSON.parse(y.eventPayload||"{}")}catch{o("Invalid JSON payload");return}await q.connections.postConnectionsSendEvent({socketId:v,event:y.eventName,data:M}),l(!1),f(!1),x({eventName:"",eventPayload:""}),o(""),o("Event sent successfully"),setTimeout(()=>o(""),3e3)}catch(M){o(M instanceof Error?M.message:"Failed to send event")}},P=async v=>{try{const M={type:w.type,text:w.text,time:parseInt(w.time)||3e3};await q.connections.postConnectionsSendEvent({socketId:v,event:"notification",data:M}),h(!1),b(!1),S({type:"info",text:"",time:"3000"}),o(""),o("Notification sent successfully"),setTimeout(()=>o(""),3e3)}catch(M){o(M instanceof Error?M.message:"Failed to send notification")}},A=async v=>{if(confirm("Are you sure you want to disconnect this connection? The user will reconnect automatically unless their client has issues."))try{await q.connections.postConnectionsDisconnect({socketId:v}),await _(),o("")}catch(M){o(M instanceof Error?M.message:"Failed to disconnect connection")}},k=v=>new Date(v).toLocaleString("en-uk",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return t(Q,{children:t("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[t("a",{href:"/admin",className:"btn btn-ghost btn-sm",children:"← Back to Admin"}),t(Ys,{}),"Connection Management"]}),t("div",{className:"mb-4 flex gap-2",children:[t("button",{className:"btn btn-primary",onClick:()=>f(!0),children:[t(ms,{}),"Broadcast Event"]}),t("button",{className:"btn btn-secondary",onClick:()=>b(!0),children:[t(bn,{}),"Broadcast Notification"]})]}),i&&t("div",{role:"alert",className:`alert mb-4 ${i.includes("success")?"alert-success":"alert-error"}`,children:t("span",{children:i})}),n?t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})}):t("div",{className:"overflow-x-auto",children:t("table",{className:"table table-zebra w-full",children:[t("thead",{children:t("tr",{children:[t("th",{children:"User"}),t("th",{children:"IP Address"}),t("th",{children:"Connected At"}),t("th",{children:"Route"}),t("th",{children:"Actions"})]})}),t("tbody",{children:r.map(v=>t("tr",{children:[t("td",{children:v.userData?t("a",{href:`/profile/${v.userData.id}`,className:"flex items-center gap-3",children:[t(lt,{name:v.userData.name,image:v.userData.image}),t("div",{className:"flex flex-col",children:[t("div",{className:"font-bold",children:v.userData.name}),v.userData.banned&&t("span",{className:"badge badge-error badge-sm",children:"Banned"})]})]}):t("div",{className:"flex items-center gap-3",children:[t(Ys,{className:"w-8 h-8 text-base-content opacity-40"}),t("span",{children:"Anonymous"})]})}),t("td",{children:v.socketInfo.ip||"Unknown"}),t("td",{children:k(v.connectedAt)}),t("td",{className:"font-mono text-sm",children:v.route}),t("td",{children:t("div",{className:"flex gap-1",children:[t("button",{className:"btn btn-sm btn-info",title:"Send custom event",onClick:()=>{c(v),l(!0)},children:t(ms,{})}),t("button",{className:"btn btn-sm btn-warning",title:"Send notification",onClick:()=>{c(v),h(!0)},children:t(bn,{})}),t("button",{className:"btn btn-sm btn-error",title:"Force disconnect",onClick:()=>A(v.socketId),children:t(hr,{})})]})})]},v.socketId))})]})}),(d||p)&&t("div",{className:"modal modal-open",children:t("div",{className:"modal-box",children:[t("h3",{className:"font-bold text-lg flex items-center gap-2",children:[t(ms,{}),d?"Send Event to Connection":"Broadcast Event"]}),t("div",{className:"py-4",children:[t("div",{className:"form-control mb-4",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Event Name"})}),t("input",{type:"text",placeholder:"notification",className:"input input-bordered",value:y.eventName,onChange:v=>x(M=>({...M,eventName:v.currentTarget.value}))})]}),t("div",{className:"form-control",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Event Payload (JSON)"})}),t("textarea",{placeholder:'{"key": "value"}',className:"textarea textarea-bordered",value:y.eventPayload,onChange:v=>x(M=>({...M,eventPayload:v.currentTarget.value})),rows:4})]})]}),t("div",{className:"modal-action",children:[t("button",{className:"btn btn-ghost",onClick:()=>{l(!1),f(!1),x({eventName:"",eventPayload:""})},children:"Cancel"}),t("button",{className:"btn btn-primary",onClick:()=>C(d?a?.socketId:void 0),disabled:!y.eventName.trim(),children:"Send Event"})]})]})}),(u||m)&&t("div",{className:"modal modal-open",children:t("div",{className:"modal-box",children:[t("h3",{className:"font-bold text-lg flex items-center gap-2",children:[t(bn,{}),u?"Send Notification to Connection":"Broadcast Notification"]}),t("div",{className:"py-4",children:[t("div",{className:"form-control mb-4",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Notification Type"})}),t("select",{className:"select select-bordered",value:w.type,onChange:v=>S(M=>({...M,type:v.currentTarget.value})),children:[t("option",{value:"info",children:"Info"}),t("option",{value:"success",children:"Success"}),t("option",{value:"warning",children:"Warning"}),t("option",{value:"error",children:"Error"})]})]}),t("div",{className:"form-control mb-4",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Message Text"})}),t("textarea",{placeholder:"Enter notification message...",className:"textarea textarea-bordered",value:w.text,onChange:v=>S(M=>({...M,text:v.currentTarget.value})),rows:3})]}),t("div",{className:"form-control",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Duration (ms)"})}),t("input",{type:"number",placeholder:"3000",className:"input input-bordered",value:w.time,onChange:v=>S(M=>({...M,time:v.currentTarget.value})),min:"1000",max:"10000"})]})]}),t("div",{className:"modal-action",children:[t("button",{className:"btn btn-ghost",onClick:()=>{h(!1),b(!1),S({type:"info",text:"",time:"3000"})},children:"Cancel"}),t("button",{className:"btn btn-primary",onClick:()=>P(u?a?.socketId:void 0),disabled:!w.text.trim(),children:"Send Notification"})]})]})})]})})}function al({banned:r,banReason:e,banExpires:n,className:s=""}){if(!r)return null;const i=new Date,o=n?new Date(n):null;if(o&&o<=i)return null;const c=d=>new Date(d).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return t("div",{className:`alert alert-error ${s}`,children:[t(xr,{}),t("div",{className:"flex flex-col gap-1",children:[t("div",{className:"font-semibold",children:"User is Banned"}),e&&t("div",{className:"flex items-start gap-2 text-sm",children:[t(gd,{className:"mt-0.5 flex-shrink-0"}),t("span",{children:e})]}),o&&t("div",{className:"flex items-center gap-2 text-sm",children:[t(mn,{}),t("span",{children:["Expires: ",c(o)]})]})]})]})}function Y1(){const[r,e]=g([]),[n,s]=g([]),[i,o]=g(!0),[a,c]=g(""),d=async()=>{try{o(!0);const[f,m]=await Promise.all([q.admin.getAdminProfileUnverified(),q.auth.listUsers()]);e(f.data),s(m.data.users||[]),c("")}catch(f){c(f instanceof Error?f.message:"Failed to fetch data"),console.error("Error fetching data:",f)}finally{o(!1)}},l=G1(d);ee(()=>{d()},[]);const u=f=>n.find(m=>m.id===f),h=async f=>{try{await q.admin.postAdminProfileByUserIdVerify(f),await d()}catch(m){c(m instanceof Error?m.message:"Failed to verify profile")}},p=async f=>{try{await q.auth.unbanUser({userId:f}),await d()}catch(m){c(m instanceof Error?m.message:"Failed to unban user")}};return t(Q,{children:t("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-2xl font-bold mb-4 flex items-center gap-2",children:[t("a",{href:"/admin",className:"btn btn-ghost btn-sm",children:"← Back to Admin"}),t(Ii,{}),"Profile Verification"]}),a&&t("div",{role:"alert",className:"alert alert-error mb-4",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("span",{children:a})]}),i?t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})}):r.length===0?t("div",{className:"text-center py-8",children:t("h2",{className:"text-lg font-medium text-base-content/70",children:"No unverified profiles"})}):t("div",{className:"overflow-x-auto",children:t("table",{className:"table table-zebra w-full",children:[t("thead",{children:t("tr",{children:[t("th",{children:"User ID"}),t("th",{children:"Current Profile"}),t("th",{children:"Proposed Changes"}),t("th",{children:"Status"}),t("th",{children:"Actions"})]})}),t("tbody",{children:r.map(f=>{const m=u(f.id);return t("tr",{children:[t("td",{children:f.id}),t("td",{children:t("a",{href:`/profile/${f.id}`,className:"flex items-center gap-3",children:[t(lt,{name:f.verifiedName||"No Name",image:f.verifiedImage}),t("div",{children:t("div",{className:"font-bold",children:f.verifiedName||"No verified name"})})]})}),t("td",{children:t("a",{href:`/profile/${f.id}`,className:"flex items-center gap-3",children:[t(lt,{name:f.name,image:f.image}),t("div",{children:[t("div",{className:"font-bold",children:f.name}),t("div",{className:"text-sm opacity-70",children:["New Icon:"," ",f.image!=f.verifiedImage?"Yes":"No"]})]})]})}),t("td",{children:m?m.banned?t(al,{banned:m.banned,banReason:m.banReason,banExpires:m.banExpires,className:"text-xs"}):t("span",{className:"badge badge-success",children:"Active"}):t("span",{className:"badge badge-neutral",children:"Unknown"})}),t("td",{children:t("div",{className:"flex gap-1",children:[t("button",{className:"btn btn-sm btn-success",onClick:()=>h(f.id),title:"Verify profile changes",children:t(qt,{})}),m?.banned?t("button",{className:"btn btn-sm btn-success",onClick:()=>p(f.id),title:"Unban user",children:t(Xa,{})}):t("button",{className:"btn btn-sm btn-error",onClick:()=>{const b=u(f.id);b&&l.openBanDialog(b)},title:"Ban user",children:t(xr,{})})]})})]},f.id)})})]})}),t(ol,{isOpen:!!l.banUserSelected,user:l.banUserSelected,onClose:()=>l.setBanUserSelected(null),onSubmit:l.handleAdvancedBanUser,banReason:l.banReason,setBanReason:l.setBanReason,banDuration:l.banDuration,setBanDuration:l.setBanDuration,banDurationValue:l.banDurationValue,setBanDurationValue:l.setBanDurationValue,getPresetBanReasons:l.getPresetBanReasons})]})})}function X1(r){const[e,n]=g(null),[s,i]=g(null),[o,a]=g(!0),[c,d]=g(null);ee(()=>{l()},[]);const l=async()=>{try{a(!0),d(null);const u=await q.auth.apiGetSessionList();if(!u.data)throw new Error("No session data received");i(u.data),n(u.data.user)}catch(u){if(console.error("Settings user data load error:",u),u?.error?.status===401){d("Session expired. Please log in again.");return}d(u?.error?.message||u?.message||"Failed to load user data. Please try refreshing the page.")}finally{a(!1)}};return o?t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})})})}):c||!e?t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"alert alert-error",children:t("span",{children:c||"User not authenticated"})})})}):t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"max-w-4xl mx-auto",children:[t("h1",{className:"text-3xl font-bold mb-8",children:"Account Settings"}),t("div",{className:"card bg-base-100 shadow-xl mb-8",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title",children:"Profile Information"}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t("div",{children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Name"})}),t("input",{type:"text",value:e.name,className:"input input-bordered w-full",readOnly:!0})]}),t("div",{children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Email"})}),t("input",{type:"email",value:e.email,className:"input input-bordered w-full",readOnly:!0})]}),t("div",{children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Verified"})}),t("div",{className:"flex items-center gap-2",children:e.emailVerified?t(Q,{children:[t(qt,{className:"text-success"}),t("span",{children:"Email Verified"})]}):t(Q,{children:[t(hr,{className:"text-error"}),t("span",{children:"Email Not verified"})]})}),t("div",{className:"flex items-center gap-2",children:e.verifiedName==e.name&&(e.verifiedImage||null)==(e.image||null)?t(Q,{children:[t(qt,{className:"text-success"}),t("span",{children:"Profile Verified"})]}):t(Q,{children:[t(hr,{className:"text-error"}),t("span",{children:"Profile Not verified"})]})})]}),t("div",{children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Joined"})}),t("div",{children:t("span",{children:new Date(e.createdAt).toLocaleDateString()})})]})]})]})}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:t("div",{className:"card-body",children:[t("div",{className:"flex items-center gap-3",children:[t(Pn,{size:32}),t("div",{children:[t("h3",{className:"card-title text-lg",children:"Change Name"}),t("p",{className:"text-sm opacity-70",children:"Update your display name"})]})]}),t("div",{className:"card-actions justify-end mt-4",children:t("a",{href:"/settings/name",className:"btn btn-primary btn-sm",children:"Change Name"})})]})}),t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:t("div",{className:"card-body",children:[t("div",{className:"flex items-center gap-3",children:[t(Oi,{size:32}),t("div",{children:[t("h3",{className:"card-title text-lg",children:"Change Password"}),t("p",{className:"text-sm opacity-70",children:"Update your password"})]})]}),t("div",{className:"card-actions justify-end mt-4",children:t("a",{href:"/settings/password",className:"btn btn-primary btn-sm",children:"Change Password"})})]})}),!e.emailVerified&&t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow border-warning border-2",children:t("div",{className:"card-body",children:[t("div",{className:"flex items-center gap-3",children:[t(Mn,{size:32,className:"text-warning"}),t("div",{children:[t("h3",{className:"card-title text-lg",children:"Verify Email"}),t("p",{className:"text-sm opacity-70",children:"Your email is not verified. Verify it to access all features."})]})]}),t("div",{className:"card-actions justify-end mt-4",children:t("a",{href:`/email-verification?email=${encodeURIComponent(e.email)}`,className:"btn btn-warning btn-sm",children:"Verify Email"})})]})}),t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:t("div",{className:"card-body",children:[t("div",{className:"flex items-center gap-3",children:[t(Ai,{size:32}),t("div",{children:[t("h3",{className:"card-title text-lg",children:"Connected Accounts"}),t("p",{className:"text-sm opacity-70",children:"Manage social logins"})]})]}),t("div",{className:"card-actions justify-end mt-4",children:t("a",{href:"/settings/accounts",className:"btn btn-primary btn-sm",children:"Manage Accounts"})})]})}),t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:t("div",{className:"card-body",children:[t("div",{className:"flex items-center gap-3",children:[t(Ya,{size:32}),t("div",{children:[t("h3",{className:"card-title text-lg",children:"Active Sessions"}),t("p",{className:"text-sm opacity-70",children:"View and manage sessions"})]})]}),t("div",{className:"card-actions justify-end mt-4",children:t("a",{href:"/settings/sessions",className:"btn btn-primary btn-sm",children:"View Sessions"})})]})}),t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:t("div",{className:"card-body",children:[t("div",{className:"flex items-center gap-3",children:[t(bn,{size:32}),t("div",{children:[t("h3",{className:"card-title text-lg",children:"Notifications"}),t("p",{className:"text-sm opacity-70",children:"Manage email and push notification preferences"})]})]}),t("div",{className:"card-actions justify-end mt-4",children:t("a",{href:"/settings/notifications",className:"btn btn-primary btn-sm",children:"Notification Settings"})})]})}),t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow",children:t("div",{className:"card-body",children:[t("div",{className:"flex items-center gap-3",children:[t(Qa,{size:32}),t("div",{children:[t("h3",{className:"card-title text-lg",children:"Uploaded Images"}),t("p",{className:"text-sm opacity-70",children:"Manage your account images, including profile picture"})]})]}),t("div",{className:"card-actions justify-end mt-4",children:t("a",{href:"/settings/images",className:"btn btn-primary btn-sm",children:"Manage Images"})})]})}),t("div",{className:"card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow border-red-500 border-2",children:t("div",{className:"card-body",children:[t("div",{className:"flex items-center gap-3",children:[t(Ft,{size:32,className:"text-red-500"}),t("div",{children:[t("h3",{className:"card-title text-lg text-error",children:"Danger Zone"}),t("p",{className:"text-sm opacity-70",children:"Delete your account"})]})]}),t("div",{className:"card-actions justify-end mt-4",children:t("a",{href:"/settings/delete",className:"btn btn-error btn-outline btn-sm",children:"Delete Account"})})]})})]})]})})})}function Z1(r){const[e,n]=g(null),[s,i]=g(""),[o,a]=g(!0),[c,d]=g(!1),[l,u]=g(null),[h,p]=g(!1);ee(()=>{f()},[]);const f=async()=>{try{a(!0),u(null);const y=await q.auth.apiGetSessionList();if(!y.data)throw new Error("No session data received");n(y.data.user),i(y.data.user.name)}catch(y){if(console.error("Name settings user data load error:",y),y?.error?.status===401){u("Session expired. Please log in again.");return}u(y?.error?.message||y?.message||"Failed to load user data. Please try refreshing the page.")}finally{a(!1)}},m=async()=>{if(!(!s.trim()||s.trim()===e?.name))try{d(!0),u(null),p(!1),await q.auth.apiUpdateUserCreate({name:s.trim()}),await f(),p(!0),setTimeout(()=>p(!1),3e3)}catch(y){console.error("Name update error:",y),u(y?.error?.message||y?.message||"Failed to update name")}finally{d(!1)}};if(o)return t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})})})});if(l&&!e)return t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"alert alert-error",children:t("span",{children:l})})})});const b=s.trim()!==e?.name&&s.trim()!=="";return t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"max-w-2xl mx-auto",children:[t("div",{className:"flex items-center gap-4 mb-8",children:[t("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),t("h1",{className:"text-3xl font-bold",children:"Change Name"})]}),t("div",{className:"card bg-base-100 shadow-xl",children:t("div",{className:"card-body",children:[t("div",{className:"form-control",children:[t("label",{className:"label",children:[t("span",{className:"label-text",children:"Display Name"}),t("span",{className:"label-text-alt",children:"Visible to other users"})]}),t("input",{type:"text",placeholder:"Enter your name",className:"input input-bordered w-full",value:s,onInput:y=>i(y.target.value),maxLength:50}),t("label",{className:"label",children:t("span",{className:"label-text-alt",children:[s.length,"/50 characters"]})})]}),l&&t("div",{className:"alert alert-error mt-4",children:t("span",{children:l})}),h&&t("div",{className:"alert alert-success mt-4",children:t("span",{children:"Name updated successfully!"})}),t("div",{className:"card-actions justify-between mt-6",children:[t("a",{href:"/settings",className:"btn btn-ghost",children:"Cancel"}),t("button",{className:`btn btn-primary ${c?"loading":""}`,onClick:m,disabled:!b||c,children:c?"Updating...":"Update Name"})]})]})}),t("div",{className:"alert alert-info mt-6",children:t("div",{children:[t("h3",{className:"font-bold",children:"Name Guidelines"}),t("div",{className:"text-sm",children:t("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[t("li",{children:"Your name should be appropriate and respectful"}),t("li",{children:"Maximum 50 characters allowed"}),t("li",{children:"This name will be visible to other users"}),t("li",{children:"Name and profile image require verification before public display"})]})})]})})]})})})}function J1(r){const[e,n]=g(""),[s,i]=g(""),[o,a]=g(""),[c,d]=g(!1),[l,u]=g(null),[h,p]=g(!1),[f,m]=g(!1),{route:b}=ft(),y=()=>e.trim()?s.trim()?s.length<8?(u("New password must be at least 8 characters long"),!1):s!==o?(u("Passwords do not match"),!1):e===s?(u("New password must be different from current password"),!1):!0:(u("New password is required"),!1):(u("Current password is required"),!1),x=async()=>{if(y())try{d(!0),u(null),p(!1),await q.auth.apiChangePasswordCreate({newPassword:s,currentPassword:e,revokeOtherSessions:f}),p(!0),n(""),i(""),a(""),setTimeout(()=>{p(!1),b("/settings")},5e3)}catch(C){console.error("Password update error:",C),u(C?.error?.message||C?.message||"Failed to update password")}finally{d(!1)}},w=C=>{let P=0;return C.length>=8&&P++,/[A-Z]/.test(C)&&P++,/[a-z]/.test(C)&&P++,/[0-9]/.test(C)&&P++,/[^A-Za-z0-9]/.test(C)&&P++,P},S=C=>["Very Weak","Weak","Fair","Good","Strong"][C-1]||"Very Weak",_=C=>["bg-red-500","bg-orange-500","bg-yellow-500","bg-blue-500","bg-green-500"][C-1]||"bg-red-500";return t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"max-w-2xl mx-auto",children:[t("div",{className:"flex items-center gap-4 mb-8",children:[t("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),t("h1",{className:"text-3xl font-bold",children:"Change Password"})]}),t("div",{className:"card bg-base-100 shadow-xl",children:t("div",{className:"card-body",children:[t("div",{className:"form-control",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Current Password"})}),t("input",{type:"password",placeholder:"Enter current password",className:"input input-bordered w-full",value:e,onInput:C=>n(C.target.value)})]}),t("div",{className:"form-control mt-4",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"New Password"})}),t("input",{type:"password",placeholder:"Enter new password",className:"input input-bordered w-full",value:s,onInput:C=>i(C.target.value)}),s&&t("div",{className:"mt-2",children:[t("div",{className:"flex items-center justify-between text-sm",children:[t("span",{children:"Password strength:"}),t("span",{className:`font-medium ${_(w(s)).replace("bg-","text-")}`,children:S(w(s))})]}),t("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:t("div",{className:`h-2 rounded-full ${_(w(s))}`,style:{width:`${w(s)/5*100}%`}})})]})]}),t("div",{className:"form-control mt-4",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Confirm New Password"})}),t("input",{type:"password",placeholder:"Confirm new password",className:"input input-bordered w-full",value:o,onInput:C=>a(C.target.value)}),o&&s&&t("div",{className:"mt-1 flex items-center gap-1",children:s===o?t("span",{className:"text-success text-sm",children:[t(qt,{})," Passwords match"]}):t("span",{className:"text-error text-sm",children:[t(hr,{})," Passwords do not match"]})})]}),t("div",{className:"form-control mt-4",children:t("label",{className:"label cursor-pointer",children:[t("input",{type:"checkbox",className:"checkbox",checked:f,onChange:C=>m(C.target.checked)}),t("span",{className:"label-text",children:["Revoke all other sessions",t("span",{className:"text-sm opacity-70 block",children:"Log out from all devices and browsers after password change"})]})]})}),l&&t("div",{className:"alert alert-error mt-4",children:t("span",{children:l})}),h&&t("div",{className:"alert alert-success mt-4",children:t("span",{children:"Password updated successfully! All other sessions have been revoked if selected."})}),t("div",{className:"card-actions justify-between mt-6",children:[t("a",{href:"/settings",className:"btn btn-ghost",children:"Cancel"}),t("button",{className:`btn btn-primary ${c?"loading":""}`,onClick:x,disabled:c||!e||!s||!o,children:c?"Updating...":"Update Password"})]})]})}),t("div",{className:"alert alert-info mt-6",children:t("div",{children:[t("h3",{className:"font-bold",children:"Password Requirements"}),t("div",{className:"text-sm",children:t("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[t("li",{children:"Minimum 8 characters long"}),t("li",{children:"Use a mix of uppercase and lowercase letters"}),t("li",{children:"Include at least one number"}),t("li",{children:"Add special characters for extra strength"}),t("li",{children:"Choose a password different from your current one"})]})})]})})]})})})}function e0(r){const[e,n]=g([]),[s,i]=g(!0),[o,a]=g(null),[c,d]=g(null),[l,u]=g(null),[h,p]=g(null);ee(()=>{f()},[]);const f=async()=>{try{i(!0),u(null);const _=await q.auth.apiListAccountsList();n(_.data||[])}catch(_){console.error("Connected accounts load error:",_),u(_?.error?.message||_?.message||"Failed to load accounts")}finally{i(!1)}},m=async(_,C)=>{try{a(_),u(null),await q.auth.apiUnlinkAccountCreate({providerId:_,accountId:C}),p(`Successfully unlinked ${y(_)}`),await f(),setTimeout(()=>p(null),3e3)}catch(P){console.error("Unlink account error:",P),u(P?.error?.message||P?.message||"Failed to unlink account")}finally{a(null)}},b=async _=>{try{d(_),u(null);const C=(await q.auth.apiLinkSocialCreate({provider:_,callbackURL:`${window.location.origin}/settings/accounts`})).data;window.location.href=C.url,await f()}catch(C){console.error("Link account error:",C),u(C?.error?.message||C?.message||"Failed to link account")}finally{d(null)}},y=_=>({google:"Google",twitter:"Twitter",github:"GitHub",discord:"Discord",facebook:"Facebook"})[_]||_,x=_=>({google:t(Bi,{size:32}),twitter:t(Ri,{size:32}),github:t(ad,{size:32}),discord:t(id,{size:32}),facebook:t(od,{size:32})})[_]||t(Ai,{}),w=_=>e.some(C=>C.providerId===_),S=["google","twitter","github","discord"];return s?t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})})})}):t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"max-w-3xl mx-auto",children:[t("div",{className:"flex items-center gap-4 mb-8",children:[t("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),t("h1",{className:"text-3xl font-bold",children:"Connected Accounts"})]}),t("div",{className:"card bg-base-100 shadow-xl mb-8",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title text-xl mb-4",children:"Linked Accounts"}),e.length===0?t("p",{className:"text-gray-500",children:"No accounts linked yet. Connect your social accounts below."}):t("div",{className:"space-y-4",children:e.map(_=>t("div",{className:"flex items-center justify-between p-4 border border-base-300 rounded-lg",children:[t("div",{className:"flex items-center gap-3",children:[t("span",{className:"text-lg",children:x(_.providerId)}),t("div",{children:[t("div",{className:"font-semibold",children:y(_.providerId)}),t("div",{className:"text-sm text-gray-500",children:["Connected on"," ",new Date(_.createdAt).toLocaleDateString()]}),_.scopes&&_.scopes.length>0&&t("div",{className:"text-xs text-gray-400",children:["Scopes: ",_.scopes.join(", ")]})]})]}),t("button",{className:`btn btn-sm btn-outline btn-error ${o===_.providerId?"loading":""}`,onClick:()=>m(_.providerId,_.accountId),disabled:o!==null,children:o===_.providerId?"Unlinking...":"Unlink"})]},_.id))})]})}),t("div",{className:"card bg-base-100 shadow-xl",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title text-xl mb-4",children:"Connect New Account"}),t("p",{className:"text-sm text-gray-600 mb-6",children:"Connect your social accounts to easily sign in and link your profiles."}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(_=>{const C=w(_);return t("div",{className:`flex items-center justify-between p-4 border border-base-300 rounded-lg ${C?"bg-base-200":""}`,children:[t("div",{className:"flex items-center gap-3",children:[t("span",{className:"text-lg",children:x(_)}),t("div",{children:[t("div",{className:"font-semibold",children:y(_)}),t("div",{className:"text-sm text-gray-500",children:C?"Already connected":"Available to connect"})]})]}),t("button",{className:`btn btn-sm ${C?"btn-disabled":"btn-primary"} ${c===_?"loading":""}`,onClick:()=>b(_),disabled:C||c!==null,children:C?"Connected":c===_?"Connecting...":"Connect"})]},_)})})]})}),l&&t("div",{className:"alert alert-error mt-6",children:t("span",{children:l})}),h&&t("div",{className:"alert alert-success mt-6",children:t("span",{children:h})}),t("div",{className:"alert alert-info mt-6",children:t("div",{children:[t("h3",{className:"font-bold",children:"About Connected Accounts"}),t("div",{className:"text-sm mt-2",children:[t("p",{className:"mb-2",children:"Connecting social accounts allows you to:"}),t("ul",{className:"list-disc list-inside space-y-1",children:[t("li",{children:"Sign in more easily using your social credentials"}),t("li",{children:"Link your profiles across different platforms"}),t("li",{children:"Import profile information and avatars"}),t("li",{children:"Maintain a unified account across services"})]}),t("p",{className:"mt-2",children:[t("strong",{children:"Note:"})," Unlinking an account will remove the connection but won't delete your account. Make sure you have other ways to sign in before unlinking your last connected account."]})]})]})})]})})})}function t0(r){const[e,n]=g([]),[s,i]=g(!0),[o,a]=g(null),[c,d]=g(!1),[l,u]=g(null),[h,p]=g(null),[f,m]=g(null);ee(()=>{b()},[]);const b=async()=>{try{i(!0),u(null);const A=await q.auth.apiGetSessionList();if(!A.data)throw new Error("No session data received");m(A.data.session.id);const k=await q.auth.apiListSessionsList();n(k.data||[])}catch(A){if(console.error("Sessions load error:",A),A?.error?.status===401){u("Session expired. Please log in again.");return}u(A?.error?.message||A?.message||"Failed to load sessions. Please try refreshing the page.")}finally{i(!1)}},y=A=>{if(!A)return t(Ks,{});const k=A.toLowerCase();return k.includes("mobile")||k.includes("android")||k.includes("iphone")?t(Ya,{}):k.includes("tablet")||k.includes("ipad")?t(Td,{}):t(Ks,{})},x=A=>{if(!A)return"Desktop";const k=A.toLowerCase();return k.includes("mobile")?"Mobile":k.includes("tablet")?"Tablet":k.includes("android")?"Android":k.includes("iphone")||k.includes("ipad")?"iOS":k.includes("windows")?"Windows":k.includes("mac")?"macOS":k.includes("linux")?"Linux":"Desktop"},w=async(A,k=!1)=>{if(k){await S();return}try{a(A),u(null),await q.auth.apiRevokeSessionCreate({token:A}),p("Session revoked successfully"),await b(),setTimeout(()=>p(null),3e3)}catch(v){console.error("Revoke session error:",v),u(v?.error?.message||v?.message||"Failed to revoke session")}finally{a(null)}},S=async()=>{try{d(!0),u(null),await q.auth.apiRevokeOtherSessionsCreate({}),p("All other sessions revoked successfully"),await b(),setTimeout(()=>p(null),3e3)}catch(A){console.error("Revoke other sessions error:",A),u(A?.error?.message||A?.message||"Failed to revoke other sessions")}finally{d(!1)}},_=A=>{const k=new Date(A),M=new Date().getTime()-k.getTime(),I=Math.floor(M/(1e3*60*60*24)),z=Math.floor(M/(1e3*60*60)),V=Math.floor(M/(1e3*60));return V<1?"Just now":V<60?`${V} minutes ago`:z<24?`${z} hours ago`:I<7?`${I} days ago`:k.toLocaleDateString()+" "+k.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},C=e.filter(A=>A.id!==f),P=C.length>0;return s?t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})})})}):t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"max-w-4xl mx-auto",children:[t("div",{className:"flex items-center gap-4 mb-8",children:[t("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),t("h1",{className:"text-3xl font-bold",children:"Active Sessions"})]}),P&&t("div",{className:"card bg-base-100 shadow-xl mb-8",children:t("div",{className:"card-body",children:t("div",{className:"flex items-center justify-between",children:[t("div",{children:[t("h3",{className:"card-title text-lg",children:"Active Sessions"}),t("p",{className:"text-sm opacity-70",children:[C.length," other session",C.length!==1?"s":""," active"]})]}),t("button",{className:`btn btn-outline btn-error ${c?"loading":""}`,onClick:S,disabled:c,children:c?"Revoking...":"Revoke All Others"})]})})}),f&&t("div",{className:"card bg-base-100 shadow-xl mb-8",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title text-xl mb-4",children:"Current Session"}),t("div",{className:"space-y-4",children:e.filter(A=>A.id===f).map(A=>t("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-success text-success-content bg-opacity-10 border-success border-opacity-30",children:[t("div",{className:"flex items-center gap-3",children:[t(qt,{size:32}),t("div",{children:[t("div",{className:"font-semibold flex items-center gap-2",children:[x(A.userAgent||""),t("span",{className:"badge badge-success badge-sm",children:"Current"})]}),t("div",{className:"text-sm",children:["IP: ",A.ipAddress||"Unknown"]}),t("div",{className:"text-sm",children:["Started: ",_(A.createdAt)]})]})]}),t("div",{className:"text-xs opacity-50",children:"Active now"})]},A.id))})]})}),t("div",{className:"card bg-base-100 shadow-xl",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title text-xl mb-4",children:"Other Sessions"}),P?t("div",{className:"space-y-4",children:C.map(A=>t("div",{className:"flex items-center justify-between p-4 border border-base-300 rounded-lg",children:[t("div",{className:"flex items-center gap-3",children:[t("div",{className:"avatar placeholder",children:t("div",{className:"bg-neutral text-neutral-content rounded-full w-10 flex items-center justify-center text-sm",children:y(A.userAgent||"")})}),t("div",{children:[t("div",{className:"font-semibold",children:x(A.userAgent||"")}),t("div",{className:"text-sm text-gray-500",children:["IP: ",A.ipAddress||"Unknown"]}),t("div",{className:"text-sm text-gray-500",children:["Started: ",_(A.createdAt)]}),t("div",{className:"text-sm text-gray-500",children:["Last active: ",_(A.updatedAt)]})]})]}),t("button",{className:`btn btn-sm btn-outline btn-error ${o===A.token?"loading":""}`,onClick:()=>w(A.token),disabled:o!==null||c,children:o===A.token?"Revoking...":"Revoke"})]},A.id))}):t("div",{className:"text-center py-8",children:[t(Oi,{className:"text-6xl mb-4 mx-auto"}),t("h3",{className:"font-bold text-lg mb-2",children:"No Other Active Sessions"}),t("p",{className:"text-gray-500 text-sm",children:"Other devices and browsers where you're signed in will appear here."})]})]})}),l&&t("div",{className:"alert alert-error mt-6",children:t("span",{children:l})}),h&&t("div",{className:"alert alert-success mt-6",children:t("span",{children:h})}),t("div",{className:"alert alert-info mt-6",children:t("div",{children:[t("h3",{className:"font-bold",children:"Session Security"}),t("div",{className:"text-sm mt-2",children:[t("p",{className:"mb-2",children:"Active sessions represent devices and browsers where you're currently signed in."}),t("ul",{className:"list-disc list-inside space-y-1",children:[t("li",{children:"Monitor and revoke access from suspicious or unused devices"}),t("li",{children:"Regularly review your active sessions for security"}),t("li",{children:"Revoking a session immediately logs it out"}),t("li",{children:"If you suspect unauthorized access, change your password immediately"})]})]})]})})]})})})}function n0(r){const e=Pi(),[n,s]=g(null),[i,o]=g([]),[a,c]=g(!0),[d,l]=g(!1),[u,h]=g(!1),[p,f]=g(null),[m,b]=g(null),[y,x]=g(null),w=$e(null);ee(()=>{S()},[]);const S=async()=>{try{c(!0),b(null);const v=await q.auth.apiGetSessionList();if(!v.data)throw new Error("No session data received");s(v.data.user),await _()}catch(v){if(console.error("Settings data load error:",v),v?.error?.status===401){b("Session expired. Please log in again.");return}b(v?.error?.message||v?.message||"Failed to load data. Please try refreshing the page.")}finally{c(!1)}},_=async()=>{try{const v=await q.images.getImages();if(v.data&&v.data.images){const M=v.data.images.map(I=>({id:I.id,filename:I.filename,url:I.url,createdAt:new Date(I.uploadedAt).toISOString()}));o(M)}else o([])}catch(v){console.error("Failed to load images:",v),o([])}},C=v=>v.size>5242880?"File size must be less than 5MB":["image/jpeg","image/png","image/gif","image/webp"].includes(v.type)?null:"Only JPEG, PNG, GIF, and WebP images are allowed",P=async(v,M=0)=>{const I=v.target,z=I.files?.[0];if(!z)return;x(null);const V=C(z);if(V){x(V),I&&(I.value="");return}try{l(!0),x(null),await q.images.postImagesUpload({image:z}),await _(),e({text:"Image uploaded successfully!",type:"success",time:3e3}),I&&(I.value="")}catch(G){if(console.error("Upload error:",G),M<2&&(!G?.error?.status||G?.error?.status>=500)){x(`Upload failed, retrying... (${M+1}/3)`),setTimeout(()=>P(v,M+1),1e3+M*2e3);return}x(G?.error?.message||G?.message||"Failed to upload image")}finally{l(!1)}},A=async v=>{try{h(!0),await q.auth.apiUpdateUserCreate({image:v}),s(M=>M?{...M,image:v}:null),e({text:"Profile picture updated successfully!",type:"success",time:3e3})}catch(M){console.error("Profile update error:",M),e({text:M?.error?.message||M?.message||"Failed to update profile picture",type:"error",time:5e3})}finally{h(!1)}},k=async v=>{if(confirm("Are you sure you want to delete this image?"))try{f(v),await q.images.deleteImagesByImageId(v),await _(),e({text:"Image deleted successfully!",type:"success",time:3e3}),n?.image===v&&s(M=>M?{...M,image:null}:null)}catch(M){console.error("Delete error:",M),e({text:M?.error?.message||M?.message||"Failed to delete image",type:"error",time:5e3})}finally{f(null)}};if(a)return t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})})})});if(m&&!n)return t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"alert alert-error",children:t("span",{children:m})})})});for(let v of i)console.log(v?.id),console.log(Vt(v?.id));return t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"max-w-4xl mx-auto",children:[t("div",{className:"flex items-center gap-4 mb-8",children:[t("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),t("h1",{className:"text-3xl font-bold",children:"Uploaded Images"})]}),t("div",{className:"card bg-base-100 shadow-xl mb-6",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title",children:["Current Profile Picture"," ",t("button",{class:"btn btn-error btn-xs",onClick:()=>A(""),children:"Reset Profile Picture"})]}),t("div",{className:"flex items-center gap-4",children:[n&&t(lt,{name:n.name,image:n.image||""}),t("div",{children:[t("p",{className:"text-sm opacity-70",children:"Your profile picture will be visible to other users on the site."}),n?.image&&t("p",{className:"text-sm mt-2",children:[t(qt,{className:"text-success inline mr-1"}),"Profile picture is set"]}),!n?.image&&t("p",{className:"text-sm mt-2",children:[t(hr,{className:"text-warning inline mr-1"}),"No profile picture set"]})]})]})]})}),t("div",{className:"card bg-base-100 shadow-xl mb-6",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title",children:"Upload New Image"}),t("div",{className:"form-control",children:[t("input",{ref:w,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",className:"file-input file-input-bordered w-full",onChange:P,disabled:d,"aria-label":"Upload new profile image","aria-describedby":"file-upload-help file-error-message"}),t("label",{className:"label",children:t("span",{id:"file-upload-help",className:"label-text-alt",children:"Maximum file size: 5MB. Supported formats: JPEG, PNG, GIF, WebP"})})]}),y&&t("div",{id:"file-error-message",className:"alert alert-error mt-4",role:"alert","aria-live":"polite",children:t("span",{children:y})}),d&&t("div",{className:"alert alert-info mt-4","aria-live":"polite",children:[t("span",{className:"loading loading-spinner loading-sm"}),t("span",{children:"Uploading image..."})]})]})}),t("div",{className:"card bg-base-100 shadow-xl",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title",children:"Your Images"}),i.length===0?t("div",{className:"text-center py-8 opacity-70",children:[t(Qa,{size:48,className:"mx-auto mb-4"}),t("p",{children:"No images uploaded yet. Upload your first profile image above."})]}):t("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",role:"grid","aria-label":"Image gallery",children:i.map(v=>t("div",{className:"card bg-base-200 shadow-md",role:"gridcell",children:[t("figure",{className:"px-4 pt-4",children:t("img",{src:Vt("/images/"+v.id),alt:v.filename,className:"rounded-xl w-full h-32 object-cover",onError:M=>{const I=M.target;I.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjOWNhM2FmIiBkPSJNMTIgMkM5LjIyIDIgNi4xNSA0Ljg3IDUuNTQgOC4wOGMtMC4xNiAwLjQzLTAuMjcgMC44OS0wLjI3IDEuMzh2MTAuNzVjMCAxLjEwLjg5IDIgMiAycTE2LjY3IDAgMTEuMzMtMTMuNzJDMTYuODMgNC42IDE0Ljc5IDIgMTIgMnoiLz48L3N2Zz4="}})}),t("div",{className:"card-body p-4",children:[t("div",{className:"card-actions justify-center gap-2",children:[t("button",{className:`btn btn-primary btn-xs ${u?"loading":""}`,onClick:()=>A("/images/"+v.id),disabled:u||n?.image===v.id,"aria-label":n?.image==="/images/"+v.id?`Current profile picture: ${v.filename}`:`Set ${v.filename} as profile picture`,children:n?.image==="/images/"+v.id?t(Q,{children:[t(qt,{size:12}),"Current"]}):"Set as Profile"}),t("button",{className:`btn btn-error btn-xs ${p===v.id?"loading":""}`,onClick:()=>k(v.id),disabled:p===v.id,"aria-label":`Delete image: ${v.filename}${n?.image===v.id?" (currently set as profile picture)":""}`,children:t(Li,{size:12})})]}),n?.image===v.id&&t("p",{className:"text-xs text-center mt-2 text-primary font-medium","aria-live":"polite",children:"Currently set as profile picture"})]})]},v.id))})]})}),m&&t("div",{className:"alert alert-error mt-6",children:t("span",{children:m})}),t("div",{className:"alert alert-info mt-6",children:t("div",{children:[t("h3",{className:"font-bold",children:"Image Guidelines"}),t("div",{className:"text-sm",children:t("ul",{className:"list-disc list-inside space-y-1 mt-2",children:[t("li",{children:"Maximum file size: 5MB"}),t("li",{children:"Supported formats: JPEG, PNG, GIF, WebP"}),t("li",{children:"Images will be accessible to other logged-in users"}),t("li",{children:"Profile images require verification before public display"})]})})]})})]})})})}const r0=[{key:"chess_match_created",displayName:"Match Notices",description:"Receive notifications when chess matches are created or updated."}],er=[{key:"email",displayName:"Email",icon:t(Mn,{}),supported:!0},{key:"push",displayName:"Browser Push",icon:t(Ks,{}),supported:!1}];function s0(r){const[e,n]=g([]),[s,i]=g(!0),[o,a]=g(null),[c,d]=g(!1),[l,u]=g(!1),[h,p]=g("default"),[f,m]=g(!1),[b,y]=g(null),[x,w]=g(null),S="BP7lZ9EBTKuO9ArR-ymCZoCauu0VJYxCrn09weZ7fCPMVpTxvUHoUoG2TY_I2ELGx512TOc1AuP3uMAk2nMug1Y",[_,C]=g(!1),[P,A]=g(!1),k=D=>{try{return te(D).length===65}catch{return!1}},v=(D,H)=>{const W=D?.message||D?.toString()||"Unknown error";{if(W.includes("Script URL"))return{type:"service_worker_failed",message:W,recoverable:!0,userMessage:"Service worker registration failed. This is usually recoverable.",actionRequired:"Try refreshing the page or checking your browser console."};if(W.includes("permission"))return{type:"permission_denied",message:W,recoverable:!1,userMessage:"Service worker permission denied.",actionRequired:"Check your browser settings and try again."}}return W.includes("network")||W.includes("fetch")?{type:"network_error",message:W,recoverable:!0,userMessage:"Network connection issue.",actionRequired:"Check your internet connection and try again."}:{type:"unknown",message:W,recoverable:!0,userMessage:"An unexpected error occurred.",actionRequired:"Try again or contact support if the issue persists."}};ee(()=>{M()},[]);const M=async()=>{try{const D="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;console.log("Browser support check:",{serviceWorker:"serviceWorker"in navigator,PushManager:"PushManager"in window,Notification:"Notification"in window,isBrowserSupported:D});const H=S&&S.length>0&&k(S),W=D&&H;if(u(W),er[1].supported=W,D){try{p(Notification.permission)}catch(Y){console.warn("Could not get notification permission status:",Y),p("default")}if(H)try{console.log("🔄 Init: Attempting initial service worker registration..."),await I(),console.log("✅ Init: Service worker registered successfully")}catch(Y){console.error("⚠️ Init: Initial service worker registration failed:",Y),console.log("🔄 Init: Attempting automatic retry in 2 seconds..."),setTimeout(async()=>{try{console.log("🔄 Init: Retrying service worker registration..."),await I(),console.log("✅ Init: Service worker registered on retry!")}catch(K){console.error("❌ Init: Retry also failed, user will need manual intervention:",K)}},2e3)}}await z()}catch(D){console.error("Failed to initialize notifications:",D),y("Failed to initialize notification system")}},I=async()=>{if(_){console.log("🟡 SW Registration: Already in progress, skipping");return}console.log("🔵 SW Registration: Starting registration process...");const D=S.length>0&&k(S),H="serviceWorker"in navigator;H&&D||console.log("🔴 SW Registration: Invalid/missing VAPID key or browser not supported",{hasVapidKey:!0,vapidLength:S?.length||0,vapidValid:D,browserSupported:H}),C(!0);try{console.log("🔍 SW Registration: Checking existing registrations...");const K=(await navigator.serviceWorker.getRegistrations()).find(ue=>{const Oe=new URL(ue.scope),Ie=new URL(window.location.origin);return Oe.origin===Ie.origin});if(K)if(console.log("🟢 SW Registration: Found existing registration:",K),K.active&&K.pushManager){console.log("🟢 SW Registration: Existing registration is active with push manager"),m(!0),C(!1);return}else K.active?(console.log("🟡 SW Registration: Existing registration active but no push manager, re-registering"),await K.unregister(),console.log("✅ SW Registration: Unregistered inactive/old service worker")):(console.log("🟡 SW Registration: Existing registration not active, cleaning up"),await K.unregister());else console.log("🔍 SW Registration: No existing registration found for this site");console.log("🚀 SW Registration: Registering /sw.js...");const ge=await navigator.serviceWorker.register("/sw.js");console.log("✅ SW Registration: Registration successful:",{scope:ge.scope,state:ge.active?.state||"installing",url:ge.active?.scriptURL||"pending"}),console.log("⏳ SW Registration: Waiting for service worker ready state...");const ne=new Promise((ue,Oe)=>setTimeout(()=>Oe(new Error("Service worker ready timeout (10s)")),1e4));await Promise.race([navigator.serviceWorker.ready,ne]),console.log("✅ SW Registration: Service worker is ready");const R=await navigator.serviceWorker.ready;if(R.pushManager)console.log("✅ SW Registration: Push manager available"),m(!0),console.log("🎉 SW Registration: Complete success!",{scope:R.scope,hasPushManager:!!R.pushManager,workerState:R.active?.state});else throw new Error("Push manager not available on final registration")}catch(Y){console.error("❌ SW Registration: Failed:",Y);const K={message:Y?.message||"Unknown error",name:Y?.name||"Error",stack:Y?.stack?.split(`
`)[0]||"No stack trace"};console.error("❌ SW Registration: Error details:",K),m(!1);const ge=v(Y);throw ge.recoverable?(console.log("🔄 SW Registration: Error is recoverable, suggesting manual retry"),y(`Service worker registration failed: ${ge.userMessage}. ${ge.actionRequired}`)):(console.log("🛑 SW Registration: Error is permanent"),y(`Service worker registration failed permanently: ${ge.userMessage}`)),Y}finally{C(!1),console.log("🔒 SW Registration: Process complete, lock released")}},z=async()=>{try{i(!0),y(null);const D=await q.notifications.getNotificationsSubscriptions();n(D.data||[])}catch(D){if(console.error("Load subscriptions error:",D),D?.error?.status===401){y("Session expired. Please log in again.");return}y(D?.error?.message||D?.message||"Failed to load notification settings. Please try refreshing the page.")}finally{i(!1)}},V=async()=>{if(!l)return!1;try{y(null);const D=await Notification.requestPermission();return p(D),D==="granted"?(w("Push notification permission granted!"),setTimeout(()=>w(null),3e3),!0):(y("Push notification permission denied. You can change this in your browser settings."),!1)}catch(D){return console.error("Permission request failed:",D),y("Failed to request permission for notifications"),!1}},G=async()=>{if(!l||!f)throw new Error("Push notifications not supported");try{const D=await navigator.serviceWorker.ready;let H=await D.pushManager.getSubscription();H||(H=await D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:te(S)}));const W=H.getKey("p256dh"),Y=H.getKey("auth");if(!W||!Y)throw new Error("Failed to get subscription keys");const K={endpoint:H.endpoint,keys:{p256dh:j(W),auth:j(Y)}};await q.notifications.postNotificationsRegisterPush({pushSubscription:K}),w("Push notifications registered successfully!"),setTimeout(()=>w(null),3e3)}catch(D){throw console.error("Push registration error:",D),new Error(D?.error?.message||D?.message||"Failed to register for push notifications")}},oe=async(D,H)=>{try{const W=`${D}-${H}`;a(W),y(null),w(null);const Y=e.find(ge=>ge.eventType===D);if(Y?.methods.includes(H)??!1){if(Y.methods.length===1)await q.notifications.postNotificationsUnsubscribe({eventType:D});else{const ge=Y.methods.filter(ne=>ne!==H);await q.notifications.postNotificationsSubscribe({eventType:D,methods:ge})}w(`${H==="email"?"Email":"Push"} notifications disabled for ${D.replace("_"," ")}`)}else{if(Y){const ge=[...Y.methods,H];await q.notifications.postNotificationsSubscribe({eventType:D,methods:ge})}else await X(D,H);w(`${H==="email"?"Email":"Push"} notifications enabled for ${D.replace("_"," ")}`)}setTimeout(()=>w(null),3e3),await z()}catch(W){console.error("Toggle subscription error:",W),y(W?.error?.message||W?.message||"Failed to update notification settings")}finally{a(null)}},X=async(D,H)=>{if(H==="push"){if(h!=="granted"&&!await V())throw new Error("Push permission denied");await G()}await q.notifications.postNotificationsSubscribe({eventType:D,methods:[H]})},te=D=>{const H="=".repeat((4-D.length%4)%4),W=(D+H).replace(/-/g,"+").replace(/_/g,"/"),Y=window.atob(W),K=new Uint8Array(Y.length);for(let ge=0;ge<Y.length;++ge)K[ge]=Y.charCodeAt(ge);return K},j=D=>{const H=new Uint8Array(D);let W="";for(let Y=0;Y<H.byteLength;Y++)W+=String.fromCharCode(H[Y]);return window.btoa(W)},ie=(D,H)=>e.some(W=>W.eventType===D&&W.methods.includes(H)),F=D=>er.find(H=>H.key===D)?.displayName||D;return s?t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})})}):t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"max-w-6xl mx-auto",children:[t("div",{className:"flex items-center gap-4 mb-8",children:[t("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),t("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[t(bn,{}),"Notification Settings"]})]}),l&&t("div",{className:"alert alert-info mb-6",children:[t(Qs,{}),t("div",{children:[t("h3",{className:"font-bold",children:"Push Notification Status"}),t("div",{className:"text-sm mt-1 space-y-1",children:[t("div",{children:[t("strong",{children:"Browser Support:"})," ",t("span",{className:"text-success",children:"Supported"})]}),t("div",{children:[t("strong",{children:"Permission:"})," ",t("span",{className:`font-semibold ${h==="granted"?"text-success":h==="denied"?"text-error":"text-warning"}`,children:h==="granted"?"Granted":h==="denied"?"Blocked":"Not Requested"})]}),t("div",{children:[t("strong",{children:"Service Worker:"})," ",t("span",{className:`font-semibold ${f?"text-success":"text-error"}`,children:f?"Registered":"Failed"}),!f&&t("button",{className:"btn btn-xs btn-primary ml-2",onClick:async()=>{try{y(null),await I(),w("Service Worker registered successfully!"),setTimeout(()=>w(null),3e3)}catch{y("Failed to register service worker. Check the browser console for details.")}},children:"Retry Registration"})]}),h==="denied"&&t("div",{className:"mt-2 text-xs",children:[t(Ft,{className:"inline mr-1"}),"Browser notifications are blocked. You can enable them in your browser settings to receive push notifications."]})]})]})]}),S===null,!l&&t("div",{className:"alert alert-warning mb-6",children:[t(Ft,{}),t("div",{children:[t("h3",{className:"font-bold",children:"Browser Not Supported"}),t("div",{className:"text-sm",children:"Your browser doesn't support push notifications. Browser push notifications will not be available. Email notifications are still supported."})]})]}),t("div",{className:"card bg-base-100 shadow-xl mb-6",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title text-xl mb-4",children:"Notification Preferences"}),t("p",{className:"text-sm opacity-70 mb-6",children:"Configure how you want to be notified about different events on the platform."}),t("div",{className:"overflow-x-auto",children:t("table",{className:"table table-zebra",children:[t("thead",{children:t("tr",{children:[t("th",{children:"Event"}),t("th",{children:"Description"}),er.map(D=>t("th",{className:"text-center",children:t("div",{className:"flex items-center justify-center gap-2",children:[D.icon,D.displayName,!D.supported&&t("span",{className:"text-xs text-error",children:"(Not supported)"}),D.key==="push"&&h==="denied"&&t("span",{className:"text-xs text-error",children:"(Blocked)"})]})},D.key))]})}),t("tbody",{children:r0.map(D=>t("tr",{children:[t("td",{className:"font-semibold",children:D.displayName}),t("td",{className:"text-sm opacity-80 max-w-xs",children:D.description}),er.map(H=>{const W=`${D.key}-${H.key}`,Y=ie(D.key,H.key),K=o===W;return t("td",{className:"text-center",children:t("button",{className:`btn btn-sm ${Y?"btn-success":"btn-outline btn-neutral"} ${K||c?"loading":""}`,onClick:()=>oe(D.key,H.key),disabled:K||!H.supported||H.key==="push"&&h==="denied"||c,children:!K&&!c&&t(Q,{children:Y?t(Q,{children:[t(cd,{className:"mr-1"}),"On"]}):t(Q,{children:[t(bn,{className:"mr-1"}),"Off"]})})})},H.key)})]},D.key))})]})})]})}),e.length>0&&t("div",{className:"card bg-base-100 shadow-xl mb-6",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title text-xl",children:"Active Notifications"}),t("p",{className:"text-sm opacity-70 mb-4",children:"Overview of your current notification subscriptions."}),t("div",{className:"overflow-x-auto",children:t("table",{className:"table",children:[t("thead",{children:t("tr",{children:[t("th",{children:"Event"}),t("th",{children:"Methods"}),t("th",{children:"Created"})]})}),t("tbody",{children:e.map(D=>t("tr",{children:[t("td",{className:"font-semibold",children:D.eventType.replace("_"," ").replace(/\b\w/g,H=>H.toUpperCase())}),t("td",{children:t("div",{className:"flex gap-2",children:D.methods.map(H=>t("div",{className:"flex items-center gap-2 badge badge-outline",children:[er.find(W=>W.key===H)?.icon,F(H)]},H))})}),t("td",{className:"text-sm opacity-80",children:new Date(D.createdAt).toLocaleDateString()})]},D.id))})]})})]})}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t("div",{className:"alert alert-info",children:[t(Qs,{}),t("div",{children:[t("h3",{className:"font-bold",children:"Browser Notifications"}),t("div",{className:"text-sm mt-1",children:"Push notifications require permission and a modern browser. You'll be prompted to allow notifications when enabling them."})]})]}),t("div",{className:"alert alert-info",children:[t(Mn,{}),t("div",{children:[t("h3",{className:"font-bold",children:"Email Notifications"}),t("div",{className:"text-sm mt-1",children:"Email notifications are sent to your registered email address. Make sure your email is verified for reliable delivery."})]})]})]}),b&&t("div",{className:"alert alert-error mt-6",children:[t(Ft,{}),t("span",{children:b})]}),x&&t("div",{className:"alert alert-success mt-6",children:[t(bn,{}),t("span",{children:x})]})]})})}function i0(r){const[e,n]=g(""),[s,i]=g(""),[o,a]=g(!1),[c,d]=g(null),[l,u]=g(null),{route:h}=ft();return t(Q,{children:t("div",{className:"container mx-auto px-4 py-8",children:t("div",{className:"max-w-2xl mx-auto",children:[t("div",{className:"flex items-center gap-4 mb-8",children:[t("a",{href:"/settings",className:"btn btn-ghost btn-sm",children:"← Back to Settings"}),t("h1",{className:"text-3xl font-bold text-error",children:"Delete Account"})]}),t("div",{className:"alert alert-error mb-8",children:t("div",{children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L4.268 16.5c-.77.833 0 2.5 1.732 2.5z"})}),t("div",{children:[t("h3",{className:"font-bold text-lg",children:"Danger Zone"}),t("div",{className:"text-sm",children:"Deleting your account is permanent and cannot be undone. All your data, posts, comments, and settings will be permanently removed."})]})]})}),t("div",{className:"card bg-base-100 shadow-xl mb-8",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title text-xl text-error",children:"What will be deleted?"}),t("div",{className:"space-y-3",children:[t("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[t(Pn,{className:"text-error text-xl"}),t("div",{className:"text-sm",children:[t("strong",{children:"Profile & Personal Data:"})," Your name, email, profile picture, and personal information"]})]}),t("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[t(bd,{className:"text-error text-xl"}),t("div",{className:"text-sm",children:[t("strong",{children:"Content & Activity:"})," All posts, comments, likes, and any content you've created"]})]}),t("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[t(Ai,{className:"text-error text-xl"}),t("div",{className:"text-sm",children:[t("strong",{children:"Connected Accounts:"})," All social media links and connected services will be disconnected"]})]}),t("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[t(Oi,{className:"text-error text-xl"}),t("div",{className:"text-sm",children:[t("strong",{children:"Sessions:"})," All active sessions will be terminated"]})]}),t("div",{className:"flex items-center gap-3 p-3 bg-base-200 rounded-lg",children:[t(md,{className:"text-error text-xl"}),t("div",{className:"text-sm",children:[t("strong",{children:"Settings & Preferences:"})," All personal settings, themes, and customizations"]})]})]}),t("div",{className:"mt-6 p-4 bg-warning text-warning-content bg-opacity-10 border border-warning rounded-lg",children:[t("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[t(Ft,{}),"Important Considerations"]}),t("ul",{className:"text-sm list-disc list-inside space-y-1",children:[t("li",{children:[t("strong",{children:"Backup your data:"})," Download or save any important content before deleting"]}),t("li",{children:[t("strong",{children:"Connected services:"})," You may need to re-authorize with other services"]}),t("li",{children:[t("strong",{children:"Premium features:"})," Any paid features or subscriptions will be immediately canceled"]}),t("li",{children:[t("strong",{children:"No recovery:"})," Once deleted, accounts cannot be recovered"]})]})]})]})}),t("div",{className:"card bg-base-100 shadow-xl border-red-500 border-2",children:t("div",{className:"card-body",children:[t("h2",{className:"card-title text-xl text-error",children:"Confirm Account Deletion"}),t("div",{className:"form-control",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:"Enter your password to confirm"})}),t("input",{type:"password",placeholder:"Enter your current password",className:"input input-bordered w-full",value:e,onInput:f=>n(f.target.value)})]}),t("div",{className:"form-control mt-4",children:[t("label",{className:"label",children:t("span",{className:"label-text",children:'Type "DELETE" to confirm permanent deletion'})}),t("input",{type:"text",placeholder:"Type DELETE here",className:"input input-bordered w-full",value:s,onInput:f=>i(f.target.value)}),t("label",{className:"label",children:t("span",{className:"label-text-alt",children:"This action cannot be undone"})})]}),c&&t("div",{className:"alert alert-error mt-4",children:t("span",{children:c})}),t("div",{className:"card-actions justify-between mt-8",children:[t("a",{href:"/settings",className:"btn btn-ghost",children:"Cancel"}),t("button",{className:`btn btn-error ${o?"loading":""}`,onClick:async()=>{if(!e.trim()){d("Password is required to delete your account");return}if(s!=="DELETE"){d("Please type 'DELETE' to confirm account deletion");return}try{a(!0),d(null);const f=await q.auth.apiDeleteUserCreate({password:e.trim(),callbackURL:`${window.location.origin}/settings`});f.data?.message==="Verification email sent"?(alert("A confirmation email has been sent to your email address. Please check your email and click the confirmation link to complete the account deletion."),h("/settings")):f.data?.success&&(alert("Your account has been successfully deleted."),h("/"))}catch(f){console.error("Delete account error:",f),d(f?.error?.message||f?.message||"Failed to delete account")}finally{a(!1)}},disabled:o||!e.trim()||s!=="DELETE",children:o?"Deleting Account...":"Delete My Account"})]})]})}),t("div",{className:"alert alert-warning mt-6",children:t("div",{children:[t("h3",{className:"font-bold",children:"Think twice before deleting"}),t("div",{className:"text-sm mt-2",children:[t("p",{className:"mb-2",children:"Before you proceed, consider these alternatives:"}),t("ul",{className:"list-disc list-inside space-y-1",children:[t("li",{children:[t("strong",{children:"Take a break:"})," Temporarily deactivate your account instead (contact support)"]}),t("li",{children:[t("strong",{children:"Download your data:"})," Export your content and data first"]}),t("li",{children:[t("strong",{children:"Think about recovery:"})," Consider if you might want to return in the future"]}),t("li",{children:[t("strong",{children:"Contact support:"})," Reach out to us if you're experiencing issues we can help resolve"]})]})]})]})})]})})})}function o0(){return t(Q,{children:t("section",{children:[t("h1",{children:"404: Not Found"}),t("p",{children:"It's gone :("})]})})}function a0({id:r}){const{route:e}=ft(),[n,s]=g(null),[i,o]=g(null),[a,c]=g(!0),[d,l]=g(null),[u,h]=g(!1),p=async()=>{const m=`${window.location.origin}/profile/${n.id}`;try{await navigator.clipboard.writeText(m),h(!0),setTimeout(()=>h(!1),2e3)}catch(b){console.error("Failed to copy: ",b)}};ee(()=>{f()},[r]);const f=async()=>{try{c(!0),l(null);const m=await q.auth.apiGetSessionList();if(!m.data)throw new Error("No session data received");if(o(m.data.user),r){const b=await q.profile.getProfileByUserId(r);if(!b.data)throw new Error("Profile not found");s({id:b.data.id,name:b.data.name,image:b.data.image,email:"",emailVerified:!1,createdAt:b.data.createdAt,updatedAt:b.data.updatedAt,chessWins:b.data.chessWins,chessLosses:b.data.chessLosses,draughtsWins:b.data.draughtsWins,draughtsLosses:b.data.draughtsLosses,arithmeticScore:b.data.arithmeticScore,tetrisScore:b.data.tetrisScore,role:null,banned:b.data.banned,banReason:b.data.banReason,banExpires:b.data.banExpires,age:null})}else s(m.data.user)}catch(m){if(console.error("Profile load error:",m),m?.error?.status===401){e("/login");return}l(m?.error?.message||m?.message||"Failed to load profile. Please try refreshing the page.")}finally{c(!1)}};return a?t(Q,{children:t("div",{className:"h-[100%] flex items-center justify-center",id:"profile-background",children:t("span",{className:"loading loading-spinner loading-lg"})})}):d||!n?t(Q,{children:t("div",{className:"h-[100%] flex items-center justify-center",id:"profile-background",children:t("div",{className:"alert alert-error",children:t("span",{children:d||"Profile not found"})})})}):t(Q,{children:[t("div",{className:"h-[100%] flex items-center justify-center",id:"profile-background",children:t("div",{className:"card bg-base-100 shadow-2xl max-w-md w-full mx-4",children:t("div",{className:"card-body items-center text-center",children:[n.verifiedName&&(n.verifiedName!==n.name||n.verifiedImage!==n.image)&&t("div",{className:"w-full alert alert-info mb-4",children:[t(Qs,{}),t("div",{children:[t("h3",{className:"font-bold",children:"Profile Verification Pending"}),t("p",{children:"What others currently see:"}),t("div",{className:"flex items-center gap-2",children:[t(lt,{name:n.verifiedName,image:n.verifiedImage,widthClass:"w-8"}),t("span",{className:"text-lg font-semibold",children:n.verifiedName})]})]})]}),t("a",{href:`/profile/${n.id}`,children:[t(lt,{name:n.name,image:n.image,widthClass:"w-16"}),t(al,{banned:n.banned,banReason:n.banReason,banExpires:n.banExpires,className:"w-full max-w-sm"}),t("h2",{className:"card-title text-2xl font-bold mt-2",children:[t(Pn,{className:"inline mr-2"}),n.name]})]}),t("div",{className:"flex items-center gap-2 text-sm opacity-70",children:[t(_d,{}),t("span",{children:n.id}),t("button",{className:"btn btn-ghost btn-xs",onClick:p,title:"Copy profile link",children:u?t(qt,{className:"text-success"}):t(Ga,{})})]}),n.createdAt&&t("div",{className:"flex items-center gap-2 text-sm opacity-70 mt-2",children:[t(xo,{}),t("span",{children:["Created:"," ",new Date(n.createdAt).toLocaleDateString()]})]}),n.updatedAt&&t("div",{className:"flex items-center gap-2 text-sm opacity-70 mt-2",children:[t(xo,{}),t("span",{children:["Updated:"," ",new Date(n.updatedAt).toLocaleDateString()]})]}),t("div",{className:"overflow-x-auto mt-4",children:t("table",{className:"table table-zebra w-full",children:[t("thead",{children:t("tr",{children:[t("th",{children:"Game"}),t("th",{children:"Wins"}),t("th",{children:"Losses"}),t("th",{children:"Score"})]})}),t("tbody",{children:[t("tr",{className:"hover",children:[t("td",{className:"flex items-center gap-2",children:[t(hd,{}),"Chess"]}),t("td",{children:n.chessWins||0}),t("td",{children:n.chessLosses||0}),t("td",{children:"-"})]}),t("tr",{className:"hover",children:[t("td",{className:"flex items-center gap-2",children:[t(pd,{}),"Draughts"]}),t("td",{children:n.draughtsWins||0}),t("td",{children:n.draughtsLosses||0}),t("td",{children:"-"})]}),t("tr",{className:"hover",children:[t("td",{className:"flex items-center gap-2",children:[t(ld,{}),"Arithmetic"]}),t("td",{children:"-"}),t("td",{children:"-"}),t("td",{children:n.arithmeticScore||0})]}),t("tr",{className:"hover",children:[t("td",{className:"flex items-center gap-2",children:[t(yd,{}),"Tetris"]}),t("td",{children:"-"}),t("td",{children:"-"}),t("td",{children:n.tetrisScore||0})]})]})]})}),i&&i.id===n.id&&n.createdAt&&t("div",{className:"card-actions justify-center mt-6",children:t("button",{className:"btn btn-primary btn-sm",onClick:()=>e("/settings"),children:[t(Ka,{className:"mr-2"}),"Edit Profile"]})})]})})}),t("style",{jsx:!0,children:`
        #profile-background {
          background-image: url("/random-image.jpg");
          background-size: cover;
        }
      `})]})}function c0(r){return U({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7.5 21H2V9h5.5v12zm7.25-18h-5.5v18h5.5V3zM22 11h-5.5v10H22V11z"},child:[]}]})(r)}function l0({columns:r,data:e,renderCell:n,initialSort:s,className:i="",loading:o=!1,emptyMessage:a="No data available",pagination:c={enabled:!0,pageSize:50,showWhenOver:50}}){const[d,l]=g(s||null),[u,h]=g(1),p=c.enabled&&e.length>(c.showWhenOver||50),f=Ae(()=>!d||!e?.length?e||[]:[...e].sort((_,C)=>{const P=_[d.key],A=C[d.key];if(P==null&&A==null)return 0;if(P==null)return d.direction==="asc"?1:-1;if(A==null)return d.direction==="asc"?-1:1;let k=0;return typeof P=="string"&&typeof A=="string"?k=P.localeCompare(A):typeof P=="number"&&typeof A=="number"?k=P-A:k=String(P).localeCompare(String(A)),d.direction==="asc"?k:-k}),[e,d]),m=Ae(()=>{if(!p)return f;const S=c.pageSize||50,_=(u-1)*S;return f.slice(_,_+S)},[f,u,p,c.pageSize]),b=Ae(()=>p?Math.ceil(f.length/(c.pageSize||50)):1,[f.length,p,c.pageSize]),y=S=>{l(_=>_?.key===S?_.direction==="asc"?{key:S,direction:"desc"}:{key:S,direction:"asc"}:{key:S,direction:"asc"}),h(1)},x=S=>{h(S)},w=S=>!d||d.key!==S?t(v1,{className:"w-4 h-4 opacity-30"}):d.direction==="asc"?t(b1,{className:"w-4 h-4"}):t(g1,{className:"w-4 h-4"});return o?t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})}):t("div",{className:"overflow-x-auto",children:[t("table",{className:`table table-zebra table-fixed w-full ${i}`,children:[t("thead",{children:t("tr",{children:r.map(S=>t("th",{className:S.width?"":void 0,style:S.width?{width:S.width}:void 0,children:S.sortable!==!1?t("button",{onClick:()=>y(S.key),className:"flex items-center gap-1 hover:bg-base-200 px-2 py-1 rounded",type:"button",children:[t("span",{children:S.title}),w(S.key)]}):t("span",{children:S.title})},S.key))})}),t("tbody",{children:m.length===0?t("tr",{children:t("td",{colSpan:r.length,className:"text-center py-8 text-base-content/60",children:a})}):m.map((S,_)=>t("tr",{children:r.map(C=>t("td",{children:n?n(S,C.key):S[C.key]??"-"},C.key))},S.id||_))})]}),p&&b>1&&t("div",{className:"flex justify-center mt-4",children:t("div",{className:"join",children:[t("button",{className:"join-item btn btn-sm",onClick:()=>x(u-1),disabled:u===1,children:t(Xc,{className:"w-4 h-4"})}),Array.from({length:b},(S,_)=>_+1).map(S=>t("button",{className:`join-item btn btn-sm ${S===u?"btn-active":""}`,onClick:()=>x(S),children:S},S)),t("button",{className:"join-item btn btn-sm",onClick:()=>x(u+1),disabled:u===b,children:t(Qi,{className:"w-4 h-4"})})]})})]})}function Ur(r){const e=r.attributes?r.attributes[0]:r.attribute;if(!e)return;const n=r.attributes||[r.attribute],s=r.attributeTitles||[r.attributeTitle],[i,o]=g([]),[a,c]=g(null),[d,l]=g(!0);return ee(()=>{(async()=>{try{const u=(await q.leaderboards.getLeaderboards({attribute:e})).data;console.log("FETCHED LEADERBOARD"),o(u),l(!1)}catch(u){if(u?.status==404){console.log("404 error: no users with attribute"),c(`No users found with attribute "${e}"`),l(!1);return}c(u instanceof Error?u.message:"Failed to fetch leaderboard"),console.error("Error:",u),l(!1)}})()},[e]),t(Q,{children:a?t("div",{role:"alert",className:"alert alert-error mb-4",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),t("span",{children:a})]}):d?t("div",{className:"flex justify-center",children:t("span",{className:"loading loading-spinner loading-lg"})}):t(l0,{columns:[{key:"name",title:"Name",sortable:!0,width:"300px"},...n.map((u,h)=>({key:u,title:s[h]||u,sortable:!0}))],data:i,renderCell:(u,h)=>{if(h==="name"){const p=new Date,f=u.banned&&(!u.banExpires||new Date(u.banExpires)>p);return t("a",{href:`/profile/${u.id}`,className:"flex items-center gap-3",children:[t(lt,{name:u.name,image:u.image}),t("div",{className:"font-bold flex items-center gap-2",children:[u.name,f&&t(xr,{className:"text-error text-sm",title:"Banned user"})]})]})}return u[h]||"-"},loading:!1,emptyMessage:"No users found"})})}function d0(){return t(Q,{children:t("div",{className:"container mx-auto p-4",children:[t("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[t(c0,{}),"Leaderboards"]}),t("p",{className:"mb-8",children:"For Chess | Draughts, get at least 1 win to show up on the leaderboards"}),t("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[t("div",{children:[t("h2",{className:"text-2xl font-bold mb-2",children:"Chess Wins/Losses"}),t(Ur,{attributes:["chessWins","chessLosses"],attributeTitles:["Chess Wins","Chess Losses"]})]}),t("div",{children:[t("h2",{className:"text-2xl font-bold mb-2",children:"Draughts Wins/Losses"}),t(Ur,{attributes:["draughtsWins","draughtsLosses"],attributeTitles:["Draughts Wins","Draughts Losses"]})]}),t("div",{children:[t("h2",{className:"text-2xl font-bold mb-2",children:"Arithmetic Score"}),t(Ur,{attributes:["arithmeticScore"],attributeTitles:["Arithmetic Score"]})]}),t("div",{children:[t("h2",{className:"text-2xl font-bold mb-2",children:"Tetris Score"}),t(Ur,{attributes:["tetrisScore"],attributeTitles:["Tetris Score"]})]})]})]})})}function u0(){const r=e=>{const n=e.target.value;localStorage.setItem("theme",n),document.documentElement.setAttribute("data-theme",n)};return ee(()=>{const e=localStorage.getItem("theme")||"dark";document.documentElement.setAttribute("data-theme",e)},[]),t("div",{className:"dropdown",children:[t("div",{tabIndex:0,role:"button",className:"btn btn-sm mx-2",children:["Theme",t("svg",{width:"12px",height:"12px",className:"inline-block h-2 w-2 fill-current opacity-60",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 2048 2048",children:t("path",{d:"M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"})})]}),t("ul",{tabIndex:0,className:"dropdown-content bg-base-300 rounded-box z-1 w-36 p-2 shadow-2xl mt-4",children:[t("li",{children:t("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"System theme",value:"default",onClick:r})}),t("li",{children:t("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Dark",value:"dark",onClick:r})}),t("li",{children:t("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Light",value:"light",onClick:r})}),t("li",{children:t("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Retro",value:"retro",onClick:r})}),t("li",{children:t("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Cyberpunk",value:"cyberpunk",onClick:r})}),t("li",{children:t("input",{type:"radio",name:"theme-dropdown",className:"theme-controller w-full btn btn-sm btn-block justify-start","aria-label":"Aqua",value:"aqua",onClick:r})})]})]})}function h0(){const{route:r,url:e}=ft(),[n,s]=g(null),[i,o]=g(""),a=$e(null);ee(()=>{async function d(){try{const l=(await q.auth.apiGetSessionList()).data;s(l?.user||null)}catch(l){s(null);const u=l instanceof Error?l.message:"Fetching user data failed";o(u),console.error("Error:",l)}}d()},[e]),ee(()=>{const d=l=>{a.current&&!a.current.contains(l.target)&&(a.current.open=!1)};return document.addEventListener("click",d),document.addEventListener("mousedown",d),()=>{document.removeEventListener("click",d),document.removeEventListener("mousedown",d)}},[]);function c(){q.auth.apiSignOutCreate({}),r("/login")}return t("div",{className:"navbar bg-neutral text-neutral-content shadow-sm",children:[t("div",{className:"navbar-start",children:t("a",{className:"btn btn-ghost text-xl",href:"/",children:"My Website"})}),t("div",{className:"navbar-center",children:t("ul",{className:"menu menu-horizontal px-1",children:[t("li",{children:t("a",{href:"/",children:"Home"})}),t("li",{children:t("details",{ref:a,children:[t("summary",{children:"Info"}),t("ul",{className:"dropdown-content bg-base-300 rounded-box z-1 w-26 p-2 shadow-2xl",children:[t("li",{children:t("a",{href:"/about",className:"btn btn-sm btn-block",children:"About"})}),t("li",{children:t("a",{href:"/contact",className:"btn btn-sm btn-block",children:"Contact"})}),t("li",{children:t("a",{href:"/changelog",className:"btn btn-sm btn-block",children:"Changelog"})})]})]})}),t("li",{children:t("a",{href:"/blog",children:"Blog"})}),t("li",{children:t("a",{href:"/projects",children:"Projects"})}),t("li",{children:t("a",{href:"/leaderboards",children:"Leaderboards"})})]})}),t("div",{className:"navbar-end",children:[t(u0,{}),n?t("div",{className:"mx-2 dropdown dropdown-end",children:[t(lt,{name:n.name,image:n.image}),t("ul",{tabIndex:-1,className:"menu menu-sm dropdown-content bg-base-300 text-base-content rounded-box z-1 w-36 p-2 shadow-2xl mt-3",children:[t("li",{children:t("a",{href:"/profile",className:"justify-between",children:[t(Pn,{})," Profile",t("span",{className:"badge",children:"New"})]})}),t("li",{children:t("a",{href:"/settings",children:[t(S1,{})," Settings"]})}),t("li",{children:t("button",{onClick:c,children:[t(Ed,{})," Logout"]})})]})]}):t("a",{className:"btn btn-sm",href:"/login",children:[t(kd,{}),"Login"]})]})]})}function f0(){const r=Pi(),e=$e(null),n=In(s=>{s.onAny((i,o)=>{console.log(`[Connection Socket] Received event: ${i}`,o)}),s.on("notification",i=>{try{if(!i.text){console.error("[Connection] Notification event missing required 'text' property:",i);return}const o=i.type||"info",a=i.time||3e3;r({text:i.text,type:o,time:a}),console.log(`[Connection] Notification toast sent: ${o} - "${i.text}"`)}catch(o){console.error("[Connection] Error handling notification event:",o)}}),s.on("connect",()=>{console.log("[Connection Socket] Connected to server")}),s.on("disconnect",i=>{console.log(`[Connection Socket] Disconnected: ${i}`)}),s.on("connect_error",i=>{console.error("[Connection Socket] Connection error:",i.message)}),s.on("error",i=>{console.error("[Connection Socket] Server error:",i)})},[r]);return ee(()=>{if(e.current){console.log("[Connection] Socket already initialized, skipping");return}console.log("[Connection] Initializing session connection...");try{const s=q.baseUrl,i=new URL("/sockets/connection",s).href,o=new URL("sockets/",`${s}/`).pathname;console.log("[Connection] Connecting to:",i,"with namespace:",o);const a=ar(i,{path:o,transports:["websocket","polling"],withCredentials:!0,timeout:2e4,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3});return n(a),e.current=a,()=>{console.log("[Connection] Cleaning up socket connection"),e.current?.disconnect(),e.current=null}}catch(s){console.error("[Connection] Failed to initialize socket:",s)}},[n]),null}function p0(){return t(wr,{children:t(Gu,{children:[t(f0,{}),t("div",{class:"flex min-h-screen flex-col",children:[t(h0,{}),t("main",{children:t(La,{children:[t(ye,{path:"/",component:Vu}),t(ye,{path:"/blog",component:qu}),t(ye,{path:"/blog/:id",component:Wu}),t(ye,{path:"/about",component:Ku}),t(ye,{path:"/changelog",component:Yu}),t(ye,{path:"/leaderboards",component:d0}),t(ye,{path:"/login",component:Zu}),t(ye,{path:"/projects",component:Ju}),t(ye,{path:"/projects/chess",component:u1}),t(ye,{path:"/projects/arithmetic",component:m1}),t(ye,{path:"/projects/quizspire",component:E1}),t(ye,{path:"/projects/quizspire/:id",component:O1}),t(ye,{path:"/projects/quizspire/:id/learn",component:L1}),t(ye,{path:"/projects/quizspire/:deckId/test",component:F1}),t(ye,{path:"/projects/tetris",component:il}),t(ye,{path:"/projects/quizspire/:id/tetris",component:$1}),t(ye,{path:"/projects/quizspire/:deckId/match",component:U1}),t(ye,{path:"/signup",component:z1}),t(ye,{path:"/email-verification",component:H1}),t(ye,{path:"/admin",component:q1}),t(ye,{path:"/admin/users",component:W1}),t(ye,{path:"/admin/comments",component:K1}),t(ye,{path:"/admin/connections",component:Q1}),t(ye,{path:"/admin/profiles",component:Y1}),t(ye,{path:"/settings",component:X1}),t(ye,{path:"/settings/name",component:Z1}),t(ye,{path:"/settings/password",component:J1}),t(ye,{path:"/settings/accounts",component:e0}),t(ye,{path:"/settings/sessions",component:t0}),t(ye,{path:"/settings/notifications",component:s0}),t(ye,{path:"/settings/images",component:n0}),t(ye,{path:"/settings/delete",component:i0}),t(ye,{path:"/profile/:id?",component:a0}),t(ye,{default:!0,component:o0})]})}),t(_l,{})]})]})})}kn(t(p0,{}),document.getElementById("app"));
